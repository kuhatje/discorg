<!DOCTYPE html><html lang=en><head><title>LanceDB - python</title><meta charset=utf-8><meta name=viewport content="width=device-width"><style>@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-normal-400.woff2");font-family:gg sans;font-weight:400;font-style:normal}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-normal-500.woff2");font-family:gg sans;font-weight:500;font-style:normal}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-normal-600.woff2");font-family:gg sans;font-weight:600;font-style:normal}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-normal-700.woff2");font-family:gg sans;font-weight:700;font-style:normal}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-normal-800.woff2");font-family:gg sans;font-weight:800;font-style:normal}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-italic-400.woff2");font-family:gg sans;font-weight:400;font-style:italic}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-italic-500.woff2");font-family:gg sans;font-weight:500;font-style:italic}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-italic-600.woff2");font-family:gg sans;font-weight:600;font-style:italic}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-italic-700.woff2");font-family:gg sans;font-weight:700;font-style:italic}@font-face{src:url("https://cdn.jsdelivr.net/gh/Tyrrrz/DiscordFonts@master/ggsans-italic-800.woff2");font-family:gg sans;font-weight:800;font-style:italic}html,body{margin:0;padding:0;background-color:#36393e;color:#dcddde;font-family:"gg sans","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:17px;font-weight:400;scroll-behavior:smooth}a{color:#00aff4;text-decoration:none}a:hover{text-decoration:underline}img{object-fit:contain;image-rendering:high-quality;image-rendering:-webkit-optimize-contrast}.preamble{display:grid;grid-template-columns:auto 1fr;max-width:100%;padding:1rem}.preamble__guild-icon-container{grid-column:1}.preamble__guild-icon{max-width:88px;max-height:88px}.preamble__entries-container{grid-column:2;margin-left:1rem}.preamble__entry{margin-bottom:0.15rem;color:#ffffff;font-size:1.4rem}.preamble__entry--small{font-size:1rem}.chatlog{padding:1rem 0;width:100%;border-top:1px solid rgba(255,255,255,0.1);border-bottom:1px solid rgba(255,255,255,0.1)}.chatlog__message-group{margin-bottom:1rem}.chatlog__message-container{background-color:transparent;transition:background-color 1s ease}.chatlog__message-container--highlighted{background-color:rgba(114,137,218,0.2)}.chatlog__message-container--pinned{background-color:rgba(249,168,37,0.05)}.chatlog__message{display:grid;grid-template-columns:auto 1fr;padding:0.15rem 0;direction:ltr;unicode-bidi:bidi-override}.chatlog__message:hover{background-color:#32353b}.chatlog__message:hover .chatlog__short-timestamp{display:block}.chatlog__message-aside{grid-column:1;width:72px;padding:0.15rem 0.15rem 0 0.15rem;text-align:center}.chatlog__reply-symbol{height:10px;margin:6px 4px 4px 36px;border-left:2px solid #4f545c;border-top:2px solid #4f545c;border-radius:8px 0 0 0}.chatlog__avatar{width:40px;height:40px;border-radius:50%}.chatlog__short-timestamp{display:none;color:#a3a6aa;font-size:0.75rem;font-weight:500;direction:ltr;unicode-bidi:bidi-override}.chatlog__message-primary{grid-column:2;min-width:0}.chatlog__reply{display:flex;margin-bottom:0.15rem;align-items:center;color:#b5b6b8;font-size:0.875rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chatlog__reply-avatar{width:16px;height:16px;margin-right:0.25rem;border-radius:50%}.chatlog__reply-author{margin-right:0.3rem;font-weight:600}.chatlog__reply-content{overflow:hidden;text-overflow:ellipsis}.chatlog__reply-link{cursor:pointer}.chatlog__reply-link *{display:inline;pointer-events:none}.chatlog__reply-link .chatlog__markdown-quote{display:inline}.chatlog__reply-link .chatlog__markdown-pre{display:inline}.chatlog__reply-link:hover{color:#ffffff}.chatlog__reply-link:hover *:not(.chatlog__markdown-spoiler){color:inherit}.chatlog__reply-edited-timestamp{margin-left:0.25rem;color:#a3a6aa;font-size:0.75rem;font-weight:500;direction:ltr;unicode-bidi:bidi-override}.chatlog__system-notification-icon{width:18px;height:18px}.chatlog__system-notification-author{font-weight:500;color:#ffffff}.chatlog__system-notification-content{color:#96989d}.chatlog__system-notification-link{font-weight:500;color:#ffffff}.chatlog__system-notification-timestamp{margin-left:0.3rem;color:#a3a6aa;font-size:0.75rem;font-weight:500;direction:ltr;unicode-bidi:bidi-override}.chatlog__system-notification-timestamp a{color:inherit}.chatlog__header{margin-bottom:0.1rem}.chatlog__author{font-weight:500;color:#ffffff}.chatlog__author-tag{position:relative;top:-0.1rem;margin-left:0.3rem;padding:0.05rem 0.3rem;border-radius:3px;background-color:#5865F2;color:#ffffff;font-size:0.625rem;font-weight:500;line-height:1.3}.chatlog__timestamp{margin-left:0.3rem;color:#a3a6aa;font-size:0.75rem;font-weight:500;direction:ltr;unicode-bidi:bidi-override}.chatlog__timestamp a{color:inherit}.chatlog__content{padding-right:1rem;font-size:0.95rem;word-wrap:break-word}.chatlog__edited-timestamp{margin-left:0.15rem;color:#a3a6aa;font-size:0.75rem;font-weight:500}.chatlog__attachment{position:relative;width:fit-content;margin-top:0.3rem;border-radius:3px;overflow:hidden}.chatlog__attachment--hidden{cursor:pointer;box-shadow:0 0 1px 1px rgba(0,0,0,0.1)}.chatlog__attachment--hidden *{pointer-events:none}.chatlog__attachment-spoiler-caption{display:none;position:absolute;left:50%;top:50%;z-index:999;padding:0.4rem 0.8rem;border-radius:20px;transform:translate(-50%,-50%);background-color:rgba(0,0,0,0.9);color:#dcddde;font-size:0.9rem;font-weight:600;letter-spacing:0.05rem}.chatlog__attachment--hidden .chatlog__attachment-spoiler-caption{display:block}.chatlog__attachment--hidden:hover .chatlog__attachment-spoiler-caption{color:#fff}.chatlog__attachment-media{max-width:45vw;max-height:500px;vertical-align:top;border-radius:3px}.chatlog__attachment--hidden .chatlog__attachment-media{filter:blur(44px)}.chatlog__attachment-generic{max-width:520px;width:100%;height:40px;padding:10px;border:1px solid #292b2f;border-radius:3px;background-color:#2f3136;overflow:hidden}.chatlog__attachment--hidden .chatlog__attachment-generic{filter:blur(44px)}.chatlog__attachment-generic-icon{float:left;width:30px;height:100%;margin-right:10px}.chatlog__attachment-generic-size{color:#72767d;font-size:12px}.chatlog__attachment-generic-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.chatlog__embed{display:flex;margin-top:0.3rem;max-width:520px}.chatlog__embed-color-pill{flex-shrink:0;width:0.25rem;border-top-left-radius:3px;border-bottom-left-radius:3px}.chatlog__embed-color-pill--default{background-color:#202225}.chatlog__embed-content-container{display:flex;flex-direction:column;padding:0.5rem 0.6rem;border:1px solid rgba(46,48,54,0.6);border-top-right-radius:3px;border-bottom-right-radius:3px;background-color:rgba(46,48,54,0.3)}.chatlog__embed-content{display:flex;width:100%}.chatlog__embed-text{flex:1}.chatlog__embed-author-container{display:flex;margin-bottom:0.5rem;align-items:center}.chatlog__embed-author-icon{width:20px;height:20px;margin-right:0.5rem;border-radius:50%}.chatlog__embed-author{color:#ffffff;font-size:0.875rem;font-weight:600;direction:ltr;unicode-bidi:bidi-override}.chatlog__embed-author-link{color:#ffffff}.chatlog__embed-title{margin-bottom:0.5rem;color:#ffffff;font-size:0.875rem;font-weight:600}.chatlog__embed-description{color:#dcddde;font-weight:500;font-size:0.85rem}.chatlog__embed-fields{display:flex;flex-wrap:wrap;gap:0 0.5rem}.chatlog__embed-field{flex:0;min-width:100%;max-width:506px;padding-top:0.6rem;font-size:0.875rem}.chatlog__embed-field--inline{flex:1;flex-basis:auto;min-width:50px}.chatlog__embed-field-name{margin-bottom:0.2rem;color:#ffffff;font-weight:600}.chatlog__embed-field-value{color:#dcddde;font-weight:500}.chatlog__embed-thumbnail{flex:0;max-width:80px;max-height:80px;margin-left:1.2rem;border-radius:3px}.chatlog__embed-images{display:grid;margin-top:0.6rem;grid-template-columns:repeat(2,1fr);gap:0.25rem}.chatlog__embed-images--single{display:block}.chatlog__embed-image{object-fit:cover;object-position:center;max-width:500px;max-height:400px;width:100%;height:100%;border-radius:3px}.chatlog__embed-footer{margin-top:0.6rem;color:#dcddde}.chatlog__embed-footer-icon{width:20px;height:20px;margin-right:0.2rem;border-radius:50%;vertical-align:middle}.chatlog__embed-footer-text{vertical-align:middle;font-size:0.75rem;font-weight:500}.chatlog__embed-invite-container{min-width:320px;padding:0.6rem 0.7rem;border:1px solid rgba(46,48,54,0.6);border-radius:3px;background-color:rgba(46,48,54,0.3)}.chatlog__embed-invite-title{margin:0 0 0.8rem 0;color:#b9bbbe;font-size:0.75rem;font-weight:700;text-transform:uppercase}.chatlog__embed-invite{display:flex}.chatlog__embed-invite-guild-icon{width:50px;height:50px;border-radius:0.85rem}.chatlog__embed-invite-info{margin-left:1rem}.chatlog__embed-invite-guild-name{color:#ffffff;font-weight:600}.chatlog__embed-invite-guild-name a{color:inherit}.chatlog__embed-invite-channel-icon{width:18px;height:18px;vertical-align:bottom}.chatlog__embed-invite-channel-name{font-size:0.9rem;font-weight:600}.chatlog__embed-generic-image{object-fit:contain;object-position:left;max-width:45vw;max-height:500px;vertical-align:top;border-radius:3px}.chatlog__embed-generic-video{object-fit:contain;object-position:left;max-width:45vw;max-height:500px;vertical-align:top;border-radius:3px}.chatlog__embed-generic-gifv{object-fit:contain;object-position:left;max-width:45vw;max-height:500px;vertical-align:top;border-radius:3px}.chatlog__embed-spotify{border:0}.chatlog__embed-twitch{border:0}.chatlog__embed-youtube-container{margin-top:0.6rem}.chatlog__embed-youtube{border:0;border-radius:3px}.chatlog__sticker{width:180px;height:180px}.chatlog__sticker--media{max-width:100%;max-height:100%}.chatlog__reactions{display:flex}.chatlog__reaction{display:flex;margin:0.35rem 0.1rem 0.1rem 0;padding:0.125rem 0.375rem;border:1px solid transparent;border-radius:8px;background-color:#2f3136;align-items:center}.chatlog__reaction:hover{border:1px solid hsla(0,0%,100%,.2);background-color:transparent}.chatlog__reaction-count{min-width:9px;margin-left:0.35rem;color:#b9bbbe;font-size:0.875rem}.chatlog__reaction:hover .chatlog__reaction-count{color:#dcddde}.chatlog__markdown{max-width:100%;line-height:1.3;overflow-wrap:break-word}.chatlog__markdown h1{margin:1rem 0 0.5rem;color:#f2f3f5;font-size:1.5rem;line-height:1}.chatlog__markdown h2{margin:1rem 0 0.5rem;color:#f2f3f5;font-size:1.25rem;line-height:1}.chatlog__markdown h3{margin:1rem 0 0.5rem;color:#f2f3f5;font-size:1rem;line-height:1}.chatlog__markdown h1:first-child,h2:first-child,h3:first-child{margin-top:0.5rem}.chatlog__markdown ul,ol{margin:0 0 0 1rem;padding:0}.chatlog__markdown-preserve{white-space:pre-wrap}.chatlog__markdown-spoiler{background-color:rgba(255,255,255,0.1);padding:0 2px;border-radius:3px}.chatlog__markdown-spoiler--hidden{cursor:pointer;background-color:#202225;color:rgba(0,0,0,0)}.chatlog__markdown-spoiler--hidden:hover{background-color:rgba(32,34,37,0.8)}.chatlog__markdown-spoiler--hidden::selection{color:rgba(0,0,0,0)}.chatlog__markdown-quote{display:flex;margin:0.05rem 0}.chatlog__markdown-quote-border{margin-right:0.5rem;border:2px solid #4f545c;border-radius:3px}.chatlog__markdown-pre{background-color:#2f3136;font-family:"Consolas","Courier New",Courier,monospace;font-size:0.85rem;text-decoration:inherit}.chatlog__markdown-pre--multiline{display:block;margin-top:0.25rem;padding:0.5rem;border:2px solid #282b30;border-radius:5px;color:#b9bbbe}.chatlog__markdown-pre--multiline.hljs{background-color:#2f3136;color:#b9bbbe}.chatlog__markdown-pre--inline{display:inline-block;padding:2px;border-radius:3px}.chatlog__markdown-mention{border-radius:3px;padding:0 2px;background-color:rgba(88,101,242,.3);color:#dee0fc;font-weight:500}.chatlog__markdown-mention:hover{background-color:#5865f2;color:#ffffff}.chatlog__markdown-timestamp{background-color:rgba(255,255,255,0.1);padding:0 2px;border-radius:3px}.chatlog__emoji{width:1.325rem;height:1.325rem;margin:0 0.06rem;vertical-align:-0.4rem}.chatlog__emoji--small{width:1rem;height:1rem}.chatlog__emoji--large{width:2.8rem;height:2.8rem}.postamble{padding:1.25rem}.postamble__entry{color:#ffffff}</style><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/solarized-dark.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js></script><script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('.chatlog__markdown-pre--multiline').forEach(e=>hljs.highlightBlock(e));});</script><script src=https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.8.1/lottie.min.js></script><script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('.chatlog__sticker--media[data-source]').forEach(e=>{const anim=lottie.loadAnimation({container:e,renderer:'svg',loop:true,autoplay:true,path:e.getAttribute('data-source')});anim.addEventListener('data_failed',()=>e.innerHTML='<strong>[Sticker cannot be rendered]</strong>');});});</script><script>function scrollToMessage(event,id){const element=document.getElementById('chatlog__message-container-'+id);if(!element)
return;event.preventDefault();element.classList.add('chatlog__message-container--highlighted');window.scrollTo({top:element.getBoundingClientRect().top-document.body.getBoundingClientRect().top-(window.innerHeight/2),behavior:'smooth'});window.setTimeout(()=>element.classList.remove('chatlog__message-container--highlighted'),2000);}
function showSpoiler(event,element){if(!element)
return;if(element.classList.contains('chatlog__attachment--hidden')){event.preventDefault();element.classList.remove('chatlog__attachment--hidden');}
if(element.classList.contains('chatlog__markdown-spoiler--hidden')){event.preventDefault();element.classList.remove('chatlog__markdown-spoiler--hidden');}}</script><svg style=display:none xmlns=http://www.w3.org/2000/svg><defs><symbol id=attachment-icon viewBox="0 0 720 960"><path fill=#f4f5fb d=M50,935a25,25,0,0,1-25-25V50A25,25,0,0,1,50,25H519.6L695,201.32V910a25,25,0,0,1-25,25Z /><path fill=#7789c4 d=M509.21,50,670,211.63V910H50V50H509.21M530,0H50A50,50,0,0,0,0,50V910a50,50,0,0,0,50,50H670a50,50,0,0,0,50-50h0V191Z /><path fill=#f4f5fb d=M530,215a25,25,0,0,1-25-25V50a25,25,0,0,1,16.23-23.41L693.41,198.77A25,25,0,0,1,670,215Z /><path fill=#7789c4 d=M530,70.71,649.29,190H530V70.71M530,0a50,50,0,0,0-50,50V190a50,50,0,0,0,50,50H670a50,50,0,0,0,50-50Z /></symbol><symbol id=join-icon viewBox="0 0 18 18"><path fill=#3ba55c d="m0 8h14.2l-3.6-3.6 1.4-1.4 6 6-6 6-1.4-1.4 3.6-3.6h-14.2" /></symbol><symbol id=leave-icon viewBox="0 0 18 18"><path fill=#ed4245 d="m3.8 8 3.6-3.6-1.4-1.4-6 6 6 6 1.4-1.4-3.6-3.6h14.2v-2" /></symbol><symbol id=call-icon viewBox="0 0 18 18"><path fill=#3ba55c fill-rule=evenodd d="M17.7163041 15.36645368c-.0190957.02699568-1.9039523 2.6680735-2.9957762 2.63320406-3.0676659-.09785935-6.6733809-3.07188394-9.15694343-5.548738C3.08002193 9.9740657.09772497 6.3791404 0 3.3061316v-.024746C0 2.2060575 2.61386252.3152347 2.64082114.2972376c.7110335-.4971705 1.4917101-.3149497 1.80959713.1372281.19320342.2744561 2.19712724 3.2811005 2.42290565 3.6489167.09884826.1608492.14714912.3554431.14714912.5702838 0 .2744561-.07975258.5770327-.23701117.8751101-.1527655.2902036-.65262318 1.1664385-.89862055 1.594995.2673396.3768148.94804468 1.26429792 2.351016 2.66357424 1.39173858 1.39027775 2.28923588 2.07641807 2.67002628 2.34187563.4302146-.2452108 1.3086162-.74238132 1.5972981-.89423205.5447887-.28682915 1.0907006-.31944893 1.4568885-.08661115.3459689.2182151 3.3383754 2.21027167 3.6225641 2.41611376.2695862.19234426.4144887.5399137.4144887.91672846 0 .2969525-.089862.61190215-.2808189.88523346" /></symbol><symbol id=pencil-icon viewBox="0 0 18 18"><path fill=#99aab5 d="m0 14.25v3.75h3.75l11.06-11.06-3.75-3.75zm17.71-10.21c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75z" /></symbol><symbol id=pin-icon viewBox="0 0 18 18"><path fill=#b9bbbe d="m16.908 8.39684-8.29587-8.295827-1.18584 1.184157 1.18584 1.18584-4.14834 4.1475v.00167l-1.18583-1.18583-1.185 1.18583 3.55583 3.55502-4.740831 4.74 1.185001 1.185 4.74083-4.74 3.55581 3.555 1.185-1.185-1.185-1.185 4.1475-4.14836h.0009l1.185 1.185z" /></symbol><symbol id=channel-icon viewBox="0 0 24 24"><path fill=#b9bbbe d="M5.88657 21C5.57547 21 5.3399 20.7189 5.39427 20.4126L6.00001 17H2.59511C2.28449 17 2.04905 16.7198 2.10259 16.4138L2.27759 15.4138C2.31946 15.1746 2.52722 15 2.77011 15H6.35001L7.41001 9H4.00511C3.69449 9 3.45905 8.71977 3.51259 8.41381L3.68759 7.41381C3.72946 7.17456 3.93722 7 4.18011 7H7.76001L8.39677 3.41262C8.43914 3.17391 8.64664 3 8.88907 3H9.87344C10.1845 3 10.4201 3.28107 10.3657 3.58738L9.76001 7H15.76L16.3968 3.41262C16.4391 3.17391 16.6466 3 16.8891 3H17.8734C18.1845 3 18.4201 3.28107 18.3657 3.58738L17.76 7H21.1649C21.4755 7 21.711 7.28023 21.6574 7.58619L21.4824 8.58619C21.4406 8.82544 21.2328 9 20.9899 9H17.41L16.35 15H19.7549C20.0655 15 20.301 15.2802 20.2474 15.5862L20.0724 16.5862C20.0306 16.8254 19.8228 17 19.5799 17H16L15.3632 20.5874C15.3209 20.8261 15.1134 21 14.8709 21H13.8866C13.5755 21 13.3399 20.7189 13.3943 20.4126L14 17H8.00001L7.36325 20.5874C7.32088 20.8261 7.11337 21 6.87094 21H5.88657ZM9.41045 9L8.35045 15H14.3504L15.4104 9H9.41045Z" /></symbol><symbol id=thread-icon viewBox="0 0 24 24"><path fill=#b9bbbe d="M5.43309 21C5.35842 21 5.30189 20.9325 5.31494 20.859L5.99991 17H2.14274C2.06819 17 2.01168 16.9327 2.02453 16.8593L2.33253 15.0993C2.34258 15.0419 2.39244 15 2.45074 15H6.34991L7.40991 9H3.55274C3.47819 9 3.42168 8.93274 3.43453 8.85931L3.74253 7.09931C3.75258 7.04189 3.80244 7 3.86074 7H7.75991L8.45234 3.09903C8.46251 3.04174 8.51231 3 8.57049 3H10.3267C10.4014 3 10.4579 3.06746 10.4449 3.14097L9.75991 7H15.7599L16.4523 3.09903C16.4625 3.04174 16.5123 3 16.5705 3H18.3267C18.4014 3 18.4579 3.06746 18.4449 3.14097L17.7599 7H21.6171C21.6916 7 21.7481 7.06725 21.7353 7.14069L21.4273 8.90069C21.4172 8.95811 21.3674 9 21.3091 9H17.4099L17.0495 11.04H15.05L15.4104 9H9.41035L8.35035 15H10.5599V17H7.99991L7.30749 20.901C7.29732 20.9583 7.24752 21 7.18934 21H5.43309Z" /><path fill=#b9bbbe d="M13.4399 12.96C12.9097 12.96 12.4799 13.3898 12.4799 13.92V20.2213C12.4799 20.7515 12.9097 21.1813 13.4399 21.1813H14.3999C14.5325 21.1813 14.6399 21.2887 14.6399 21.4213V23.4597C14.6399 23.6677 14.8865 23.7773 15.0408 23.6378L17.4858 21.4289C17.6622 21.2695 17.8916 21.1813 18.1294 21.1813H22.5599C23.0901 21.1813 23.5199 20.7515 23.5199 20.2213V13.92C23.5199 13.3898 23.0901 12.96 22.5599 12.96H13.4399Z" /></symbol></defs></svg><body><div class=preamble><div class=preamble__guild-icon-container><img class=preamble__guild-icon src="https://cdn.discordapp.com/icons/1030247538198061086/3b63f3695230f74fda100de956749b12.png?size=512" alt="Guild icon" loading=lazy></div><div class=preamble__entries-container><div class=preamble__entry>LanceDB</div><div class=preamble__entry>Languages / python</div></div></div>
<div class="chatlog">

<div class=chatlog__message-group><div id=chatlog__message-container-1197771298760302633 class=chatlog__message-container data-message-id=1197771298760302633><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1116071185550164118/274ded6f0c03ccc413e498cbb63986ea.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=struct#6327 data-user-id=1116071185550164118>struct</span> <span class=chatlog__author-tag>BOT</span> <span class=chatlog__timestamp title="Friday, January 19, 2024 12:15â€¯AM"><a href=#chatlog__message-container-1197771298760302633>1/19/2024 12:15â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Greetings, Humans! I&#39;m your bot from the machine world, Struct AI <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ¤–"
    title="robot"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f916.svg">

Responding to a beacon sent by one of you kind humans, I&#39;ve landed here to capture your knowledge, enrich it, and make it effortlessly searchable. My first scan netted 0 thread(s), and I&#39;m always on the lookout for more!

Together, we&#39;re building an AI and vector-search powered Knowledge Base. Beam yourself over to <a href="https://lance.struct.ai">https://lance.struct.ai</a> and don&#39;t forget to bookmark your coordinates! <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸš€"
    title="rocket"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f680.svg">

By default, all this knowledge would be visible to members only. So, remember to log in. Let&#39;s boldly go where no Discord server has gone before! <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ––"
    title="vulcan"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f596.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1199201451885461534 class=chatlog__message-container data-message-id=1199201451885461534><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=united_armadillo_69855 data-user-id=1199199819177144410>sam</span> <span class=chatlog__timestamp title="Monday, January 22, 2024 10:58â€¯PM"><a href=#chatlog__message-container-1199201451885461534>1/22/2024 10:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>i encounted the error mesage when I run the example: &quot;No such file or directory &#39;Hello world&#39;&quot;</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1199201451696726036/GEN5pdlbIAAe6vn.png?ex=697b83a2&amp;is=697a3222&amp;hm=55a7b1220d737d4419ef0002ceeea211fe455ab1c60fdb51eee2c85496a18df2&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1199201451696726036/GEN5pdlbIAAe6vn.png?ex=697b83a2&amp;is=697a3222&amp;hm=55a7b1220d737d4419ef0002ceeea211fe455ab1c60fdb51eee2c85496a18df2&amp;" alt="Image attachment" title="Image: GEN5pdlbIAAe6vn.png (609.76 KB)" loading=lazy> </a></div></div></div></div><div id=chatlog__message-container-1199201895953215590 class=chatlog__message-container data-message-id=1199201895953215590><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, January 22, 2024 11:00â€¯PM">11:00â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>does anyone know what is wrong</span></div></div></div></div><div id=chatlog__message-container-1199202225558405140 class=chatlog__message-container data-message-id=1199202225558405140><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, January 22, 2024 11:01â€¯PM">11:01â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>note: I replaced the text &quot;genimi-text&quot; to &quot;open-clip&quot;, because I can not get the genimi-text</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1199332692878176356 class=chatlog__message-container data-message-id=1199332692878176356><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=seyimazin data-user-id=699339698602115113>Savo</span> <span class=chatlog__timestamp title="Tuesday, January 23, 2024 7:39â€¯AM"><a href=#chatlog__message-container-1199332692878176356>1/23/2024 7:39â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi everyone. I have a question.

How can I ensure that the &quot;vector&quot; column is not included in the returned dataframe after using to_pandas?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1199404293917245531 class=chatlog__message-container data-message-id=1199404293917245531><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Tuesday, January 23, 2024 12:24â€¯PM"><a href=#chatlog__message-container-1199404293917245531>1/23/2024 12:24â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi there. currently with vector search the vector column is always included. We have a github issue to remove it unless actually requested though. For now you can always just drop it after the fact as a workaround</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1199420615489224734 class=chatlog__message-container data-message-id=1199420615489224734><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=seyimazin data-user-id=699339698602115113>Savo</span> <span class=chatlog__timestamp title="Tuesday, January 23, 2024 1:29â€¯PM"><a href=#chatlog__message-container-1199420615489224734>1/23/2024 1:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>thanks for you answer</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1201456495926190101 class=chatlog__message-container data-message-id=1201456495926190101><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/561891533259800606/da185b51f846125436d759a800cca956.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=.aliad data-user-id=561891533259800606>Aliad</span> <span class=chatlog__timestamp title="Monday, January 29, 2024 4:19â€¯AM"><a href=#chatlog__message-container-1201456495926190101>1/29/2024 4:19â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi guys, trying to implement a simple lancedb vectorstore for a pipeline on Azure Databricks for our company. However, i get blocked by an error before even getting started:

On creating a table i get the following generic error:

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">OSError: LanceError(IO): Generic LocalFileSystem error: Unable to copy file from /databricks_workspace_path/staging_db/train_collection.lance/_versions/.tmp_1.manifest_fcf797ed-ceed-4127-a3f7-618b5e06b0ed to /databricks_workspace_path/staging_db/train_collection.lance/_versions/1.manifest: Function not implemented (os error 38), /rustc/82e1608dfa6e0b5569232559e3d385fea5a93112/library/core/src/convert/mod.rs:757:9</code>

Can&#39;t find anything about this, anywhere...</span> <span class=chatlog__edited-timestamp title="Monday, January 29, 2024 4:19â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1201530595851907208 class=chatlog__message-container data-message-id=1201530595851907208><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, January 29, 2024 9:13â€¯AM"> <a href=#chatlog__message-container-1201530595851907208>1/29/2024 9:13â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1201973869724835901 class=chatlog__message-container data-message-id=1201973869724835901><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=archtoad data-user-id=834498751384125491>archtoad</span> <span class=chatlog__timestamp title="Tuesday, January 30, 2024 2:35â€¯PM"><a href=#chatlog__message-container-1201973869724835901>1/30/2024 2:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I noticed 3.12 is missing from lanceâ€™s classifiers <a href="https://github.com/lancedb/lance/blob/main/python/pyproject.toml">https://github.com/lancedb/lance/blob/main/python/pyproject.toml</a> â€¦ any reason why it wouldnâ€™t work? (Installs okay)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/blob/main/python/pyproject.toml><div class="chatlog__markdown chatlog__markdown-preserve">lance/python/pyproject.toml at main &#183; lancedb/lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Modern columnar data format for ML and LLMs implemented in Rust. Convert from parquet in 2 lines of code for 100x faster random access, vector index, and data versioning. Compatible with Pandas, Du...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/SUl1evH9RDthQONkeyx9Pe3pNisFPv4VdDGmVpCEYuI/https/opengraph.githubassets.com/d8d7798f5cd2bd08832aeddec7739fdf1bc98aa624596f1b345470bea0a85b6b/lancedb/lance> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/SUl1evH9RDthQONkeyx9Pe3pNisFPv4VdDGmVpCEYuI/https/opengraph.githubassets.com/d8d7798f5cd2bd08832aeddec7739fdf1bc98aa624596f1b345470bea0a85b6b/lancedb/lance alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1201992751361839176 class=chatlog__message-container data-message-id=1201992751361839176><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=archtoad>archtoad</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1201973869724835901')"> I noticed 3.12 is missing from lanceâ€™s classifiers <a href="https://github.com/lancedb/lance/blob/main/python/pyproject.toml">https://github.com/lancedb/lance/blob/main/python/pyproject.toml</a> â€¦ any reason why it wouldnâ€™t work? (Installs okay) </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Tuesday, January 30, 2024 3:50â€¯PM"><a href=#chatlog__message-container-1201992751361839176>1/30/2024 3:50â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Nothing in the list of deprecations jumps out at me so, off the cuff, I would guess it does work.  We don&#39;t have any 3.12 CI tests running though so no guarantees.</span> <span class=chatlog__edited-timestamp title="Tuesday, January 30, 2024 3:50â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1202003257929773077 class=chatlog__message-container data-message-id=1202003257929773077><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Tuesday, January 30, 2024 4:31â€¯PM"><a href=#chatlog__message-container-1202003257929773077>1/30/2024 4:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>We are just waiting for PyTorch to release 3.12 support to enable CI . <span class="chatlog__markdown-mention" title="archtoad">@archtoad</span></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1202097370234630144 class=chatlog__message-container data-message-id=1202097370234630144><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/392309862291472394/acc30078ff29f38c71110c05febe66c2.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=diicell data-user-id=392309862291472394>diicell</span> <span class=chatlog__timestamp title="Tuesday, January 30, 2024 10:45â€¯PM"><a href=#chatlog__message-container-1202097370234630144>1/30/2024 10:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi guys, trying to connect to Minio but encountering an error: 
OSError: When listing objects under key &#39;&#39; in bucket &#39;lance&#39;: AWS Error NETWORK_CONNECTION during ListObjectsV2 operation: curlCode: 1, Unsupported protocol
Set all envvars to my MinIO instance (running in docker). And I&#39;m using llamaindex 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">os.environ[&quot;AWS_ENDPOINT&quot;] = os.environ[&quot;MINIO_ENDPOINT&quot;]
os.environ[&quot;AWS_ACCESS_KEY_ID&quot;] = os.environ[&quot;MINIO_ACCESS_USER&quot;]
os.environ[&quot;AWS_SECRET_ACCESS_KEY&quot;] = os.environ[&quot;MINIO_SECRET_PASS&quot;]
os.environ[&quot;AWS_DEFAULT_REGION&quot;] = os.environ[&quot;MINIO_REGION&quot;]
# Connect to LanceDB using path-style URI and s3_client
db_uri = f&quot;s3://{minio_bucket_name}&quot;
vector_store = LanceDBVectorStore(uri=db_uri, table_name=collection_name)

storage_context = StorageContext.from_defaults(
    vector_store=vector_store,
)
VectorStoreIndex.from_documents(
    documents,
    storage_context=storage_context,
    service_context=merging_context,
    show_progress=True,
)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1202353447048061029 class=chatlog__message-container data-message-id=1202353447048061029><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Wednesday, January 31, 2024 3:43â€¯PM"><a href=#chatlog__message-container-1202353447048061029>1/31/2024 3:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="diicell">@diicell</span> we dont have minio test setup yet. There is a blog from minio team <a href="https://blog.min.io/lancedb-trusted-steed-against-data-complexity/">https://blog.min.io/lancedb-trusted-steed-against-data-complexity/</a> , that might have some useful information. Let us know what you found!</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://blog.min.io/lancedb-trusted-steed-against-data-complexity/"><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB: Your Trusted Steed in the Joust Against Data Complexity</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Joust against data complexity with LanceDB, a lightning-fast vector database optimized for AI/ML on the open-source Lance format. Teaming up with MinIO, it scales seamlessly, offering high-performance, cloud-native storage. Dive into the tutorial for a swift deployment.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/DhxVPlF_jf63LtSs3PE3W7nv9LQQG31CPwGxsNTPfKs/https/blog.min.io/content/images/size/w1200/2023/12/_MinIO-and-LanceDB-for-ML-Workloads-MinIO-and-LanceDB-for-ML-Workloads.jpg> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/DhxVPlF_jf63LtSs3PE3W7nv9LQQG31CPwGxsNTPfKs/https/blog.min.io/content/images/size/w1200/2023/12/_MinIO-and-LanceDB-for-ML-Workloads-MinIO-and-LanceDB-for-ML-Workloads.jpg alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1202488668825194516 class=chatlog__message-container data-message-id=1202488668825194516><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/392309862291472394/acc30078ff29f38c71110c05febe66c2.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=lei.xu>lei</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1202353447048061029')"> <span class="chatlog__markdown-mention" title="diicell">@diicell</span> we dont have minio test setup yet. There is a blog from minio team <a href="https://blog.min.io/lancedb-trusted-steed-against-data-complexity/">https://blog.min.io/lancedb-trusted-steed-against-data-complexity/</a> , that might have some useful information. Let us know what you found! </span></div></div><div class=chatlog__header><span class=chatlog__author title=diicell data-user-id=392309862291472394>diicell</span> <span class=chatlog__timestamp title="Thursday, February 1, 2024 12:40â€¯AM"><a href=#chatlog__message-container-1202488668825194516>2/1/2024 12:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yeah, this worked, thanks! The problem was that I passed AWS credentials (config) in:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">session = boto3.Session()
s3_client = session.client(
    &quot;s3&quot;,
    aws_access_key_id=os.environ[&quot;MINIO_ACCESS_USER&quot;],
    aws_secret_access_key=os.environ[&quot;MINIO_SECRET_PASS&quot;],
    region_name=os.environ[&quot;MINIO_REGION&quot;],
    endpoint_url=os.environ[&quot;MINIO_ENDPOINT&quot;],
    config=botocore.config.Config(s3={&quot;addressing_style&quot;: &quot;path&quot;}),
)</code>
But for it to work, I should&#39;ve passed them as os.environ, not in the client variables</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1202488750714912829 class=chatlog__message-container data-message-id=1202488750714912829><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Thursday, February 1, 2024 12:40â€¯AM"><a href=#chatlog__message-container-1202488750714912829>2/1/2024 12:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>i see i see</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1203055560992493618 class=chatlog__message-container data-message-id=1203055560992493618><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1040448339088519168/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garnizzle data-user-id=1040448339088519168>garnizzle</span> <span class=chatlog__timestamp title="Friday, February 2, 2024 2:13â€¯PM"><a href=#chatlog__message-container-1203055560992493618>2/2/2024 2:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey, I am trying to follow the guide here on how to do a hybrid search (<a href="https://lancedb.github.io/lancedb/hybrid_search/#hybrid-search-in-lancedb)">https://lancedb.github.io/lancedb/hybrid_search/#hybrid-search-in-lancedb)</a>.  It says to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">query_type = &#39;hybrid&#39;</code> but this throws an error, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: Invalid query_type, must be &#39;vector&#39;, &#39;fts&#39;, or &#39;auto&#39;: hybrid</code>. I checked the python client source code and saw that <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">hybrid</code> is not longer an option. 

is there still a way to perform a hybrid search in lanceDB?</span> <span class=chatlog__edited-timestamp title="Friday, February 2, 2024 2:13â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204176853460590623 class=chatlog__message-container data-message-id=1204176853460590623><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 4:28â€¯PM"><a href=#chatlog__message-container-1204176853460590623>2/5/2024 4:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>how can I do a groupby aggregation with lancedb datafusion SQL? Or is this not possible. Finding it difficult to get a working example for a seemingly straightforward task</span></div></div></div></div><div id=chatlog__message-container-1204177218775814234 class=chatlog__message-container data-message-id=1204177218775814234><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, February 5, 2024 4:30â€¯PM">4:30â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="https://lancedb.github.io/lancedb/sql/#sql-filters">https://lancedb.github.io/lancedb/sql/#sql-filters</a>

Hoping that aggregations are supported as well...only filters would be a bit sad</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204177535290834965 class=chatlog__message-container data-message-id=1204177535290834965><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204176853460590623')"> how can I do a groupby aggregation with lancedb datafusion SQL? Or is this not possible. Finding it difficult to get a working example for a seemingly straightforward task </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 4:31â€¯PM"><a href=#chatlog__message-container-1204177535290834965>2/5/2024 4:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>At the moment we don&#39;t have an API in Python to run a full SQL query within LanceDB. For now the approach is to stream the data into DuckDB: <a href="https://lancedb.github.io/lancedb/python/duckdb/">https://lancedb.github.io/lancedb/python/duckdb/</a></span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone2><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ¼ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fc.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204183404032032788 class=chatlog__message-container data-message-id=1204183404032032788><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204177535290834965')"> At the moment we don&#39;t have an API in Python to run a full SQL query within LanceDB. For now the approach is to stream the data into DuckDB: <a href="https://lancedb.github.io/lancedb/python/duckdb/">https://lancedb.github.io/lancedb/python/duckdb/</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 4:54â€¯PM"><a href=#chatlog__message-container-1204183404032032788>2/5/2024 4:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>how does the streaming approach work? I have to convert to an arrow table first. Doesn&#39;t that materialize the table? Then it wouldn&#39;t be streaming anymore</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204184038508863609 class=chatlog__message-container data-message-id=1204184038508863609><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204183404032032788')"> how does the streaming approach work? I have to convert to an arrow table first. Doesn&#39;t that materialize the table? Then it wouldn&#39;t be streaming anymore </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 4:57â€¯PM"><a href=#chatlog__message-container-1204184038508863609>2/5/2024 4:57â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Oh I don&#39;t know why the docs show going through <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Table</code>. Use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.to_lance()</code> instead; <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset</code> ducktypes like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Dataset</code>, which is lazy. Same mechanism as described in this blog post: <a href="https://duckdb.org/2021/12/03/duck-arrow.html">https://duckdb.org/2021/12/03/duck-arrow.html</a></span> <span class=chatlog__edited-timestamp title="Monday, February 5, 2024 4:57â€¯PM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(255,255,255,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://duckdb.org/2021/12/03/duck-arrow.html><div class="chatlog__markdown chatlog__markdown-preserve">DuckDB quacks Arrow: A zero-copy data integration between Apache Ar...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">TL;DR: The zero-copy integration between DuckDB and Apache Arrow allows for rapid analysis of larger than memory datasets in Python and R using either SQL or relational APIs. This post is a collaboration with and cross-posted on the Arrow blog.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/5T9xsomFY0fXqfa0Cfx7id530FeWj1ZvUaAY4F7t5dM/https/duckdb.org/images/sharingduckdb.jpg> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/5T9xsomFY0fXqfa0Cfx7id530FeWj1ZvUaAY4F7t5dM/https/duckdb.org/images/sharingduckdb.jpg alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone2><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ¼ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fc.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204184326380458035 class=chatlog__message-container data-message-id=1204184326380458035><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204184038508863609')"> Oh I don&#39;t know why the docs show going through <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Table</code>. Use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.to_lance()</code> instead; <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset</code> ducktypes like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Dataset</code>, which is lazy. Same mechanism as described in this blog post: <a href="https://duckdb.org/2021/12/03/duck-arrow.html">https://duckdb.org/2021/12/03/duck-arrow.html</a> </span> <span class=chatlog__reply-edited-timestamp title="Monday, February 5, 2024 4:57â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 4:58â€¯PM"><a href=#chatlog__message-container-1204184326380458035>2/5/2024 4:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>that worked!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204194038413267075 class=chatlog__message-container data-message-id=1204194038413267075><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204184038508863609')"> Oh I don&#39;t know why the docs show going through <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Table</code>. Use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.to_lance()</code> instead; <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset</code> ducktypes like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Dataset</code>, which is lazy. Same mechanism as described in this blog post: <a href="https://duckdb.org/2021/12/03/duck-arrow.html">https://duckdb.org/2021/12/03/duck-arrow.html</a> </span> <span class=chatlog__reply-edited-timestamp title="Monday, February 5, 2024 4:57â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 5:37â€¯PM"><a href=#chatlog__message-container-1204194038413267075>2/5/2024 5:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="https://blog.lancedb.com/substrait-powered-filter-pushdown-in-lance-3d204355365c">https://blog.lancedb.com/substrait-powered-filter-pushdown-in-lance-3d204355365c</a>

Is doing a SQL query in duckdb on a lance file basically a developer UX issue? It seems like you don&#39;t really lose on performance otherwise</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://blog.lancedb.com/substrait-powered-filter-pushdown-in-lance-3d204355365c><div class="chatlog__markdown chatlog__markdown-preserve">Substrait Powered Filter Pushdown in Lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Exploiting the Power of Standardized Expressions</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/-2bv8s-y_kENjgcgOXtP8DrybhHdYfQJebXAsHTKEgo/https/miro.medium.com/v2/resize%3Afit%3A1017/1%2AldcaGpLJuG9qbsSICbe7sw.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/-2bv8s-y_kENjgcgOXtP8DrybhHdYfQJebXAsHTKEgo/https/miro.medium.com/v2/resize%3Afit%3A1017/1%2AldcaGpLJuG9qbsSICbe7sw.png alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204211947835228180 class=chatlog__message-container data-message-id=1204211947835228180><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Monday, February 5, 2024 6:48â€¯PM"><a href=#chatlog__message-container-1204211947835228180>2/5/2024 6:48â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Is doing a SQL query in duckdb on a lance file basically a developer UX issue?
</div></div>Are you asking why we provide that pathway instead of having our own full SQL engine / API?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204392945869131857 class=chatlog__message-container data-message-id=1204392945869131857><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 6:47â€¯AM"><a href=#chatlog__message-container-1204392945869131857>2/6/2024 6:47â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Should LanceDB be able to connect to Azure Blob container? Assuming we are running our batch job on Azure Compute cluster and we want to create a LanceDB setup in our Azure Blob container using python</span> <span class=chatlog__edited-timestamp title="Tuesday, February 6, 2024 6:48â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204432409119039539 class=chatlog__message-container data-message-id=1204432409119039539><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204211947835228180')"> <div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Is doing a SQL query in duckdb on a lance file basically a developer UX issue?
</div></div>Are you asking why we provide that pathway instead of having our own full SQL engine / API? </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 9:24â€¯AM"><a href=#chatlog__message-container-1204432409119039539>2/6/2024 9:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ya</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204433328862666852 class=chatlog__message-container data-message-id=1204433328862666852><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204392945869131857')"> Should LanceDB be able to connect to Azure Blob container? Assuming we are running our batch job on Azure Compute cluster and we want to create a LanceDB setup in our Azure Blob container using python </span> <span class=chatlog__reply-edited-timestamp title="Tuesday, February 6, 2024 6:48â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 9:28â€¯AM"><a href=#chatlog__message-container-1204433328862666852>2/6/2024 9:28â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes.  There is a little blurb here about how to specify credentials: <a href="https://lancedb.github.io/lancedb/guides/storage/#azure-blob-storage">https://lancedb.github.io/lancedb/guides/storage/#azure-blob-storage</a>

You will want to use a URL that looks like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">az://bucket/path</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204434892562374667 class=chatlog__message-container data-message-id=1204434892562374667><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204433328862666852')"> Yes.  There is a little blurb here about how to specify credentials: <a href="https://lancedb.github.io/lancedb/guides/storage/#azure-blob-storage">https://lancedb.github.io/lancedb/guides/storage/#azure-blob-storage</a>

You will want to use a URL that looks like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">az://bucket/path</code> </span></div></div><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 9:34â€¯AM"><a href=#chatlog__message-container-1204434892562374667>2/6/2024 9:34â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thanks for this, another question. Someone had kindly suggested these benchmarks <a href="https://github.com/lancedb/lance/blob/main/benchmarks/sift/lance_sift1m_stats.csv">https://github.com/lancedb/lance/blob/main/benchmarks/sift/lance_sift1m_stats.csv</a> for LanceDB.  Are these still valid?</span> <span class=chatlog__edited-timestamp title="Tuesday, February 6, 2024 9:34â€¯AM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/blob/main/benchmarks/sift/lance_sift1m_stats.csv><div class="chatlog__markdown chatlog__markdown-preserve">lance/benchmarks/sift/lance_sift1m_stats.csv at main &#183; lancedb/lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Modern columnar data format for ML and LLMs implemented in Rust. Convert from parquet in 2 lines of code for 100x faster random access, vector index, and data versioning. Compatible with Pandas, Du...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/00Iv-8_eBRNinhE6WozilaqOgWZNYLPcF52WFb3AGbI/https/opengraph.githubassets.com/449cbd0280a54e669ee2f7ecfd54a6389db1998b07f9a5c622d8c0ade152a99d/lancedb/lance> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/00Iv-8_eBRNinhE6WozilaqOgWZNYLPcF52WFb3AGbI/https/opengraph.githubassets.com/449cbd0280a54e669ee2f7ecfd54a6389db1998b07f9a5c622d8c0ade152a99d/lancedb/lance alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204435464183087134 class=chatlog__message-container data-message-id=1204435464183087134><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204432409119039539')"> ya </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 9:36â€¯AM"><a href=#chatlog__message-container-1204435464183087134>2/6/2024 9:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>One answer is that we&#39;d like people that are already using DuckDb to be able to keep their existing experience even if their data is stored in Lance.

Exposing a full SQL interface (via Datafusion) is on the roadmap at some point.  This issue is a prerequisite: <a href="https://github.com/lancedb/lance/issues/1129">https://github.com/lancedb/lance/issues/1129</a>

Once that is done I think the other thing we&#39;d need to do is take the logic in our scanner and convert it into datafusion optimization rules.  This way datafusion would be able to recognize that a query like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">SELECT ... ORDER BY l2_distance(vectors, (&lt;some_query_vector&gt;)) LIMIT 10</code> is actually a vector search and somehow route it to us.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone2><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ¼ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fc.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204443912433827880 class=chatlog__message-container data-message-id=1204443912433827880><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204434892562374667')"> Thanks for this, another question. Someone had kindly suggested these benchmarks <a href="https://github.com/lancedb/lance/blob/main/benchmarks/sift/lance_sift1m_stats.csv">https://github.com/lancedb/lance/blob/main/benchmarks/sift/lance_sift1m_stats.csv</a> for LanceDB.  Are these still valid? </span> <span class=chatlog__reply-edited-timestamp title="Tuesday, February 6, 2024 9:34â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 10:10â€¯AM"><a href=#chatlog__message-container-1204443912433827880>2/6/2024 10:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The results are prolly out of date, and also those results are for sift vectors which are 128D, lower than what you typically see today with OpenAI or BERT based embeddings. You can see this blog post for more recent results on GIST (960D) <a href="https://blog.lancedb.com/benchmarking-lancedb-92b01032874a">https://blog.lancedb.com/benchmarking-lancedb-92b01032874a</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://blog.lancedb.com/benchmarking-lancedb-92b01032874a><div class="chatlog__markdown chatlog__markdown-preserve">Benchmarking LanceDB</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">How to optimize recall vs latency for RAG</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/L5mbOf1J4qm2_nMFUjzvgOpHJ65Ce-R9evhfzmn4v5M/https/miro.medium.com/v2/da%3Atrue/resize%3Afit%3A1200/0%2ApyrkqDTByvqwXx9t> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/L5mbOf1J4qm2_nMFUjzvgOpHJ65Ce-R9evhfzmn4v5M/https/miro.medium.com/v2/da%3Atrue/resize%3Afit%3A1200/0%2ApyrkqDTByvqwXx9t alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204444126276354140 class=chatlog__message-container data-message-id=1204444126276354140><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 10:10â€¯AM"><a href=#chatlog__message-container-1204444126276354140>2/6/2024 10:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Great thanks again!!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204472069845291028 class=chatlog__message-container data-message-id=1204472069845291028><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 12:01â€¯PM"><a href=#chatlog__message-container-1204472069845291028>2/6/2024 12:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What is the maximum data size LanceDB will support? For example the sqllite docs mention Max DB size 281 TB with max row size 1 GB. Any number along these lines for LanceDB 

What about concurrency? We would like to use multiprocessing to run multiple read queries at a given moment. Based on a quick look at the docs, I haven&#39;t found any info there</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204483406952403054 class=chatlog__message-container data-message-id=1204483406952403054><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204472069845291028')"> What is the maximum data size LanceDB will support? For example the sqllite docs mention Max DB size 281 TB with max row size 1 GB. Any number along these lines for LanceDB 

What about concurrency? We would like to use multiprocessing to run multiple read queries at a given moment. Based on a quick look at the docs, I haven&#39;t found any info there </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 12:47â€¯PM"><a href=#chatlog__message-container-1204483406952403054>2/6/2024 12:47â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">What is the maximum data size LanceDB will support?
</div></div>I don&#39;t know what are hard limits are, but I think it&#39;s likely performance degrades enough when you get close it them that they aren&#39;t practical. Scaling is a WIP, and we are always trying to work better at larger scales.
Right now, we target good performance on ~10-50 billion rows and ~10-30 TB of data. So I&#39;d consider those close to the current practical limits right now.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204484482019754064 class=chatlog__message-container data-message-id=1204484482019754064><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204472069845291028')"> What is the maximum data size LanceDB will support? For example the sqllite docs mention Max DB size 281 TB with max row size 1 GB. Any number along these lines for LanceDB 

What about concurrency? We would like to use multiprocessing to run multiple read queries at a given moment. Based on a quick look at the docs, I haven&#39;t found any info there </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 12:51â€¯PM"><a href=#chatlog__message-container-1204484482019754064>2/6/2024 12:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">What about concurrency? We would like to use multiprocessing to run multiple read queries at a given moment.
</div></div>LanceDB can handle concurrent reads very well, and can scale horizontally. The main constraint is how well the storage layer you&#39;ve chosen scales.
For writes, we support concurrent writing, though too many concurrent writers can lead to failing writes as there is a limited number of times a writer retries a commit.
This is a good question. I&#39;ll be adding some new docs soon on concurrency and consistency.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204485273900285983 class=chatlog__message-container data-message-id=1204485273900285983><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 12:54â€¯PM"><a href=#chatlog__message-container-1204485273900285983>2/6/2024 12:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">We would like to use multiprocessing to run...
</div></div>
If you use multiprocessing then you should probably configure it so that it doesn&#39;t use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">fork</code> as lance is multi-threaded internally and fork and multi-thread do not get along (<a href="https://discuss.python.org/t/concerns-regarding-deprecation-of-fork-with-alive-threads/33555)">https://discuss.python.org/t/concerns-regarding-deprecation-of-fork-with-alive-threads/33555)</a></span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204494583082262538 class=chatlog__message-container data-message-id=1204494583082262538><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204484482019754064')"> <div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">What about concurrency? We would like to use multiprocessing to run multiple read queries at a given moment.
</div></div>LanceDB can handle concurrent reads very well, and can scale horizontally. The main constraint is how well the storage layer you&#39;ve chosen scales.
For writes, we support concurrent writing, though too many concurrent writers can lead to failing writes as there is a limited number of times a writer retries a commit.
This is a good question. I&#39;ll be adding some new docs soon on concurrency and consistency. </span></div></div><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 1:31â€¯PM"><a href=#chatlog__message-container-1204494583082262538>2/6/2024 1:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thanks for your help, just checking if you are the maintainer of this application(and maybe a little short on time). Would it be okay if I(under your guidance)/you submit a PR to add these 3 questions (benchmarks, data size and concurrency) to  FAQ/FYI section and close by this weekend.

Again just checking since I have an some architecture reviews next week and some of this information on the official page might help.</span> <span class=chatlog__edited-timestamp title="Tuesday, February 6, 2024 1:35â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204494852075692143 class=chatlog__message-container data-message-id=1204494852075692143><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204485273900285983')"> <div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">We would like to use multiprocessing to run...
</div></div>
If you use multiprocessing then you should probably configure it so that it doesn&#39;t use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">fork</code> as lance is multi-threaded internally and fork and multi-thread do not get along (<a href="https://discuss.python.org/t/concerns-regarding-deprecation-of-fork-with-alive-threads/33555)">https://discuss.python.org/t/concerns-regarding-deprecation-of-fork-with-alive-threads/33555)</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 1:32â€¯PM"><a href=#chatlog__message-container-1204494852075692143>2/6/2024 1:32â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thanks for the heads up I am assuming since unix offers <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">spawn</code>as well I can use that?  Although we use multiprocessing via Azure sdk so I&#39;ll still double check</span> <span class=chatlog__edited-timestamp title="Tuesday, February 6, 2024 1:32â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204495625215807489 class=chatlog__message-container data-message-id=1204495625215807489><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204494583082262538')"> Thanks for your help, just checking if you are the maintainer of this application(and maybe a little short on time). Would it be okay if I(under your guidance)/you submit a PR to add these 3 questions (benchmarks, data size and concurrency) to  FAQ/FYI section and close by this weekend.

Again just checking since I have an some architecture reviews next week and some of this information on the official page might help. </span> <span class=chatlog__reply-edited-timestamp title="Tuesday, February 6, 2024 1:35â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 1:35â€¯PM"><a href=#chatlog__message-container-1204495625215807489>2/6/2024 1:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Sure, feel free to open a PR. We have an FAQ section here that it could be added to: <a href="https://lancedb.github.io/lancedb/faq/">https://lancedb.github.io/lancedb/faq/</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204495686926868570 class=chatlog__message-container data-message-id=1204495686926868570><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204495625215807489')"> Sure, feel free to open a PR. We have an FAQ section here that it could be added to: <a href="https://lancedb.github.io/lancedb/faq/">https://lancedb.github.io/lancedb/faq/</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 1:35â€¯PM"><a href=#chatlog__message-container-1204495686926868570>2/6/2024 1:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Sure thanks</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204520941917577297 class=chatlog__message-container data-message-id=1204520941917577297><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Tuesday, February 6, 2024 3:16â€¯PM"><a href=#chatlog__message-container-1204520941917577297>2/6/2024 3:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Thanks for the heads up I am assuming since unix offers spawnas well I can use that?  Although we use multiprocessing via Azure sdk so I&#39;ll still double check 
</div></div>Yes, spawn should be fine.  You might also be ok if you fork before you import lance but I haven&#39;t tested that.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204659112860852244 class=chatlog__message-container data-message-id=1204659112860852244><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 12:25â€¯AM"><a href=#chatlog__message-container-1204659112860852244>2/7/2024 12:25â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello,
Another question regarding Azure Storage and LanceDB

The docs mention setting AZURE_STORAGE_ACCOUNT_NAME and AZURE_STORAGE_ACCOUNT_KEY but unfortunately some security controls at my org would require MSI authentication in Azure. It seems like the Rust implementation offers a lot of different methods to do so <a href="https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.from_env">https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.from_env</a>

I did go through lancedb.connect setup but I am not entirely sure which ones have been implemented, primarily I might be interested in the following. Could you point me in the right direction and maybe I can try to implement if needed
<a href="https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.with_client_id">https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.with_client_id</a></span> <span class=chatlog__edited-timestamp title="Wednesday, February 7, 2024 3:35â€¯AM">(edited)</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html><div class="chatlog__markdown chatlog__markdown-preserve">MicrosoftAzureBuilder in object_store::azure - Rust</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Configure a connection to Microsoft Azure Blob Storage container using the specified credentials.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204817077320421406 class=chatlog__message-container data-message-id=1204817077320421406><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 10:52â€¯AM"><a href=#chatlog__message-container-1204817077320421406>2/7/2024 10:52â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="bagelwrestlingtennis">@Nitish</span> before you go to far, I do want to note there are some known issues with Azure we&#39;ll be fixing in the near term <a href="https://github.com/lancedb/lancedb/issues/485">https://github.com/lancedb/lancedb/issues/485</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/485><div class="chatlog__markdown chatlog__markdown-preserve">lancedb connector functionality does not work with azure url path &#183;...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">create_table() works with azure url path to blob storage, but other functionality like table_names() or open_table() throws error</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/-RX1K8ABIyBmTauGPEjvjbHT6UDbx1MZsRlBrZ8kGpU/https/opengraph.githubassets.com/a2850abc99fcc83faf345282ff2dd51d5e29dfea2ee923913f49dc3fd559e2ac/lancedb/lancedb/issues/485> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/-RX1K8ABIyBmTauGPEjvjbHT6UDbx1MZsRlBrZ8kGpU/https/opengraph.githubassets.com/a2850abc99fcc83faf345282ff2dd51d5e29dfea2ee923913f49dc3fd559e2ac/lancedb/lancedb/issues/485 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204817476051927071 class=chatlog__message-container data-message-id=1204817476051927071><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204659112860852244')"> Hello,
Another question regarding Azure Storage and LanceDB

The docs mention setting AZURE_STORAGE_ACCOUNT_NAME and AZURE_STORAGE_ACCOUNT_KEY but unfortunately some security controls at my org would require MSI authentication in Azure. It seems like the Rust implementation offers a lot of different methods to do so <a href="https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.from_env">https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.from_env</a>

I did go through lancedb.connect setup but I am not entirely sure which ones have been implemented, primarily I might be interested in the following. Could you point me in the right direction and maybe I can try to implement if needed
<a href="https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.with_client_id">https://docs.rs/object_store/latest/object_store/azure/struct.MicrosoftAzureBuilder.html#method.with_client_id</a> </span> <span class=chatlog__reply-edited-timestamp title="Wednesday, February 7, 2024 3:35â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 10:54â€¯AM"><a href=#chatlog__message-container-1204817476051927071>2/7/2024 10:54â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content"> Could you point me in the right direction and maybe I can try to implement if needed
</div></div>All the the environment variables listed there will work. Is that sufficient? Or do you need to pass credentials while in Python?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204818122452897912 class=chatlog__message-container data-message-id=1204818122452897912><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204817077320421406')"> <span class="chatlog__markdown-mention" title="bagelwrestlingtennis">@Nitish</span> before you go to far, I do want to note there are some known issues with Azure we&#39;ll be fixing in the near term <a href="https://github.com/lancedb/lancedb/issues/485">https://github.com/lancedb/lancedb/issues/485</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=bagelwrestlingtennis data-user-id=798116684316934184>Nitish</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 10:57â€¯AM"><a href=#chatlog__message-container-1204818122452897912>2/7/2024 10:57â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Oh this is scary <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜¦"
    title="frowning"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f626.svg">  Seems like open_table() has an issue which is not great. Any timeline for this and what I can do to help?</span> <span class=chatlog__edited-timestamp title="Wednesday, February 7, 2024 11:02â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204820280908845146 class=chatlog__message-container data-message-id=1204820280908845146><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bagelwrestlingtennis>Nitish</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204818122452897912')"> Oh this is scary <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜¦"
    title="frowning"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f626.svg">  Seems like open_table() has an issue which is not great. Any timeline for this and what I can do to help? </span> <span class=chatlog__reply-edited-timestamp title="Wednesday, February 7, 2024 11:02â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 11:05â€¯AM"><a href=#chatlog__message-container-1204820280908845146>2/7/2024 11:05â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yeah it&#39;s unfortunate. I don&#39;t have a timeline yet, but I can update that azure issue when we do. It&#39;s blocked by fixing some other things first.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204938340353450064 class=chatlog__message-container data-message-id=1204938340353450064><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 6:54â€¯PM"><a href=#chatlog__message-container-1204938340353450064>2/7/2024 6:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I was excited to use lance file format because of it&#39;s &quot;native&quot; upsert abilities. Initial testing also showed that I was loading data into memory faster than parquet files.

However after doing a relatively small upsert (1m rows), my table load time increased 3-4x and is now slower than loading the parquet files <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜¦"
    title="frowning"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f626.svg">

Im kind of lost at what just happened - if this is expected behavior, if it&#39;s a bug...they are relatively small datasets - one is about 6m rows and the second is about 4m rows</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204940825742807080 class=chatlog__message-container data-message-id=1204940825742807080><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/675128789646442557/1cb13b6385769af97ea2584be513124e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204938340353450064')"> I was excited to use lance file format because of it&#39;s &quot;native&quot; upsert abilities. Initial testing also showed that I was loading data into memory faster than parquet files.

However after doing a relatively small upsert (1m rows), my table load time increased 3-4x and is now slower than loading the parquet files <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜¦"
    title="frowning"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f626.svg">

Im kind of lost at what just happened - if this is expected behavior, if it&#39;s a bug...they are relatively small datasets - one is about 6m rows and the second is about 4m rows </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:04â€¯PM"><a href=#chatlog__message-container-1204940825742807080>2/7/2024 7:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How many rows were you upserting at a time? If you have data in parquet, it might make sense to try bulk inserting a batch of records (say, a list of dicts) and push that number as high as your machine&#39;s memory allows. Something like 50k might be a start. Fewer the insert operations that occur, the fewer the fragments are on disk.  <a href="https://lancedb.github.io/lancedb/faq/#how-can-i-speed-up-data-inserts">https://lancedb.github.io/lancedb/faq/#how-can-i-speed-up-data-inserts</a></span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone2><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ¼ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fc.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204941173526102026 class=chatlog__message-container data-message-id=1204941173526102026><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/675128789646442557/1cb13b6385769af97ea2584be513124e.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=prrao>prashanth</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204940825742807080')"> How many rows were you upserting at a time? If you have data in parquet, it might make sense to try bulk inserting a batch of records (say, a list of dicts) and push that number as high as your machine&#39;s memory allows. Something like 50k might be a start. Fewer the insert operations that occur, the fewer the fragments are on disk.  <a href="https://lancedb.github.io/lancedb/faq/#how-can-i-speed-up-data-inserts">https://lancedb.github.io/lancedb/faq/#how-can-i-speed-up-data-inserts</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:06â€¯PM"><a href=#chatlog__message-container-1204941173526102026>2/7/2024 7:06â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I was stuffing around 500k records...</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204941513541292042 class=chatlog__message-container data-message-id=1204941513541292042><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204941173526102026')"> I was stuffing around 500k records... </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:07â€¯PM"><a href=#chatlog__message-container-1204941513541292042>2/7/2024 7:07â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How many fragments does your dataset have after the upserting?  Have you run compaction?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204942654396170271 class=chatlog__message-container data-message-id=1204942654396170271><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204941513541292042')"> How many fragments does your dataset have after the upserting?  Have you run compaction? </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:11â€¯PM"><a href=#chatlog__message-container-1204942654396170271>2/7/2024 7:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>compaction got killed, ran out of memory</span></div></div></div></div><div id=chatlog__message-container-1204942677267718204 class=chatlog__message-container data-message-id=1204942677267718204><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, February 7, 2024 7:12â€¯PM">7:12â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I only had like 10 fragments. It didn&#39;t seem like a lot</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204943062799884380 class=chatlog__message-container data-message-id=1204943062799884380><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204942654396170271')"> compaction got killed, ran out of memory </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:13â€¯PM"><a href=#chatlog__message-container-1204943062799884380>2/7/2024 7:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>That&#39;s odd, compaction should be a streaming operation I think.  Do you have any really large or otherwise unusual columns?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204943947764342855 class=chatlog__message-container data-message-id=1204943947764342855><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204943062799884380')"> That&#39;s odd, compaction should be a streaming operation I think.  Do you have any really large or otherwise unusual columns? </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:17â€¯PM"><a href=#chatlog__message-container-1204943947764342855>2/7/2024 7:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>no it seemed alright.

It looks like the lance file size ballooned a ton though - its now about 10x the size of parquet files (700mb vs 7gb)</span></div></div></div></div><div id=chatlog__message-container-1204944019411701811 class=chatlog__message-container data-message-id=1204944019411701811><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, February 7, 2024 7:17â€¯PM">7:17â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>maybe theres like a bunch of hidden deleted files that are still existing?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204944083840405634 class=chatlog__message-container data-message-id=1204944083840405634><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204943062799884380')"> That&#39;s odd, compaction should be a streaming operation I think.  Do you have any really large or otherwise unusual columns? </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:17â€¯PM"><a href=#chatlog__message-container-1204944083840405634>2/7/2024 7:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ya I was hoping it would just &quot;work&quot; and be a streaming operation.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204944392020824104 class=chatlog__message-container data-message-id=1204944392020824104><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204944083840405634')"> ya I was hoping it would just &quot;work&quot; and be a streaming operation. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:18â€¯PM"><a href=#chatlog__message-container-1204944392020824104>2/7/2024 7:18â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If you&#39;re able to create any kind of reproducible steps I&#39;d be grateful.  This sounds like a bug.  Inserting and compacting 10m rows should be pretty quick.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204944502746255420 class=chatlog__message-container data-message-id=1204944502746255420><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204944392020824104')"> If you&#39;re able to create any kind of reproducible steps I&#39;d be grateful.  This sounds like a bug.  Inserting and compacting 10m rows should be pretty quick. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:19â€¯PM"><a href=#chatlog__message-container-1204944502746255420>2/7/2024 7:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>uh...yea not sure how I could even reproduce it.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204944630010093568 class=chatlog__message-container data-message-id=1204944630010093568><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204944392020824104')"> If you&#39;re able to create any kind of reproducible steps I&#39;d be grateful.  This sounds like a bug.  Inserting and compacting 10m rows should be pretty quick. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:19â€¯PM"><a href=#chatlog__message-container-1204944630010093568>2/7/2024 7:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yea i exepcted this to be relatively straight forward process</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204944892975906896 class=chatlog__message-container data-message-id=1204944892975906896><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:20â€¯PM"><a href=#chatlog__message-container-1204944892975906896>2/7/2024 7:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ll try later to create a small test to walk through upserting 500k rows at a time, up to 10m rows, compacting, then searching.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204945026312835082 class=chatlog__message-container data-message-id=1204945026312835082><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:21â€¯PM"><a href=#chatlog__message-container-1204945026312835082>2/7/2024 7:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">import cryo
import datetime
import lancedb
import polars as pl
import time

# open lancedb table
uri: str = &quot;lancedb&quot;
db: lancedb.DBConnection = lancedb.connect(uri)
rollups_tbl = db.open_table(&quot;rollups&quot;)


# # new data in polars dataframe
# rollups_pl: pl.DataFrame = pl.scan_parquet(&#39;data/rollups/*.parquet&#39;).filter(
#     pl.col(&#39;block_number&#39;) &gt;= 19040000).collect(streaming=True)

# print(f&#39;df shape: {rollups_pl.shape}&#39;)

# # Perform a &quot;upsert&quot; operation for rollups
# (rollups_tbl.merge_insert(&quot;block_number&quot;)             \
#     # .when_matched_update_all()     \
#     .when_not_matched_insert_all() \
#     .execute(rollups_pl))

# compact fragments and cleanup
rollups_tbl.compact_files(target_rows_per_fragment=1000000)

rollups_tbl.cleanup_old_versions(
    older_than=datetime.timedelta(seconds=15), delete_unverified=True
)

print(&#39;done&#39;)</code>

I first tried to do all of this all at once, but my ram overloaded (i have 32gb of ram). I ran the commented out code first and then it worked. Then trying to compact + cleanup doesn&#39;t work and killed the machine again</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204945966587842663 class=chatlog__message-container data-message-id=1204945966587842663><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1204945026312835082')"> <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">import cryo
import datetime
import lancedb
import polars as pl
import time

# open lancedb table
uri: str = &quot;lancedb&quot;
db: lancedb.DBConnection = lancedb.connect(uri)
rollups_tbl = db.open_table(&quot;rollups&quot;)


# # new data in polars dataframe
# rollups_pl: pl.DataFrame = pl.scan_parquet(&#39;data/rollups/*.parquet&#39;).filter(
#     pl.col(&#39;block_number&#39;) &gt;= 19040000).collect(streaming=True)

# print(f&#39;df shape: {rollups_pl.shape}&#39;)

# # Perform a &quot;upsert&quot; operation for rollups
# (rollups_tbl.merge_insert(&quot;block_number&quot;)             \
#     # .when_matched_update_all()     \
#     .when_not_matched_insert_all() \
#     .execute(rollups_pl))

# compact fragments and cleanup
rollups_tbl.compact_files(target_rows_per_fragment=1000000)

rollups_tbl.cleanup_old_versions(
    older_than=datetime.timedelta(seconds=15), delete_unverified=True
)

print(&#39;done&#39;)</code>

I first tried to do all of this all at once, but my ram overloaded (i have 32gb of ram). I ran the commented out code first and then it worked. Then trying to compact + cleanup doesn&#39;t work and killed the machine again </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:25â€¯PM"><a href=#chatlog__message-container-1204945966587842663>2/7/2024 7:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thanks!  I&#39;m away from PC at the moment but will look this over later</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1204946100117700628 class=chatlog__message-container data-message-id=1204946100117700628><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, February 7, 2024 7:25â€¯PM"><a href=#chatlog__message-container-1204946100117700628>2/7/2024 7:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I will note that I also messed up on the process a couple of times...was trying to upsert the lance table into itself before I realized my mistake</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205296892792148078 class=chatlog__message-container data-message-id=1205296892792148078><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1040448339088519168/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garnizzle data-user-id=1040448339088519168>garnizzle</span> <span class=chatlog__timestamp title="Thursday, February 8, 2024 6:39â€¯PM"><a href=#chatlog__message-container-1205296892792148078>2/8/2024 6:39â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hey, quick question - I noticed in the docs it says the distance metric that is searched is cosine similarity (<a href="https://lancedb.github.io/lancedb/search/)">https://lancedb.github.io/lancedb/search/)</a> but the dictonary object outputs a key that is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">&#39;_distance&#39;</code> - is that the cosine similarity score (meaning highest score is the best rank) or cosine distance (meaning lowest score is the best ranked)?

the natural order it returns in is lowest to higher which makes me suspect is a distance measure</span> <span class=chatlog__edited-timestamp title="Thursday, February 8, 2024 6:41â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205315227537637467 class=chatlog__message-container data-message-id=1205315227537637467><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 8, 2024 7:52â€¯PM"><a href=#chatlog__message-container-1205315227537637467>2/8/2024 7:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>that is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_distance</code> which in this case is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 - cosine similarity</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205594791799431168 class=chatlog__message-container data-message-id=1205594791799431168><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1040448339088519168/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garnizzle data-user-id=1040448339088519168>garnizzle</span> <span class=chatlog__timestamp title="Friday, February 9, 2024 2:23â€¯PM"><a href=#chatlog__message-container-1205594791799431168>2/9/2024 2:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>gotcha. so just to clarify, when I do something like this, with normalized embeddings, 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">results = table.search(query_vector).metric(&#39;cosine&#39;).limit(3).to_list()
print(f&quot;Distances: {[result[&#39;_distance&#39;] for result in results]}&quot;)</code>
 and I get a response like this:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">[1.0260846614837646, 1.2420001029968262, 1.2684835195541382]</code> 

I can interpret this as meaning that these top 3 results were all negatively correlated with the search query?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205596371156078653 class=chatlog__message-container data-message-id=1205596371156078653><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1040448339088519168/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=garnizzle>garnizzle</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1205594791799431168')"> gotcha. so just to clarify, when I do something like this, with normalized embeddings, 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">results = table.search(query_vector).metric(&#39;cosine&#39;).limit(3).to_list()
print(f&quot;Distances: {[result[&#39;_distance&#39;] for result in results]}&quot;)</code>
 and I get a response like this:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">[1.0260846614837646, 1.2420001029968262, 1.2684835195541382]</code> 

I can interpret this as meaning that these top 3 results were all negatively correlated with the search query? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Friday, February 9, 2024 2:29â€¯PM"><a href=#chatlog__message-container-1205596371156078653>2/9/2024 2:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>By &quot;negatively correlated&quot; you mean &quot;has a cosine similarity less than 0&quot; right?  I think the answer then is yes, probably.  There is also some noise here if you have an index.  Because then the distance calculations are run on PQ-quantized representations of the original vectors.  Also, if you do have an index you&#39;ll want to make sure you trained it with cosine as the distance metric.

Maybe CC <span class="chatlog__markdown-mention" title="lei.xu">@lei</span> for second opinion.  I know there is some normalization / etc. that happens when using cosine as the metric for your index.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205596821263482970 class=chatlog__message-container data-message-id=1205596821263482970><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1040448339088519168/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garnizzle data-user-id=1040448339088519168>garnizzle</span> <span class=chatlog__timestamp title="Friday, February 9, 2024 2:31â€¯PM"><a href=#chatlog__message-container-1205596821263482970>2/9/2024 2:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>right now I am not creating an ANN index, since the data set is small, just creating an table</span></div></div></div></div><div id=chatlog__message-container-1205596863764635681 class=chatlog__message-container data-message-id=1205596863764635681><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, February 9, 2024 2:31â€¯PM">2:31â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is it using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> by default?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205601864947605554 class=chatlog__message-container data-message-id=1205601864947605554><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Friday, February 9, 2024 2:51â€¯PM"><a href=#chatlog__message-container-1205601864947605554>2/9/2024 2:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m pretty sure <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">l2</code> is the default distance metric if not specified.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1205602634367762462 class=chatlog__message-container data-message-id=1205602634367762462><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Friday, February 9, 2024 2:54â€¯PM"><a href=#chatlog__message-container-1205602634367762462>2/9/2024 2:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>cosine = 1 - normalized(L2)
and L2 is default metric</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1206741912661532713 class=chatlog__message-container data-message-id=1206741912661532713><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1040448339088519168/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garnizzle data-user-id=1040448339088519168>garnizzle</span> <span class=chatlog__timestamp title="Monday, February 12, 2024 6:21â€¯PM"><a href=#chatlog__message-container-1206741912661532713>2/12/2024 6:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ah gotcha. was a bit confused because I&#39;m used to sentence transformers which does similarity not distance</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207584768170926101 class=chatlog__message-container data-message-id=1207584768170926101><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=atombomb9899 data-user-id=789239768616796161>atombomb9899</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:10â€¯AM"><a href=#chatlog__message-container-1207584768170926101>2/15/2024 2:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey lancedb gurus, one question: I am using the hybrid search with <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">reranker = LinearCombinationReranker(weight=0.5,return_score=&#39;all&#39;) 
result = tbl.search((embedding, text), query_type=&quot;hybrid&quot;, vector_column_name=&quot;vector&quot;).metric(&#39;cosine&#39;) \
.rerank(reranker=reranker).limit(3).to_pandas()</code>, however, when I check the results, I saw sometimes there are <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">NaN</code> for _distance and score, is that normal?</span></div></div></div></div><div id=chatlog__message-container-1207584977093529631 class=chatlog__message-container data-message-id=1207584977093529631><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:11â€¯AM">2:11â€¯AM</div></div><div class=chatlog__message-primary><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1207584976892198923/Screenshot_2024-02-14_at_11.11.12_PM.png?ex=697bb0e6&amp;is=697a5f66&amp;hm=019fb827db96a9caf852ab97773fa16f912fbda589e2b276c4e35f8fb5b5397c&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1207584976892198923/Screenshot_2024-02-14_at_11.11.12_PM.png?ex=697bb0e6&amp;is=697a5f66&amp;hm=019fb827db96a9caf852ab97773fa16f912fbda589e2b276c4e35f8fb5b5397c&amp;" alt="Image attachment" title="Image: Screenshot_2024-02-14_at_11.11.12_PM.png (30.05 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207586127352037446 class=chatlog__message-container data-message-id=1207586127352037446><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=atombomb9899>atombomb9899</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1207584768170926101')"> Hey lancedb gurus, one question: I am using the hybrid search with <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">reranker = LinearCombinationReranker(weight=0.5,return_score=&#39;all&#39;) 
result = tbl.search((embedding, text), query_type=&quot;hybrid&quot;, vector_column_name=&quot;vector&quot;).metric(&#39;cosine&#39;) \
.rerank(reranker=reranker).limit(3).to_pandas()</code>, however, when I check the results, I saw sometimes there are <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">NaN</code> for _distance and score, is that normal? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:16â€¯AM"><a href=#chatlog__message-container-1207586127352037446>2/15/2024 2:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes that is normal. When you pass &quot;return_score=&#39;all&#39;&quot; it returns the vector search score (_distance) , FTS score (score) and the hybrid search score (_relevance_score)..Because hybrid search results is essentially combined and reranked vector+fts results, fts result rows don&#39;t have a vector search score &amp; vector search result rows don&#39;t have fts score hence the NaNs..Note that not all rerankers support &quot;return_score=&#39;all&#39;&quot;, only linear combination does. And it is meant for debugging purpose. Ranking is done based on _relevance_score</span></div></div></div></div><div id=chatlog__message-container-1207586247690821683 class=chatlog__message-container data-message-id=1207586247690821683><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:16â€¯AM">2:16â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>More details here in the docs - <a href="https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/#linear-combination-reranker">https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/#linear-combination-reranker</a></span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1207586247854522368/Screenshot_2024-02-15_at_12.46.29_PM.png?ex=697bb215&amp;is=697a6095&amp;hm=a1ae0cfd27f3f5c82072f64ce2efce4b064b20bd4ad0b9ca58735df541cc3173&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1207586247854522368/Screenshot_2024-02-15_at_12.46.29_PM.png?ex=697bb215&amp;is=697a6095&amp;hm=a1ae0cfd27f3f5c82072f64ce2efce4b064b20bd4ad0b9ca58735df541cc3173&amp;" alt="Image attachment" title="Image: Screenshot_2024-02-15_at_12.46.29_PM.png (241.46 KB)" loading=lazy> </a></div></div></div></div><div id=chatlog__message-container-1207587661364330516 class=chatlog__message-container data-message-id=1207587661364330516><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:22â€¯AM">2:22â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Aahh thereâ€™s a TODO in the docs that I didnâ€™t remove. Just noticed<img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜‚"
    title="joy"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f602.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207587700090343454 class=chatlog__message-container data-message-id=1207587700090343454><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=atombomb9899 data-user-id=789239768616796161>atombomb9899</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:22â€¯AM"><a href=#chatlog__message-container-1207587700090343454>2/15/2024 2:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>thanks, maybe I don&#39;t understand the rerank part, I thought there are two scores for each (semantic search,  full-text search), and then final relevance_score = weight * semantic_score + (1=weight) * full_text_score</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207588586199973888 class=chatlog__message-container data-message-id=1207588586199973888><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=atombomb9899>atombomb9899</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1207587700090343454')"> thanks, maybe I don&#39;t understand the rerank part, I thought there are two scores for each (semantic search,  full-text search), and then final relevance_score = weight * semantic_score + (1=weight) * full_text_score </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:25â€¯AM"><a href=#chatlog__message-container-1207588586199973888>2/15/2024 2:25â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes that&#39;s almost correct. Linear combination logic is slightly more comlicated -- There can be 3 cases - 
<ul><li>When a given search result(row) if found in fts results but absent in vector search results - (vector score will be null)</li><li>When a given search result(row) if found in vector results but absent in fts results - (fts score will be null)</li><li>And when a row is found in both results - both scores will be non-null</li></ul></span> <span class=chatlog__edited-timestamp title="Thursday, February 15, 2024 2:26â€¯AM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1207588800029524028 class=chatlog__message-container data-message-id=1207588800029524028><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:26â€¯AM">2:26â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>here&#39;s the exact merging logic that takes care of NULL scores with a FILL value <a href="https://github.com/lancedb/lancedb/blob/main/python/lancedb/rerankers/linear_combination.py#L47">https://github.com/lancedb/lancedb/blob/main/python/lancedb/rerankers/linear_combination.py#L47</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207589102292176946 class=chatlog__message-container data-message-id=1207589102292176946><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=atombomb9899 data-user-id=789239768616796161>atombomb9899</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:27â€¯AM"><a href=#chatlog__message-container-1207589102292176946>2/15/2024 2:27â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>oh I see, now I get it. But I thought there should be always a score for semantic search (cosine similarity)? Maybe you did top k retrieval, then there could be some missing.</span></div></div></div></div><div id=chatlog__message-container-1207589237189378078 class=chatlog__message-container data-message-id=1207589237189378078><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:28â€¯AM">2:28â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>thanks! now make sense</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207589455725330442 class=chatlog__message-container data-message-id=1207589455725330442><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:29â€¯AM"><a href=#chatlog__message-container-1207589455725330442>2/15/2024 2:29â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yes.. That right. In hybrid search, both vector and fts are run for the same query.. But both the result sets might or might not intersect completely creating some null values</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207589491162751016 class=chatlog__message-container data-message-id=1207589491162751016><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=atombomb9899 data-user-id=789239768616796161>atombomb9899</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:29â€¯AM"><a href=#chatlog__message-container-1207589491162751016>2/15/2024 2:29â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>thanks!</span></div></div></div></div><div id=chatlog__message-container-1207589549543395328 class=chatlog__message-container data-message-id=1207589549543395328><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:29â€¯AM">2:29â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>sorry another question:  if the search text includes &quot;&amp;&quot; or &quot;-&quot;, the query will fail, seems the tantivy lib problem. anything can avoid that?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207589914322010142 class=chatlog__message-container data-message-id=1207589914322010142><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:31â€¯AM"><a href=#chatlog__message-container-1207589914322010142>2/15/2024 2:31â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yeah I&#39;m seeing a few tanivy queries failing. I didn&#39;t know it was due to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">&quot;&amp;&quot; or &quot;-&quot;</code>. Can you just raise an issue on lancedb repo about that? I&#39;ll try to get to it asap</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207590228907270194 class=chatlog__message-container data-message-id=1207590228907270194><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=atombomb9899 data-user-id=789239768616796161>atombomb9899</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:32â€¯AM"><a href=#chatlog__message-container-1207590228907270194>2/15/2024 2:32â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>sg, thanks!</span></div></div></div></div><div id=chatlog__message-container-1207590568083857438 class=chatlog__message-container data-message-id=1207590568083857438><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 2:33â€¯AM">2:33â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="https://github.com/lancedb/lancedb/issues/976">https://github.com/lancedb/lancedb/issues/976</a> thanks!</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/976><div class="chatlog__markdown chatlog__markdown-preserve">bug(python): if the search text includes &quot;&amp;&quot; or &quot;-&quot;, the query will...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB version v0.5.5 What happened? if the search text includes &quot;&amp;&quot; or &quot;-&quot;, the query will fail, seems the tantivy lib problem. Are there known steps to reproduce? No resp...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/e94RugnkedpaZxeQUqXqqkG9zTuRFYgNHH6RCoCwPrI/https/opengraph.githubassets.com/e7d3e00bbbdf0c815198e7d931540a7ea5259b8bea53c77452aca7147d921ebe/lancedb/lancedb/issues/976> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/e94RugnkedpaZxeQUqXqqkG9zTuRFYgNHH6RCoCwPrI/https/opengraph.githubassets.com/e7d3e00bbbdf0c815198e7d931540a7ea5259b8bea53c77452aca7147d921ebe/lancedb/lancedb/issues/976 alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=clap_tone1><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ» src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44f-1f3fb.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207709002373402644 class=chatlog__message-container data-message-id=1207709002373402644><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=ayushexel>AyushC</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1207589914322010142')"> Yeah I&#39;m seeing a few tanivy queries failing. I didn&#39;t know it was due to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">&quot;&amp;&quot; or &quot;-&quot;</code>. Can you just raise an issue on lancedb repo about that? I&#39;ll try to get to it asap </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 10:24â€¯AM"><a href=#chatlog__message-container-1207709002373402644>2/15/2024 10:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>You can quote the query or explicitly call phrase_query()</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207770282945810543 class=chatlog__message-container data-message-id=1207770282945810543><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/809863396723130429/63a8cbd9255e5a064f03eb85f7c05a62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kloos0961 data-user-id=809863396723130429>kloos</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:27â€¯PM"><a href=#chatlog__message-container-1207770282945810543>2/15/2024 2:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi I have a small question here... Do I need to run the create index every time I add new data to the table?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207775093510639646 class=chatlog__message-container data-message-id=1207775093510639646><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 2:47â€¯PM"><a href=#chatlog__message-container-1207775093510639646>2/15/2024 2:47â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>it&#39;s not required. New data will show up in search results even if you don&#39;t reindex</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207781689418321970 class=chatlog__message-container data-message-id=1207781689418321970><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 3:13â€¯PM"><a href=#chatlog__message-container-1207781689418321970>2/15/2024 3:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>if you&#39;ve accumulated a bunch of new vectors, we recommend that you performance an incremental reindex. This is very fast <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table.to_lance().optimize.optimize_indices()</code></span></div></div></div></div><div id=chatlog__message-container-1207781783945355327 class=chatlog__message-container data-message-id=1207781783945355327><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 15, 2024 3:13â€¯PM">3:13â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>and if you added a LOT of vectors, you can always just do a full reindex at that time</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1207800480097501286 class=chatlog__message-container data-message-id=1207800480097501286><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/809863396723130429/63a8cbd9255e5a064f03eb85f7c05a62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1207781783945355327')"> and if you added a LOT of vectors, you can always just do a full reindex at that time </span></div></div><div class=chatlog__header><span class=chatlog__author title=kloos0961 data-user-id=809863396723130429>kloos</span> <span class=chatlog__timestamp title="Thursday, February 15, 2024 4:27â€¯PM"><a href=#chatlog__message-container-1207800480097501286>2/15/2024 4:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>got it, thank you!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1209613301496156242 class=chatlog__message-container data-message-id=1209613301496156242><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/809863396723130429/63a8cbd9255e5a064f03eb85f7c05a62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kloos0961 data-user-id=809863396723130429>kloos</span> <span class=chatlog__timestamp title="Tuesday, February 20, 2024 4:31â€¯PM"><a href=#chatlog__message-container-1209613301496156242>2/20/2024 4:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Questions about lancedb: Do you have any good ideas of speeding up the table insert process? I&#39;ve been doing some research and found this old post: <a href="https://github.com/lancedb/lancedb/issues/213">https://github.com/lancedb/lancedb/issues/213</a> not sure if the &quot;fan-out fan-in&quot; method mentioned there is outdated, but I think I  can still use multi-processor for the embedding generation and then use table.merge_insert() to do bulk update to the table?  Does .merge_insert() have any performance difference with .add()? Also, changing the df to pyarrow format also helps right?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210392818787557436 class=chatlog__message-container data-message-id=1210392818787557436><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 8:08â€¯PM"><a href=#chatlog__message-container-1210392818787557436>2/22/2024 8:08â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello python users,

I&#39;m prototyping async support for lancedb and I&#39;m looking for some input.  Should we deprecate and eventually discontinue our sync API so that our API is only async (where applicable)?  Or do we need to try and maintain synchronous wrappers around our async methods?  For example, have both <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add_sync</code> (the latter would use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">asyncio.run</code> to run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code>)

I&#39;m curious to know what people expect?  What do they see other libraries do?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210393694063165581 class=chatlog__message-container data-message-id=1210393694063165581><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/250701525016510464/c38c60d7f318094f79f9051134c84985.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=justinrmiller data-user-id=250701525016510464>Justin Miller</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 8:12â€¯PM"><a href=#chatlog__message-container-1210393694063165581>2/22/2024 8:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I primarily use FastAPI now but when I still used Flask (even 2.x), the async support was pretty poor. It may limit what theyâ€™re able to easily do with the library.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210394903096336465 class=chatlog__message-container data-message-id=1210394903096336465><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1210392818787557436')"> Hello python users,

I&#39;m prototyping async support for lancedb and I&#39;m looking for some input.  Should we deprecate and eventually discontinue our sync API so that our API is only async (where applicable)?  Or do we need to try and maintain synchronous wrappers around our async methods?  For example, have both <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add_sync</code> (the latter would use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">asyncio.run</code> to run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code>)

I&#39;m curious to know what people expect?  What do they see other libraries do? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 8:17â€¯PM"><a href=#chatlog__message-container-1210394903096336465>2/22/2024 8:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>actually i was thinking we&#39;d have Table.add and AsyncTable.add</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone1><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ» src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fb.svg loading=lazy> <span class=chatlog__reaction-count>2</span></div></div></div></div></div><div id=chatlog__message-container-1210394973137145938 class=chatlog__message-container data-message-id=1210394973137145938><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, February 22, 2024 8:17â€¯PM">8:17â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">db = lancedb.connect(...)</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">async_db = lancedb.connect(..., async=True)</code> or <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.connect_async(...)</code></span> <span class=chatlog__edited-timestamp title="Thursday, February 22, 2024 8:17â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone3><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ½ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fd.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210395371541368863 class=chatlog__message-container data-message-id=1210395371541368863><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 8:19â€¯PM"><a href=#chatlog__message-container-1210395371541368863>2/22/2024 8:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yeah, that probably makes more sense.  Then the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Connection</code> can just be a proxy on top of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">AsyncConnection</code>.  It&#39;s still the same underlying problem though which is that we have to maintain the proxy.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210397973960462337 class=chatlog__message-container data-message-id=1210397973960462337><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 8:29â€¯PM"><a href=#chatlog__message-container-1210397973960462337>2/22/2024 8:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yeah</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210431425644462140 class=chatlog__message-container data-message-id=1210431425644462140><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=skyfallsin data-user-id=117060055408312320>pradeep</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 10:42â€¯PM"><a href=#chatlog__message-container-1210431425644462140>2/22/2024 10:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="changkhiskhan">@changhiskhan</span> does open_table not follow symlinks?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210440186815578122 class=chatlog__message-container data-message-id=1210440186815578122><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, February 22, 2024 11:17â€¯PM"><a href=#chatlog__message-container-1210440186815578122>2/22/2024 11:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="wjones127">@Will Jones</span> would know better <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™"
    title="pray"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg"> , just confirming you&#39;re using python right? what&#39;s the error you&#39;re encountering?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210463855524708373 class=chatlog__message-container data-message-id=1210463855524708373><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=skyfallsin data-user-id=117060055408312320>pradeep</span> <span class=chatlog__timestamp title="Friday, February 23, 2024 12:51â€¯AM"><a href=#chatlog__message-container-1210463855524708373>2/23/2024 12:51â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yes I am using python. i have a symlink.lance pointing to the actual database.lance.

when i try to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">open_table</code> symlink.lance, it says the db doesn&#39;t exist and i should create it</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210622006958096389 class=chatlog__message-container data-message-id=1210622006958096389><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, February 23, 2024 11:19â€¯AM"> <a href=#chatlog__message-container-1210622006958096389>2/23/2024 11:19â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1210672570362372116 class=chatlog__message-container data-message-id=1210672570362372116><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/675128789646442557/1cb13b6385769af97ea2584be513124e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1210392818787557436')"> Hello python users,

I&#39;m prototyping async support for lancedb and I&#39;m looking for some input.  Should we deprecate and eventually discontinue our sync API so that our API is only async (where applicable)?  Or do we need to try and maintain synchronous wrappers around our async methods?  For example, have both <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add_sync</code> (the latter would use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">asyncio.run</code> to run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code>)

I&#39;m curious to know what people expect?  What do they see other libraries do? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span class=chatlog__timestamp title="Friday, February 23, 2024 2:40â€¯PM"><a href=#chatlog__message-container-1210672570362372116>2/23/2024 2:40â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;d say a lot of DBs I interface with in Python  provide both sync and async apis. I wonder if some of that is due to legacy reasons and that async support came as an additional feature on top of an existing client.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1212715109332557864 class=chatlog__message-container data-message-id=1212715109332557864><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dmitriy_10032 data-user-id=1205453432337731645>Dmitriy</span> <span class=chatlog__timestamp title="Thursday, February 29, 2024 5:56â€¯AM"><a href=#chatlog__message-container-1212715109332557864>2/29/2024 5:56â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I have a problem. I use this example <a href="https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/#hybrid-search-in-lancedb">https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/#hybrid-search-in-lancedb</a> and get error(
ModuleNotFoundError: No module named &#39;lance.vector&#39;; &#39;lance&#39; is not a package

Please help me.
Python 3.9
Lance: 1.2.1
lancedb: 0.5.7</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/"><div class="chatlog__markdown chatlog__markdown-preserve">Overview</div></a></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1212716609722912778 class=chatlog__message-container data-message-id=1212716609722912778><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=dmitriy_10032>Dmitriy</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1212715109332557864')"> Hello! I have a problem. I use this example <a href="https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/#hybrid-search-in-lancedb">https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/#hybrid-search-in-lancedb</a> and get error(
ModuleNotFoundError: No module named &#39;lance.vector&#39;; &#39;lance&#39; is not a package

Please help me.
Python 3.9
Lance: 1.2.1
lancedb: 0.5.7 </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Thursday, February 29, 2024 6:02â€¯AM"><a href=#chatlog__message-container-1212716609722912778>2/29/2024 6:02â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Can you double check if you&#39;ve copied correctly? Its working for me on lancedb 0.5.7 .. this is the code you&#39;re using right?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import os

import lancedb
import openai
from lancedb.embeddings import get_registry
from lancedb.pydantic import LanceModel, Vector

db = lancedb.connect(&quot;~/.lancedb&quot;)

# Ingest embedding function in LanceDB table
# Configuring the environment variable OPENAI_API_KEY
if &quot;OPENAI_API_KEY&quot; not in os.environ:
# OR set the key here as a variable
    openai.api_key = &quot;sk-...&quot;
embeddings = get_registry().get(&quot;openai&quot;).create()

class Documents(LanceModel):
    vector: Vector(embeddings.ndims()) = embeddings.VectorField()
    text: str = embeddings.SourceField()

table = db.create_table(&quot;documents&quot;, schema=Documents, mode=&quot;overwrite&quot;)

data = [
    { &quot;text&quot;: &quot;rebel spaceships striking from a hidden base&quot;},
    { &quot;text&quot;: &quot;have won their first victory against the evil Galactic Empire&quot;},
    { &quot;text&quot;: &quot;during the battle rebel spies managed to steal secret plans&quot;},
    { &quot;text&quot;: &quot;to the Empire&#39;s ultimate weapon the Death Star&quot;}
]

# ingest docs with auto-vectorization
table.add(data)

# Create a fts index before the hybrid search
table.create_fts_index(&quot;text&quot;, replace=True)
# hybrid search with default re-ranker
results = table.search(&quot;flower moon&quot;, query_type=&quot;hybrid&quot;).to_pandas()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1212717699806007306 class=chatlog__message-container data-message-id=1212717699806007306><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=ayushexel>AyushC</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1212716609722912778')"> Can you double check if you&#39;ve copied correctly? Its working for me on lancedb 0.5.7 .. this is the code you&#39;re using right?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import os

import lancedb
import openai
from lancedb.embeddings import get_registry
from lancedb.pydantic import LanceModel, Vector

db = lancedb.connect(&quot;~/.lancedb&quot;)

# Ingest embedding function in LanceDB table
# Configuring the environment variable OPENAI_API_KEY
if &quot;OPENAI_API_KEY&quot; not in os.environ:
# OR set the key here as a variable
    openai.api_key = &quot;sk-...&quot;
embeddings = get_registry().get(&quot;openai&quot;).create()

class Documents(LanceModel):
    vector: Vector(embeddings.ndims()) = embeddings.VectorField()
    text: str = embeddings.SourceField()

table = db.create_table(&quot;documents&quot;, schema=Documents, mode=&quot;overwrite&quot;)

data = [
    { &quot;text&quot;: &quot;rebel spaceships striking from a hidden base&quot;},
    { &quot;text&quot;: &quot;have won their first victory against the evil Galactic Empire&quot;},
    { &quot;text&quot;: &quot;during the battle rebel spies managed to steal secret plans&quot;},
    { &quot;text&quot;: &quot;to the Empire&#39;s ultimate weapon the Death Star&quot;}
]

# ingest docs with auto-vectorization
table.add(data)

# Create a fts index before the hybrid search
table.create_fts_index(&quot;text&quot;, replace=True)
# hybrid search with default re-ranker
results = table.search(&quot;flower moon&quot;, query_type=&quot;hybrid&quot;).to_pandas()</code> </span></div></div><div class=chatlog__header><span class=chatlog__author title=dmitriy_10032 data-user-id=1205453432337731645>Dmitriy</span> <span class=chatlog__timestamp title="Thursday, February 29, 2024 6:07â€¯AM"><a href=#chatlog__message-container-1212717699806007306>2/29/2024 6:07â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>No( 
    from lance.vector import vec_to_table
ModuleNotFoundError: No module named &#39;lance.vector&#39;; &#39;lance&#39; is not a package</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1212755165535404112 class=chatlog__message-container data-message-id=1212755165535404112><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dmitriy_10032 data-user-id=1205453432337731645>Dmitriy</span> <span class=chatlog__timestamp title="Thursday, February 29, 2024 8:36â€¯AM"><a href=#chatlog__message-container-1212755165535404112>2/29/2024 8:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I do qa bot for restaurant/pizzeria.
I want that my bot go to vectorDB and get relevant documents about user question.
If user ask &quot;Do you have pizza with mushrooms&quot;, I want exclude all documents where exist &quot;mushrooms&quot;
But now, vector search return all results with mushrooms</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214192802280378378 class=chatlog__message-container data-message-id=1214192802280378378><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=zmtbnv data-user-id=1214190716293746750>zmt</span> <span class=chatlog__timestamp title="Monday, March 4, 2024 7:48â€¯AM"><a href=#chatlog__message-container-1214192802280378378>3/4/2024 7:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all!  While creating index with following:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.create_index(
    num_partitions=2000,
    num_sub_vectors=128,
    metric=&#39;cosine&#39;,
    vector_column_name=&#39;text_vector&#39;,
    replace=True,
    accelerator=&#39;cuda&#39;,
)</code>
I get following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance/dataset.py:1462, in LanceDataset.create_index(self, column, index_type, name, metric, replace, num_partitions, ivf_centroids, pq_codebook, num_sub_vectors, accelerator, index_cache_size, shuffle_partition_batches, shuffle_partition_concurrency, **kwargs)
   1459 if shuffle_partition_concurrency is not None:
   1460     kwargs[&quot;shuffle_partition_concurrency&quot;] = shuffle_partition_concurrency
-&gt; 1462 self._ds.create_index(column, index_type, name, replace, kwargs)
   1463 return LanceDataset(self.uri, index_cache_size=index_cache_size)

OSError: LanceError(IO): LanceError(Index): Failed to assign PQ code: it is likely that distance is NaN or Inf, sub-vector=[
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
], /home/runner/work/lance/lance/rust/lance-index/src/vector/pq.rs:419:35,</code>
Did anyone encounter such error? Do we have any solution for this?

More context: I have 6M rows with 1024dim vectors created with sentence_transformer.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214228955209400371 class=chatlog__message-container data-message-id=1214228955209400371><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=zmtbnv>zmt</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1214192802280378378')"> Hi all!  While creating index with following:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.create_index(
    num_partitions=2000,
    num_sub_vectors=128,
    metric=&#39;cosine&#39;,
    vector_column_name=&#39;text_vector&#39;,
    replace=True,
    accelerator=&#39;cuda&#39;,
)</code>
I get following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance/dataset.py:1462, in LanceDataset.create_index(self, column, index_type, name, metric, replace, num_partitions, ivf_centroids, pq_codebook, num_sub_vectors, accelerator, index_cache_size, shuffle_partition_batches, shuffle_partition_concurrency, **kwargs)
   1459 if shuffle_partition_concurrency is not None:
   1460     kwargs[&quot;shuffle_partition_concurrency&quot;] = shuffle_partition_concurrency
-&gt; 1462 self._ds.create_index(column, index_type, name, replace, kwargs)
   1463 return LanceDataset(self.uri, index_cache_size=index_cache_size)

OSError: LanceError(IO): LanceError(Index): Failed to assign PQ code: it is likely that distance is NaN or Inf, sub-vector=[
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
    NaN,
], /home/runner/work/lance/lance/rust/lance-index/src/vector/pq.rs:419:35,</code>
Did anyone encounter such error? Do we have any solution for this?

More context: I have 6M rows with 1024dim vectors created with sentence_transformer. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Monday, March 4, 2024 10:12â€¯AM"><a href=#chatlog__message-container-1214228955209400371>3/4/2024 10:12â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Do you get the same error if you use the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">l2</code> metric instead of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code>?  I&#39;m wondering if the problem is an all-NaN input or perhaps some kind of all-zero input (which isn&#39;t valid for cosine)?  I think we should ideally handle both of those cases if we don&#39;t already (e.g. still create the index but those vectors won&#39;t be searchable) but I&#39;m curious which case is failing.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214488204200386570 class=chatlog__message-container data-message-id=1214488204200386570><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=zmtbnv data-user-id=1214190716293746750>zmt</span> <span class=chatlog__timestamp title="Tuesday, March 5, 2024 3:22â€¯AM"><a href=#chatlog__message-container-1214488204200386570>3/5/2024 3:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="wpace">@WestonPace</span> thanks for getting back. It worked with L2.  But cosine is better suited for my business challenge. Will experiment with different parameters. Cosine op based indexing works in pgvector. Are there any recommended best practices while indexing with lancedb?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214640515257995364 class=chatlog__message-container data-message-id=1214640515257995364><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Tuesday, March 5, 2024 1:27â€¯PM"><a href=#chatlog__message-container-1214640515257995364>3/5/2024 1:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>This is likely you have <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">NaN</code> in the input vector. Our latest version can filter out them automatically. Will have a release of LanceDB  soon</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214745637233627146 class=chatlog__message-container data-message-id=1214745637233627146><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=marcoswastaken data-user-id=1214743934580953139>marcos</span> <span class=chatlog__timestamp title="Tuesday, March 5, 2024 8:25â€¯PM"><a href=#chatlog__message-container-1214745637233627146>3/5/2024 8:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! I&#39;m working through this example in the docs <a href="https://github.com/lancedb/lancedb/blob/main/docs/src/notebooks/youtube_transcript_search.ipynb">https://github.com/lancedb/lancedb/blob/main/docs/src/notebooks/youtube_transcript_search.ipynb</a> and when I run Cell 6 I get this warning: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">DeprecationWarning: Function with_embeddings is deprecated and will be removed in a future version</code>. Is there a suggested way to load the table that isn&#39;t deprecated?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214934447481294868 class=chatlog__message-container data-message-id=1214934447481294868><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Wednesday, March 6, 2024 8:55â€¯AM"><a href=#chatlog__message-container-1214934447481294868>3/6/2024 8:55â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, I&#39;m trying out lancedb for the first time and I&#39;m a little confused about how to generate embeddings when I insert in a LanceModel class with a vector field. 

I&#39;m reading in these text-chunks from my file and my vector is automatically set to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">None</code> by default. However, when I insert these values into my database, they get converted to a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">[0,0,0,./....]</code> vector instead. How can I get around this?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">from pydantic import BaseModel
from lancedb.pydantic import LanceModel, Vector
from lancedb.embeddings import get_registry

openai = get_registry().get(&quot;openai&quot;).create(model=&quot;text-embedding-3-large&quot;, ndims=256)

class TextChunk(LanceModel):
    id: int
    doc_id: int
    chunk_num: int
    start_pos: int
    end_pos: int
    text: str = openai.SourceField()
    vector: Vector(openai.ndims()) = openai.VectorField(default=None)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214936809042219073 class=chatlog__message-container data-message-id=1214936809042219073><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, March 6, 2024 9:05â€¯AM"> <a href=#chatlog__message-container-1214936809042219073>3/6/2024 9:05â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1214937189608062981 class=chatlog__message-container data-message-id=1214937189608062981><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, March 6, 2024 9:06â€¯AM"> <a href=#chatlog__message-container-1214937189608062981>3/6/2024 9:06â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1214970532651597885 class=chatlog__message-container data-message-id=1214970532651597885><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ilovelangchain_13671 data-user-id=1067027948655358033>ILoveDVC</span> <span class=chatlog__timestamp title="Wednesday, March 6, 2024 11:19â€¯AM"><a href=#chatlog__message-container-1214970532651597885>3/6/2024 11:19â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, Is it possible to load a premade vector store into LangChain? I.e. instead of having to run something like this everytime:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain_community.vectorstores import LanceDB

text_splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=20)
all_splits = text_splitter.split_documents(data)
vectorstore = LanceDB.from_documents(documents=all_splits, embeddings)</code>

maybe I can run this once and then load this via something like:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">vectorstore = LanceDB.from_store(&quot;/path/to/lancedb&quot;)  </code>

Thanks!</span> <span class=chatlog__edited-timestamp title="Wednesday, March 6, 2024 1:54â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1215112131335159808 class=chatlog__message-container data-message-id=1215112131335159808><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/709740176565469256/41e6dda2e43fdfbf87ad4f5114662876.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ilovelangchain_13671>ILoveDVC</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1214970532651597885')"> Hi, Is it possible to load a premade vector store into LangChain? I.e. instead of having to run something like this everytime:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain_community.vectorstores import LanceDB

text_splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=20)
all_splits = text_splitter.split_documents(data)
vectorstore = LanceDB.from_documents(documents=all_splits, embeddings)</code>

maybe I can run this once and then load this via something like:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">vectorstore = LanceDB.from_store(&quot;/path/to/lancedb&quot;)  </code>

Thanks! </span> <span class=chatlog__reply-edited-timestamp title="Wednesday, March 6, 2024 1:54â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=rdx99. data-user-id=709740176565469256>rdx99.</span> <span class=chatlog__timestamp title="Wednesday, March 6, 2024 8:41â€¯PM"><a href=#chatlog__message-container-1215112131335159808>3/6/2024 8:41â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="https://github.com/lancedb/lancedb/discussions/1068">https://github.com/lancedb/lancedb/discussions/1068</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/discussions/1068><div class="chatlog__markdown chatlog__markdown-preserve">How Load a premade LanceDB vector database with LangChain? &#183; lanced...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Hi, Is it possible to load a premade LanceDB vector database with LangChain? I.e. instead of having to run something like this everytime: from langchain.text_splitter import RecursiveCharacterTextS...</div></div></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1215274845160472596 class=chatlog__message-container data-message-id=1215274845160472596><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Thursday, March 7, 2024 7:28â€¯AM"><a href=#chatlog__message-container-1215274845160472596>3/7/2024 7:28â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, I&#39;m facing some issues with defining a table in my local lancedb database. I&#39;ve tried to specify that the Vector database should encode a vector with ndim of 256 but it seems like that&#39;s not being enforced at all.

Here&#39;s the pydantic model I&#39;ve defined for my text chunks

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">openai = get_registry().get(&quot;openai&quot;).create(model=&quot;text-embedding-3-large&quot;, ndims=256)


class TextChunk(LanceModel):
    id: int
    doc_id: int
    chunk_num: int
    start_pos: int
    end_pos: int
    text: str = openai.SourceField()
    vector: Vector(openai.ndims()) = openai.VectorField(default=None)</code>

I&#39;ve tried reproducing the issue below here in a small terminal screen

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Python 3.12.2 (main, Feb  6 2024, 20:19:44) [Clang 15.0.0 (clang-1500.1.0.2.5)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; from lancedb.embeddings import get_registry
&gt;&gt;&gt; openai = get_registry().get(&quot;openai&quot;).create(model=&quot;text-embedding-3-large&quot;, ndims=256)
&gt;&gt;&gt; 
&gt;&gt;&gt; openai.ndims()
1536</code>

Thank you so much!</span> <span class=chatlog__edited-timestamp title="Thursday, March 7, 2024 7:29â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1215275536360935425 class=chatlog__message-container data-message-id=1215275536360935425><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=ivanleomk>Ivan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1215274845160472596')"> Hi team, I&#39;m facing some issues with defining a table in my local lancedb database. I&#39;ve tried to specify that the Vector database should encode a vector with ndim of 256 but it seems like that&#39;s not being enforced at all.

Here&#39;s the pydantic model I&#39;ve defined for my text chunks

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">openai = get_registry().get(&quot;openai&quot;).create(model=&quot;text-embedding-3-large&quot;, ndims=256)


class TextChunk(LanceModel):
    id: int
    doc_id: int
    chunk_num: int
    start_pos: int
    end_pos: int
    text: str = openai.SourceField()
    vector: Vector(openai.ndims()) = openai.VectorField(default=None)</code>

I&#39;ve tried reproducing the issue below here in a small terminal screen

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Python 3.12.2 (main, Feb  6 2024, 20:19:44) [Clang 15.0.0 (clang-1500.1.0.2.5)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; from lancedb.embeddings import get_registry
&gt;&gt;&gt; openai = get_registry().get(&quot;openai&quot;).create(model=&quot;text-embedding-3-large&quot;, ndims=256)
&gt;&gt;&gt; 
&gt;&gt;&gt; openai.ndims()
1536</code>

Thank you so much! </span> <span class=chatlog__reply-edited-timestamp title="Thursday, March 7, 2024 7:29â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Thursday, March 7, 2024 7:31â€¯AM"><a href=#chatlog__message-container-1215275536360935425>3/7/2024 7:31â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Try Passing dim=256 instead of ndims?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1215278726732980224 class=chatlog__message-container data-message-id=1215278726732980224><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Thursday, March 7, 2024 7:43â€¯AM"><a href=#chatlog__message-container-1215278726732980224>3/7/2024 7:43â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a difference between dim and ndim?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1215477647103098880 class=chatlog__message-container data-message-id=1215477647103098880><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=khanbilal data-user-id=401951386234912779>cloudbuddy898</span> <span class=chatlog__timestamp title="Thursday, March 7, 2024 8:54â€¯PM"><a href=#chatlog__message-container-1215477647103098880>3/7/2024 8:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team,
I&#39;m new to Lancedb and going through a PoC for connectivity to different storage options in Azure.
I&#39;ve gone though the docs on lancedb portal but can&#39;t make it working.
Can you please help understand how we can connect lancedb client to Azure Blob or file storage?

I receive below error when trying to connect with a blob container.

OSError: LanceError(IO): Generic MicrosoftAzure error: Account must be specified, D:\a\lance\lance\rust\lance-io\src\object_store.rs:692:30</span> <span class=chatlog__edited-timestamp title="Thursday, March 7, 2024 9:19â€¯PM">(edited)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1215477646897586206/image.png?ex=697b6685&amp;is=697a1505&amp;hm=6ef2a5ae6205a83abc1598c5ebed7d6e0bca391ad6bb425fd72a39c26cb80c89&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1215477646897586206/image.png?ex=697b6685&amp;is=697a1505&amp;hm=6ef2a5ae6205a83abc1598c5ebed7d6e0bca391ad6bb425fd72a39c26cb80c89&amp;" alt="Image attachment" title="Image: image.png (30.08 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216422615699292170 class=chatlog__message-container data-message-id=1216422615699292170><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 12:29â€¯PM"><a href=#chatlog__message-container-1216422615699292170>3/10/2024 12:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, is there any way that we can implement a query like the following in lancedb? Here is the schema of my chunk model.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">class TextChunk(LanceModel):
    doc_id: str
    text: str = openai.SourceField()
    vector: Vector(openai.ndims()) = openai.VectorField(default=None)
    post_title: str
    publish_date: datetime
    chunk_id: int
    source: str</code>
Ideally it should be able to calculate the maximum chunk_id for each doc_id for those that are selected
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">SELECT doc_id, max(chunk_index)
FROM chunks</code></span> <span class=chatlog__edited-timestamp title="Sunday, March 10, 2024 12:29â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216487338037739670 class=chatlog__message-container data-message-id=1216487338037739670><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=marcoswastaken data-user-id=1214743934580953139>marcos</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 4:46â€¯PM"><a href=#chatlog__message-container-1216487338037739670>3/10/2024 4:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m following the example here: <a href="https://lancedb.github.io/lancedb/embeddings/custom_embedding_function/">https://lancedb.github.io/lancedb/embeddings/custom_embedding_function/</a> but I get this error: ImportError: cannot import name &#39;register&#39; from &#39;lancedb.embeddings&#39;

Am I missing something?</span> <span class=chatlog__edited-timestamp title="Sunday, March 10, 2024 4:47â€¯PM">(edited)</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://lancedb.github.io/lancedb/embeddings/custom_embedding_function/"><div class="chatlog__markdown chatlog__markdown-preserve">User-defined embedding functions</div></a></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216488539781464095 class=chatlog__message-container data-message-id=1216488539781464095><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=marcoswastaken>marcos</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216487338037739670')"> I&#39;m following the example here: <a href="https://lancedb.github.io/lancedb/embeddings/custom_embedding_function/">https://lancedb.github.io/lancedb/embeddings/custom_embedding_function/</a> but I get this error: ImportError: cannot import name &#39;register&#39; from &#39;lancedb.embeddings&#39;

Am I missing something? </span> <span class=chatlog__reply-edited-timestamp title="Sunday, March 10, 2024 4:47â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 4:51â€¯PM"><a href=#chatlog__message-container-1216488539781464095>3/10/2024 4:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>looks like we need to update the code snippet in the docs. Try <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">from lancedb.embeddings.registry import register</code></span></div></div></div></div><div id=chatlog__message-container-1216488613819187280 class=chatlog__message-container data-message-id=1216488613819187280><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 10, 2024 4:51â€¯PM">4:51â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>there was a refactor of the code itself but probably that example didn&#39;t get updated</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216488936600375437 class=chatlog__message-container data-message-id=1216488936600375437><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216488539781464095')"> looks like we need to update the code snippet in the docs. Try <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">from lancedb.embeddings.registry import register</code> </span></div></div><div class=chatlog__header><span class=chatlog__author title=marcoswastaken data-user-id=1214743934580953139>marcos</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 4:52â€¯PM"><a href=#chatlog__message-container-1216488936600375437>3/10/2024 4:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I did this:
from lancedb.embeddings import EmbeddingFunctionRegistry, TextEmbeddingFunction
and now I get the error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
Cell In[21], line 6
      2 from lancedb.embeddings import EmbeddingFunctionRegistry, TextEmbeddingFunction
      3 from lancedb.util import attempt_import_or_raise
      5 @EmbeddingFunctionRegistry.register(&quot;sentence-transformers&quot;)
----&gt; 6 class SentenceTransformerEmbeddings(TextEmbeddingFunction):
      7     name: str = EMBEDDINGS_MODEL
      8     # set more default instance vars like device, etc.

Cell In[21], line 22, in SentenceTransformerEmbeddings()
     19         self._ndims = len(self.generate_embeddings(&quot;foo&quot;)[0])
     20     return self._ndims
---&gt; 22 @cached(cache={}) 
     23 def _embedding_model(self):
     24     return sentence_transformers.SentenceTransformer(name)

NameError: name &#39;cached&#39; is not defined</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216489567260115184 class=chatlog__message-container data-message-id=1216489567260115184><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 4:55â€¯PM"><a href=#chatlog__message-container-1216489567260115184>3/10/2024 4:55â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>instead of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cached</code> use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">@weak_lru(maxsize=1)</code> where <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">weak_lru</code> is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">from lancedb.embeddings.utils import weak_lru</code></span></div></div></div></div><div id=chatlog__message-container-1216489909876031570 class=chatlog__message-container data-message-id=1216489909876031570><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 10, 2024 4:56â€¯PM">4:56â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Would you be open to doing me a favor and open a github issue with all these things you ran into implementing your own embedding function? it would be really helpful for us to make the devex smoother</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216490407853166652 class=chatlog__message-container data-message-id=1216490407853166652><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216489909876031570')"> Would you be open to doing me a favor and open a github issue with all these things you ran into implementing your own embedding function? it would be really helpful for us to make the devex smoother </span></div></div><div class=chatlog__header><span class=chatlog__author title=marcoswastaken data-user-id=1214743934580953139>marcos</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 4:58â€¯PM"><a href=#chatlog__message-container-1216490407853166652>3/10/2024 4:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yeah for sure! Thaks for your quick reply. I&#39;m still getting an error but this one is probably my fault. Here it is:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
Cell In[22], line 6
      3 from lancedb.embeddings.utils import weak_lru
      4 from lancedb.util import attempt_import_or_raise
----&gt; 6 @EmbeddingFunctionRegistry.register(&quot;sentence-transformers&quot;)
      7 class SentenceTransformerEmbeddings(TextEmbeddingFunction):
      8     name: str = EMBEDDINGS_MODEL
      9     # set more default instance vars like device, etc.

File ~/miniconda3/envs/aware/lib/python3.11/site-packages/lancedb/embeddings/registry.py:71, in EmbeddingFunctionRegistry.register.&lt;locals&gt;.decorator(cls)
     69 if not issubclass(cls, EmbeddingFunction):
     70     raise TypeError(&quot;Must be a subclass of EmbeddingFunction&quot;)
---&gt; 71 if cls.__name__ in self._functions:
     72     raise KeyError(f&quot;{cls.__name__} was already registered&quot;)
     73 key = alias or cls.__name__

AttributeError: &#39;str&#39; object has no attribute &#39;_functions&#39;
</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216491108343877702 class=chatlog__message-container data-message-id=1216491108343877702><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 5:01â€¯PM"><a href=#chatlog__message-container-1216491108343877702>3/10/2024 5:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>i think instead of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">@EmbeddingFunctionRegistry.register(&quot;sentence-transformers&quot;)</code> you want <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">@register(&quot;sentence-transformers&quot;)</code> where <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">from lancedb.embeddings.registry import register</code></span></div></div></div></div><div id=chatlog__message-container-1216491243823956069 class=chatlog__message-container data-message-id=1216491243823956069><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 10, 2024 5:01â€¯PM">5:01â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>and you&#39;ll want to change the name from <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">sentence-transformers</code> to something else since there&#39;s already one with that name</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216491895077867640 class=chatlog__message-container data-message-id=1216491895077867640><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216491243823956069')"> and you&#39;ll want to change the name from <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">sentence-transformers</code> to something else since there&#39;s already one with that name </span></div></div><div class=chatlog__header><span class=chatlog__author title=marcoswastaken data-user-id=1214743934580953139>marcos</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 5:04â€¯PM"><a href=#chatlog__message-container-1216491895077867640>3/10/2024 5:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Okay, I&#39;ll give that a shot. When I&#39;m filling out an issue request, do you want me to link to the doc page?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216493939243352215 class=chatlog__message-container data-message-id=1216493939243352215><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Sunday, March 10, 2024 5:12â€¯PM"><a href=#chatlog__message-container-1216493939243352215>3/10/2024 5:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>please do. thanks!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216798556321746974 class=chatlog__message-container data-message-id=1216798556321746974><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1139624821798473842/c82b3fa769ed6e6ffdea579381ed5f5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ascillitoe data-user-id=1139624821798473842>Ash</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 1:23â€¯PM"><a href=#chatlog__message-container-1216798556321746974>3/11/2024 1:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all, 

Bringing up an old conversation (<a href="https://discord.com/channels/1030247538198061086/1030247538667827251/1167524901280809082" onclick="scrollToMessage(event, '1167524901280809082')">https://discord.com/channels/1030247538198061086/1030247538667827251/1167524901280809082</a>, but does anyone have any guidance around how to quickly extract vectors from a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceQueryBuilder</code> and convert to a Numpy NDArray or PyTorch Tensor for use in downstream ML pipelines?

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_pandas().to_numpy()</code> results in a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">(n_vectors, 1)</code> ndarray with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">dtype=object</code>. The <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">np.stack()</code> required to get <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">(n_vectors, n_dim) </code>is then very slow (~5 seconds for 500k vectors).</span> <span class=chatlog__edited-timestamp title="Monday, March 11, 2024 1:23â€¯PM">(edited)</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://discord.com/channels/1030247538198061086/1030247538667827251/1167524901280809082,><div class="chatlog__markdown chatlog__markdown-preserve">Discord - A New Way to Chat with Friends &amp; Communities</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Discord is the easiest way to communicate over voice, video, and text.  Chat, hang out, and stay close with your friends and communities.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216807055889797120 class=chatlog__message-container data-message-id=1216807055889797120><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1139624821798473842/c82b3fa769ed6e6ffdea579381ed5f5c.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=ascillitoe>Ash</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216798556321746974')"> Hi all, 

Bringing up an old conversation (<a href="https://discord.com/channels/1030247538198061086/1030247538667827251/1167524901280809082" onclick="scrollToMessage(event, '1167524901280809082')">https://discord.com/channels/1030247538198061086/1030247538667827251/1167524901280809082</a>, but does anyone have any guidance around how to quickly extract vectors from a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceQueryBuilder</code> and convert to a Numpy NDArray or PyTorch Tensor for use in downstream ML pipelines?

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_pandas().to_numpy()</code> results in a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">(n_vectors, 1)</code> ndarray with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">dtype=object</code>. The <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">np.stack()</code> required to get <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">(n_vectors, n_dim) </code>is then very slow (~5 seconds for 500k vectors). </span> <span class=chatlog__reply-edited-timestamp title="Monday, March 11, 2024 1:23â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 1:56â€¯PM"><a href=#chatlog__message-container-1216807055889797120>3/11/2024 1:56â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I wonder if it is possible to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">reshape</code> instead of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">stack</code> for numpy?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216810094512308314 class=chatlog__message-container data-message-id=1216810094512308314><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 2:08â€¯PM"><a href=#chatlog__message-container-1216810094512308314>3/11/2024 2:08â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_arrow()[&quot;vector&quot;].values.reshape([..., ...])</code> should work ?</span></div></div></div></div><div id=chatlog__message-container-1216810151508574258 class=chatlog__message-container data-message-id=1216810151508574258><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, March 11, 2024 2:09â€¯PM">2:09â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>might need to call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">combine_chunks</code> somewhere in there</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216810722340896858 class=chatlog__message-container data-message-id=1216810722340896858><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216807055889797120')"> I wonder if it is possible to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">reshape</code> instead of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">stack</code> for numpy? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 2:11â€¯PM"><a href=#chatlog__message-container-1216810722340896858>3/11/2024 2:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>just calling reshape after to_pandas() doesn&#39;t quite work because the column is numpy array of object where each element is a numpy array of float</span></div></div></div></div><div id=chatlog__message-container-1216810796512710686 class=chatlog__message-container data-message-id=1216810796512710686><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, March 11, 2024 2:11â€¯PM">2:11â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>so it&#39;s not a homogenous 2d numpy array</span></div></div></div></div><div id=chatlog__message-container-1216810885234823168 class=chatlog__message-container data-message-id=1216810885234823168><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, March 11, 2024 2:12â€¯PM">2:12â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>(unless i&#39;m missing a numpy api which handles that more elegantly)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216812263118213202 class=chatlog__message-container data-message-id=1216812263118213202><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1139624821798473842/c82b3fa769ed6e6ffdea579381ed5f5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ascillitoe data-user-id=1139624821798473842>Ash</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 2:17â€¯PM"><a href=#chatlog__message-container-1216812263118213202>3/11/2024 2:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ah ha! Thank you for the tip <span class="chatlog__markdown-mention" title="changkhiskhan">@changhiskhan</span> , the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">combine_chunks</code> was the missing ingredient! This works now <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"> 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">np_array = tbl.to_arrow()[&#39;vector&#39;].combine_chunks().values.to_numpy()
np_array = np_array.reshape(-1, n_dim)</code></span> <span class=chatlog__edited-timestamp title="Monday, March 11, 2024 2:19â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216879001570902120 class=chatlog__message-container data-message-id=1216879001570902120><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=khanbilal>cloudbuddy898</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1215477647103098880')"> Hi Team,
I&#39;m new to Lancedb and going through a PoC for connectivity to different storage options in Azure.
I&#39;ve gone though the docs on lancedb portal but can&#39;t make it working.
Can you please help understand how we can connect lancedb client to Azure Blob or file storage?

I receive below error when trying to connect with a blob container.

OSError: LanceError(IO): Generic MicrosoftAzure error: Account must be specified, D:\a\lance\lance\rust\lance-io\src\object_store.rs:692:30 </span> <span class=chatlog__reply-edited-timestamp title="Thursday, March 7, 2024 9:19â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=khanbilal data-user-id=401951386234912779>cloudbuddy898</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 6:42â€¯PM"><a href=#chatlog__message-container-1216879001570902120>3/11/2024 6:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="changkhiskhan">@changhiskhan</span> appreciate if you can help with this query? How do we manage authentication to Azure with Lancedb python package? Do you have any example for Azure connectivity? Thanks</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1216879992680743062 class=chatlog__message-container data-message-id=1216879992680743062><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=khanbilal>cloudbuddy898</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1216879001570902120')"> <span class="chatlog__markdown-mention" title="changkhiskhan">@changhiskhan</span> appreciate if you can help with this query? How do we manage authentication to Azure with Lancedb python package? Do you have any example for Azure connectivity? Thanks </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Monday, March 11, 2024 6:46â€¯PM"><a href=#chatlog__message-container-1216879992680743062>3/11/2024 6:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>we use the rust object store crate from arrow. i believe it should just pick up environment variables normally (<a href="https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-data-operations-cli)">https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-data-operations-cli)</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-data-operations-cli><div class="chatlog__markdown chatlog__markdown-preserve">Authorize access to blob data with Azure CLI - Azure Storage</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Specify how to authorize data operations against blob data with the Azure CLI. You can authorize data operations using Microsoft Entra credentials, with the account access key, or with a shared access signature (SAS) token.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/zfaDLlxJ5WEAJi1SmcyBHN8_2fRmcM8Fwob5QzdJyUg/https/learn.microsoft.com/en-us/media/open-graph-image.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/zfaDLlxJ5WEAJi1SmcyBHN8_2fRmcM8Fwob5QzdJyUg/https/learn.microsoft.com/en-us/media/open-graph-image.png alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217230632653164604 class=chatlog__message-container data-message-id=1217230632653164604><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Tuesday, March 12, 2024 5:59â€¯PM"><a href=#chatlog__message-container-1217230632653164604>3/12/2024 5:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m having some issues with defining a Pydantic class for text and embeddings and then adding to a table. Where am I going wrong here? I need to iterate over elements and add them to a table, but Pydantic validation requires the embeddings before being automatically handles upon adding the data to the table.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">registry = EmbeddingFunctionRegistry.get_instance()
embed_func = registry.get(&quot;openai&quot;).create(name=&quot;text-embedding-3-small&quot;, dim=1024)

class ExtractedData(LanceModel):
    tld: str = Field(description=&quot;The top-level domain of the website.&quot;)
    url: str = Field(description=&quot;The URL of the website.&quot;)
    text_chunk: str = embed_func.SourceField()
    embeddings: Vector(embed_func.ndims()) = embed_func.VectorField()
    text_as_html: Optional[str] = None
    parent_id: Optional[str] = None
    category_depth: Optional[int] = None
    last_modified: Optional[str] = None
    link_urls: Optional[List[str]] = Field(default_factory=list)
    link_texts: Optional[List[str]] = Field(default_factory=list)
    is_continuation: Optional[bool] = None</code></span></div></div></div></div><div id=chatlog__message-container-1217230725095362570 class=chatlog__message-container data-message-id=1217230725095362570><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Tuesday, March 12, 2024 6:00â€¯PM">6:00â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">async def process_html_content(url, tld, include_metadata=True, ssl_verify=True, headers=None, html_assemble_articles=False):
    
    try:
        table = db.create_table(&quot;ExtractedData&quot;, schema=ExtractedData, mode=&quot;overwrite&quot;, exist_ok=True)
        logger.info(&quot;Creating ExtractedData table...&quot;)
        table.create_fts_index([&quot;text_chunk&quot;, &quot;text_as_html&quot;, &quot;parent_id&quot;, &quot;url&quot;], replace=True)
    except Exception as e:
        logger.error(f&quot;Error during table creation or FTS index creation: {e}&quot;)
        raise

    if headers is None:
        headers = {&quot;User-Agent&quot;: &quot;Medscrape/1.0&quot;}
    
    elements = partition_html(
        url=url, 
        include_metadata=include_metadata, 
        ssl_verify=ssl_verify, 
        headers=headers, 
        html_assemble_articles=html_assemble_articles, 
        chunking_strategy=&quot;by-title&quot;,
        max_characters=1000,  
        new_after_n_chars=500  
    )
    
    extracted_data_list = []
    for element in elements:
        metadata = element.metadata.to_dict()
        embeddings = [element.text]
        
        extracted_data = ExtractedData(
            tld = tld,
            url = url,
            text_chunk = element.text,
            embeddings= embeddings,
            text_as_html = metadata.get(&quot;text_as_html&quot;, None),
            parent_id = metadata.get(&quot;parent_id&quot;, None),
            category_depth = metadata.get(&quot;category_depth&quot;, None),
            last_modified = metadata.get(&quot;last_modified&quot;, None),
            link_urls = metadata.get(&quot;link_urls&quot;, []),
            link_texts = metadata.get(&quot;link_texts&quot;, []),
            is_continuation = metadata.get(&quot;is_continuation&quot;, None),
        )
        extracted_data_list.append(extracted_data)
    
    logger.info(&quot;Adding extracted data to the table...&quot;)
    table.add(extracted_data_list)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217237017008799856 class=chatlog__message-container data-message-id=1217237017008799856><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Tuesday, March 12, 2024 6:25â€¯PM"><a href=#chatlog__message-container-1217237017008799856>3/12/2024 6:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I need to test it, but I think I figured it out. Just can&#39;t validate with Pydantic in the loop - had to set it as a dictionary instead.</span></div></div></div></div><div id=chatlog__message-container-1217237354159407288 class=chatlog__message-container data-message-id=1217237354159407288><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Tuesday, March 12, 2024 6:26â€¯PM">6:26â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Where do you set the API key for the openai embedding? have the key in the .env file, but am getting an invalid request  in the response from OAI</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217237674474209346 class=chatlog__message-container data-message-id=1217237674474209346><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, March 12, 2024 6:27â€¯PM"> <a href=#chatlog__message-container-1217237674474209346>3/12/2024 6:27â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217333529151803392 class=chatlog__message-container data-message-id=1217333529151803392><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Wednesday, March 13, 2024 12:48â€¯AM"><a href=#chatlog__message-container-1217333529151803392>3/13/2024 12:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>anyways, <span class="chatlog__markdown-mention" title="jmeks">@JMEKS</span> thanks for the feedback, super helpful!</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=fire><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ”¥ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f525.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217333738162094081 class=chatlog__message-container data-message-id=1217333738162094081><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1217333529151803392')"> anyways, <span class="chatlog__markdown-mention" title="jmeks">@JMEKS</span> thanks for the feedback, super helpful! </span></div></div><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Wednesday, March 13, 2024 12:49â€¯AM"><a href=#chatlog__message-container-1217333738162094081>3/13/2024 12:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>thanks for the quick responses!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217515741876715591 class=chatlog__message-container data-message-id=1217515741876715591><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Wednesday, March 13, 2024 12:52â€¯PM"><a href=#chatlog__message-container-1217515741876715591>3/13/2024 12:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a quick way to show everything in a current table? would I just call tbl.to_pandas() ?</span></div></div></div></div><div id=chatlog__message-container-1217517269790490775 class=chatlog__message-container data-message-id=1217517269790490775><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, March 13, 2024 12:58â€¯PM">12:58â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Got it. Realized it was just adding an empty .search() before the pandas</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217519287028158524 class=chatlog__message-container data-message-id=1217519287028158524><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Wednesday, March 13, 2024 1:06â€¯PM"><a href=#chatlog__message-container-1217519287028158524>3/13/2024 1:06â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yeah, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">to_arrow()</code> also works</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1217851795242483763 class=chatlog__message-container data-message-id=1217851795242483763><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Thursday, March 14, 2024 11:08â€¯AM"><a href=#chatlog__message-container-1217851795242483763>3/14/2024 11:08â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Say I have a table based on the schema ExtractedData â€” If I have a vector field generating embeddings in a dataset do I need to include that field in my response model when I call .to_pydantic(ResponseData)  for optimal responses from my chosen LLM or is that unnecessary after the hybrid search has been performed in my search?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1218251491526180874 class=chatlog__message-container data-message-id=1218251491526180874><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=jmeks>JMEKS</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1217851795242483763')"> Say I have a table based on the schema ExtractedData â€” If I have a vector field generating embeddings in a dataset do I need to include that field in my response model when I call .to_pydantic(ResponseData)  for optimal responses from my chosen LLM or is that unnecessary after the hybrid search has been performed in my search? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Friday, March 15, 2024 1:36â€¯PM"><a href=#chatlog__message-container-1218251491526180874>3/15/2024 1:36â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>i believe extra fields should just be ignored so <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ResponseData</code> does NOT need to contain all fields returned by LanceDB</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1218319270874710038 class=chatlog__message-container data-message-id=1218319270874710038><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1218251491526180874')"> i believe extra fields should just be ignored so <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ResponseData</code> does NOT need to contain all fields returned by LanceDB </span></div></div><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Friday, March 15, 2024 6:05â€¯PM"><a href=#chatlog__message-container-1218319270874710038>3/15/2024 6:05â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ok so embeddings will really only be effective for db retrieval with lance methods, not necessarily interactions with LLMs that are using the returned data? I guess if I use a reranked and limit the number of results in my initial search then its kind of a moot point, right?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1218333337299718214 class=chatlog__message-container data-message-id=1218333337299718214><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=jmeks>JMEKS</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1218319270874710038')"> ok so embeddings will really only be effective for db retrieval with lance methods, not necessarily interactions with LLMs that are using the returned data? I guess if I use a reranked and limit the number of results in my initial search then its kind of a moot point, right? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Friday, March 15, 2024 7:01â€¯PM"><a href=#chatlog__message-container-1218333337299718214>3/15/2024 7:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Right the original vector is not useful for those purposes</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1218677088962482239 class=chatlog__message-container data-message-id=1218677088962482239><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Saturday, March 16, 2024 5:47â€¯PM"><a href=#chatlog__message-container-1218677088962482239>3/16/2024 5:47â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings &quot;HTTP/1.1 400 Bad Request&quot;
Retrying in 3.61 seconds due to Error code: 400 - {&#39;error&#39;: {&#39;message&#39;: &quot;&#39;$.input&#39; is invalid. </code>

Getting this error still when trying to call the OpenAI embeddings. The same key is working elsewhere in my repo.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">openai = get_registry().get(&quot;openai&quot;)
embed_func = openai.create(name=&quot;text-embedding-3-small&quot;)</code>
This is how I have it setup</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1218716408968515694 class=chatlog__message-container data-message-id=1218716408968515694><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Saturday, March 16, 2024 8:23â€¯PM"><a href=#chatlog__message-container-1218716408968515694>3/16/2024 8:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>This doesnâ€™t look like an auth issue, â€œinput is invalidâ€ means youâ€™re giving it input that the api doesnâ€™t know how to handle</span></div></div></div></div><div id=chatlog__message-container-1218716503336030298 class=chatlog__message-container data-message-id=1218716503336030298><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, March 16, 2024 8:24â€¯PM">8:24â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Could it be that some of the text field is empty?</span></div></div></div></div><div id=chatlog__message-container-1218716524479516765 class=chatlog__message-container data-message-id=1218716524479516765><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, March 16, 2024 8:24â€¯PM">8:24â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Or null?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1218960754884088001 class=chatlog__message-container data-message-id=1218960754884088001><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Sunday, March 17, 2024 12:34â€¯PM"><a href=#chatlog__message-container-1218960754884088001>3/17/2024 12:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Could be. Double checking that now</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1219218188038963241 class=chatlog__message-container data-message-id=1219218188038963241><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Monday, March 18, 2024 5:37â€¯AM"><a href=#chatlog__message-container-1219218188038963241>3/18/2024 5:37â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all, I was wondering what&#39;s the best way to perform queries with an async function

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">async def fetch_relevant_results(
    queries: List[EmbeddedEvaluationItem],
    db_path: str,
    table_name: str,
) -&gt; List[QueryResult]:
    db = connect(db_path)
    table = db.open_table(table_name)

    async def query_table(query: EmbeddedEvaluationItem):
        results = table.search(query.embedding).limit(25).to_pydantic(TextChunk)
        return QueryResult(results=results, source=query)

    coros = [query_table(query) for query in queries]

    return [item for sublist in await asyncio.gather(*coros) for item in sublist]</code>

This is my current implementation. I wanted to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.connect_async</code> but when I try to run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table.search</code> on an async table, it throws a not implemented error. Is there a better way that you&#39;d recommend working with async code?</span></div></div></div></div><div id=chatlog__message-container-1219218293559132231 class=chatlog__message-container data-message-id=1219218293559132231><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, March 18, 2024 5:38â€¯AM">5:38â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m trying to batch and run a group of embedded queries at a single go (~ 200 ) and this was what I came up with</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1219287577954226220 class=chatlog__message-container data-message-id=1219287577954226220><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 18, 2024 10:13â€¯AM"> <a href=#chatlog__message-container-1219287577954226220>3/18/2024 10:13â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1219408621536804914 class=chatlog__message-container data-message-id=1219408621536804914><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1214743934580953139/000c132517a9ffdf8bb9d47ada15d5ac.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=marcoswastaken data-user-id=1214743934580953139>marcos</span> <span class=chatlog__timestamp title="Monday, March 18, 2024 6:14â€¯PM"><a href=#chatlog__message-container-1219408621536804914>3/18/2024 6:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m following the guides for creating an ANN index, and I keep getting this warning. Everything seems to be working, after, but I don&#39;t know if I&#39;m possibly doing something wrong that will bite me down the road. Any feedback is appreciated. I can post further details if needed.</span> <span class=chatlog__edited-timestamp title="Monday, March 18, 2024 6:14â€¯PM">(edited)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1219408621306253452/lancedb_screenshot.png?ex=697bdbc6&amp;is=697a8a46&amp;hm=abf4eb20c4dc15cfb054cbd3f446e7d73ccf09dadd7b9921a34fe24e3ab9d15b&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1219408621306253452/lancedb_screenshot.png?ex=697bdbc6&amp;is=697a8a46&amp;hm=abf4eb20c4dc15cfb054cbd3f446e7d73ccf09dadd7b9921a34fe24e3ab9d15b&amp;" alt="Image attachment" title="Image: lancedb_screenshot.png (427.04 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1219486837077180441 class=chatlog__message-container data-message-id=1219486837077180441><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 18, 2024 11:25â€¯PM"> <a href=#chatlog__message-container-1219486837077180441>3/18/2024 11:25â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1220385046460895373 class=chatlog__message-container data-message-id=1220385046460895373><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Thursday, March 21, 2024 10:54â€¯AM"><a href=#chatlog__message-container-1220385046460895373>3/21/2024 10:54â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, I was wondering if it might be possible to create a lancedb model and set a primary key so that if we reinsert this model with the same primary key into the table, it won&#39;t insert it in at all.  Something like

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">class TextChunk(LanceModel):
    chunk_id: str = Field(primary_key=True)
    doc_id: str
    text: str = openai.SourceField()
    vector: Vector(openai.ndims()) = openai.VectorField(default=None)
    post_title: str
    publish_date: datetime
    chunk_number: int
    source: str</code>

Thank you so much!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1220546402275299459 class=chatlog__message-container data-message-id=1220546402275299459><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=msminhas data-user-id=826217069544079402>msminhas</span> <span class=chatlog__timestamp title="Thursday, March 21, 2024 9:35â€¯PM"><a href=#chatlog__message-container-1220546402275299459>3/21/2024 9:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I am trying out lancedb and got this weird behaviour. Was trying to do vector search using different distance metrics but all of them seem to be returning the same distance and results. I use cosine during the index creation. 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">        self.table.create_index(
            metric=&quot;cosine&quot;, vector_column_name=&quot;embedding&quot;, accelerator=&quot;cuda&quot;
        )</code>
This is just a random dataset from huggingface. Also the first distance should ideally be 0 since those are the same vectors. It is 0.03 but still would have expected better precision here.</span> <span class=chatlog__edited-timestamp title="Thursday, March 21, 2024 9:42â€¯PM">(edited)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1220546401524645909/image.png?ex=697b622a&amp;is=697a10aa&amp;hm=650b69a0b50df3ab0809cce4fecacec4ac3947d394ef8bdbb8c9344a980219ab&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1220546401524645909/image.png?ex=697b622a&amp;is=697a10aa&amp;hm=650b69a0b50df3ab0809cce4fecacec4ac3947d394ef8bdbb8c9344a980219ab&amp;" alt="Image attachment" title="Image: image.png (94.92 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1220581560646893638 class=chatlog__message-container data-message-id=1220581560646893638><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=msminhas>msminhas</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1220546402275299459')"> Hello! I am trying out lancedb and got this weird behaviour. Was trying to do vector search using different distance metrics but all of them seem to be returning the same distance and results. I use cosine during the index creation. 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">        self.table.create_index(
            metric=&quot;cosine&quot;, vector_column_name=&quot;embedding&quot;, accelerator=&quot;cuda&quot;
        )</code>
This is just a random dataset from huggingface. Also the first distance should ideally be 0 since those are the same vectors. It is 0.03 but still would have expected better precision here. </span> <span class=chatlog__reply-edited-timestamp title="Thursday, March 21, 2024 9:42â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Thursday, March 21, 2024 11:55â€¯PM"><a href=#chatlog__message-container-1220581560646893638>3/21/2024 11:55â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I believe, when we use the cosine distance and train an index, that we normalize vectors as part of the training.  The IVF residual doesn&#39;t make sense otherwise.  Then we also normalize at search time.  Since normalized cosine distance is the same as normalized L2 you get the same distance.

Do you still get non zero distance for the first item if you set a refine factor of 1?</span></div></div></div></div><div id=chatlog__message-container-1220581600241254430 class=chatlog__message-container data-message-id=1220581600241254430><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, March 21, 2024 11:55â€¯PM">11:55â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>CC <span class="chatlog__markdown-mention" title="lei.xu">@lei</span></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1220583546255839232 class=chatlog__message-container data-message-id=1220583546255839232><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Friday, March 22, 2024 12:03â€¯AM"><a href=#chatlog__message-container-1220583546255839232>3/22/2024 12:03â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>in Lance, cosine distance  = L2_distance(normalized vector).  If you created IVF_PQ,  PQ (product quantization) uses quantization on each sub-vector to compress the vectors, that is, using a 0-256 to present a bunch of float vectors, when you reconstruct it back during search, there will be a small amount of distortion.</span></div></div></div></div><div id=chatlog__message-container-1220583751814352957 class=chatlog__message-container data-message-id=1220583751814352957><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, March 22, 2024 12:04â€¯AM">12:04â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="https://lancedb.github.io/lancedb/ann_indexes/#creating-an-ivf_pq-index">https://lancedb.github.io/lancedb/ann_indexes/#creating-an-ivf_pq-index</a> can take a look of this</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://lancedb.github.io/lancedb/ann_indexes/"><div class="chatlog__markdown chatlog__markdown-preserve">Building an ANN index</div></a></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1220684139678666753 class=chatlog__message-container data-message-id=1220684139678666753><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sakura9928 data-user-id=293060952134254595>sakura</span> <span class=chatlog__timestamp title="Friday, March 22, 2024 6:42â€¯AM"><a href=#chatlog__message-container-1220684139678666753>3/22/2024 6:42â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Greetings all! Here I have a question: WIll a vector be indexed immediately after I insert it to the database? assuming that I have already created an index for my db. I am wondering whether I need to manually call the function to re-index my database after insertion or the indexing is done automatically inside the insertion function.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1220696891268923396 class=chatlog__message-container data-message-id=1220696891268923396><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, March 22, 2024 7:33â€¯AM"> <a href=#chatlog__message-container-1220696891268923396>3/22/2024 7:33â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1220879795747815459 class=chatlog__message-container data-message-id=1220879795747815459><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=msminhas data-user-id=826217069544079402>msminhas</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, March 22, 2024 7:40â€¯PM"> <a href=#chatlog__message-container-1220879795747815459>3/22/2024 7:40â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1221971535770816572 class=chatlog__message-container data-message-id=1221971535770816572><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Monday, March 25, 2024 7:58â€¯PM"><a href=#chatlog__message-container-1221971535770816572>3/25/2024 7:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m trying to use the new add_columns method and have a case where I want to add an Optional[bytes] field.   Is there an example somewhere on the syntax used to create constant empty blob instance in lancedb&#39;s flavor of sql?  I&#39;ve tried &#39;0x&#39;, &#39;0b&#39;, &#39;empty_blob()&#39; and a few other syntaxes from various dbs.  <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.add_columns">https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.add_columns</a></span> <span class=chatlog__edited-timestamp title="Monday, March 25, 2024 8:09â€¯PM">(edited)</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://lancedb.github.io/lancedb/python/python/"><div class="chatlog__markdown chatlog__markdown-preserve">Python</div></a></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1221974807072215086 class=chatlog__message-container data-message-id=1221974807072215086><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 25, 2024 8:11â€¯PM"> <a href=#chatlog__message-container-1221974807072215086>3/25/2024 8:11â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1222527778247934113 class=chatlog__message-container data-message-id=1222527778247934113><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Wednesday, March 27, 2024 8:48â€¯AM"><a href=#chatlog__message-container-1222527778247934113>3/27/2024 8:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I&#39;m running into this on lance v0.10.5 when calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_scalar_index</code>:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: LanceError(IO): Execution error: LanceError(IO): Resources exhausted: Failed to allocate additional 20760 bytes for ExternalSorterMerge[0] with 104845256 bytes already allocated - maximum available is 12344, /rustc/07dca489ac2d933c78d3c5158e3f43beefeb02ce/library/core/src/convert/mod.rs:757:9, /home/runner/work/lance/lance/rust/lance-index/src/scalar/btree.rs:1065:29</code>

AIUI, memory limits were removed in <a href="https://github.com/lancedb/lance/pull/1702">https://github.com/lancedb/lance/pull/1702</a>. I don&#39;t have <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LANCE_MEMORY_LIMIT</code> set either - is there anything else I need to configure?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1222576957628088432 class=chatlog__message-container data-message-id=1222576957628088432><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=kohlerbear3381>kohlerbear</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1222527778247934113')"> Hello! I&#39;m running into this on lance v0.10.5 when calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_scalar_index</code>:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: LanceError(IO): Execution error: LanceError(IO): Resources exhausted: Failed to allocate additional 20760 bytes for ExternalSorterMerge[0] with 104845256 bytes already allocated - maximum available is 12344, /rustc/07dca489ac2d933c78d3c5158e3f43beefeb02ce/library/core/src/convert/mod.rs:757:9, /home/runner/work/lance/lance/rust/lance-index/src/scalar/btree.rs:1065:29</code>

AIUI, memory limits were removed in <a href="https://github.com/lancedb/lance/pull/1702">https://github.com/lancedb/lance/pull/1702</a>. I don&#39;t have <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LANCE_MEMORY_LIMIT</code> set either - is there anything else I need to configure? </span></div></div><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Wednesday, March 27, 2024 12:04â€¯PM"><a href=#chatlog__message-container-1222576957628088432>3/27/2024 12:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>potentially related? <a href="https://github.com/openobserve/openobserve/issues/3089">https://github.com/openobserve/openobserve/issues/3089</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/openobserve/openobserve/issues/3089><div class="chatlog__markdown chatlog__markdown-preserve">PromQL: Resources exhausted: Failed to allocate additional X bytes ...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Which OpenObserve functionalities are the source of the bug? dashboards, metrics Is this a regression? No Description When increasing the time range to a certain level, any PromQL metrics query eve...</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1222692489966653591 class=chatlog__message-container data-message-id=1222692489966653591><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=kohlerbear3381>kohlerbear</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1222527778247934113')"> Hello! I&#39;m running into this on lance v0.10.5 when calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_scalar_index</code>:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: LanceError(IO): Execution error: LanceError(IO): Resources exhausted: Failed to allocate additional 20760 bytes for ExternalSorterMerge[0] with 104845256 bytes already allocated - maximum available is 12344, /rustc/07dca489ac2d933c78d3c5158e3f43beefeb02ce/library/core/src/convert/mod.rs:757:9, /home/runner/work/lance/lance/rust/lance-index/src/scalar/btree.rs:1065:29</code>

AIUI, memory limits were removed in <a href="https://github.com/lancedb/lance/pull/1702">https://github.com/lancedb/lance/pull/1702</a>. I don&#39;t have <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LANCE_MEMORY_LIMIT</code> set either - is there anything else I need to configure? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Wednesday, March 27, 2024 7:43â€¯PM"><a href=#chatlog__message-container-1222692489966653591>3/27/2024 7:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ah. That PR fixed it for Lance vector indices, but not for scalar indices. We can make this also configurable. <a href="https://github.com/lancedb/lance/issues/2119">https://github.com/lancedb/lance/issues/2119</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/issues/2119><div class="chatlog__markdown chatlog__markdown-preserve">Expose spill configuration to users &#183; Issue #2119 &#183; lancedb/lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">You can configure the memory limit for spilling when making vector indices (#1702) but not for scalar indices (#2043). We should make them both configurable from the same place.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/nl0C8ylreLUc1-7gp0ysQn9CT8ZziJnwkRmnDfjaQmE/https/opengraph.githubassets.com/90ed9b8cec7d37c15d08d1565ffe258fa0c4b0e876fcd37d5cffe91943361a9b/lancedb/lance/issues/2119> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/nl0C8ylreLUc1-7gp0ysQn9CT8ZziJnwkRmnDfjaQmE/https/opengraph.githubassets.com/90ed9b8cec7d37c15d08d1565ffe258fa0c4b0e876fcd37d5cffe91943361a9b/lancedb/lance/issues/2119 alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1222878914183958598 class=chatlog__message-container data-message-id=1222878914183958598><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1222692489966653591')"> Ah. That PR fixed it for Lance vector indices, but not for scalar indices. We can make this also configurable. <a href="https://github.com/lancedb/lance/issues/2119">https://github.com/lancedb/lance/issues/2119</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Thursday, March 28, 2024 8:04â€¯AM"><a href=#chatlog__message-container-1222878914183958598>3/28/2024 8:04â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ahh got it - thank you!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1222998517841133691 class=chatlog__message-container data-message-id=1222998517841133691><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Thursday, March 28, 2024 3:59â€¯PM"><a href=#chatlog__message-container-1222998517841133691>3/28/2024 3:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Getting an error when trying to store my bucket on S3. Do we have to explicitly set the region? It appears to be one of the args for .connect

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: LanceError(IO): Generic S3 error: Error performing list request: Received redirect without LOCATION, this normally indicates an incorrectly configured region, /home/runner/work/lance/lance/rust/lance-table/src/io/commit.rs:100:26</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1223771890208997387 class=chatlog__message-container data-message-id=1223771890208997387><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=jhsieh>jmhsieh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1221971535770816572')"> I&#39;m trying to use the new add_columns method and have a case where I want to add an Optional[bytes] field.   Is there an example somewhere on the syntax used to create constant empty blob instance in lancedb&#39;s flavor of sql?  I&#39;ve tried &#39;0x&#39;, &#39;0b&#39;, &#39;empty_blob()&#39; and a few other syntaxes from various dbs.  <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.add_columns">https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.add_columns</a> </span> <span class=chatlog__reply-edited-timestamp title="Monday, March 25, 2024 8:09â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Saturday, March 30, 2024 7:12â€¯PM"><a href=#chatlog__message-container-1223771890208997387>3/30/2024 7:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ve worked around this problem using another mechanism but found what I think the answer is.  It uses DataFusion&#39;s sql syntax so it should be something like &quot;X&#39;&quot; <a href="https://arrow.apache.org/datafusion/user-guide/sql/data_types.html#binary-types">https://arrow.apache.org/datafusion/user-guide/sql/data_types.html#binary-types</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1223789260717555774 class=chatlog__message-container data-message-id=1223789260717555774><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Saturday, March 30, 2024 8:21â€¯PM"><a href=#chatlog__message-container-1223789260717555774>3/30/2024 8:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="wpace">@WestonPace</span> knows more about this than I do. Iâ€™ll wait for him to chime in on Monday</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1223850466002337834 class=chatlog__message-container data-message-id=1223850466002337834><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cyz19892002 data-user-id=817813056565674005>Asia</span> <span class=chatlog__timestamp title="Sunday, March 31, 2024 12:24â€¯AM"><a href=#chatlog__message-container-1223850466002337834>3/31/2024 12:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team,

I just have a question: how to annotate a LanceModel field/column as the source field for multiple vector columns.

For example, in the below schema, the Image table stores the raw image as well as two embeddings for the image column.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">class Image(LanceModel):
    image_uri: str
    vec_clip: Vector(clip.ndims()) = clip.VectorField()
    vec_dino: Vector(dino.ndims()) = dino.VectorField()</code>
btw, i also posted this question in here: <a href="https://github.com/lancedb/lancedb/discussions/1170">https://github.com/lancedb/lancedb/discussions/1170</a>

Thanks!</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/discussions/1170><div class="chatlog__markdown chatlog__markdown-preserve">How to annotate a column as the source field for multiple vector co...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Hi team, I just have a quick question: how to annotate a LanceModel field/column as the source field for multiple vector columns. For example, in the below schema, the Image table stores the raw im...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/_06C1VNsy-ABHTbOrohWD17yvOgTDmD0JDP5N3YH3CQ/https/opengraph.githubassets.com/c681acee79a7323065ef47cf09c221e992f7c672fe1372ace2ba90f0ced5c91f/lancedb/lancedb/discussions/1170> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/_06C1VNsy-ABHTbOrohWD17yvOgTDmD0JDP5N3YH3CQ/https/opengraph.githubassets.com/c681acee79a7323065ef47cf09c221e992f7c672fe1372ace2ba90f0ced5c91f/lancedb/lancedb/discussions/1170 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1223859823985164424 class=chatlog__message-container data-message-id=1223859823985164424><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, March 31, 2024 1:02â€¯AM"> <a href=#chatlog__message-container-1223859823985164424>3/31/2024 1:02â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1223875005398515782 class=chatlog__message-container data-message-id=1223875005398515782><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cyz19892002 data-user-id=817813056565674005>Asia</span> <span class=chatlog__timestamp title="Sunday, March 31, 2024 2:02â€¯AM"><a href=#chatlog__message-container-1223875005398515782>3/31/2024 2:02â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team,
I have a question about the table.search() API.
Every time I invoke the table.search() API, it loads my CLIP model.
It makes my search very slow and i&#39;m worried it has memory leaks. 
Just wondering if there is something I did wrong.

Here is a simplified version of my app (essentially a simple streamlit app and a lancedb table):

app.py
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import logging

import lancedb
import streamlit as st
from lancedb.table import Table

logging.basicConfig(level=logging.INFO, format=&quot;%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot;)

def open_table(table_name: str) -&gt; Table:
    &quot;&quot;&quot;Open a table in the database.&quot;&quot;&quot;
    db_conn = lancedb.connect(&quot;/home/asia/work/lancedb&quot;)
    return db_conn.open_table(table_name)

def main():
    st.title(&quot;Search frames by text&quot;)
    vector_table_name = &quot;the_blind_side_2009&quot;
    table = open_table(vector_table_name)
    query = st.text_input(&quot;Search for a video by name&quot;)
    if query:    
        print(&quot;Running search...&quot;)
        result = table.search(query).metric(&quot;cosine&quot;).limit(5).to_list()
        print(&quot;Finished search.&quot;)
        for i, candidate in enumerate(result):
            st.image(candidate[&quot;uri&quot;], caption=f&quot;Frame at: {candidate[&#39;timestamp&#39;]}, Score: {candidate[&#39;_distance&#39;]}&quot;, use_column_width=True)
if __name__ == &quot;__main__&quot;:
    main()</code>

schema.py: it defines the frame table which contains about 11k clip embeddings.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import torch
from lancedb.embeddings import EmbeddingFunctionRegistry
from lancedb.pydantic import LanceModel, Vector

registry = EmbeddingFunctionRegistry.get_instance()
clip = registry.get(&quot;open-clip&quot;).create(
    name=&quot;ViT-H-14-378-quickgelu&quot;,
    pretrained=&quot;dfn5b&quot;,
    device=&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;,
)

class Frame(LanceModel):
    timestamp: float
    uri: str = clip.SourceField()
    vec_clip: Vector(clip.ndims()) = clip.VectorField()</code></span> <span class=chatlog__edited-timestamp title="Sunday, March 31, 2024 2:05â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224126672555475024 class=chatlog__message-container data-message-id=1224126672555475024><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=jhsieh>jmhsieh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1223771890208997387')"> I&#39;ve worked around this problem using another mechanism but found what I think the answer is.  It uses DataFusion&#39;s sql syntax so it should be something like &quot;X&#39;&quot; <a href="https://arrow.apache.org/datafusion/user-guide/sql/data_types.html#binary-types">https://arrow.apache.org/datafusion/user-guide/sql/data_types.html#binary-types</a> </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Sunday, March 31, 2024 6:42â€¯PM"><a href=#chatlog__message-container-1224126672555475024>3/31/2024 6:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="jhsieh">@jmhsieh</span> yes, looks like you&#39;re right, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">X&#39;1234</code> from their example there.  I&#39;ll try it on Monday and see if it works.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224150635524657153 class=chatlog__message-container data-message-id=1224150635524657153><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Sunday, March 31, 2024 8:17â€¯PM"><a href=#chatlog__message-container-1224150635524657153>3/31/2024 8:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, I&#39;m trying to see how well full text search might work by getting an LLM to generate some keywords based on a user query, retrieving rows which have at least 1 math ( then getting the top 25 results ). 

I&#39;m currently doing this via a duckdb query i wrote

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">keyword_conditions = &quot; +\n&quot;.join(
            [
                f&quot;CASE WHEN regexp_matches(text, &#39;(?i){keyword}&#39;) THEN 1 ELSE 0 END&quot;
                for keyword in keywords
            ]
        )
        keyword_search = &quot;|&quot;.join(keywords)
        duckdb_query = f&quot;&quot;&quot;
            SELECT 
            *,
            ({keyword_conditions}) AS num_keywords_matched
        FROM 
            chunks
        WHERE 
            regexp_matches(text, &#39;(?i)({keyword_search})&#39;)
            ORDER BY
            num_keywords_matched DESC
            LIMIT 25
        &quot;&quot;&quot;</code>

I&#39;ll probably give the tantivity client a try later but it seems like the api might not support multiple keywords from the docs?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.search(&quot;puppy&quot;).limit(10).where(&quot;meta=&#39;foo&#39;&quot;).to_list()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224171915975983254 class=chatlog__message-container data-message-id=1224171915975983254><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cyz19892002 data-user-id=817813056565674005>Asia</span> <span class=chatlog__timestamp title="Sunday, March 31, 2024 9:42â€¯PM"><a href=#chatlog__message-container-1224171915975983254>3/31/2024 9:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi team,
Question: is there a way to change the device parameter of a pytorch model in a EmbeddingFunction for the table.search() API?
I use a pytorch model to compute embeddings.
What I want is use GPU device during data ingestion for my table, and use CPU device during serving query.
What happens to me is that once I use GPU during data ingestion, the device is always GPU during serving query in search()
It seems that the device parameter is decided when creating the lancedb table, and can&#39;t be changed.
 
<strong>More context</strong>:
I&#39;m using the EmbeddingFunction feature to automatically compute embeddings when I batch ingest data into my table. The EmbeddingFunction is implemented via a Pytorch model (e.g. CLIP).
When i create the lance table, it asks for the table schema (see example below), which resolves the device parameter in my EmbeddingFunction, and stores it as the table metadata.
When i call search, it seems that the table instance retrieves the metadata and use it to create an instance of my EmbeddingFunction. And the metadata has a device parameter of GPU. But I want it to be CPU.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">dino = registry.get(&quot;dino&quot;).create(
    device=&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;,
)

class Frame(LanceModel):
    timestamp: float
    uri: str = dino.SourceField()
    vec_dino: Vector(dino.ndims()) = dino.VectorField()</code>

Thanks</span> <span class=chatlog__edited-timestamp title="Sunday, March 31, 2024 11:58â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224612221078863897 class=chatlog__message-container data-message-id=1224612221078863897><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 2, 2024 2:51â€¯AM"> <a href=#chatlog__message-container-1224612221078863897>4/2/2024 2:51â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224684860635873402 class=chatlog__message-container data-message-id=1224684860635873402><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1035896478499082292/c82b3fa769ed6e6ffdea579381ed5f5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=l_sam_ll data-user-id=1035896478499082292>Sam</span> <span class=chatlog__timestamp title="Tuesday, April 2, 2024 7:40â€¯AM"><a href=#chatlog__message-container-1224684860635873402>4/2/2024 7:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi <span class="chatlog__markdown-mention">@everyone</span>,this is a simple code i tried 
import lancedb

uri = &quot;data/sample-lancedb&quot;
db = lancedb.connect(uri)
table = db.create_table(
    &quot;my_table&quot;,
    
    data=[
        {&quot;vector&quot;: [3.1, 4.1], &quot;item&quot;: &quot;foo&quot;, &quot;price&quot;: 10.0},
        {&quot;vector&quot;: [5.9, 26.5], &quot;item&quot;: &quot;bar&quot;, &quot;price&quot;: 20.0},
    ],
)
print(&quot;Table created:&quot;)
result = table.search([100, 100]).limit(2).to_df()

and this is the error i am facing:
OSError: LanceError(IO): Generic LocalFileSystem error: Unable to copy file from D:\SAM\lancedb\data\sample-lancedb\my_table.lance_versions.tmp_1.manifest_ea72e757-6bde-407e-b18a-23b36407f5cc to D:\SAM\lancedb\data\sample-lancedb\my_table.lance_versions\1.manifest: Incorrect function. (os error 1), D:\a\lance\lance\rust\lance-table\src\io\commit.rs:606:54</span> <span class=chatlog__edited-timestamp title="Tuesday, April 2, 2024 7:45â€¯AM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1224685470709973093 class=chatlog__message-container data-message-id=1224685470709973093><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Tuesday, April 2, 2024 7:42â€¯AM">7:42â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>can someone help me on this, as i am new to this framework</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224705307171754050 class=chatlog__message-container data-message-id=1224705307171754050><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 2, 2024 9:01â€¯AM"> <a href=#chatlog__message-container-1224705307171754050>4/2/2024 9:01â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1224743512252092568 class=chatlog__message-container data-message-id=1224743512252092568><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=shankarc5663 data-user-id=767263287804821524>Shankar :)</span> <span class=chatlog__timestamp title="Tuesday, April 2, 2024 11:33â€¯AM"><a href=#chatlog__message-container-1224743512252092568>4/2/2024 11:33â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How can we replicate below example for video search 

<a href="https://lancedb.github.io/lancedb/notebooks/DisappearingEmbeddingFunction/">https://lancedb.github.io/lancedb/notebooks/DisappearingEmbeddingFunction/</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://lancedb.github.io/lancedb/notebooks/DisappearingEmbeddingFunction/"><div class="chatlog__markdown chatlog__markdown-preserve">Example - MultiModal CLIP Embeddings</div></a></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226245658592153670 class=chatlog__message-container data-message-id=1226245658592153670><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/467300056874090506/037e63ebacc1ffead46240da1842f5bf.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sanskar data-user-id=467300056874090506>Sanskar</span> <span class=chatlog__timestamp title="Saturday, April 6, 2024 3:02â€¯PM"><a href=#chatlog__message-container-1226245658592153670>4/6/2024 3:02â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey All <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg"> 

I am trying to use LanceDb with langchain.

I am trying to filter based on a metadata and then pass it to a RetrievalQA chain.

A small snippet looks like this
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">    lance_db = LanceDB.from_documents(
        splits,
        embedding,
    )
    filtered_documents: dict = lance_db.get(where={&quot;user_id&quot;: user_id}) # how to do this



    query_params = request.query_params

    question = query_params.get(&quot;question&quot;)

    qa_chain = RetrievalQA.from_chain_type(
        llm,
        retriever=lance_db.as_retriever(),
        return_source_documents=True,
        chain_type_kwargs={&quot;prompt&quot;: QA_CHAIN_PROMPT},

    )

    result = qa_chain({&quot;query&quot;: question})
    print(&quot;This is the result&quot;, result)</code>

How do I achieve this?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226400804890607726 class=chatlog__message-container data-message-id=1226400804890607726><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/366849945132597248/14124bedfc1d3842aa043e72a5e28a79.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=j_j_j_j_j_j_j_j_j_j data-user-id=366849945132597248>S</span> <span class=chatlog__timestamp title="Sunday, April 7, 2024 1:18â€¯AM"><a href=#chatlog__message-container-1226400804890607726>4/7/2024 1:18â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all, do I have to do anything to get table.count_rows() update the count? I have another process that is batch inserting rows into the database, but my other client&#39;s table.count_rows() doesn&#39;t seem to update unless I reopen the table. Is this behavior expected?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226483635880853530 class=chatlog__message-container data-message-id=1226483635880853530><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, April 7, 2024 6:48â€¯AM"> <a href=#chatlog__message-container-1226483635880853530>4/7/2024 6:48â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226602238189768705 class=chatlog__message-container data-message-id=1226602238189768705><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/366849945132597248/14124bedfc1d3842aa043e72a5e28a79.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=j_j_j_j_j_j_j_j_j_j data-user-id=366849945132597248>S</span> <span class=chatlog__timestamp title="Sunday, April 7, 2024 2:39â€¯PM"><a href=#chatlog__message-container-1226602238189768705>4/7/2024 2:39â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all, I&#39;m running into this error and need some help: thread &#39;lance-cpu&#39; panicked at /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-index-0.10.9/src/vector/pq/utils.rs:72:14:
range end index 94208 out of range for slice of length 94080

Query: await async_tbl.vector_search(embeddings).select([&quot;title&quot;,&quot;description&quot;,&quot;covers&quot;]).limit(10).to_pandas()
Index creation on 34M 384d vectors (no errors), also recreated the index multiple times: tbl.create_index(num_partitions=2048,num_sub_vectors=23,accelerator=&quot;cuda&quot;,replace=True)
Bypassing vector index works.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226608960661094455 class=chatlog__message-container data-message-id=1226608960661094455><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, April 7, 2024 3:06â€¯PM"> <a href=#chatlog__message-container-1226608960661094455>4/7/2024 3:06â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226899956804358317 class=chatlog__message-container data-message-id=1226899956804358317><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1060851990751629363/2078f9ae1db206f267bf1c599434876f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aleeve data-user-id=1060851990751629363>aleeve</span> <span class=chatlog__timestamp title="Monday, April 8, 2024 10:22â€¯AM"><a href=#chatlog__message-container-1226899956804358317>4/8/2024 10:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! Iâ€™m querying a database on azure storage. The table Iâ€™m querying has roughly 50k rows. I saw there was some recent issue with this but with adlfs installed it appears to basically works. But searching in the table appears to begin by a full download of the table data. Locally querying is instant but over az storage itâ€™s prohibitively slow because of this. Iâ€™m I doing something wrong? Saw some SO discussion that looks similar to the adlfs code in lancedb <a href="https://stackoverflow.com/questions/75782765/pyarrow-slice-pushdown-for-azure-data-lake">https://stackoverflow.com/questions/75782765/pyarrow-slice-pushdown-for-azure-data-lake</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://stackoverflow.com/questions/75782765/pyarrow-slice-pushdown-for-azure-data-lake><div class="chatlog__markdown chatlog__markdown-preserve">Pyarrow slice pushdown for Azure data lake</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">I want to access Parquet files on an Azure data lake, and only retrieve some rows.
Here is a reproducible example, using a public dataset:
import pyarrow.dataset as ds
from adlfs import</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/VbfwnzN2MM794XNccNxDzrB1YeuPrxR53y11bwRfflY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon%402.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/VbfwnzN2MM794XNccNxDzrB1YeuPrxR53y11bwRfflY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon%402.png alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1226908134711361591 class=chatlog__message-container data-message-id=1226908134711361591><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, April 8, 2024 10:54â€¯AM"> <a href=#chatlog__message-container-1226908134711361591>4/8/2024 10:54â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1227641856959975474 class=chatlog__message-container data-message-id=1227641856959975474><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rm_rf_wfh data-user-id=1145707974929682464>John</span> <span class=chatlog__timestamp title="Wednesday, April 10, 2024 11:30â€¯AM"><a href=#chatlog__message-container-1227641856959975474>4/10/2024 11:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello!

I have a question regarding using DuckDB along-side LanceDB. 

I read in the documentation that DuckDB can be used to query a LanceDB table after converting it to a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">dataset</code> (<a href="https://lancedb.github.io/lancedb/python/duckdb/)">https://lancedb.github.io/lancedb/python/duckdb/)</a>

However, I&#39;m unsure if I can perform a vector query on a dataset that has been queried by DuckDB. 

More specifically, this is what I&#39;d like to do:

1. Use DuckDB to pre-filter a LanceDB table.

2. Perform a vector search on the pre-filtered data.

Is this possible?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229210509673496616 class=chatlog__message-container data-message-id=1229210509673496616><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 7:23â€¯PM"><a href=#chatlog__message-container-1229210509673496616>4/14/2024 7:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>can I use duckdb to insert and update .lance files and create tables off of lance files?</span></div></div></div></div><div id=chatlog__message-container-1229210539490541578 class=chatlog__message-container data-message-id=1229210539490541578><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, April 14, 2024 7:23â€¯PM">7:23â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>or can I only use lancedb for it</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229215450530058320 class=chatlog__message-container data-message-id=1229215450530058320><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 7:43â€¯PM"><a href=#chatlog__message-container-1229215450530058320>4/14/2024 7:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I would like to use the lance file format but manage the tables with duckdb</span></div></div></div></div><div id=chatlog__message-container-1229215597255065670 class=chatlog__message-container data-message-id=1229215597255065670><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, April 14, 2024 7:43â€¯PM">7:43â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>also something is blowing up my memory and I am not sure what it is.

Is there a way to do this in a streaming/out of memory fashion?

<a href="https://lancedb.github.io/lance/read_and_write.html#writing-lance-dataset">https://lancedb.github.io/lance/read_and_write.html#writing-lance-dataset</a>

I see you can do it with lance itself

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">        # Perform a &quot;upsert&quot; operation
        self.logs_tbl.merge_insert(merge_on)   \
            .when_not_matched_insert_all() \
            .execute(update_df)</code></span> <span class=chatlog__edited-timestamp title="Sunday, April 14, 2024 7:50â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229223259653017660 class=chatlog__message-container data-message-id=1229223259653017660><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229210509673496616')"> can I use duckdb to insert and update .lance files and create tables off of lance files? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:14â€¯PM"><a href=#chatlog__message-container-1229223259653017660>4/14/2024 8:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I don&#39;t know if duckdb has an extension point for writers or not.  I don&#39;t think they do but could be wrong.

Out of curiosity, what is it about duckdb&#39;s write path that is appealing?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229223409465167882 class=chatlog__message-container data-message-id=1229223409465167882><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229215597255065670')"> also something is blowing up my memory and I am not sure what it is.

Is there a way to do this in a streaming/out of memory fashion?

<a href="https://lancedb.github.io/lance/read_and_write.html#writing-lance-dataset">https://lancedb.github.io/lance/read_and_write.html#writing-lance-dataset</a>

I see you can do it with lance itself

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">        # Perform a &quot;upsert&quot; operation
        self.logs_tbl.merge_insert(merge_on)   \
            .when_not_matched_insert_all() \
            .execute(update_df)</code> </span> <span class=chatlog__reply-edited-timestamp title="Sunday, April 14, 2024 7:50â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:14â€¯PM"><a href=#chatlog__message-container-1229223409465167882>4/14/2024 8:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If you have a scalar index on the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">merge_on</code> column than memory usage should be bounded.</span></div></div></div></div><div id=chatlog__message-container-1229223614931533834 class=chatlog__message-container data-message-id=1229223614931533834><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, April 14, 2024 8:15â€¯PM">8:15â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Even if you don&#39;t we should limit RAM actually, we put spilling in that path a month or so ago.  Are you on an old version?</span> <span class=chatlog__edited-timestamp title="Sunday, April 14, 2024 8:15â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229223685525864458 class=chatlog__message-container data-message-id=1229223685525864458><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229223614931533834')"> Even if you don&#39;t we should limit RAM actually, we put spilling in that path a month or so ago.  Are you on an old version? </span> <span class=chatlog__reply-edited-timestamp title="Sunday, April 14, 2024 8:15â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:16â€¯PM"><a href=#chatlog__message-container-1229223685525864458>4/14/2024 8:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Should be brand new</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229223847828389899 class=chatlog__message-container data-message-id=1229223847828389899><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229223409465167882')"> If you have a scalar index on the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">merge_on</code> column than memory usage should be bounded. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:16â€¯PM"><a href=#chatlog__message-container-1229223847828389899>4/14/2024 8:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If memory usage was bounded, would it default to batching if memory usage variable was exceeded?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229224314608287804 class=chatlog__message-container data-message-id=1229224314608287804><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:18â€¯PM"><a href=#chatlog__message-container-1229224314608287804>4/14/2024 8:18â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Lance batches by default.  Without a scalar index we have to do a full outer join between the new data and the old data.  The memory growth normally happens as part of that join.  Datafusion provides our join and does offer an out of core spilling join.  We should be using that.  So it should write to temp files after a certain point.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229225755049725953 class=chatlog__message-container data-message-id=1229225755049725953><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229223259653017660')"> I don&#39;t know if duckdb has an extension point for writers or not.  I don&#39;t think they do but could be wrong.

Out of curiosity, what is it about duckdb&#39;s write path that is appealing? </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:24â€¯PM"><a href=#chatlog__message-container-1229225755049725953>4/14/2024 8:24â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Just curiosity <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜‚"
    title="joy"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f602.svg"> right now I am just using lancedb for writing and then I will use duckdb for querying...so I thought maybe just see if I can use duckdb for everything</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229226133321682974 class=chatlog__message-container data-message-id=1229226133321682974><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229224314608287804')"> Lance batches by default.  Without a scalar index we have to do a full outer join between the new data and the old data.  The memory growth normally happens as part of that join.  Datafusion provides our join and does offer an out of core spilling join.  We should be using that.  So it should write to temp files after a certain point. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:25â€¯PM"><a href=#chatlog__message-container-1229226133321682974>4/14/2024 8:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The outer join hurts</span></div></div></div></div><div id=chatlog__message-container-1229226227861164122 class=chatlog__message-container data-message-id=1229226227861164122><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, April 14, 2024 8:26â€¯PM">8:26â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Maybe the core spilling join doesn&#39;t pick up</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229226530547306506 class=chatlog__message-container data-message-id=1229226530547306506><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229223409465167882')"> If you have a scalar index on the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">merge_on</code> column than memory usage should be bounded. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, April 14, 2024 8:27â€¯PM"><a href=#chatlog__message-container-1229226530547306506>4/14/2024 8:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I do have a scalar index on merge_on so it should be triggering</span> <span class=chatlog__edited-timestamp title="Sunday, April 14, 2024 8:28â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229612671888916510 class=chatlog__message-container data-message-id=1229612671888916510><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Monday, April 15, 2024 10:01â€¯PM"><a href=#chatlog__message-container-1229612671888916510>4/15/2024 10:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&quot;m having some problems with schema evolution / changes.   Here&#39;s a quick video where I get an exception  one level deeper than I&#39;ve explored thus far.  tldr I&#39;m adding 4 Optional[str] fields using an alter and dataframe.  I&#39;m using python lancedb==0.6.2.  Is this a known bug that folks have encountered or is it new. <a href="https://www.loom.com/share/8f05a4e8d6f240319858ad269dcd2ec3">https://www.loom.com/share/8f05a4e8d6f240319858ad269dcd2ec3</a>

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> OSError: Io error: Execution error: LanceError(Arrow): Invalid argument error: Offset invariant failure: non-monotonic offset at slot 1: 8 &gt; 0, /home/runner/work/lance/lance/rust/lance-io/src/encodings/binary.rs:239:26</code></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://www.loom.com/share/8f05a4e8d6f240319858ad269dcd2ec3><div class="chatlog__markdown chatlog__markdown-preserve">fix-bad-schema-alter - Jupyter Notebook - Google Chrome - 15 April ...</div></a></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/EZ5nTzr2o_QVKckACbBiRDsev9tOyHy7WjuRKTvIVmQ/https/cdn.loom.com/sessions/thumbnails/8f05a4e8d6f240319858ad269dcd2ec3-00001.jpg> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/EZ5nTzr2o_QVKckACbBiRDsev9tOyHy7WjuRKTvIVmQ/https/cdn.loom.com/sessions/thumbnails/8f05a4e8d6f240319858ad269dcd2ec3-00001.jpg alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229627674100502618 class=chatlog__message-container data-message-id=1229627674100502618><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=jhsieh>jmhsieh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229612671888916510')"> I&quot;m having some problems with schema evolution / changes.   Here&#39;s a quick video where I get an exception  one level deeper than I&#39;ve explored thus far.  tldr I&#39;m adding 4 Optional[str] fields using an alter and dataframe.  I&#39;m using python lancedb==0.6.2.  Is this a known bug that folks have encountered or is it new. <a href="https://www.loom.com/share/8f05a4e8d6f240319858ad269dcd2ec3">https://www.loom.com/share/8f05a4e8d6f240319858ad269dcd2ec3</a>

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> OSError: Io error: Execution error: LanceError(Arrow): Invalid argument error: Offset invariant failure: non-monotonic offset at slot 1: 8 &gt; 0, /home/runner/work/lance/lance/rust/lance-io/src/encodings/binary.rs:239:26</code> </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Monday, April 15, 2024 11:01â€¯PM"><a href=#chatlog__message-container-1229627674100502618>4/15/2024 11:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Here&#39;s the directory that has the lance files.</span></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1229627673693913108/sample.tgz?ex=697b7642&amp;is=697a24c2&amp;hm=99fc3f368d302a5adf382d924896d1df8301c0ceab2e5ff20138c883b7514a6c&amp;"> sample.tgz </a></div><div class=chatlog__attachment-generic-size>1.31 MB</div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229627994407174185 class=chatlog__message-container data-message-id=1229627994407174185><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=jhsieh>jmhsieh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229627674100502618')"> Here&#39;s the directory that has the lance files. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Monday, April 15, 2024 11:02â€¯PM"><a href=#chatlog__message-container-1229627994407174185>4/15/2024 11:02â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I tried upgrading python lancedb==0.6.8, and then nuking and rebuilding the tables and I&#39;m getting other strange problems (cannot retrieve!)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229630436603592775 class=chatlog__message-container data-message-id=1229630436603592775><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=jhsieh>jmhsieh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229627994407174185')"> I tried upgrading python lancedb==0.6.8, and then nuking and rebuilding the tables and I&#39;m getting other strange problems (cannot retrieve!) </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Monday, April 15, 2024 11:12â€¯PM"><a href=#chatlog__message-container-1229630436603592775>4/15/2024 11:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Here&#39;s whatn I&#39;m getting when attempting to retrive data from the newly generated table.   <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">  File &quot;/home/jmhsieh/proj/feral/aileenbot/lancedb.py&quot;, line 59, in similarity_search
    self._connection.search(embedding).metric(metric).limit(k).to_pandas()
  File &quot;/home/jmhsieh/.ve/lib/python3.10/site-packages/lancedb/query.py&quot;, line 262, in to_pandas
    tbl = self.to_arrow()
  File &quot;/home/jmhsieh/.ve/lib/python3.10/site-packages/lancedb/query.py&quot;, line 527, in to_arrow
    return self.to_batches().read_all()
  File &quot;pyarrow/ipc.pxi&quot;, line 757, in pyarrow.lib.RecordBatchReader.read_all
  File &quot;pyarrow/error.pxi&quot;, line 91, in pyarrow.lib.check_status
OSError: Io error: Execution error: External error: Execution error: LanceError(IO): No page info found for field: parent, field_id=9 batch=0, /home/runner/work/lance/lance/rust/lance-file/src/reader.rs:681:19</code></span> <span class=chatlog__edited-timestamp title="Monday, April 15, 2024 11:12â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=rocket><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸš€ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f680.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229633238293676108 class=chatlog__message-container data-message-id=1229633238293676108><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, April 15, 2024 11:23â€¯PM"> <a href=#chatlog__message-container-1229633238293676108>4/15/2024 11:23â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229644565187788800 class=chatlog__message-container data-message-id=1229644565187788800><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Tuesday, April 16, 2024 12:08â€¯AM"><a href=#chatlog__message-container-1229644565187788800>4/16/2024 12:08â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey I just started using LanceDB and it&#39;s super useful. I have a data pipeline adding batches into LanceDB regularly. To add those new vectors to the ANN index would I update the index like this?
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance_table = tbl.to_lance()
lance_table.optimize.optimize_indices()</code>
Thanks in advance for the clarification!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229720488901873715 class=chatlog__message-container data-message-id=1229720488901873715><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=xinyu218 data-user-id=670007337360031770>Shawn</span> <span class=chatlog__timestamp title="Tuesday, April 16, 2024 5:10â€¯AM"><a href=#chatlog__message-container-1229720488901873715>4/16/2024 5:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>When using DuckDB to query lance tables, is there any kind of predicate/aggregation pushdown to the lance format (e.g., using statistics in lance to immediate return <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">select MAX(col1)</code>), or it is just scanning all the lance data to Arrow then to DuckDB relation, then running query on all the data?</span> <span class=chatlog__edited-timestamp title="Tuesday, April 16, 2024 5:16â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229721161588281365 class=chatlog__message-container data-message-id=1229721161588281365><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=xinyu218>Shawn</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229720488901873715')"> When using DuckDB to query lance tables, is there any kind of predicate/aggregation pushdown to the lance format (e.g., using statistics in lance to immediate return <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">select MAX(col1)</code>), or it is just scanning all the lance data to Arrow then to DuckDB relation, then running query on all the data? </span> <span class=chatlog__reply-edited-timestamp title="Tuesday, April 16, 2024 5:16â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=xinyu218 data-user-id=670007337360031770>Shawn</span> <span class=chatlog__timestamp title="Tuesday, April 16, 2024 5:12â€¯AM"><a href=#chatlog__message-container-1229721161588281365>4/16/2024 5:12â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Also wondering if there is any blog/doc explaining how the interoperation between lance/duckdb(guess there&#39;s arrow in-between) works.</span> <span class=chatlog__edited-timestamp title="Tuesday, April 16, 2024 5:13â€¯AM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=ðŸ¤ðŸ½><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ¤ðŸ½ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f91d-1f3fd.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229782305158074429 class=chatlog__message-container data-message-id=1229782305158074429><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1139624821798473842/c82b3fa769ed6e6ffdea579381ed5f5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ascillitoe data-user-id=1139624821798473842>Ash</span> <span class=chatlog__timestamp title="Tuesday, April 16, 2024 9:15â€¯AM"><a href=#chatlog__message-container-1229782305158074429>4/16/2024 9:15â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, question about the lance torch dataset integration. I have a dataset containing 1M rows, and when I load it with the torch dataloader I get lots of batches much smaller than <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">batch_size</code>. For example:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"># Test pytorch load
ds = lance.torch.data.LanceDataset(
    dataset=save_path, batch_size=1000, columns=[&quot;embeddings&quot;], batch_readehead=10,
)
dl = torch.utils.data.DataLoader(ds)
for batch in dl:
    batch = batch[0]
    print(batch.shape)</code>

leads to:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">torch.Size([1000, 1152])
torch.Size([24, 1152])
torch.Size([1000, 1152])
torch.Size([24, 1152])
torch.Size([1000, 1152])
torch.Size([24, 1152])
torch.Size([1000, 1152])
torch.Size([24, 1152])
torch.Size([1000, 1152])
...</code>

Every other batch size is size 24. Is this intentional? Or is there anything I can do to get more consistent batch sizes?</span> <span class=chatlog__edited-timestamp title="Tuesday, April 16, 2024 9:24â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229807095923347521 class=chatlog__message-container data-message-id=1229807095923347521><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 16, 2024 10:54â€¯AM"> <a href=#chatlog__message-container-1229807095923347521>4/16/2024 10:54â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1229807948482740280 class=chatlog__message-container data-message-id=1229807948482740280><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 16, 2024 10:57â€¯AM"> <a href=#chatlog__message-container-1229807948482740280>4/16/2024 10:57â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229835449640554590 class=chatlog__message-container data-message-id=1229835449640554590><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Tuesday, April 16, 2024 12:47â€¯PM"><a href=#chatlog__message-container-1229835449640554590>4/16/2024 12:47â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there an example of a commit handler for s3? I&#39;m using gunicorn to increase the number of jobs I can handle for my application, but realized that it would cause issues with committing to the s3 bucket I&#39;m using for lancedb</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1229981444412280843 class=chatlog__message-container data-message-id=1229981444412280843><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/675128789646442557/1cb13b6385769af97ea2584be513124e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=xinyu218>Shawn</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1229721161588281365')"> Also wondering if there is any blog/doc explaining how the interoperation between lance/duckdb(guess there&#39;s arrow in-between) works. </span> <span class=chatlog__reply-edited-timestamp title="Tuesday, April 16, 2024 5:13â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span class=chatlog__timestamp title="Tuesday, April 16, 2024 10:27â€¯PM"><a href=#chatlog__message-container-1229981444412280843>4/16/2024 10:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m also very interested in a deep dive on the interaction between LanceDB and DuckDB. How does it work at an arrow interface level, and what sorts of new use cases does it enable, etc.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230234163563593838 class=chatlog__message-container data-message-id=1230234163563593838><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rm_rf_wfh data-user-id=1145707974929682464>John</span> <span class=chatlog__timestamp title="Wednesday, April 17, 2024 3:11â€¯PM"><a href=#chatlog__message-container-1230234163563593838>4/17/2024 3:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello!

This might be a rather stupid question, so kindly let me know if I&#39;m missing something bigger. 

I&#39;d like to leverage both the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">fts</code> index on my LanceDB table, as well as the SQL queryability of DuckDB. 

In my head, I would imagine taking the following steps:

1. <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table = lancedb.Table.search(&quot;query&quot;).where(&quot;...&quot;)</code>

2. <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">duckdb.sql(&quot;SELECT * FROM table ...&quot;)</code>

However, I am figuring this wouldn&#39;t work because the docs mention DuckDB needs a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.LanceDataset</code> object to query. 

<strong>Is there a way to return a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset</code> from a LanceDB query?</strong></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230242635478994980 class=chatlog__message-container data-message-id=1230242635478994980><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, April 17, 2024 3:45â€¯PM"> <a href=#chatlog__message-container-1230242635478994980>4/17/2024 3:45â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230264815402881044 class=chatlog__message-container data-message-id=1230264815402881044><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Wednesday, April 17, 2024 5:13â€¯PM"><a href=#chatlog__message-container-1230264815402881044>4/17/2024 5:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Has anyone had the honor of moving a lanceDB database either from local to s3 or between s3 buckets? Does the database depend on file names?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230308353134297128 class=chatlog__message-container data-message-id=1230308353134297128><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, April 17, 2024 8:06â€¯PM"><a href=#chatlog__message-container-1230308353134297128>4/17/2024 8:06â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is there any way to use lancedb to get a unique row count?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">logs_tbl.count_rows()</code>

Something like that but with .unique() or something</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230330572539433025 class=chatlog__message-container data-message-id=1230330572539433025><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, April 17, 2024 9:34â€¯PM"> <a href=#chatlog__message-container-1230330572539433025>4/17/2024 9:34â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230574935336816782 class=chatlog__message-container data-message-id=1230574935336816782><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Thursday, April 18, 2024 1:45â€¯PM"><a href=#chatlog__message-container-1230574935336816782>4/18/2024 1:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Maybe DuckDB is the answer to this, too... what is the most efficient way to query for numeric ID (like a classic SQL query) from a lanceDB database? For example, all rows where a user id is &quot;1234&quot;.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230575265474809886 class=chatlog__message-container data-message-id=1230575265474809886><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=leonyin_>Leon Yin</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1230574935336816782')"> Maybe DuckDB is the answer to this, too... what is the most efficient way to query for numeric ID (like a classic SQL query) from a lanceDB database? For example, all rows where a user id is &quot;1234&quot;. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Thursday, April 18, 2024 1:46â€¯PM"><a href=#chatlog__message-container-1230575265474809886>4/18/2024 1:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>For that you can just use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.where()</code>: <a href="https://lancedb.github.io/lancedb/sql/#__tabbed_5_1">https://lancedb.github.io/lancedb/sql/#__tabbed_5_1</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230576147771953162 class=chatlog__message-container data-message-id=1230576147771953162><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1230575265474809886')"> For that you can just use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.where()</code>: <a href="https://lancedb.github.io/lancedb/sql/#__tabbed_5_1">https://lancedb.github.io/lancedb/sql/#__tabbed_5_1</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Thursday, April 18, 2024 1:50â€¯PM"><a href=#chatlog__message-container-1230576147771953162>4/18/2024 1:50â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Documentation I missed! Thank you</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230970322157834260 class=chatlog__message-container data-message-id=1230970322157834260><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/280489969376690177/a7a8517c6fe558bfe5138b7679af5edd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=_leiferickson data-user-id=280489969376690177>Leif Erickson</span> <span class=chatlog__timestamp title="Friday, April 19, 2024 3:56â€¯PM"><a href=#chatlog__message-container-1230970322157834260>4/19/2024 3:56â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What is a common way to backup and restore (or copy, or...?) Between local and s3 storage?  I&#39;d like to dev locally with local data, or is this uncommon and I should just use s3 foe both local and aws scenarios?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230970952205205665 class=chatlog__message-container data-message-id=1230970952205205665><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/280489969376690177/a7a8517c6fe558bfe5138b7679af5edd.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=_leiferickson>Leif Erickson</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1230970322157834260')"> What is a common way to backup and restore (or copy, or...?) Between local and s3 storage?  I&#39;d like to dev locally with local data, or is this uncommon and I should just use s3 foe both local and aws scenarios? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Friday, April 19, 2024 3:59â€¯PM"><a href=#chatlog__message-container-1230970952205205665>4/19/2024 3:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If you want to work locally. You can copy the entire directory to / from S3. This won&#39;t be able to &quot;merge&quot; changes between two copies of the same table, if they both have modifications though.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230971298151272488 class=chatlog__message-container data-message-id=1230971298151272488><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/280489969376690177/a7a8517c6fe558bfe5138b7679af5edd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=_leiferickson data-user-id=280489969376690177>Leif Erickson</span> <span class=chatlog__timestamp title="Friday, April 19, 2024 4:00â€¯PM"><a href=#chatlog__message-container-1230971298151272488>4/19/2024 4:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Makes sense.  I&#39;d like to resync local data at times, but not push both directions.  

Does it make sense to use minio locally or just copy the files?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230971546475171860 class=chatlog__message-container data-message-id=1230971546475171860><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/280489969376690177/a7a8517c6fe558bfe5138b7679af5edd.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=_leiferickson>Leif Erickson</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1230971298151272488')"> Makes sense.  I&#39;d like to resync local data at times, but not push both directions.  

Does it make sense to use minio locally or just copy the files? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Friday, April 19, 2024 4:01â€¯PM"><a href=#chatlog__message-container-1230971546475171860>4/19/2024 4:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>No need to use minio. Just copying the files will work fine.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1230971957802176564 class=chatlog__message-container data-message-id=1230971957802176564><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/280489969376690177/a7a8517c6fe558bfe5138b7679af5edd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=_leiferickson data-user-id=280489969376690177>Leif Erickson</span> <span class=chatlog__timestamp title="Friday, April 19, 2024 4:03â€¯PM"><a href=#chatlog__message-container-1230971957802176564>4/19/2024 4:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Excellent! ty</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231259847715061831 class=chatlog__message-container data-message-id=1231259847715061831><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Saturday, April 20, 2024 11:07â€¯AM"><a href=#chatlog__message-container-1231259847715061831>4/20/2024 11:07â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi! Is there a way to configure object_store backoffs (<a href="https://docs.rs/object_store/latest/object_store/struct.BackoffConfig.html)">https://docs.rs/object_store/latest/object_store/struct.BackoffConfig.html)</a> from the lance Python bindings?</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://docs.rs/object_store/latest/object_store/struct.BackoffConfig.html><div class="chatlog__markdown chatlog__markdown-preserve">BackoffConfig in object_store - Rust</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Exponential backoff with jitter</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231372138687103021 class=chatlog__message-container data-message-id=1231372138687103021><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, April 20, 2024 6:33â€¯PM"> <a href=#chatlog__message-container-1231372138687103021>4/20/2024 6:33â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231561526343761931 class=chatlog__message-container data-message-id=1231561526343761931><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title="Deleted User" data-user-id=456226577798135808>Deleted User</span> <span class=chatlog__timestamp title="Sunday, April 21, 2024 7:05â€¯AM"><a href=#chatlog__message-container-1231561526343761931>4/21/2024 7:05â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg">  im watching this podcast from fireworks ai ceo + technical overview and they mention something about DBs being smart and they optmize themselves

heres the relevant bit (the yt url starts at the right time) <a href="https://youtu.be/KVlEYLULbss?feature=shared&amp;t=4225">https://youtu.be/KVlEYLULbss?feature=shared&amp;t=4225</a>

I&#39;m curious, is lancedb planning on implementing this thing she mentioned where the db optimizes itself? any long term vision for that future for lancedb?</span> <span class=chatlog__edited-timestamp title="Sunday, April 21, 2024 7:06â€¯AM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(255,0,0,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-author-container><a class=chatlog__embed-author-link href=https://www.youtube.com/channel/UCjNRVMBVI30Sak_p6HRWhIA><div class=chatlog__embed-author>Cognitive Revolution &quot;How AI Changes Everything&quot;</div></a></div><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://www.youtube.com/watch?v=KVlEYLULbss&amp;start=4225"><div class="chatlog__markdown chatlog__markdown-preserve">AI Inference: Good, Fast, and Cheap, with Lin Qiao &amp; Dmytro Ivchenk...</div></a></div><div class=chatlog__embed-youtube-container><iframe class=chatlog__embed-youtube src=https://www.youtube.com/embed/KVlEYLULbss width=400 height=225></iframe></div></div></div></div></div></div></div></div><div id=chatlog__message-container-1231563087564374138 class=chatlog__message-container data-message-id=1231563087564374138><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, April 21, 2024 7:12â€¯AM">7:12â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>on second thought since lancedb being a diskANN and already optimized in that manner, don&#39;t think this &quot;self optimizing&quot; scenario on a &quot;table&quot;-level applies. i think an optimizer in lance&#39;s standpoint could be a RAGAS based optimizer based on the knobs lancedb offers where something automaticallly tests for recall/query latency/correct retrieved docs scoring number, then tuning the params based off that</span> <span class=chatlog__edited-timestamp title="Sunday, April 21, 2024 7:12â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231894548440027146 class=chatlog__message-container data-message-id=1231894548440027146><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/779784350320689152/1fd145c1b6ca0dad1e498fe85a4a02d9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span class=chatlog__timestamp title="Monday, April 22, 2024 5:09â€¯AM"><a href=#chatlog__message-container-1231894548440027146>4/22/2024 5:09â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible to use LanceModel as an input_model in FastAPI + pydantic?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231895017983836231 class=chatlog__message-container data-message-id=1231895017983836231><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/779784350320689152/1fd145c1b6ca0dad1e498fe85a4a02d9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title="Deleted User">Deleted User</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1231563087564374138')"> on second thought since lancedb being a diskANN and already optimized in that manner, don&#39;t think this &quot;self optimizing&quot; scenario on a &quot;table&quot;-level applies. i think an optimizer in lance&#39;s standpoint could be a RAGAS based optimizer based on the knobs lancedb offers where something automaticallly tests for recall/query latency/correct retrieved docs scoring number, then tuning the params based off that </span> <span class=chatlog__reply-edited-timestamp title="Sunday, April 21, 2024 7:12â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span class=chatlog__timestamp title="Monday, April 22, 2024 5:10â€¯AM"><a href=#chatlog__message-container-1231895017983836231>4/22/2024 5:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Just a personal opinion: I think this is the job of the developer. RAG has more knobs to turn than you think especially as you move into adding reranking and query preprocessing. In the end it&#39;s the job of the developer to find the right combination of &quot;hyperparameters&quot; to get the most performance and his chosen level of complexity.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231964082484154439 class=chatlog__message-container data-message-id=1231964082484154439><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/779784350320689152/1fd145c1b6ca0dad1e498fe85a4a02d9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span class=chatlog__timestamp title="Monday, April 22, 2024 9:45â€¯AM"><a href=#chatlog__message-container-1231964082484154439>4/22/2024 9:45â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How can I make sense of this error:

tbl.create_fts_index(&quot;description&quot;)


     63 schema = schema_builder.build()
     64 os.makedirs(index_path, exist_ok=True)
---&gt; 65 index = tantivy.Index(schema, path=index_path)
     66 return index

ValueError: Schema error: &#39;An index exists but the schema does not match.&#39;</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231965304603545763 class=chatlog__message-container data-message-id=1231965304603545763><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/535805966927790091/2a972be74d56102f99d390c2dcf58fff.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=smkiv data-user-id=535805966927790091>Mark</span> <span class=chatlog__timestamp title="Monday, April 22, 2024 9:50â€¯AM"><a href=#chatlog__message-container-1231965304603545763>4/22/2024 9:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hey! i&#39;m running into a situation where a filter without ANN search returns results but the same filter with ANN search doesn&#39;t. would this be expected under certain circumstances (e.g. having to do with my index setup)?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">In [18]: len(tbl.search(query).where(f&quot;doc_id = &#39;{doc_id}&#39;&quot;, prefilter=True).to_list())
Out[18]: 0

In [19]: len(tbl.search().where(f&quot;doc_id = &#39;{doc_id}&#39;&quot;).to_list())
Out[19]: 10</code>

if helpful, i&#39;m on 0.6.8 using s3 for storage with ~5m rows. along with my vector index, i have a scalar index on doc_id, and ran <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">compact_files</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> after this document was added.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1231982564454043673 class=chatlog__message-container data-message-id=1231982564454043673><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, April 22, 2024 10:58â€¯AM"> <a href=#chatlog__message-container-1231982564454043673>4/22/2024 10:58â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1231993976513630324 class=chatlog__message-container data-message-id=1231993976513630324><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, April 22, 2024 11:44â€¯AM"> <a href=#chatlog__message-container-1231993976513630324>4/22/2024 11:44â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1232085072144765018 class=chatlog__message-container data-message-id=1232085072144765018><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Monday, April 22, 2024 5:46â€¯PM"><a href=#chatlog__message-container-1232085072144765018>4/22/2024 5:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I am not getting back a result I know is in the database (via image embeddings), is this something that I should tweak with larger <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">nprobes</code>, or re-fitting the ANN index with different params? The dataset is about 2.5M at the moment</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1232233050461700159 class=chatlog__message-container data-message-id=1232233050461700159><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dhruv_aintech data-user-id=1097776143941259324>dhruv-aintech</span> <span class=chatlog__timestamp title="Tuesday, April 23, 2024 3:34â€¯AM"><a href=#chatlog__message-container-1232233050461700159>4/23/2024 3:34â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I&#39;m running into this error while inserting records containig NaT in a timestamp field:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">line 141, in upsert_data
    table.add(batch_dict)
  File &quot;/opt/homebrew/lib/python3.11/site-packages/lancedb/table.py&quot;, line 1168, in add
    data = _sanitize_data(
           ^^^^^^^^^^^^^^^
  File &quot;/opt/homebrew/lib/python3.11/site-packages/lancedb/table.py&quot;, line 83, in _sanitize_data
    data = pa.Table.from_pylist(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;pyarrow/table.pxi&quot;, line 1877, in pyarrow.lib._Tabular.from_pylist
  File &quot;pyarrow/table.pxi&quot;, line 5399, in pyarrow.lib._from_pylist
  File &quot;pyarrow/table.pxi&quot;, line 3974, in pyarrow.lib.Table.from_arrays
  File &quot;pyarrow/table.pxi&quot;, line 1449, in pyarrow.lib._sanitize_arrays
  File &quot;pyarrow/table.pxi&quot;, line 1430, in pyarrow.lib._schema_from_arrays
  File &quot;pyarrow/array.pxi&quot;, line 343, in pyarrow.lib.array
  File &quot;pyarrow/array.pxi&quot;, line 42, in pyarrow.lib._sequence_to_array
  File &quot;pyarrow/error.pxi&quot;, line 154, in pyarrow.lib.pyarrow_internal_check_status
  File &quot;pyarrow/error.pxi&quot;, line 88, in pyarrow.lib.check_status
  File &quot;nattype.pyx&quot;, line 58, in pandas._libs.tslibs.nattype._make_error_func.f
ValueError: NaTType does not support utcoffset</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1232318578003546127 class=chatlog__message-container data-message-id=1232318578003546127><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 23, 2024 9:14â€¯AM"> <a href=#chatlog__message-container-1232318578003546127>4/23/2024 9:14â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1232686584659316806 class=chatlog__message-container data-message-id=1232686584659316806><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/758438080532971542/190de9b0ec14097db8fce7739f9fc1e8.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=glesperance data-user-id=758438080532971542>Gabriel</span> <span class=chatlog__timestamp title="Wednesday, April 24, 2024 9:36â€¯AM"><a href=#chatlog__message-container-1232686584659316806>4/24/2024 9:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi everyone we&#39;re evaluating LanceDB as a potential replacement for our project and we&#39;re looking for guidance on how to do nested objects / multivector arrays with LanceDB.

What we want to do is something like

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">class Document(LanceModel):
    chunks: List[str]
    chunks_vectors: List[Vector(10)]

table = await db.create_table(&quot;documents&quot;, schema=Document)</code>

however we&#39;re getting the following error:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">TypeError: Converting Pydantic type to Arrow Type: unsupported type &lt;class &#39;lancedb.pydantic.Vector.&lt;locals&gt;.FixedSizeList&#39;&gt;.</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1232708484873850905 class=chatlog__message-container data-message-id=1232708484873850905><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, April 24, 2024 11:03â€¯AM"> <a href=#chatlog__message-container-1232708484873850905>4/24/2024 11:03â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233470311924629696 class=chatlog__message-container data-message-id=1233470311924629696><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aravind_86268_79282 data-user-id=1233469130800103475>Aravind</span> <span class=chatlog__timestamp title="Friday, April 26, 2024 1:30â€¯PM"><a href=#chatlog__message-container-1233470311924629696>4/26/2024 1:30â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hey team, I&#39;m able to create an index  like so:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    db = lancedb.connect(
        &#39;az://lancedb/delaware/db&#39;,
        storage_options={&#39;timeout&#39;: &#39;120s&#39;},
    )
    tbl = db.create_table(&#39;test_db&#39;, data=create_df)</code>

but when I try connecting to it:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    db = lancedb.connect(
        &#39;az://lancedb/delaware/db&#39;,
    )
    tbl = db.open_table(&#39;test_db&#39;)</code>
I see this error: 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">  File &quot;pyarrow/_fs.pyx&quot;, line 471, in pyarrow._fs.FileSystem.from_uri
  File &quot;pyarrow/error.pxi&quot;, line 154, in pyarrow.lib.pyarrow_internal_check_status
  File &quot;pyarrow/error.pxi&quot;, line 91, in pyarrow.lib.check_status
pyarrow.lib.ArrowInvalid: Unrecognized filesystem type in URI: az://lancedb/delaware/db/test_db.lance</code>
What&#39;s the issue here?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233521404545339474 class=chatlog__message-container data-message-id=1233521404545339474><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Friday, April 26, 2024 4:53â€¯PM"><a href=#chatlog__message-container-1233521404545339474>4/26/2024 4:53â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello I&#39;ve <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pip install lancedb</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pip install pylance</code> but keep getting the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">&gt;&gt;&gt; import lancedb
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/opt/homebrew/Caskroom/miniconda/base/envs/harvey_backend/lib/python3.10/site-packages/lancedb/__init__.py&quot;, line 24, in &lt;module&gt;
    from .db import AsyncConnection, DBConnection, LanceDBConnection
  File &quot;/opt/homebrew/Caskroom/miniconda/base/envs/harvey_backend/lib/python3.10/site-packages/lancedb/db.py&quot;, line 31, in &lt;module&gt;
    from .table import AsyncTable, LanceTable, Table, _sanitize_data
  File &quot;/opt/homebrew/Caskroom/miniconda/base/envs/harvey_backend/lib/python3.10/site-packages/lancedb/table.py&quot;, line 39, in &lt;module&gt;
    from lance import LanceDataset
ImportError: cannot import name &#39;LanceDataset&#39; from &#39;lance&#39; (unknown location)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233525482004414550 class=chatlog__message-container data-message-id=1233525482004414550><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, April 26, 2024 5:09â€¯PM"> <a href=#chatlog__message-container-1233525482004414550>4/26/2024 5:09â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233583629066834000 class=chatlog__message-container data-message-id=1233583629066834000><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/772537007812902915/a9f8bff08cbac9eebff404fe22839e0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=pwnosaurusrex data-user-id=772537007812902915>DiscoRex</span> <span class=chatlog__timestamp title="Friday, April 26, 2024 9:00â€¯PM"><a href=#chatlog__message-container-1233583629066834000>4/26/2024 9:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey all, loving Lancedb so far! The docs on the site go over hybrid/fts/vector search and work great, but I&#39;m wondering if there is a cleaner way to use those same capabilities with llamaindex?

Right now I have to basically follow this tutorial but it seems overkill to enable hybrid search since lancedb can do it on its own.

<a href="https://docs.llamaindex.ai/en/stable/examples/retrievers/reciprocal_rerank_fusion/">https://docs.llamaindex.ai/en/stable/examples/retrievers/reciprocal_rerank_fusion/</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233649817805389844 class=chatlog__message-container data-message-id=1233649817805389844><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Saturday, April 27, 2024 1:23â€¯AM"><a href=#chatlog__message-container-1233649817805389844>4/27/2024 1:23â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Does setting a scalar index on the insert key speed up <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">merge_insert</code> ? <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.merge_insert">https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.merge_insert</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233658970426707983 class=chatlog__message-container data-message-id=1233658970426707983><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, April 27, 2024 2:00â€¯AM"> <a href=#chatlog__message-container-1233658970426707983>4/27/2024 2:00â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1233810423753609286 class=chatlog__message-container data-message-id=1233810423753609286><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=hahn_22002 data-user-id=759561477970591744>Hahn</span> <span class=chatlog__timestamp title="Saturday, April 27, 2024 12:02â€¯PM"><a href=#chatlog__message-container-1233810423753609286>4/27/2024 12:02â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I saw the instructions to connect to azw, but I can&#39;t find the document mentioned Hadoop. Can we write lancedb via Hadoop uri? Thank you.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234022959815856133 class=chatlog__message-container data-message-id=1234022959815856133><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, April 28, 2024 2:06â€¯AM"> <a href=#chatlog__message-container-1234022959815856133>4/28/2024 2:06â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234046950953848883 class=chatlog__message-container data-message-id=1234046950953848883><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sakura9928 data-user-id=293060952134254595>sakura</span> <span class=chatlog__timestamp title="Sunday, April 28, 2024 3:42â€¯AM"><a href=#chatlog__message-container-1234046950953848883>4/28/2024 3:42â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Can I do vector search meanwhile an index is being created? I have tried both the sync table and the async table, neither of them can perform vector search when indexing process is going on.

When using sync table:
The search() function will throw exception saying that it fails to lock the mutex.

When using async table:
The search() function is pended and it seems waiting for the async indexing to finish.

Is this the expected behavior? Please help! I don&#39;t want the process of building index blocks search operations. Is threre a way to do that?</span> <span class=chatlog__edited-timestamp title="Sunday, April 28, 2024 5:22â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234141359556792416 class=chatlog__message-container data-message-id=1234141359556792416><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, April 28, 2024 9:57â€¯AM"> <a href=#chatlog__message-container-1234141359556792416>4/28/2024 9:57â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234609377529434254 class=chatlog__message-container data-message-id=1234609377529434254><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Monday, April 29, 2024 4:56â€¯PM"><a href=#chatlog__message-container-1234609377529434254>4/29/2024 4:56â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, we have a few packages (like pulumi) that are incompatible with semver&gt;3.0. Is it possible to merge this PR: <a href="https://github.com/lancedb/lancedb/pull/1253">https://github.com/lancedb/lancedb/pull/1253</a></span> <span class=chatlog__edited-timestamp title="Monday, April 29, 2024 4:59â€¯PM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/pull/1253><div class="chatlog__markdown chatlog__markdown-preserve">Remove semvar strict dependancy by AmanKishore &#183; Pull Request #1253...</div></a></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/SMAYjmy041pga7qEqEV6jQd7bivn71PNtOWsaBInsRM/https/opengraph.githubassets.com/a1b6bb7163d6796bf5e887cf8998fb2c7ca25c8bd82d0eb3ae3698f710b11671/lancedb/lancedb/pull/1253> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/SMAYjmy041pga7qEqEV6jQd7bivn71PNtOWsaBInsRM/https/opengraph.githubassets.com/a1b6bb7163d6796bf5e887cf8998fb2c7ca25c8bd82d0eb3ae3698f710b11671/lancedb/lancedb/pull/1253 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234612799347495024 class=chatlog__message-container data-message-id=1234612799347495024><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Monday, April 29, 2024 5:10â€¯PM"><a href=#chatlog__message-container-1234612799347495024>4/29/2024 5:10â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a fresh S3 bucket and I would like to take parquet files stored on my laptop and write them to lance files in the S3 bucket. 

I want to take advantage of the lance writer to have it manage a cluster of lance files and update this periodically with flexibility for streaming/batch

Is this relatively easy to do? Does this make sense as a use case?

The main parts I am not sure about is connecting remotely to a s3 bucket and creating lance tables from scratch</span> <span class=chatlog__edited-timestamp title="Monday, April 29, 2024 5:12â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234636281502502983 class=chatlog__message-container data-message-id=1234636281502502983><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Monday, April 29, 2024 6:43â€¯PM"><a href=#chatlog__message-container-1234636281502502983>4/29/2024 6:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>When adding vectors. Does overwrite only overwrite items with the same id?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234645101339480151 class=chatlog__message-container data-message-id=1234645101339480151><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=amankishore data-user-id=473584917054357525>Aman</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, April 29, 2024 7:18â€¯PM"> <a href=#chatlog__message-container-1234645101339480151>4/29/2024 7:18â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234925176144269445 class=chatlog__message-container data-message-id=1234925176144269445><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Tuesday, April 30, 2024 1:51â€¯PM"><a href=#chatlog__message-container-1234925176144269445>4/30/2024 1:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is prefilter supported on async?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1234973002785882132 class=chatlog__message-container data-message-id=1234973002785882132><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Tuesday, April 30, 2024 5:01â€¯PM"><a href=#chatlog__message-container-1234973002785882132>4/30/2024 5:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Best practices question: If I am using lanceDB for a user-facing application and only want searches on a version of the table with index optimization I should &quot;checkout&quot; a previous version? I am thinking of a case where data is continuously added to the table, but index optimization hasn&#39;t been run yet. Thanks!</span> <span class=chatlog__edited-timestamp title="Tuesday, April 30, 2024 5:08â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235002251441864749 class=chatlog__message-container data-message-id=1235002251441864749><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 30, 2024 6:58â€¯PM"> <a href=#chatlog__message-container-1235002251441864749>4/30/2024 6:58â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1235002675456901125 class=chatlog__message-container data-message-id=1235002675456901125><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 30, 2024 6:59â€¯PM"> <a href=#chatlog__message-container-1235002675456901125>4/30/2024 6:59â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235271985693458562 class=chatlog__message-container data-message-id=1235271985693458562><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Wednesday, May 1, 2024 12:49â€¯PM"><a href=#chatlog__message-container-1235271985693458562>5/1/2024 12:49â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible to update the DB schema?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235281949938159636 class=chatlog__message-container data-message-id=1235281949938159636><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Wednesday, May 1, 2024 1:29â€¯PM"><a href=#chatlog__message-container-1235281949938159636>5/1/2024 1:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Can I use cuda to create an index with async?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235294058880962645 class=chatlog__message-container data-message-id=1235294058880962645><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 1, 2024 2:17â€¯PM"> <a href=#chatlog__message-container-1235294058880962645>5/1/2024 2:17â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1235294491083014340 class=chatlog__message-container data-message-id=1235294491083014340><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 1, 2024 2:19â€¯PM"> <a href=#chatlog__message-container-1235294491083014340>5/1/2024 2:19â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235315307069968546 class=chatlog__message-container data-message-id=1235315307069968546><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/301919579876229130/621fd50f9aa22d3afa6dbb4c04c72a0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span class=chatlog__timestamp title="Wednesday, May 1, 2024 3:42â€¯PM"><a href=#chatlog__message-container-1235315307069968546>5/1/2024 3:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! I am getting an error when I am trying to set a full text search index: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: Schema error: &#39;An index exists but the schema does not match.&#39;</code> I am not sure what this means, I made a scalar index on another column (happy to remove, if that&#39;s the problem). Not sure what the schema error is, as the column is a string column</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235325543579390038 class=chatlog__message-container data-message-id=1235325543579390038><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=leonyin_ data-user-id=301919579876229130>Leon Yin</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 1, 2024 4:22â€¯PM"> <a href=#chatlog__message-container-1235325543579390038>5/1/2024 4:22â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235383256707498055 class=chatlog__message-container data-message-id=1235383256707498055><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/772537007812902915/a9f8bff08cbac9eebff404fe22839e0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=pwnosaurusrex data-user-id=772537007812902915>DiscoRex</span> <span class=chatlog__timestamp title="Wednesday, May 1, 2024 8:12â€¯PM"><a href=#chatlog__message-container-1235383256707498055>5/1/2024 8:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I wanted to query the database and get all distinct values in a column, can I do that natively? Or do I have to convert it to arrow or pandas first? And if I do have to go to pandas, how can I make sure I get the entire number of elements? Other than hoping .limit(100000) or whatever is the right number</span> <span class=chatlog__edited-timestamp title="Wednesday, May 1, 2024 8:17â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1235391846105088134 class=chatlog__message-container data-message-id=1235391846105088134><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 1, 2024 8:46â€¯PM"> <a href=#chatlog__message-container-1235391846105088134>5/1/2024 8:46â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236011123044519956 class=chatlog__message-container data-message-id=1236011123044519956><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kafonek data-user-id=267153215185879050>kafonek</span> <span class=chatlog__timestamp title="Friday, May 3, 2024 1:46â€¯PM"><a href=#chatlog__message-container-1236011123044519956>5/3/2024 1:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, new Lance user here. I&#39;m trying to go through some minimal demos to get a feel for using Lance as a dataloader (pytorch or burn). Super dumb question, but how should I store mnist images in Lance? I tried converting bytes to PIL to flattened np arrays, which loads them into pyarrow table and lance as <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">list&lt;item: uint8&gt; child 0, item: uint8</code>. When I then try to pull a batch from <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.torch.data.LanceDataset</code> on my table, I get an error from <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">batch = self._to_tensor_fn(batch)</code>: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: Only support FixedSizeList&lt;f16/f32/f64&gt; or numeric values, got: list&lt;item: uint8&gt;</code>

I suspect I&#39;m not thinking about storing this data in a pyarrow / lance idiomatic way. Appreciate any tips!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236044284722151425 class=chatlog__message-container data-message-id=1236044284722151425><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, May 3, 2024 3:58â€¯PM"><a href=#chatlog__message-container-1236044284722151425>5/3/2024 3:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>so it looks like the lancedb table does not have the same features as the lance async table.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">        db = await lancedb.connect_async(
            s3_bucket_path,
            storage_options={
                &quot;aws_access_key_id&quot;: ACCESS_KEY,
                &quot;aws_secret_access_key&quot;: SECRET_KEY,
                &quot;aws_region&quot;: REGION,
            }
        )
        table = await db.open_table(table_name)

        print(f&#39;table: {table}&#39;)

        results = table.to_polars().select(&quot;block_number&quot;).sort(
            by=&quot;block_number&quot;, descending=True).collect()[&quot;block_number&quot;][0]
        # # Get the latest block number
        print(
            results
        )</code>

This gives me the error <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">AttributeError: &#39;AsyncTable&#39; object has no attribute &#39;to_polars&#39;</code>

Note that I have to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">connect_async()</code> to connect to the s3 bucket and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline"> connect()</code> doesn&#39;t work - it seems like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">connect()</code> is only meant to accept connections from lanceDB cloud</span> <span class=chatlog__edited-timestamp title="Friday, May 3, 2024 4:01â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236053213376020546 class=chatlog__message-container data-message-id=1236053213376020546><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, May 3, 2024 4:34â€¯PM"> <a href=#chatlog__message-container-1236053213376020546>5/3/2024 4:34â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236116277458763837 class=chatlog__message-container data-message-id=1236116277458763837><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, May 3, 2024 8:44â€¯PM"><a href=#chatlog__message-container-1236116277458763837>5/3/2024 8:44â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">[2024-05-04T00:39:21Z WARN  lance_table::io::commit] Using unsafe commit handler. Concurrent writes may result in data loss. Consider providing a commit handler that prevents conflicting writes.</code></span></div></div></div></div><div id=chatlog__message-container-1236116304319217664 class=chatlog__message-container data-message-id=1236116304319217664><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, May 3, 2024 8:44â€¯PM">8:44â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>how can I deal with this warning sign? <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘€"
    title="eyes"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f440.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236124734262083654 class=chatlog__message-container data-message-id=1236124734262083654><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, May 3, 2024 9:18â€¯PM"><a href=#chatlog__message-container-1236124734262083654>5/3/2024 9:18â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I just moved some data to a s3 bucket, a couple million rows. Doing a relatively simple groupby with duckdb takes about 40 seconds on ~6gb of data. This seems relatively slow. Note that I am not doing the group by on the &quot;index&quot;.

If I do a groupby on the index, then the query is sped up by about 50%. But this still seems relatively slow. SQL Snippet

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python"># duckdb output format
duckdb.sql(
    &quot;&quot;&quot;
    SELECT 
    &quot;block_number&quot;,
    COUNT(*) AS tx_count, -- Equivalent to pl.len().alias(&quot;tx_count&quot;)
    FROM 
        duckdb_table
    GROUP BY 
        &quot;block_number&quot;
    ORDER BY
    tx_count
           &quot;&quot;&quot;
)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236338479751888910 class=chatlog__message-container data-message-id=1236338479751888910><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, May 4, 2024 11:27â€¯AM"> <a href=#chatlog__message-container-1236338479751888910>5/4/2024 11:27â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236356857954701392 class=chatlog__message-container data-message-id=1236356857954701392><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Saturday, May 4, 2024 12:40â€¯PM"><a href=#chatlog__message-container-1236356857954701392>5/4/2024 12:40â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible to rename the table at the moment?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236361419574874202 class=chatlog__message-container data-message-id=1236361419574874202><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=amankishore>Aman</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1236356857954701392')"> Is it possible to rename the table at the moment? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Saturday, May 4, 2024 12:58â€¯PM"><a href=#chatlog__message-container-1236361419574874202>5/4/2024 12:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is this local or lancedb cloud?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236364097243840542 class=chatlog__message-container data-message-id=1236364097243840542><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Saturday, May 4, 2024 1:09â€¯PM"><a href=#chatlog__message-container-1236364097243840542>5/4/2024 1:09â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m getting a KNN timeout error (though a minute ago it was working fine)

Is this because I&#39;m building an index?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError: lance error: LanceError(IO): Execution error: External error: Execution error: LanceError(IO): Execution error: Failed to calculate KNN: LanceError(IO): Generic MicrosoftAzure error: request or response body error: operation timed out</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236364545816002670 class=chatlog__message-container data-message-id=1236364545816002670><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Saturday, May 4, 2024 1:11â€¯PM"><a href=#chatlog__message-container-1236364545816002670>5/4/2024 1:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>It shouldn&#39;t matter but maybe.  Training an index will involve a lot of IO (need to pull down the vector column) and so it&#39;s possible it&#39;s clogging the network somewhere.  Or, maybe more likely, your system is starved for CPU and cant fetch data fast enough.  What&#39;s top look like?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236393170250633386 class=chatlog__message-container data-message-id=1236393170250633386><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473584917054357525/e4b0621b0fc482db23f7291a2fccd864.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=amankishore data-user-id=473584917054357525>Aman</span> <span class=chatlog__timestamp title="Saturday, May 4, 2024 3:05â€¯PM"><a href=#chatlog__message-container-1236393170250633386>5/4/2024 3:05â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>After adding a scalar index, I&#39;m only getting 4 results instead of 100 when querying with a filter</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236405823501238406 class=chatlog__message-container data-message-id=1236405823501238406><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, May 4, 2024 3:55â€¯PM"> <a href=#chatlog__message-container-1236405823501238406>5/4/2024 3:55â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1236708412801159278 class=chatlog__message-container data-message-id=1236708412801159278><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Sunday, May 5, 2024 11:57â€¯AM"><a href=#chatlog__message-container-1236708412801159278>5/5/2024 11:57â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I&#39;m trying to use lancedb with Logfire for logging. The suggested way to do logging for the OpenAI client is something like below

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">from openai import AsyncOpenAI
import logfire
import instructor

openai_client = AsyncOpenAI()
logfire.instrument_openai(openai_client)

async_client = instructor.from_openai(openai_client)</code>

However, I don&#39;t get the option to pass in a custom client or wrap the operations with the logfire integration. Any suggestions on how to log the OpenAPI calls using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">logfire</code> ?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">with logfire.span(&quot;Create DB and Table&quot;):
        db = connect(db_path)

        if table_name not in db.table_names():
            db.create_table(table_name, schema=TextChunk, mode=&quot;overwrite&quot;)

        if &quot;document&quot; not in db.table_names():
            db.create_table(&quot;document&quot;, schema=Document, mode=&quot;overwrite&quot;)

    with logfire.span(&quot;Open Table and DB&quot;):
        table = db.open_table(table_name)
        document_table = db.open_table(&quot;document&quot;)
        path = Path(folder_path)

        if not path.exists():
            raise ValueError(f&quot;Ingestion folder of {folder_path} does not exist&quot;)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237072044726943881 class=chatlog__message-container data-message-id=1237072044726943881><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, May 6, 2024 12:02â€¯PM"> <a href=#chatlog__message-container-1237072044726943881>5/6/2024 12:02â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1237107370622976035 class=chatlog__message-container data-message-id=1237107370622976035><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, May 6, 2024 2:23â€¯PM"> <a href=#chatlog__message-container-1237107370622976035>5/6/2024 2:23â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237153206241595393 class=chatlog__message-container data-message-id=1237153206241595393><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/809863396723130429/63a8cbd9255e5a064f03eb85f7c05a62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kloos0961 data-user-id=809863396723130429>kloos</span> <span class=chatlog__timestamp title="Monday, May 6, 2024 5:25â€¯PM"><a href=#chatlog__message-container-1237153206241595393>5/6/2024 5:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi guys, question about the hybrid search:  I have a table which the vector column is filled with embeddings created outside of LanceDB. When I do hybrid search there&#39;s an error: &quot;No embedding function for vector&quot;. Does it mean that I have to do the get_registry() step and change the vector column schema in order to do hybrid search? Is it possible to add an embedding function to existing table?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237156814865432662 class=chatlog__message-container data-message-id=1237156814865432662><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, May 6, 2024 5:39â€¯PM"> <a href=#chatlog__message-container-1237156814865432662>5/6/2024 5:39â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237341838063702078 class=chatlog__message-container data-message-id=1237341838063702078><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title="Deleted User" data-user-id=456226577798135808>Deleted User</span> <span class=chatlog__timestamp title="Tuesday, May 7, 2024 5:54â€¯AM"><a href=#chatlog__message-container-1237341838063702078>5/7/2024 5:54â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello,
I&#39;m new to LanceDB and I have a problem.
I&#39;ve added some data into a LanceDB and I&#39;m toying with full text search.

This code works (= it returns a unique result)
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">working =  tbl.search(&quot;loyer&quot;).limit(1).select([&quot;lemma&quot;]).to_list()
print(working)</code>

This one doesn&#39;t:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">not_working  =  tbl.search(&quot;loyer&quot;).limit(2).select([&quot;lemma&quot;]).to_list()
print(not_working)</code>
It throws: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Invalid argument error: Last offset 430 of Utf8 is larger than values length 215, /Users/runner/work/lance/lance/rust/lance-core/src/encodings/binary.rs:397:26</code>

Do you have any clue?
Thanks a lot</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237350091191222293 class=chatlog__message-container data-message-id=1237350091191222293><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=elec97 data-user-id=410684009404694529>elec</span> <span class=chatlog__timestamp title="Tuesday, May 7, 2024 6:27â€¯AM"><a href=#chatlog__message-container-1237350091191222293>5/7/2024 6:27â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, New to lanceDB, trying to connect it to localhost minio, I found a guide written in Minio blog so I followed it, 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    db = lancedb.connect(&quot;s3://lance/lancedb/&quot;)
    table = db.create_table(&quot;mytable&quot;,data=generate_random_data(10))</code>
When using lancedb==0.4.1 it works okay, but when using lancedb==0.6.8 i get the error
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: LanceError(IO): Generic S3 error: Error performing list request: Error after 0 retries in 7.727&#181;s, max_retries:10, retry_timeout:180s, source:builder error for url (http://localhost:9000/lance?delimiter=%2F&amp;list-type=2&amp;prefix=lancedb%2Fmytable1.lance%2F_versions%2F): URL scheme is not allowed, /home/runner/work/lance/lance/rust/lance-table/src/io/commit.rs:100:26</code>
idk if it is the reason but I noticed that the <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lancedb/python/lancedb/table.py</code> used to use <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">os.path.join()</code> but it changed to <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">join_uri</code></span> <span class=chatlog__edited-timestamp title="Tuesday, May 7, 2024 6:27â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237442480144650240 class=chatlog__message-container data-message-id=1237442480144650240><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title="Deleted User">Deleted User</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1237341838063702078')"> Hello,
I&#39;m new to LanceDB and I have a problem.
I&#39;ve added some data into a LanceDB and I&#39;m toying with full text search.

This code works (= it returns a unique result)
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">working =  tbl.search(&quot;loyer&quot;).limit(1).select([&quot;lemma&quot;]).to_list()
print(working)</code>

This one doesn&#39;t:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">not_working  =  tbl.search(&quot;loyer&quot;).limit(2).select([&quot;lemma&quot;]).to_list()
print(not_working)</code>
It throws: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Invalid argument error: Last offset 430 of Utf8 is larger than values length 215, /Users/runner/work/lance/lance/rust/lance-core/src/encodings/binary.rs:397:26</code>

Do you have any clue?
Thanks a lot </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Tuesday, May 7, 2024 12:34â€¯PM"><a href=#chatlog__message-container-1237442480144650240>5/7/2024 12:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi <span class="chatlog__markdown-mention" title="Deleted User">@Deleted User</span> , I replied in your GH discussion. <a href="https://github.com/lancedb/lancedb/discussions/1274">https://github.com/lancedb/lancedb/discussions/1274</a> Feel free to follow up there or create a thread here.</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/discussions/1274><div class="chatlog__markdown chatlog__markdown-preserve">Why does LanceDB throw when doing a full text search with limit(2) ...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Hello, First, thanks for making LanceDB! I&#39;m new to Lance and I have a question/problem. I&#39;ve added some data into a Lance DB and I&#39;m toying with full text search (with Python). This co...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/P2MztwNhZ89tBEVoAyfQ1ikSaJGKsBl9s5qTKjGaHPM/https/opengraph.githubassets.com/c4de8669462485f6f67160164cc2f5f80b67dbb1c68732d1697a26737b0b1ec5/lancedb/lancedb/discussions/1274> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/P2MztwNhZ89tBEVoAyfQ1ikSaJGKsBl9s5qTKjGaHPM/https/opengraph.githubassets.com/c4de8669462485f6f67160164cc2f5f80b67dbb1c68732d1697a26737b0b1ec5/lancedb/lancedb/discussions/1274 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237443212180717679 class=chatlog__message-container data-message-id=1237443212180717679><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, May 7, 2024 12:37â€¯PM"> <a href=#chatlog__message-container-1237443212180717679>5/7/2024 12:37â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237621069687296011 class=chatlog__message-container data-message-id=1237621069687296011><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 8, 2024 12:24â€¯AM"><a href=#chatlog__message-container-1237621069687296011>5/8/2024 12:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, when I frequently insert data into the lancedb, I find that the time for table.add will gradually become longer. At the beginning, the add time was about 100ms. When more than 7,700 pieces of data were inserted, it became about 1.5s. This time Any database related operations will become very slow. I noticed that the official website mentioned that batch insertion is recommended, but the current scenario has not implemented queue caching of data before batch insertion. So, why does frequent data insertion slow down? Is bulk insert necessary?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1237763822387724324 class=chatlog__message-container data-message-id=1237763822387724324><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 8, 2024 9:51â€¯AM"> <a href=#chatlog__message-container-1237763822387724324>5/8/2024 9:51â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1237789170374545516 class=chatlog__message-container data-message-id=1237789170374545516><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 8, 2024 11:32â€¯AM"> <a href=#chatlog__message-container-1237789170374545516>5/8/2024 11:32â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238260651965546517 class=chatlog__message-container data-message-id=1238260651965546517><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Thursday, May 9, 2024 6:45â€¯PM"><a href=#chatlog__message-container-1238260651965546517>5/9/2024 6:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there an easy way to go from a lancedb query (built using something like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table.search(...).where(...)</code> to its corresponding query plan? From what I can see, I need a handle on the underlying lance Scanner, but I can&#39;t figure out a way of getting there from the lancedb query object.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238517608119275525 class=chatlog__message-container data-message-id=1238517608119275525><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, May 10, 2024 11:46â€¯AM"> <a href=#chatlog__message-container-1238517608119275525>5/10/2024 11:46â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238721206006317066 class=chatlog__message-container data-message-id=1238721206006317066><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/673200424571895808/97a84afd1a60d0172d3ae6e3b833ccc1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=alex_au_ data-user-id=673200424571895808>Alex Au</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 1:15â€¯AM"><a href=#chatlog__message-container-1238721206006317066>5/11/2024 1:15â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Does lancedb FTS uses tantivy query under the hood, or with a custom implementation? Recently tantivy-py has updated tons of Query methods that setting up a custom nested Query object is possible, but the lancedb is still doing the basic query parsing Query only</span></div></div></div></div><div id=chatlog__message-container-1238721713605185547 class=chatlog__message-container data-message-id=1238721713605185547><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, May 11, 2024 1:17â€¯AM">1:17â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>FYI, say itâ€™s possible to create BooleanQuery([(Occur.Must, BoostQuery(PhraseQuery(â€¦), boost = 2)), â€¦]) sth like this, and some query is even not supported directly with the query parser say ConstScoreQuery, DisjunctionMaxQuery etc.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238907484480081942 class=chatlog__message-container data-message-id=1238907484480081942><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/673200424571895808/97a84afd1a60d0172d3ae6e3b833ccc1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=alex_au_>Alex Au</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1238721713605185547')"> FYI, say itâ€™s possible to create BooleanQuery([(Occur.Must, BoostQuery(PhraseQuery(â€¦), boost = 2)), â€¦]) sth like this, and some query is even not supported directly with the query parser say ConstScoreQuery, DisjunctionMaxQuery etc. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 1:36â€¯PM"><a href=#chatlog__message-container-1238907484480081942>5/11/2024 1:36â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Right now we use tantivy under the hood, but I think long term we will have a custom implementation.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238908024194728007 class=chatlog__message-container data-message-id=1238908024194728007><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/673200424571895808/97a84afd1a60d0172d3ae6e3b833ccc1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=alex_au_ data-user-id=673200424571895808>Alex Au</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 1:38â€¯PM"><a href=#chatlog__message-container-1238908024194728007>5/11/2024 1:38â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Then I suppose lancedb will not go for Class-based Lucene-like search (I mean those nested queries) but just use custom parser right?</span></div></div></div></div><div id=chatlog__message-container-1238908183716696134 class=chatlog__message-container data-message-id=1238908183716696134><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, May 11, 2024 1:38â€¯PM">1:38â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>As Iâ€™m quite used to Lucene / Elasticsearch-like searching so I would like to know more about it</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238908389870800959 class=chatlog__message-container data-message-id=1238908389870800959><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 1:39â€¯PM"><a href=#chatlog__message-container-1238908389870800959>5/11/2024 1:39â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>We&#39;re still in the early stages of designing how FTS will work in Lance in the future, so I&#39;m open to ideas on what&#39;s important to be part of the API</span></div></div></div></div><div id=chatlog__message-container-1238908445709697044 class=chatlog__message-container data-message-id=1238908445709697044><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, May 11, 2024 1:39â€¯PM">1:39â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ll take a look at the Lucene approach</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1238994201127944232 class=chatlog__message-container data-message-id=1238994201127944232><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/550656390679494657/492c95bfd1ad14bf1c9f2eb6edb1109d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/673200424571895808/97a84afd1a60d0172d3ae6e3b833ccc1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=alex_au_>Alex Au</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1238721713605185547')"> FYI, say itâ€™s possible to create BooleanQuery([(Occur.Must, BoostQuery(PhraseQuery(â€¦), boost = 2)), â€¦]) sth like this, and some query is even not supported directly with the query parser say ConstScoreQuery, DisjunctionMaxQuery etc. </span></div></div><div class=chatlog__header><span class=chatlog__author title=gabriel_syme data-user-id=550656390679494657>ð“…¬ gabriel_syme ð“…¬</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 7:20â€¯PM"><a href=#chatlog__message-container-1238994201127944232>5/11/2024 7:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Any recommendations  (other than docs) that goes through this stuff? I&#39;d love to get more out of it</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1239052386354593844 class=chatlog__message-container data-message-id=1239052386354593844><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/673200424571895808/97a84afd1a60d0172d3ae6e3b833ccc1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/550656390679494657/492c95bfd1ad14bf1c9f2eb6edb1109d.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=gabriel_syme>ð“…¬ gabriel_syme ð“…¬</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1238994201127944232')"> Any recommendations  (other than docs) that goes through this stuff? I&#39;d love to get more out of it </span></div></div><div class=chatlog__header><span class=chatlog__author title=alex_au_ data-user-id=673200424571895808>Alex Au</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 11:11â€¯PM"><a href=#chatlog__message-container-1239052386354593844>5/11/2024 11:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>As tantivy references Lucene, you may just reference the Lucene tutorials. But Lucene is written in Java which is cumbersome, actually ElasticSearch references itâ€™s json syntax pretty much like Lucene so you can check how others write ElasticSearch syntax</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div><div id=chatlog__message-container-1239052854077952122 class=chatlog__message-container data-message-id=1239052854077952122><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, May 11, 2024 11:13â€¯PM">11:13â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>For simple usecases itâ€™s better to just use the query parser, but from a developer standpoint itâ€™s easier and more secure to deal with classes and functions instead of string template injection so thatâ€™s why I mention this feature</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1239053705576190003 class=chatlog__message-container data-message-id=1239053705576190003><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/673200424571895808/97a84afd1a60d0172d3ae6e3b833ccc1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/550656390679494657/492c95bfd1ad14bf1c9f2eb6edb1109d.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=gabriel_syme>ð“…¬ gabriel_syme ð“…¬</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1238994201127944232')"> Any recommendations  (other than docs) that goes through this stuff? I&#39;d love to get more out of it </span></div></div><div class=chatlog__header><span class=chatlog__author title=alex_au_ data-user-id=673200424571895808>Alex Au</span> <span class=chatlog__timestamp title="Saturday, May 11, 2024 11:17â€¯PM"><a href=#chatlog__message-container-1239053705576190003>5/11/2024 11:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>FYI the very simple tantivy-py tutorial (not comprehensive) mentioning this situation can be find in here: <a href="https://tantivy-py.readthedocs.io/en/latest/tutorials/#building-and-executing-queries-with-query-objects">https://tantivy-py.readthedocs.io/en/latest/tutorials/#building-and-executing-queries-with-query-objects</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1239260776624029709 class=chatlog__message-container data-message-id=1239260776624029709><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Sunday, May 12, 2024 12:59â€¯PM"><a href=#chatlog__message-container-1239260776624029709>5/12/2024 12:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am noticing in a local lancedb query that loading parquet files is much faster than loading a lance table with the same data.

Parquet file is about 2x as fast - could this be due to compression?

much less data to scan, therefore can load faster?</span> <span class=chatlog__edited-timestamp title="Sunday, May 12, 2024 1:00â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1239279001579688009 class=chatlog__message-container data-message-id=1239279001579688009><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, May 12, 2024 2:12â€¯PM"> <a href=#chatlog__message-container-1239279001579688009>5/12/2024 2:12â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1239954666104553513 class=chatlog__message-container data-message-id=1239954666104553513><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Tuesday, May 14, 2024 10:57â€¯AM"><a href=#chatlog__message-container-1239954666104553513>5/14/2024 10:57â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am trying to apply a non-search filter on lance, but running into issues

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">txs_table: lancedb.table = db.open_table(&quot;transactions&quot;).search().where(&quot;block_number &gt; 19775000 AND block_number &lt; 19825000&quot;)
blocks_table: lancedb.table = db.open_table(&quot;blocks&quot;).search().where(&quot;block_number &gt; 19775000 AND block_number &lt; 19825000&quot;)
mempool_table: lancedb.table = db.open_table(&quot;mempool&quot;).search().where(&quot;includedAtBlockHeight &gt; 19775000 AND includedAtBlockHeight &lt; 19825000&quot;)</code>


all of these table objects are actually <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceEmptyQueryBuilder</code> objects...I want an Lance output - e.g. <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.to_lance()</code> . It seems like it&#39;s not possible to do these .where() searches directly on a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">to_lance()</code> esq table?



What I&#39;m looking for:
<u>_</u>


<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python"># # open the lance tables OLD
# db: lancedb.DBConnection = lancedb.connect(&quot;data&quot;)
# # open the table as a lance dataset to make it accessible for duckdb
# txs_table: lancedb.table = db.open_table(&quot;transactions&quot;).to_lance().where(block_number &gt; 10)</code></span> <span class=chatlog__edited-timestamp title="Tuesday, May 14, 2024 10:59â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1239966008656269438 class=chatlog__message-container data-message-id=1239966008656269438><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, May 14, 2024 11:42â€¯AM"> <a href=#chatlog__message-container-1239966008656269438>5/14/2024 11:42â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1240028099043917835 class=chatlog__message-container data-message-id=1240028099043917835><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Tuesday, May 14, 2024 3:48â€¯PM"><a href=#chatlog__message-container-1240028099043917835>5/14/2024 3:48â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>slightly annoying...it seems like the linting/function docs don&#39;t load for lance <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> objects. For example see this:

open_table is in yellow and I can hover and get docs. But to_lance() and _to_batches() is white and I don&#39;t get any info</span> <span class=chatlog__edited-timestamp title="Tuesday, May 14, 2024 3:49â€¯PM">(edited)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1240028098364444702/image.png?ex=697bb9a9&amp;is=697a6829&amp;hm=c3c97d5452e197508c1fad2fa9dfd35a45f897fdd9de1ffe081ef2413cf5890f&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1240028098364444702/image.png?ex=697bb9a9&amp;is=697a6829&amp;hm=c3c97d5452e197508c1fad2fa9dfd35a45f897fdd9de1ffe081ef2413cf5890f&amp;" alt="Image attachment" title="Image: image.png (73.88 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1240630903693246496 class=chatlog__message-container data-message-id=1240630903693246496><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/873618463367778375/cd4a2acdbe0ca05eb83137e729a61524.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=josca42 data-user-id=873618463367778375>Jonathan</span> <span class=chatlog__timestamp title="Thursday, May 16, 2024 7:44â€¯AM"><a href=#chatlog__message-container-1240630903693246496>5/16/2024 7:44â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible to pass a tokenizer argument, when creating a full text search index?. Tantivy has native support for this but looking through the code it didn&#39;t seem like you have exposed that argument when using lancedb.

An example of using a tokenizer when doing bm25 using tantivy is here: <a href="https://tantivy-py.readthedocs.io/en/latest/tutorials/#building-an-index-and-populating-it">https://tantivy-py.readthedocs.io/en/latest/tutorials/#building-an-index-and-populating-it</a>

Where you specify the tokenizer in schema_builder_tok.add_text_field(&quot;body&quot;,  stored=True,  tokenizer_name=&#39;en_stem&#39;)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1240726737898438732 class=chatlog__message-container data-message-id=1240726737898438732><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, May 16, 2024 2:05â€¯PM"> <a href=#chatlog__message-container-1240726737898438732>5/16/2024 2:05â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1240770992373108927 class=chatlog__message-container data-message-id=1240770992373108927><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Thursday, May 16, 2024 5:00â€¯PM"><a href=#chatlog__message-container-1240770992373108927>5/16/2024 5:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"> Potentially dumb question, but is there a way to extract the centroids from an already created vector index? I&#39;m looking to pass them as precomputed centroids to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_index</code> (for creation of a separate vector index).</span> <span class=chatlog__edited-timestamp title="Thursday, May 16, 2024 5:02â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1240773612533841974 class=chatlog__message-container data-message-id=1240773612533841974><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, May 16, 2024 5:11â€¯PM"> <a href=#chatlog__message-container-1240773612533841974>5/16/2024 5:11â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1240924700431880244 class=chatlog__message-container data-message-id=1240924700431880244><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sakura9928 data-user-id=293060952134254595>sakura</span> <span class=chatlog__timestamp title="Friday, May 17, 2024 3:11â€¯AM"><a href=#chatlog__message-container-1240924700431880244>5/17/2024 3:11â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, I found that creating index for float16 vectors takes significantly longer time than float32 vector. I have opened a github issue for this problem. Please help investigate.
<a href="https://github.com/lancedb/lancedb/issues/1312">https://github.com/lancedb/lancedb/issues/1312</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/1312><div class="chatlog__markdown chatlog__markdown-preserve">bug(python): Creating index for float16 vectors takes significantly...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB version v0.6.13 What happened? As the title described, I observe that creating index for float16 type vector takes longer time. Here is a short code snippet to reproduce the problem. import...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/gh36Yh5tnjKVFPGF9HGjNTcuUt925GsRTjJ7gYjy23g/https/opengraph.githubassets.com/88d3cea0e46894a5801a9929ef3baa647606206afb8a045dc5f73c84c2657a4b/lancedb/lancedb/issues/1312> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/gh36Yh5tnjKVFPGF9HGjNTcuUt925GsRTjJ7gYjy23g/https/opengraph.githubassets.com/88d3cea0e46894a5801a9929ef3baa647606206afb8a045dc5f73c84c2657a4b/lancedb/lancedb/issues/1312 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242667740347760691 class=chatlog__message-container data-message-id=1242667740347760691><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473006302239522817/04f815cb7c9e67b2fe1644b56c941e62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=uumami data-user-id=473006302239522817>uumami</span> <span class=chatlog__timestamp title="Tuesday, May 21, 2024 10:37â€¯PM"><a href=#chatlog__message-container-1242667740347760691>5/21/2024 10:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hello, hope this is the correct place to ask.
i&#39;m building a web infrastructure for managing a chatbot, we are launching soon with a lot of users so i&#39;m using lancedb for storing the embeddings. we are using aws. i want to ask what suggestions do you have for managing the actual files? i was planning on using MongoDB but i feel it is not optimal. so i was wondering what is the correct of doing this? all the other infra is managed by kubernetes. i read i can use S3 alongside lancedb but honestly i&#39;m not sure.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242688847993897066 class=chatlog__message-container data-message-id=1242688847993897066><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 22, 2024 12:01â€¯AM"> <a href=#chatlog__message-container-1242688847993897066>5/22/2024 12:01â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242779879762690080 class=chatlog__message-container data-message-id=1242779879762690080><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 6:03â€¯AM"><a href=#chatlog__message-container-1242779879762690080>5/22/2024 6:03â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have some questions about indexes. I understand that I need to manually create a vector index. Does Lance support non vector indexes?

Does an ANN index only help with vector searches? Or can it help with non vector searches?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242805587578982491 class=chatlog__message-container data-message-id=1242805587578982491><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1242779879762690080')"> I have some questions about indexes. I understand that I need to manually create a vector index. Does Lance support non vector indexes?

Does an ANN index only help with vector searches? Or can it help with non vector searches? </span></div></div><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 7:45â€¯AM"><a href=#chatlog__message-container-1242805587578982491>5/22/2024 7:45â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>there are also full-text search indexes,  <a href="https://lancedb.github.io/lancedb/fts/#create-fts-index-on-single-column">https://lancedb.github.io/lancedb/fts/#create-fts-index-on-single-column</a>
and oddly enough I cannot find it documented in the Guides, but it also supports normal scalar indexes <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.create_scalar_index">https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.create_scalar_index</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242827422462771393 class=chatlog__message-container data-message-id=1242827422462771393><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/283390147700195330/31e5404d0eb16eb17c0a29e4ca4cf21a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nbtel data-user-id=283390147700195330>nbtel</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 9:12â€¯AM"><a href=#chatlog__message-container-1242827422462771393>5/22/2024 9:12â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thanks <span class="chatlog__markdown-mention" title="etrotta">@etrotta</span>!  That&#39;s probably something we should add to the guides.

<span class="chatlog__markdown-mention" title="0xevan">@0xEvan</span> Vector indices would only improve performance of vector search. They wouldn&#39;t be used in a non vector search.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242828405511294982 class=chatlog__message-container data-message-id=1242828405511294982><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=etrotta>etrotta</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1242805587578982491')"> there are also full-text search indexes,  <a href="https://lancedb.github.io/lancedb/fts/#create-fts-index-on-single-column">https://lancedb.github.io/lancedb/fts/#create-fts-index-on-single-column</a>
and oddly enough I cannot find it documented in the Guides, but it also supports normal scalar indexes <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.create_scalar_index">https://lancedb.github.io/lancedb/python/python/#lancedb.table.Table.create_scalar_index</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 9:16â€¯AM"><a href=#chatlog__message-container-1242828405511294982>5/22/2024 9:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ah! Cool, think I was looking for the scalar index, that seems like the normal/traditional index</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242835259146502264 class=chatlog__message-container data-message-id=1242835259146502264><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/283390147700195330/31e5404d0eb16eb17c0a29e4ca4cf21a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1242828405511294982')"> Ah! Cool, think I was looking for the scalar index, that seems like the normal/traditional index </span></div></div><div class=chatlog__header><span class=chatlog__author title=nbtel data-user-id=283390147700195330>nbtel</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 9:43â€¯AM"><a href=#chatlog__message-container-1242835259146502264>5/22/2024 9:43â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Exactly, you got it. A scalar index would be a traditional B-Tree index</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242835416646942850 class=chatlog__message-container data-message-id=1242835416646942850><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/283390147700195330/31e5404d0eb16eb17c0a29e4ca4cf21a.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=nbtel>nbtel</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1242835259146502264')"> Exactly, you got it. A scalar index would be a traditional B-Tree index </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 9:44â€¯AM"><a href=#chatlog__message-container-1242835416646942850>5/22/2024 9:44â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>And I need to create the index manually, it won&#39;t be created for me right? Just confirming</span></div></div></div></div><div id=chatlog__message-container-1242835487115317248 class=chatlog__message-container data-message-id=1242835487115317248><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, May 22, 2024 9:44â€¯AM">9:44â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Also means I have been using lance without an index for a week <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜‚"
    title="joy"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f602.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1242836151929278515 class=chatlog__message-container data-message-id=1242836151929278515><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/283390147700195330/31e5404d0eb16eb17c0a29e4ca4cf21a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1242835416646942850')"> And I need to create the index manually, it won&#39;t be created for me right? Just confirming </span></div></div><div class=chatlog__header><span class=chatlog__author title=nbtel data-user-id=283390147700195330>nbtel</span> <span class=chatlog__timestamp title="Wednesday, May 22, 2024 9:47â€¯AM"><a href=#chatlog__message-container-1242836151929278515>5/22/2024 9:47â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes you&#39;d need to create the index manually.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone2><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ¼ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fc.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1243385337166827652 class=chatlog__message-container data-message-id=1243385337166827652><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/283390147700195330/31e5404d0eb16eb17c0a29e4ca4cf21a.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=nbtel>nbtel</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1242836151929278515')"> Yes you&#39;d need to create the index manually. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Thursday, May 23, 2024 10:09â€¯PM"><a href=#chatlog__message-container-1243385337166827652>5/23/2024 10:09â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I query a lance table on duckdb, then will it use the index automatically? Specifically the scalar index (I could understand if it doesn&#39;t use the vector index automatically)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1243392289775157363 class=chatlog__message-container data-message-id=1243392289775157363><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1243385337166827652')"> If I query a lance table on duckdb, then will it use the index automatically? Specifically the scalar index (I could understand if it doesn&#39;t use the vector index automatically) </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Thursday, May 23, 2024 10:37â€¯PM"><a href=#chatlog__message-container-1243392289775157363>5/23/2024 10:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>It should.  DuckDb pushes down filters and so we should receive the filter and apply the scalar index.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup_tone2><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ¼ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fc.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1243663070589489223 class=chatlog__message-container data-message-id=1243663070589489223><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/758438080532971542/190de9b0ec14097db8fce7739f9fc1e8.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=glesperance data-user-id=758438080532971542>Gabriel</span> <span class=chatlog__timestamp title="Friday, May 24, 2024 4:33â€¯PM"><a href=#chatlog__message-container-1243663070589489223>5/24/2024 4:33â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>About Scaling a brute force index

Is there a way to scale LanceDB to multiple processes / threads st we can use Exhaustive search over millions of rows w/ a small latency? I am thinking something like Vespa&#39;s search streaming.

Thanks !</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1243666744183099445 class=chatlog__message-container data-message-id=1243666744183099445><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, May 24, 2024 4:47â€¯PM"> <a href=#chatlog__message-container-1243666744183099445>5/24/2024 4:47â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1244101573320249384 class=chatlog__message-container data-message-id=1244101573320249384><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Saturday, May 25, 2024 9:35â€¯PM"><a href=#chatlog__message-container-1244101573320249384>5/25/2024 9:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, I&#39;m trying to implement a deduplication mechanism using a chunk_id I generated using the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">hashlib</code> library in python as a primary key. I&#39;ve settled on the following implementation

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"># Create the Pydantic Schema

func = get_registry().get(&quot;openai&quot;).create(name=&quot;text-embedding-3-small&quot;)

class Tool(LanceModel):
    vector: Vector(func.ndims()) = func.VectorField()
    description: str = func.SourceField()
    name:str
    category:str
    chunk_id:str

tool_table = db.create_table(&quot;tool_v2&quot;,schema=Tool,mode=&quot;overwrite&quot;)

encoded_chunks = []
for row in data:
    name_and_description=f&quot;{row[&#39;description&#39;]}-{row[&#39;name&#39;]}&quot;
    chunk_id = hashlib.md5(name_and_description.encode()).hexdigest()
    encoded_chunks.append({**row,&quot;chunk_id&quot;:chunk_id})

def get_duplicate_chunk_ids(encoded_chunks):
    tool_table = db.open_table(&quot;tool_v2&quot;)
    ids = [item[&#39;chunk_id&#39;] for item in encoded_chunks]
    
    formatted_filter = &#39;, &#39;.join([f&quot;&#39;{id}&#39;&quot; for id in ids])
    return set(tool_table.to_lance().to_table(filter=f&quot;chunk_id in ({formatted_filter})&quot;, columns=[&#39;chunk_id&#39;]).to_pandas()[&#39;chunk_id&#39;])

def filter_duplicate_chunks(encoded_chunks,duplicate_ids):
    return [item for item in encoded_chunks if item[&#39;chunk_id&#39;] not in duplicate_ids]

duplicate_ids = get_duplicate_chunk_ids(encoded_chunks)
filtered_chunks = filter_duplicate_chunks(encoded_chunks,duplicate_ids)

if filtered_chunks:
    tool_table.add(filtered_chunks)
tool_table.count_rows()</code>

I was wondering if there&#39;s a more efficient way of doing this operation in LanceDB? I remember seeing a merge insert somewhere in the docs but am not too sure how I might use it. <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1244120805516906547 class=chatlog__message-container data-message-id=1244120805516906547><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/206404469263433728/7028cfb50094df97680a45ba24cd71c7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ivanleomk data-user-id=206404469263433728>Ivan</span> <span class=chatlog__timestamp title="Saturday, May 25, 2024 10:51â€¯PM"><a href=#chatlog__message-container-1244120805516906547>5/25/2024 10:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Also wondering if there&#39;s a way for us to include computed fields in LanceDB

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import hashlib 
from pydantic import computed_field

class Tool(LanceModel):
    vector: Vector(func.ndims()) = func.VectorField()
    description: str = func.SourceField()
    name:str
    category:str

    @computed_field
    def chunk_id(self)-&gt;str:
        return hashlib.md5(f&quot;{self.description}-{self.name}&quot;.encode()).hexdigest()

tool_table = db.create_table(&quot;tool_v2&quot;,schema=Tool,mode=&quot;overwrite&quot;)
tool_table.add(data)</code>

Something like this would be very useful since we can encode the logic itself inside the model rather than perform the computation elsewhere, convert to a dict and then add into lancedb

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"></code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1244676298333356077 class=chatlog__message-container data-message-id=1244676298333356077><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, May 27, 2024 11:39â€¯AM"> <a href=#chatlog__message-container-1244676298333356077>5/27/2024 11:39â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1244676486091247647 class=chatlog__message-container data-message-id=1244676486091247647><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, May 27, 2024 11:39â€¯AM"> <a href=#chatlog__message-container-1244676486091247647>5/27/2024 11:39â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1244863456033898588 class=chatlog__message-container data-message-id=1244863456033898588><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473006302239522817/04f815cb7c9e67b2fe1644b56c941e62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=uumami data-user-id=473006302239522817>uumami</span> <span class=chatlog__timestamp title="Tuesday, May 28, 2024 12:02â€¯AM"><a href=#chatlog__message-container-1244863456033898588>5/28/2024 12:02â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hello, i&#39;mm back! is there a way to achieve horizontal scaling in kubernetes between lancedb pods?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1244869079853043717 class=chatlog__message-container data-message-id=1244869079853043717><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, May 28, 2024 12:25â€¯AM"> <a href=#chatlog__message-container-1244869079853043717>5/28/2024 12:25â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245270732741804055 class=chatlog__message-container data-message-id=1245270732741804055><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 3:01â€¯AM"><a href=#chatlog__message-container-1245270732741804055>5/29/2024 3:01â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, Team. I created a lancedb with 5.4 million indexed records. and I need to build a web service for querying. To put it simply, the query interface creates a new link each time and opens a new table for query. However, after a period of querying, it was found that the memory usage of this service was increasing, and after stopping the query for a period of time (without stopping the web service), the memory usage did not decrease. Only restarting the service can restore the memory usage to a lower level.  The test code is as follows:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import lancedb
import flask
import numpy as np

app = flask.Flask(__name__)
db_path = &quot;your_lancedb_data_path&quot;
table_name = &quot;your_table_name&quot;

@app.route(&#39;/query&#39;, methods=[&quot;POST&quot;])
def query():
    db = lancedb.connect(db_path)
    table = db.open_table(table_name)
    query_vector = np.random.rand(512)
    result = table.search(query_vector).metric(&quot;cosine&quot;).nprobes(20).refine_factor(10).select([&quot;path&quot;]).to_list()
    return result

if __name__ == &#39;__main__&#39;:
    app.run(host=&quot;0.0.0.0&quot;, port=5000)</code>
bash code:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">#!/bin/bash
for i in {1..10000}
do
     curl --location --request POST &#39;127.0.0.1:5000/query&#39;   
     sleep 2
done</code>
Frequent requests don&#39;t seem to significantly increase memory usage. I keep sending requests at a low frequency, and the memory usage keeps growing. And after I stop sending requests, the memory is not released. In other words, if I don&#39;t restart the service, the memory usage of this program will continue to grow. This doesn&#39;t seem to be the case. a good phenomenon. When the web service was first started, the memory usage was less than 1%. I called the query script intermittently. After about half an hour, the memory usage reached 3%. My computer has a total memory of 32G. 
Do you have any suggestions for this problem? Or maybe I am doing something wrong?</span> <span class=chatlog__edited-timestamp title="Wednesday, May 29, 2024 3:20â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245271175219646487 class=chatlog__message-container data-message-id=1245271175219646487><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=wxzhu data-user-id=1035126056958574603>JeremyZhu</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 3:03â€¯AM"><a href=#chatlog__message-container-1245271175219646487>5/29/2024 3:03â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">import pandas
import random
from lance.arrow import bfloat16_array
import lance
raw_vector = [random.random() for _ in range(10)]
data = {
    &quot;id&quot;: [1, 2, 3],
    &quot;emb&quot;: [bfloat16_array(raw_vector) for _ in range(3)]
}

df = pandas.DataFrame(data)
lance.write_dataset(df, &#39;demo_data/demo.lance&#39;)</code>


Hiï¼Œ team. I want to save bf16 vector with lance, but it failed with error.

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">    result = pa.array(col, type=type_, from_pandas=True, safe=safe)
  File &quot;pyarrow/array.pxi&quot;, line 340, in pyarrow.lib.array
  File &quot;pyarrow/array.pxi&quot;, line 86, in pyarrow.lib._ndarray_to_array
  File &quot;pyarrow/error.pxi&quot;, line 91, in pyarrow.lib.check_status
pyarrow.lib.ArrowInvalid: (&#39;Could not convert &lt;lance.arrow.BFloat16Array object at 0x0000000117450700&gt;\n[\n  0.828125,\n  0.25585938,\n  0.828125,\n  0.796875,\n  0.29492188,\n  0.38867188,\n  0.96875,\n  0.95703125,\n  0.546875,\n  0.58203125\n] with type BFloat16Array: did not recognize Python value type when inferring an Arrow data type&#39;, &#39;Conversion failed for column emb with type object&#39;)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245275690958327918 class=chatlog__message-container data-message-id=1245275690958327918><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ccdsdfe_54399>ccdsdfe</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245270732741804055')"> Hi, Team. I created a lancedb with 5.4 million indexed records. and I need to build a web service for querying. To put it simply, the query interface creates a new link each time and opens a new table for query. However, after a period of querying, it was found that the memory usage of this service was increasing, and after stopping the query for a period of time (without stopping the web service), the memory usage did not decrease. Only restarting the service can restore the memory usage to a lower level.  The test code is as follows:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import lancedb
import flask
import numpy as np

app = flask.Flask(__name__)
db_path = &quot;your_lancedb_data_path&quot;
table_name = &quot;your_table_name&quot;

@app.route(&#39;/query&#39;, methods=[&quot;POST&quot;])
def query():
    db = lancedb.connect(db_path)
    table = db.open_table(table_name)
    query_vector = np.random.rand(512)
    result = table.search(query_vector).metric(&quot;cosine&quot;).nprobes(20).refine_factor(10).select([&quot;path&quot;]).to_list()
    return result

if __name__ == &#39;__main__&#39;:
    app.run(host=&quot;0.0.0.0&quot;, port=5000)</code>
bash code:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">#!/bin/bash
for i in {1..10000}
do
     curl --location --request POST &#39;127.0.0.1:5000/query&#39;   
     sleep 2
done</code>
Frequent requests don&#39;t seem to significantly increase memory usage. I keep sending requests at a low frequency, and the memory usage keeps growing. And after I stop sending requests, the memory is not released. In other words, if I don&#39;t restart the service, the memory usage of this program will continue to grow. This doesn&#39;t seem to be the case. a good phenomenon. When the web service was first started, the memory usage was less than 1%. I called the query script intermittently. After about half an hour, the memory usage reached 3%. My computer has a total memory of 32G. 
Do you have any suggestions for this problem? Or maybe I am doing something wrong? </span> <span class=chatlog__reply-edited-timestamp title="Wednesday, May 29, 2024 3:20â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 3:21â€¯AM"><a href=#chatlog__message-container-1245275690958327918>5/29/2024 3:21â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The increase from less than 1% to 3+% does not seem very convincing, but in my test environment, my web service includes additions, deletions, queries and modifications. After a long period of operation (mainly calling additions and queries), the memory usage of the web service increased from less than 20% at the beginning to 45%. I only discovered this serious problem yesterday. I donâ€™t remember how long this service has been started, but this simple recurrence program should be enough to illustrate the problem.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245301511282757704 class=chatlog__message-container data-message-id=1245301511282757704><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ccdsdfe_54399>ccdsdfe</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245275690958327918')"> The increase from less than 1% to 3+% does not seem very convincing, but in my test environment, my web service includes additions, deletions, queries and modifications. After a long period of operation (mainly calling additions and queries), the memory usage of the web service increased from less than 20% at the beginning to 45%. I only discovered this serious problem yesterday. I donâ€™t remember how long this service has been started, but this simple recurrence program should be enough to illustrate the problem. </span></div></div><div class=chatlog__header><span class=chatlog__author title=yudhiesh data-user-id=630287131847294976>yudhiesh</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:03â€¯AM"><a href=#chatlog__message-container-1245301511282757704>5/29/2024 5:03â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Could you run a memory profiler such as memray to see where the leak could originate from? Just a note, you are creating a connection to the table on every requests, if itâ€™s stored locally you can just do it once and reuse it.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245306686726606859 class=chatlog__message-container data-message-id=1245306686726606859><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=yudhiesh>yudhiesh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245301511282757704')"> Could you run a memory profiler such as memray to see where the leak could originate from? Just a note, you are creating a connection to the table on every requests, if itâ€™s stored locally you can just do it once and reuse it. </span></div></div><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:24â€¯AM"><a href=#chatlog__message-container-1245306686726606859>5/29/2024 5:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes, when I only establish one connection, open the table once and reuse it, the memory will not continue to grow. However, database operations include adding, deleting, modifying, and creating indexes. If all instances share the same table, you may encounter locking problems. For example, if I need to create an index and this operation takes a long time, then I can not use the same table instance for searching. Moreover, the web service built can not guarantee that all requests are processed one by one, so there will be concurrency. Therefore, in order to avoid the problem of concurrent deadlock, a new table instance will be created for each request. However, memory growth is also fatal, so my solution is to create a table instance specifically for searching, and other database-related requests still open a new table each time. According to this situation, should adding, deleting, modifying, and creating index also share a separate instance?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245312103510966343 class=chatlog__message-container data-message-id=1245312103510966343><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/588604111956606991/8fc300efe98c57d5cc6594dbed5a3440.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=keerasoru data-user-id=588604111956606991>keerasoru</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:45â€¯AM"><a href=#chatlog__message-container-1245312103510966343>5/29/2024 5:45â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi team, i am trying to create a db of a codebase, when trying to add data to the table which i have created i am getting the following error:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">called `Result::unwrap()` on an `Err` value: InvalidArgumentError(&quot;Found unmasked nulls for non-nullable StructArray field \&quot;min_value\&quot;&quot;)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace</code>

This is the code I am using

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">def create_table(self,table_name):
        try:
            table = self.db.create_table(table_name, schema=CodeDocument,fill_value = 0.0, on_bad_vectors = &quot;fill&quot;)
        
            data = self.get_data(self.python_files)
            table.add(data,on_bad_vectors = &quot;fill&quot;, fill_value = 0.0)
            table.create_fts_index([&quot;name&quot;,&quot;docstring&quot;])
            return table
        except Exception as e:
            print(e)</code></span></div></div></div></div><div id=chatlog__message-container-1245312254304583751 class=chatlog__message-container data-message-id=1245312254304583751><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, May 29, 2024 5:46â€¯AM">5:46â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>any work around on fixing this issue?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245313206898131015 class=chatlog__message-container data-message-id=1245313206898131015><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ccdsdfe_54399>ccdsdfe</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245306686726606859')"> Yes, when I only establish one connection, open the table once and reuse it, the memory will not continue to grow. However, database operations include adding, deleting, modifying, and creating indexes. If all instances share the same table, you may encounter locking problems. For example, if I need to create an index and this operation takes a long time, then I can not use the same table instance for searching. Moreover, the web service built can not guarantee that all requests are processed one by one, so there will be concurrency. Therefore, in order to avoid the problem of concurrent deadlock, a new table instance will be created for each request. However, memory growth is also fatal, so my solution is to create a table instance specifically for searching, and other database-related requests still open a new table each time. According to this situation, should adding, deleting, modifying, and creating index also share a separate instance? </span></div></div><div class=chatlog__header><span class=chatlog__author title=yudhiesh data-user-id=630287131847294976>yudhiesh</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:50â€¯AM"><a href=#chatlog__message-container-1245313206898131015>5/29/2024 5:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is this table read from disk or stored on blob storage?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245313446770118657 class=chatlog__message-container data-message-id=1245313446770118657><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=yudhiesh>yudhiesh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245313206898131015')"> Is this table read from disk or stored on blob storage? </span></div></div><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:51â€¯AM"><a href=#chatlog__message-container-1245313446770118657>5/29/2024 5:51â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>disk</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245313981942595594 class=chatlog__message-container data-message-id=1245313981942595594><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ccdsdfe_54399>ccdsdfe</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245313446770118657')"> disk </span></div></div><div class=chatlog__header><span class=chatlog__author title=yudhiesh data-user-id=630287131847294976>yudhiesh</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:53â€¯AM"><a href=#chatlog__message-container-1245313981942595594>5/29/2024 5:53â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Could you try running compaction and cleanup after loading the table? Iâ€™m guessing the table versions grows a lot locally causing the memory to balloon. 

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_lance().optimize.compact_files()</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_lance().cleanup_old_versions(older_than=timedelta(days=0))</code>

This could take some time so perhaps you should do it every N requests to batch the process.</span> <span class=chatlog__edited-timestamp title="Wednesday, May 29, 2024 5:54â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245315221149712455 class=chatlog__message-container data-message-id=1245315221149712455><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=yudhiesh>yudhiesh</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245313981942595594')"> Could you try running compaction and cleanup after loading the table? Iâ€™m guessing the table versions grows a lot locally causing the memory to balloon. 

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_lance().optimize.compact_files()</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_lance().cleanup_old_versions(older_than=timedelta(days=0))</code>

This could take some time so perhaps you should do it every N requests to batch the process. </span> <span class=chatlog__reply-edited-timestamp title="Wednesday, May 29, 2024 5:54â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 5:58â€¯AM"><a href=#chatlog__message-container-1245315221149712455>5/29/2024 5:58â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>For the three operations of adding, deleting and modifying, I will check the number of files in the _version folder every time I request it. When the number of files is greater than 100, I will execute the following code
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    def clean_up_data_in_disk(self):
        lance_db_connection = lancedb.connect(self.db_path)
        tmp_table = lance_db_connection.open_table(self.table_name)
        tmp_table.compact_files()
        start_time = time.time()
        res = tmp_table.cleanup_old_versions(timedelta(seconds=1))
        end_time = time.time()
        print(f&quot;clean up data in disk time used: {end_time - start_time} \n {res}&quot;)</code>
Does the search operation also need to perform similar operations?
Just querying should not add new version files</span> <span class=chatlog__edited-timestamp title="Wednesday, May 29, 2024 6:13â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245370727113297940 class=chatlog__message-container data-message-id=1245370727113297940><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/630287131847294976/6e1d52b62630594580016dd0475ca3e1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ccdsdfe_54399>ccdsdfe</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245315221149712455')"> For the three operations of adding, deleting and modifying, I will check the number of files in the _version folder every time I request it. When the number of files is greater than 100, I will execute the following code
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    def clean_up_data_in_disk(self):
        lance_db_connection = lancedb.connect(self.db_path)
        tmp_table = lance_db_connection.open_table(self.table_name)
        tmp_table.compact_files()
        start_time = time.time()
        res = tmp_table.cleanup_old_versions(timedelta(seconds=1))
        end_time = time.time()
        print(f&quot;clean up data in disk time used: {end_time - start_time} \n {res}&quot;)</code>
Does the search operation also need to perform similar operations?
Just querying should not add new version files </span> <span class=chatlog__reply-edited-timestamp title="Wednesday, May 29, 2024 6:13â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=yudhiesh data-user-id=630287131847294976>yudhiesh</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 9:38â€¯AM"><a href=#chatlog__message-container-1245370727113297940>5/29/2024 9:38â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yup, that makes sense. 

Just some feedback, I only deploy LanceDB as a READ-only vector database (meaning I only search over data not alter it) when deploying it in an API Endpoint. Currently, its main strength is bulk loading of data not concurrent ingestion where you will have to perform compaction/cleaning manually. 

Even with all of this setup, storing the LanceDB table on disk is problematic. What happens if the instance goes down? Even if you use something like AWS EBS/EFS you will encounter issues with automated backups of your data, which you will have to perform manually. AWS EBS has the issue of only being shared on the same node and AWS EFS is extremely expensive.

You could use AWS S3 which is the simplest solution while providing the best availability(if AWS S3 goes down I am sure the internet would be down as well lol), but it does not support pre-conditions, i.e., if data exists don&#39;t write it. So you will have to roll your own locking mechanism using AWS DynamoDB. 

Perhaps rethink the way in which you are using LanceDB. The API should only be performing search operations.</span> <span class=chatlog__edited-timestamp title="Wednesday, May 29, 2024 9:40â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245376412584775792 class=chatlog__message-container data-message-id=1245376412584775792><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=ccdsdfe_54399>ccdsdfe</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245306686726606859')"> Yes, when I only establish one connection, open the table once and reuse it, the memory will not continue to grow. However, database operations include adding, deleting, modifying, and creating indexes. If all instances share the same table, you may encounter locking problems. For example, if I need to create an index and this operation takes a long time, then I can not use the same table instance for searching. Moreover, the web service built can not guarantee that all requests are processed one by one, so there will be concurrency. Therefore, in order to avoid the problem of concurrent deadlock, a new table instance will be created for each request. However, memory growth is also fatal, so my solution is to create a table instance specifically for searching, and other database-related requests still open a new table each time. According to this situation, should adding, deleting, modifying, and creating index also share a separate instance? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 10:01â€¯AM"><a href=#chatlog__message-container-1245376412584775792>5/29/2024 10:01â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hmmm, every <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> instance has a metadata cache and query cache.  So if you are creating many <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> instances this could become a memory problem.  We should be able to share the cache amongst <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> instances (e.g. have 10 different <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> objects all sharing the same cache).  I have opened <a href="https://github.com/lancedb/lancedb/issues/1336">https://github.com/lancedb/lancedb/issues/1336</a> for this feature.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245376815581888626 class=chatlog__message-container data-message-id=1245376815581888626><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 29, 2024 10:02â€¯AM"> <a href=#chatlog__message-container-1245376815581888626>5/29/2024 10:02â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1245399710022242328 class=chatlog__message-container data-message-id=1245399710022242328><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nuvic data-user-id=794337110994845726>nuvic</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 29, 2024 11:33â€¯AM"> <a href=#chatlog__message-container-1245399710022242328>5/29/2024 11:33â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245576922209980427 class=chatlog__message-container data-message-id=1245576922209980427><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245376412584775792')"> Hmmm, every <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> instance has a metadata cache and query cache.  So if you are creating many <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> instances this could become a memory problem.  We should be able to share the cache amongst <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> instances (e.g. have 10 different <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table</code> objects all sharing the same cache).  I have opened <a href="https://github.com/lancedb/lancedb/issues/1336">https://github.com/lancedb/lancedb/issues/1336</a> for this feature. </span></div></div><div class=chatlog__header><span class=chatlog__author title=ccdsdfe_54399 data-user-id=1218469661079769119>ccdsdfe</span> <span class=chatlog__timestamp title="Wednesday, May 29, 2024 11:17â€¯PM"><a href=#chatlog__message-container-1245576922209980427>5/29/2024 11:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>It sounds like I have to share a table instance to avoid the problem of memory usage growth. But how to deal with concurrency issues when sharing a table instance?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245796510562648125 class=chatlog__message-container data-message-id=1245796510562648125><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sandias42 data-user-id=686348388484382828>sandias42</span> <span class=chatlog__timestamp title="Thursday, May 30, 2024 1:50â€¯PM"><a href=#chatlog__message-container-1245796510562648125>5/30/2024 1:50â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a canonical way to read-and-update or update-and-read? My usecase: I&#39;m running <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">chunk = tbl.search().where().limit(chunksize)</code> to get chunks of data for a complex custom embedding pipeline, and I want to update all of the rows in <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">chunk</code> to have the column <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">in_progress</code> set to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">True</code>. I&#39;ve got a scalar indexed <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">id</code> column, and I think I have options for doing what I want using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.update(.., where=f&quot;id IN {LONG_ID_LIST}&quot;)</code> or <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.merge_insert(&quot;id&quot;).when_matched_update_all().execute(chunk_with_in_progress_true)</code> but both of these seem kinda cludgy given at the time of my initial <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.search().where...</code> the rows I want to update must have been touched by lance. (<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">chunksize</code> could range from 10k-1M btw). Any more elegant options?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245841829295820927 class=chatlog__message-container data-message-id=1245841829295820927><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/464194627520430090/7cb561f5cfdce31ab563051aa8cd84ae.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cloneofsimo data-user-id=464194627520430090>cloneofsimo</span> <span class=chatlog__timestamp title="Thursday, May 30, 2024 4:50â€¯PM"><a href=#chatlog__message-container-1245841829295820927>5/30/2024 4:50â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is there a recommended way to concurrently parallel process dataset into lance dataset format? Kinda like:
<a href="https://docs.mosaicml.com/projects/streaming/en/stable/preparing_datasets/parallel_dataset_conversion.html">https://docs.mosaicml.com/projects/streaming/en/stable/preparing_datasets/parallel_dataset_conversion.html</a>
Issue being here is I can&#39;t seem to work out concurrent writes
<a href="https://gist.github.com/cloneofsimo/cefe61fb4b437ce366e4f25f37fbb7b8">https://gist.github.com/cloneofsimo/cefe61fb4b437ce366e4f25f37fbb7b8</a>
not sure what would be the best way of processing ~TB of image dataset into ~10TB of image feature dataset with lance db, in parallel fashion</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1245842915461169163 class=chatlog__message-container data-message-id=1245842915461169163><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/464194627520430090/7cb561f5cfdce31ab563051aa8cd84ae.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=cloneofsimo>cloneofsimo</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1245841829295820927')"> is there a recommended way to concurrently parallel process dataset into lance dataset format? Kinda like:
<a href="https://docs.mosaicml.com/projects/streaming/en/stable/preparing_datasets/parallel_dataset_conversion.html">https://docs.mosaicml.com/projects/streaming/en/stable/preparing_datasets/parallel_dataset_conversion.html</a>
Issue being here is I can&#39;t seem to work out concurrent writes
<a href="https://gist.github.com/cloneofsimo/cefe61fb4b437ce366e4f25f37fbb7b8">https://gist.github.com/cloneofsimo/cefe61fb4b437ce366e4f25f37fbb7b8</a>
not sure what would be the best way of processing ~TB of image dataset into ~10TB of image feature dataset with lance db, in parallel fashion </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Thursday, May 30, 2024 4:54â€¯PM"><a href=#chatlog__message-container-1245842915461169163>5/30/2024 4:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>This is something I plan on working on in June/July (currently trying to wrap up v2 format work).  At the moment the easiest thing might be the ray dataset sink (which isn&#39;t very thoroughly documented).  I discussed this in a bit more detail in this thread: <a href="https://discord.com/channels/1030247538198061086/1243491703353249822/1243527106852421724" onclick="scrollToMessage(event, '1243527106852421724')">https://discord.com/channels/1030247538198061086/1243491703353249822/1243527106852421724</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246028944575172648 class=chatlog__message-container data-message-id=1246028944575172648><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/464194627520430090/7cb561f5cfdce31ab563051aa8cd84ae.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cloneofsimo data-user-id=464194627520430090>cloneofsimo</span> <span class=chatlog__timestamp title="Friday, May 31, 2024 5:14â€¯AM"><a href=#chatlog__message-container-1246028944575172648>5/31/2024 5:14â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ah, respectfully, I would question why this isn&#39;t a higher priority? We can&#39;t get far without large scale managements...</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246058059906678867 class=chatlog__message-container data-message-id=1246058059906678867><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Friday, May 31, 2024 7:09â€¯AM"><a href=#chatlog__message-container-1246058059906678867>5/31/2024 7:09â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>getting the foundations in place before scaling up?
the v2 format includes features it&#39;ll need to handle large scale managements with using a more appropriate amount of resources, as well as just more features overall

imo scaling up should be a concern after it&#39;s mostly stable, not just what they expose but to some extent internally as well, and a major rewrite of the way it stores data is a quite huge change</span> <span class=chatlog__edited-timestamp title="Friday, May 31, 2024 7:10â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246097444563845252 class=chatlog__message-container data-message-id=1246097444563845252><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768087669229748245/eb895acccedf70b22acd64f9e8772bf1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=imaurer data-user-id=768087669229748245>imaurer</span> <span class=chatlog__timestamp title="Friday, May 31, 2024 9:46â€¯AM"><a href=#chatlog__message-container-1246097444563845252>5/31/2024 9:46â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, apologies if this isn&#39;t the right place for a simple question. 

Q: Is there a way to get the distinct values of a column using LanceDB? 

 have schema with fields like name, label, etc. and I want to get all of the distinct labels without loading the whole table into memory.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246099857526100089 class=chatlog__message-container data-message-id=1246099857526100089><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/464194627520430090/7cb561f5cfdce31ab563051aa8cd84ae.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=etrotta>etrotta</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1246058059906678867')"> getting the foundations in place before scaling up?
the v2 format includes features it&#39;ll need to handle large scale managements with using a more appropriate amount of resources, as well as just more features overall

imo scaling up should be a concern after it&#39;s mostly stable, not just what they expose but to some extent internally as well, and a major rewrite of the way it stores data is a quite huge change </span> <span class=chatlog__reply-edited-timestamp title="Friday, May 31, 2024 7:10â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=cloneofsimo data-user-id=464194627520430090>cloneofsimo</span> <span class=chatlog__timestamp title="Friday, May 31, 2024 9:55â€¯AM"><a href=#chatlog__message-container-1246099857526100089>5/31/2024 9:55â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I know very little about database design, but isn&#39;t the whole utility of large scale databases just based on ease of handling large scale? Scalability should be by design not something you bolt on later on? Do correct me if im wrong</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246100221532835911 class=chatlog__message-container data-message-id=1246100221532835911><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Friday, May 31, 2024 9:57â€¯AM"><a href=#chatlog__message-container-1246100221532835911>5/31/2024 9:57â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>as far as I understand it, Lance is a new file format before being a database
they have to get the format right before making it scalable</span></div></div></div></div><div id=chatlog__message-container-1246100373186412644 class=chatlog__message-container data-message-id=1246100373186412644><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, May 31, 2024 9:58â€¯AM">9:58â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>(also, and not sure how &quot;large scale&quot; I&#39;d consider it when one of its selling points is running Embedded within an application?) they do call themselves &quot;designed to store, manage, query and retrieve embeddings on large-scale multi-modal data&quot; though, so disregard me I guess</span> <span class=chatlog__edited-timestamp title="Friday, May 31, 2024 9:59â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246103074813247512 class=chatlog__message-container data-message-id=1246103074813247512><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, May 31, 2024 10:08â€¯AM"> <a href=#chatlog__message-container-1246103074813247512>5/31/2024 10:08â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1246104564151615620 class=chatlog__message-container data-message-id=1246104564151615620><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Friday, May 31, 2024 10:14â€¯AM"><a href=#chatlog__message-container-1246104564151615620>5/31/2024 10:14â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="cloneofsimo">@cloneofsimo</span> thanks for the questions . Love the passion. <span class="chatlog__markdown-mention" title="etrotta">@etrotta</span> thanks for the discussion <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™"
    title="pray"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg">  starting a thread to collect context in one place <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ§µ"
    title="thread"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f9f5.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1247940530235642008 class=chatlog__message-container data-message-id=1247940530235642008><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768087669229748245/eb895acccedf70b22acd64f9e8772bf1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=imaurer data-user-id=768087669229748245>imaurer</span> <span class=chatlog__timestamp title="Wednesday, June 5, 2024 11:50â€¯AM"><a href=#chatlog__message-container-1247940530235642008>6/5/2024 11:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Tantivy-py 0.22 now supports fuzzy term queries. Is that exposable via LanceDB&#39;s python library?
<a href="https://github.com/quickwit-oss/tantivy-py/releases/tag/0.22.0">https://github.com/quickwit-oss/tantivy-py/releases/tag/0.22.0</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/quickwit-oss/tantivy-py/releases/tag/0.22.0><div class="chatlog__markdown chatlog__markdown-preserve">Release Python Tantivy 0.22.0 &#183; quickwit-oss/tantivy-py</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">What&#39;s Changed

Support passing dict to add JSON field by @GodTamIt in #158
build(deps): bump github/codeql-action from 2.22.7 to 2.22.8 by @dependabot in #163
Add python stub with type hints. ...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/Hfvo-Z4qA7gZp5xBTzDnrQQH7D5LP4m-ELNqUK70qB0/https/opengraph.githubassets.com/1cb8180a25242903b07785d3635ab592725452c0761f460b8501586dbae00305/quickwit-oss/tantivy-py/releases/tag/0.22.0> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/Hfvo-Z4qA7gZp5xBTzDnrQQH7D5LP4m-ELNqUK70qB0/https/opengraph.githubassets.com/1cb8180a25242903b07785d3635ab592725452c0761f460b8501586dbae00305/quickwit-oss/tantivy-py/releases/tag/0.22.0 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1247948590354272445 class=chatlog__message-container data-message-id=1247948590354272445><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, June 5, 2024 12:22â€¯PM"> <a href=#chatlog__message-container-1247948590354272445>6/5/2024 12:22â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248185755306557513 class=chatlog__message-container data-message-id=1248185755306557513><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sneha200217 data-user-id=764854256988717087>sneha200217</span> <span class=chatlog__timestamp title="Thursday, June 6, 2024 4:04â€¯AM"><a href=#chatlog__message-container-1248185755306557513>6/6/2024 4:04â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is there a way I can update my particular column in a row with the help of Id with lancde db and this can be of any type like a nested json,list,or string</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248207713759006762 class=chatlog__message-container data-message-id=1248207713759006762><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sneha200217 data-user-id=764854256988717087>sneha200217</span> <span class=chatlog__timestamp title="Thursday, June 6, 2024 5:31â€¯AM"><a href=#chatlog__message-container-1248207713759006762>6/6/2024 5:31â€¯AM</a></span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1248207713834500106/image.png?ex=697bd1c5&amp;is=697a8045&amp;hm=dedb1051ab10c8814c5cc125e8db64e93dac761e4fbc9c2177199bcbf1626aa2&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1248207713834500106/image.png?ex=697bd1c5&amp;is=697a8045&amp;hm=dedb1051ab10c8814c5cc125e8db64e93dac761e4fbc9c2177199bcbf1626aa2&amp;" alt="Image attachment" title="Image: image.png (28.88 KB)" loading=lazy> </a></div></div></div></div><div id=chatlog__message-container-1248207742619881473 class=chatlog__message-container data-message-id=1248207742619881473><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, June 6, 2024 5:31â€¯AM">5:31â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>can anyone help me with this issue</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248285377459130388 class=chatlog__message-container data-message-id=1248285377459130388><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, June 6, 2024 10:40â€¯AM"> <a href=#chatlog__message-container-1248285377459130388>6/6/2024 10:40â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248332213435498506 class=chatlog__message-container data-message-id=1248332213435498506><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sandias42 data-user-id=686348388484382828>sandias42</span> <span class=chatlog__timestamp title="Thursday, June 6, 2024 1:46â€¯PM"><a href=#chatlog__message-container-1248332213435498506>6/6/2024 1:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Not a burning issue, but is there any way to force a lance table or db connection to be read-only? I&#39;ve got a very large lance table which was quite expensive to produce, and I&#39;d like to expose it (for searching) to some folks who I don&#39;t trust not to accidentally make large writes / updates (which I&#39;m assuming can be rolled back with version control, but then I&#39;d have to compact, optimize etc which I&#39;d guess is quite pricey with such a large table). I could use S3 bucket permissions for this except I&#39;m having to use EFS to get around the concurrent writes issue.</span></div></div></div></div><div id=chatlog__message-container-1248332770841726977 class=chatlog__message-container data-message-id=1248332770841726977><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, June 6, 2024 1:48â€¯PM">1:48â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Speaking of EFS, is there any way to specify a different storage directory for the manifest / commit info + tantivy index and the main table directory? I think this would allow for some simple workarounds to the s3 concurrent writes limitation and the tantivy local index (if I understand both issues correctly)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248334997891322032 class=chatlog__message-container data-message-id=1248334997891322032><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, June 6, 2024 1:57â€¯PM"> <a href=#chatlog__message-container-1248334997891322032>6/6/2024 1:57â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248337747597328506 class=chatlog__message-container data-message-id=1248337747597328506><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/173506311651196928/23fdf8ea6da85ec56d4ff4d0aaebac32.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=antblo data-user-id=173506311651196928>AntBlo</span> <span class=chatlog__timestamp title="Thursday, June 6, 2024 2:08â€¯PM"><a href=#chatlog__message-container-1248337747597328506>6/6/2024 2:08â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey, this isn&#39;t a lance question perhaps. But when calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">dataset.to_table()</code> I&#39;m getting <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Unknown</code> back (see image). Is that expected, or should it be typed?

I can see that it should be returning <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pa.Table</code>.
Found: <a href="https://github.com/apache/arrow/issues/41736">https://github.com/apache/arrow/issues/41736</a> which seem to be confused about the same thing (no linting or autocompletion on pyarrow.lib classes)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1248337747350130779/image.png?ex=697ba21f&amp;is=697a509f&amp;hm=3a2bdd9b11e6731285f8ffc01422afdf46cc734857686542789d8e06f8f96fb1&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1248337747350130779/image.png?ex=697ba21f&amp;is=697a509f&amp;hm=3a2bdd9b11e6731285f8ffc01422afdf46cc734857686542789d8e06f8f96fb1&amp;" alt="Image attachment" title="Image: image.png (17.49 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1248343025554554885 class=chatlog__message-container data-message-id=1248343025554554885><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, June 6, 2024 2:29â€¯PM"> <a href=#chatlog__message-container-1248343025554554885>6/6/2024 2:29â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1250735917791055953 class=chatlog__message-container data-message-id=1250735917791055953><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=lalit_31161 data-user-id=1250734668370808834>Lalit</span> <span class=chatlog__timestamp title="Thursday, June 13, 2024 4:58â€¯AM"><a href=#chatlog__message-container-1250735917791055953>6/13/2024 4:58â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am trying to use Minio as storage for LanceDB through LaamaIndex    
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> from llama_index.vector_stores.lancedb import LanceDBVectorStore
import os
import s3fs

s3_uri = f&quot;s3://bucket/_lancedb/&quot;

os.environ[&#39;AWS_ACCESS_KEY_ID&#39;]=&#39;&#39;
os.environ[&#39;AWS_SECRET_ACCESS_KEY&#39;]=&#39;&#39;
os.environ[&#39;AWS_REGION&#39;]=&#39;aws-global&#39;
os.environ[&#39;AWS_ENDPOINT&#39;]=&#39;http://minio-host:9000&#39;

vector_store = LanceDBVectorStore(uri=s3_uri, mode=&quot;overwrite&quot;, query_type=&quot;hybrid&quot;)
storage_context = StorageContext.from_defaults(vector_store=vector_store)
vector_index = VectorStoreIndex(nodes, storage_context=storage_context)</code>
1. But it&#39;s not appending to existing index and everytime I run this code a new index is created in Minio
2. When I query the index it downloads whole index locally

Do we need to have a local copy and sync with S3 or am I missing something? Can anyone please help me understand this?</span> <span class=chatlog__edited-timestamp title="Thursday, June 13, 2024 5:08â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1250832362921660436 class=chatlog__message-container data-message-id=1250832362921660436><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sandias42 data-user-id=686348388484382828>sandias42</span> <span class=chatlog__timestamp title="Thursday, June 13, 2024 11:21â€¯AM"><a href=#chatlog__message-container-1250832362921660436>6/13/2024 11:21â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If there is an intermittent error during <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.to_lance().optimize.compact_files()</code> (such as <a href="https://discord.com/channels/1030247538198061086/1105226910528716912/1248717061404753941" onclick="scrollToMessage(event, '1248717061404753941')">this S3 Error</a> or <a href="https://github.com/lancedb/lance/issues/2397">this multithreaded commit failure error</a> has progress compacting been made which re-running the compaction can complete? Or does compaction have to start over from scratch? I&#39;m trying to compact a ~10TB dataset and have gotten these errors 4 or so times. Seem very unlikely to complete if its not making progress each time, and I&#39;d like to know if I&#39;m wasting my effort with rerunning. Thanks!</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/issues/2397><div class="chatlog__markdown chatlog__markdown-preserve">Compact with many thread could fail with commit conflict &#183; Issue #2...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">repro very_large_dataset.optimize.compact_files(num_threads=a_lot)</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/qVF43NDSrAYUnMWq9NDpAXAiT00oLJi1xr66Hczf4_s/https/opengraph.githubassets.com/16a0e43e2e1931415a04d8427473795cf4384bcb8390caad78c46e39cfff8eac/lancedb/lance/issues/2397> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/qVF43NDSrAYUnMWq9NDpAXAiT00oLJi1xr66Hczf4_s/https/opengraph.githubassets.com/16a0e43e2e1931415a04d8427473795cf4384bcb8390caad78c46e39cfff8eac/lancedb/lance/issues/2397 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1250861799218221233 class=chatlog__message-container data-message-id=1250861799218221233><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, June 13, 2024 1:18â€¯PM"> <a href=#chatlog__message-container-1250861799218221233>6/13/2024 1:18â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1250865621126873190 class=chatlog__message-container data-message-id=1250865621126873190><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/709740176565469256/41e6dda2e43fdfbf87ad4f5114662876.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=lalit_31161>Lalit</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1250735917791055953')"> I am trying to use Minio as storage for LanceDB through LaamaIndex    
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> from llama_index.vector_stores.lancedb import LanceDBVectorStore
import os
import s3fs

s3_uri = f&quot;s3://bucket/_lancedb/&quot;

os.environ[&#39;AWS_ACCESS_KEY_ID&#39;]=&#39;&#39;
os.environ[&#39;AWS_SECRET_ACCESS_KEY&#39;]=&#39;&#39;
os.environ[&#39;AWS_REGION&#39;]=&#39;aws-global&#39;
os.environ[&#39;AWS_ENDPOINT&#39;]=&#39;http://minio-host:9000&#39;

vector_store = LanceDBVectorStore(uri=s3_uri, mode=&quot;overwrite&quot;, query_type=&quot;hybrid&quot;)
storage_context = StorageContext.from_defaults(vector_store=vector_store)
vector_index = VectorStoreIndex(nodes, storage_context=storage_context)</code>
1. But it&#39;s not appending to existing index and everytime I run this code a new index is created in Minio
2. When I query the index it downloads whole index locally

Do we need to have a local copy and sync with S3 or am I missing something? Can anyone please help me understand this? </span> <span class=chatlog__reply-edited-timestamp title="Thursday, June 13, 2024 5:08â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=rdx99. data-user-id=709740176565469256>rdx99.</span> <span class=chatlog__timestamp title="Thursday, June 13, 2024 1:33â€¯PM"><a href=#chatlog__message-container-1250865621126873190>6/13/2024 1:33â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Running the line <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">index = VectorStoreIndex(nodes=nodes, storage_context=storage_context)</code> will indeed create a new index every time, as LlamaIndex creates a new object with this call.

A workaround could be to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">VectorStoreIndex.from_vector_store()</code>. This allows you to initialize the vector store once and then create the index based on your use case, but ideally a llama index &#39;index&#39; object is created only once and should not be called iteratively.

I have not worked with MinIO on this, but the entire index shouldn&#39;t be downloaded locally as in the backend there is no local save happening (source code: (<a href="https://github.com/run-llama/llama_index/blob/91fc2361c49a8ab819be894b06067a2e4e03b9c3/llama-index-integrations/vector_stores/llama-index-vector-stores-lancedb/llama_index/vector_stores/lancedb/base.py))">https://github.com/run-llama/llama_index/blob/91fc2361c49a8ab819be894b06067a2e4e03b9c3/llama-index-integrations/vector_stores/llama-index-vector-stores-lancedb/llama_index/vector_stores/lancedb/base.py))</a>.

If you use S3 to store tables, our LanceDB open-source package downloads the table into the in-memory table/dataset cache. If the user queries the same Table object again, only then will it be saved. Otherwise, there is no &quot;local disk caching&quot;.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1251027577775067197 class=chatlog__message-container data-message-id=1251027577775067197><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/709740176565469256/41e6dda2e43fdfbf87ad4f5114662876.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=rdx99.>rdx99.</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1250865621126873190')"> Running the line <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">index = VectorStoreIndex(nodes=nodes, storage_context=storage_context)</code> will indeed create a new index every time, as LlamaIndex creates a new object with this call.

A workaround could be to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">VectorStoreIndex.from_vector_store()</code>. This allows you to initialize the vector store once and then create the index based on your use case, but ideally a llama index &#39;index&#39; object is created only once and should not be called iteratively.

I have not worked with MinIO on this, but the entire index shouldn&#39;t be downloaded locally as in the backend there is no local save happening (source code: (<a href="https://github.com/run-llama/llama_index/blob/91fc2361c49a8ab819be894b06067a2e4e03b9c3/llama-index-integrations/vector_stores/llama-index-vector-stores-lancedb/llama_index/vector_stores/lancedb/base.py))">https://github.com/run-llama/llama_index/blob/91fc2361c49a8ab819be894b06067a2e4e03b9c3/llama-index-integrations/vector_stores/llama-index-vector-stores-lancedb/llama_index/vector_stores/lancedb/base.py))</a>.

If you use S3 to store tables, our LanceDB open-source package downloads the table into the in-memory table/dataset cache. If the user queries the same Table object again, only then will it be saved. Otherwise, there is no &quot;local disk caching&quot;. </span></div></div><div class=chatlog__header><span class=chatlog__author title=lalit_31161 data-user-id=1250734668370808834>Lalit</span> <span class=chatlog__timestamp title="Friday, June 14, 2024 12:16â€¯AM"><a href=#chatlog__message-container-1251027577775067197>6/14/2024 12:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">vector_store = LanceDBVectorStore(uri=s3_uri, mode=&quot;append&quot;, query_type=&quot;hybrid&quot;)
vector_index = VectorStoreIndex.from_vector_store(vector_store)
vector_index.insert_nodes(nodes)</code>
Everytime it creates new index in Minio and yes, index is downloaded on query only</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1251154449653698704 class=chatlog__message-container data-message-id=1251154449653698704><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/709740176565469256/41e6dda2e43fdfbf87ad4f5114662876.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=lalit_31161>Lalit</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1251027577775067197')"> <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">vector_store = LanceDBVectorStore(uri=s3_uri, mode=&quot;append&quot;, query_type=&quot;hybrid&quot;)
vector_index = VectorStoreIndex.from_vector_store(vector_store)
vector_index.insert_nodes(nodes)</code>
Everytime it creates new index in Minio and yes, index is downloaded on query only </span></div></div><div class=chatlog__header><span class=chatlog__author title=rdx99. data-user-id=709740176565469256>rdx99.</span> <span class=chatlog__timestamp title="Friday, June 14, 2024 8:41â€¯AM"><a href=#chatlog__message-container-1251154449653698704>6/14/2024 8:41â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>By creating an index, I assume you mean that the populated table is recreated. If you run the code multiple times, it will recreate the table each time, as it is a one-time initialization. I believe this is how the API is designed.

If you can share your complete use case, depending on the issue we can open a thread and provide more specific assistance. However, I currently do not see any issue with the integration.

Regarding the local download, I do not see it as an issue from the LanceDB-LlamaIndex integration end (I have provided the source code above for your reference). As mentioned in my previous message, the table object is stored in the in-memory table cache. If the table object is called again (which occurs if you search using the same table object via the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.query()</code> or <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.add()</code> methods), it will be retrieved from the cache.</span> <span class=chatlog__edited-timestamp title="Friday, June 14, 2024 8:41â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1251210367045079132 class=chatlog__message-container data-message-id=1251210367045079132><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/147916232698363904/76a87fc0de7ea89625bbe25f8a74cd5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bnorick data-user-id=147916232698363904>Cubed</span> <span class=chatlog__timestamp title="Friday, June 14, 2024 12:23â€¯PM"><a href=#chatlog__message-container-1251210367045079132>6/14/2024 12:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Where do I follow progress on v2?</span></div></div></div></div><div id=chatlog__message-container-1251210382278656083 class=chatlog__message-container data-message-id=1251210382278656083><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, June 14, 2024 12:23â€¯PM">12:23â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Format.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1251265753169268787 class=chatlog__message-container data-message-id=1251265753169268787><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/173506311651196928/23fdf8ea6da85ec56d4ff4d0aaebac32.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=antblo data-user-id=173506311651196928>AntBlo</span> <span class=chatlog__timestamp title="Friday, June 14, 2024 4:03â€¯PM"><a href=#chatlog__message-container-1251265753169268787>6/14/2024 4:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey, how do I do row indexing/slicing for a lancedb.table.Table? Or is that not possible?
I know I can do <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.take()</code> on a lance Dataset, and they seem to have a similar API surface to lancedb&#39;s Table

Edit: 
I&#39;ll try to work around it by having both a Dataset and Table.
But let me know if there&#39;s some other way. What I want is to both have Table&#39;s <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.add()</code> and Dataset&#39;s <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.take()</code></span> <span class=chatlog__edited-timestamp title="Friday, June 14, 2024 4:31â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1251304082224840710 class=chatlog__message-container data-message-id=1251304082224840710><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, June 14, 2024 6:35â€¯PM"> <a href=#chatlog__message-container-1251304082224840710>6/14/2024 6:35â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1252347883945197618 class=chatlog__message-container data-message-id=1252347883945197618><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ozb7067 data-user-id=1252344492762206249>Oz</span> <span class=chatlog__timestamp title="Monday, June 17, 2024 3:43â€¯PM"><a href=#chatlog__message-container-1252347883945197618>6/17/2024 3:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi All, 
Excited to be trying LanceDB! Apologies I tried searching docs/PRs/issues, and a bit through the history here, but not seeing a solution. 
I&#39;m hitting very high memory usage (OOM after ~116GB) while trying to create a vector index on a large number of records (100M). It works for 1M records, and for 10M I get a different error (pyarrow.lib.ArrowInvalid: offset overflow while concatenating arrays). 
I&#39;m installing with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pip install lancedb</code>, is there a better way to get the latest version? 
Or is this memory usage expected for index creation? Will tweaking parameters like num_partitions/subvectors help?
table is using GCS backend</span> <span class=chatlog__edited-timestamp title="Monday, June 17, 2024 3:44â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1252597697341558805 class=chatlog__message-container data-message-id=1252597697341558805><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cr1688 data-user-id=972108768865296434>CR</span> <span class=chatlog__timestamp title="Tuesday, June 18, 2024 8:16â€¯AM"><a href=#chatlog__message-container-1252597697341558805>6/18/2024 8:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way we could perform the indexing by batches to reduce the increased memory demand? I explore stores around a million of raw and embedding (generated by LLM) data to cloud storage. I often get out of memory and the process is killed after indexing starts. When I looked into the commands, it seems not supported.  
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">create_index(metric=&#39;L2&#39;, num_partitions=256, num_sub_vectors=96, vector_column_name: str = VECTOR_COLUMN_NAME, replace: bool = True, accelerator: Optional[str] = None, index_cache_size: Optional[int] = None) </code>
the create_index config shown as below
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">  table.create_index(
      metric=&quot;cosine&quot;,
      vector_column_name=&quot;embedding&quot;,
      num_partitions=num_partitions,
      num_sub_vectors=num_sub_vectors,
      accelerator=&quot;cuda&quot;
  )</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Indexing started...
Current number of vectors: 913000
Number of partitions: 768
Number of sub vectors: 768
  0%|                                                                                                                                                                                       | 0/50 [00:00&lt;?, ?it/s]Killed</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">g2-standard-8, 8vCPU, 32GB memory</code></span> <span class=chatlog__edited-timestamp title="Tuesday, June 18, 2024 8:22â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1252606253398757402 class=chatlog__message-container data-message-id=1252606253398757402><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, June 18, 2024 8:50â€¯AM"> <a href=#chatlog__message-container-1252606253398757402>6/18/2024 8:50â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1252618083496103936 class=chatlog__message-container data-message-id=1252618083496103936><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ozb7067 data-user-id=1252344492762206249>Oz</span> <span class=chatlog__timestamp title="Tuesday, June 18, 2024 9:37â€¯AM"><a href=#chatlog__message-container-1252618083496103936>6/18/2024 9:37â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Another noob question: Any idea how long it should take to index a 400GB table (100M records * 1024 dims * 32bit floats), in GCS? It&#39;s been running for the last 13.5 hours</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1252620954689867822 class=chatlog__message-container data-message-id=1252620954689867822><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, June 18, 2024 9:48â€¯AM"> <a href=#chatlog__message-container-1252620954689867822>6/18/2024 9:48â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253285683167232044 class=chatlog__message-container data-message-id=1253285683167232044><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cr1688 data-user-id=972108768865296434>CR</span> <span class=chatlog__timestamp title="Thursday, June 20, 2024 5:49â€¯AM"><a href=#chatlog__message-container-1253285683167232044>6/20/2024 5:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Will this work on GCP? <a href="https://lancedb.github.io/lance/integrations/tensorflow.html#distributed-training-and-shuffling">https://lancedb.github.io/lance/integrations/tensorflow.html#distributed-training-and-shuffling</a></span></div></div></div></div><div id=chatlog__message-container-1253286811636338739 class=chatlog__message-container data-message-id=1253286811636338739><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, June 20, 2024 5:54â€¯AM">5:54â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How could we do the indexing through serverless architecture?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253372841336897616 class=chatlog__message-container data-message-id=1253372841336897616><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=cr1688>CR</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1253285683167232044')"> Will this work on GCP? <a href="https://lancedb.github.io/lance/integrations/tensorflow.html#distributed-training-and-shuffling">https://lancedb.github.io/lance/integrations/tensorflow.html#distributed-training-and-shuffling</a> </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Thursday, June 20, 2024 11:36â€¯AM"><a href=#chatlog__message-container-1253372841336897616>6/20/2024 11:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes! We have users who do training from Lance data stored on GCS.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253373165871169551 class=chatlog__message-container data-message-id=1253373165871169551><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, June 20, 2024 11:37â€¯AM"> <a href=#chatlog__message-container-1253373165871169551>6/20/2024 11:37â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253769787453079563 class=chatlog__message-container data-message-id=1253769787453079563><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Friday, June 21, 2024 1:53â€¯PM"><a href=#chatlog__message-container-1253769787453079563>6/21/2024 1:53â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>keep getting this error in my lambda function. Any idea how to fix? 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">[ERROR] PydanticSchemaGenerationError: Unable to generate pydantic-core schema for &lt;class &#39;pyarrow.lib.DataType&#39;&gt;. Set `arbitrary_types_allowed=True` in the model_config to ignore this error or implement `__get_pydantic_core_schema__` on your type to fully support it.</code>

This is the schema I&#39;m trying to use to add my data to LanceDB

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">class TextData(LanceModel):
    primary_domain: str
    original_url: str
    object_uri: str
    text_chunk: str
    embeddings: Vector(1024)
    tables: list
    image_urls: list
    file_urls: list
    title: str
    meta_description: str
    content_type: str</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253770122800271502 class=chatlog__message-container data-message-id=1253770122800271502><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Friday, June 21, 2024 1:54â€¯PM"><a href=#chatlog__message-container-1253770122800271502>6/21/2024 1:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>1. what version of pydantic are you on?</span></div></div></div></div><div id=chatlog__message-container-1253770333807448124 class=chatlog__message-container data-message-id=1253770333807448124><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, June 21, 2024 1:55â€¯PM">1:55â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>2. do you know which fields are causing that issue (maybe try removing the Vector column first and then try removing the list columns)?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253775054177570817 class=chatlog__message-container data-message-id=1253775054177570817><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sandias42 data-user-id=686348388484382828>sandias42</span> <span class=chatlog__timestamp title="Friday, June 21, 2024 2:14â€¯PM"><a href=#chatlog__message-container-1253775054177570817>6/21/2024 2:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks! Similar to <a href="https://discord.com/channels/1030247538198061086/1197630499926057021/1250832362921660436" onclick="scrollToMessage(event, '1250832362921660436')">my last question</a>, I&#39;m encountering an <a href="https://discord.com/channels/1030247538198061086/1197630499926057021/1250832362921660436" onclick="scrollToMessage(event, '1250832362921660436')">intermittent S3 error</a> which causes failures of long-running lance functions on my large (10TB, 1Billion row) dataset in S3. This time the operation thats failing is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.create_index()</code> on my 1B 1536-dim vectors.  I&#39;m assuming that like compaction the default execution does not make progress that can be restarted if interrupted, which means I expect I&#39;ll never succeed at index building using this method (the intermittent errors are almost certain to occur at least once in such a large dataset in my hands). Is there any way to build this index incrementally, even if it requires dropping down to a more low level interface?</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://discord.com/channels/1030247538198061086/1197630499926057021/1250832362921660436),><div class="chatlog__markdown chatlog__markdown-preserve">Discord - Group Chat Thatâ€™s All Fun &amp; Games</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Discord is great for playing games and chilling with friends, or even building a worldwide community. Customize your own space to talk, play, and hang out.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/bl_z4HbNRvQRyKof2-XZ2glNM6d4JbpCc-bC5HiybiQ/https/cdn.discordapp.com/assets/og_img_discord_home.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/bl_z4HbNRvQRyKof2-XZ2glNM6d4JbpCc-bC5HiybiQ/https/cdn.discordapp.com/assets/og_img_discord_home.png alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253778231086026918 class=chatlog__message-container data-message-id=1253778231086026918><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=sandias42 data-user-id=686348388484382828>sandias42</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, June 21, 2024 2:27â€¯PM"> <a href=#chatlog__message-container-1253778231086026918>6/21/2024 2:27â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253782852466643006 class=chatlog__message-container data-message-id=1253782852466643006><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=changkhiskhan>changhiskhan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1253770122800271502')"> 1. what version of pydantic are you on? </span></div></div><div class=chatlog__header><span class=chatlog__author title=jmeks data-user-id=874024849549443083>JMEKS</span> <span class=chatlog__timestamp title="Friday, June 21, 2024 2:45â€¯PM"><a href=#chatlog__message-container-1253782852466643006>6/21/2024 2:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>2.6.3 â€”&#160;Do I need to update that to 2.7?

I think it is my text_chunk with the recursive splitter I&#39;m using for some reason. Just to confirm, dicts and nested dicts are not supported with the pyarrow converter, correct?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253783982798147796 class=chatlog__message-container data-message-id=1253783982798147796><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/874024849549443083/82ae4877b6329b4d8ab2440a270e9278.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=jmeks>JMEKS</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1253782852466643006')"> 2.6.3 â€”&#160;Do I need to update that to 2.7?

I think it is my text_chunk with the recursive splitter I&#39;m using for some reason. Just to confirm, dicts and nested dicts are not supported with the pyarrow converter, correct? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Friday, June 21, 2024 2:49â€¯PM"><a href=#chatlog__message-container-1253783982798147796>6/21/2024 2:49â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>right for now they&#39;re not supported yet</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1253822732727095426 class=chatlog__message-container data-message-id=1253822732727095426><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/340937930098999296/4ba4b99c084f9114d3f67f6c53c799e7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nekowaii data-user-id=340937930098999296>nekowaii</span> <span class=chatlog__timestamp title="Friday, June 21, 2024 5:23â€¯PM"><a href=#chatlog__message-container-1253822732727095426>6/21/2024 5:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi everyone,

Is there any workaround to calculate the FTS index for a hybrid search locally and then upload it to S3? I use AWS DataSync to synchronize data between an S3 bucket and EFS (for me, it was the easiest way to upload data to EFS). Later, I use EFS and Lambda for querying chunks.

My current idea is as follows:

1) Create a table or upsert new data to an existing one on S3.
2) Download the data from S3.
3) Generate the FTS index locally.
4) Upload only the FTS index.
5) Sync with EFS.

The reason for this unusual pipeline is that, in my current infrastructure, I use a SageMaker preprocessing job to upload data to S3. I realized that the SageMaker preprocessing job doesn&#39;t support EFS, and I don&#39;t want to create new data pipelines or refactor this part.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1254968762352799805 class=chatlog__message-container data-message-id=1254968762352799805><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/147916232698363904/76a87fc0de7ea89625bbe25f8a74cd5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bnorick data-user-id=147916232698363904>Cubed</span> <span class=chatlog__timestamp title="Monday, June 24, 2024 9:17â€¯PM"><a href=#chatlog__message-container-1254968762352799805>6/24/2024 9:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible to store columns in different  places within a dataset? Imagine a  dataset where one column is a large blob and the remaining columns are either small blobs (like a diff) or metadata. I&#39;d like to store the large blob column in a blob storage of some sort like s3 but be able to store the smaller columns locally.

Any recommendation for this? I imagine I could solve this with multiple datasets which are row-aligned, but wondering if this sort of use case is something the team had already thought about.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1254970610094837780 class=chatlog__message-container data-message-id=1254970610094837780><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Monday, June 24, 2024 9:25â€¯PM"><a href=#chatlog__message-container-1254970610094837780>6/24/2024 9:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>store URLs instead of storing the large blob itself?</span> <span class=chatlog__edited-timestamp title="Monday, June 24, 2024 9:25â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1254973773275205644 class=chatlog__message-container data-message-id=1254973773275205644><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/147916232698363904/76a87fc0de7ea89625bbe25f8a74cd5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bnorick data-user-id=147916232698363904>Cubed</span> <span class=chatlog__timestamp title="Monday, June 24, 2024 9:37â€¯PM"><a href=#chatlog__message-container-1254973773275205644>6/24/2024 9:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Rather not, they&#39;re not thaaaat large. Like 1MiB strings or something, but together the column is quite large when there are billions of rows.</span> <span class=chatlog__edited-timestamp title="Monday, June 24, 2024 9:43â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255188423195492414 class=chatlog__message-container data-message-id=1255188423195492414><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/147916232698363904/76a87fc0de7ea89625bbe25f8a74cd5c.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=bnorick>Cubed</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1254968762352799805')"> Is it possible to store columns in different  places within a dataset? Imagine a  dataset where one column is a large blob and the remaining columns are either small blobs (like a diff) or metadata. I&#39;d like to store the large blob column in a blob storage of some sort like s3 but be able to store the smaller columns locally.

Any recommendation for this? I imagine I could solve this with multiple datasets which are row-aligned, but wondering if this sort of use case is something the team had already thought about. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Tuesday, June 25, 2024 11:50â€¯AM"><a href=#chatlog__message-container-1255188423195492414>6/25/2024 11:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>We don&#39;t support storing columns in different storage types. Right now each dataset only has one type of storage backing all of it. It&#39;s an interesting idea though, and I&#39;ve heard it mentioned a few times.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255191697537892463 class=chatlog__message-container data-message-id=1255191697537892463><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/147916232698363904/76a87fc0de7ea89625bbe25f8a74cd5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1255188423195492414')"> We don&#39;t support storing columns in different storage types. Right now each dataset only has one type of storage backing all of it. It&#39;s an interesting idea though, and I&#39;ve heard it mentioned a few times. </span></div></div><div class=chatlog__header><span class=chatlog__author title=bnorick data-user-id=147916232698363904>Cubed</span> <span class=chatlog__timestamp title="Tuesday, June 25, 2024 12:03â€¯PM"><a href=#chatlog__message-container-1255191697537892463>6/25/2024 12:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I think it&#39;d be pretty helpful.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255216993250840646 class=chatlog__message-container data-message-id=1255216993250840646><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/863631319338188880/a9d7861d5d8fe08f5f6c4279be814008.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=wyatt_hu data-user-id=863631319338188880>Override è¦†å†™</span> <span class=chatlog__timestamp title="Tuesday, June 25, 2024 1:44â€¯PM"><a href=#chatlog__message-container-1255216993250840646>6/25/2024 1:44â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Does lanceDB have plans to support ForeignKey?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255221737583542282 class=chatlog__message-container data-message-id=1255221737583542282><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/863631319338188880/a9d7861d5d8fe08f5f6c4279be814008.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=wyatt_hu>Override è¦†å†™</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1255216993250840646')"> Does lanceDB have plans to support ForeignKey? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Tuesday, June 25, 2024 2:03â€¯PM"><a href=#chatlog__message-container-1255221737583542282>6/25/2024 2:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Not in the near term. We don&#39;t even have primary keys at the moment, but will later this year.</span> <span class=chatlog__edited-timestamp title="Tuesday, June 25, 2024 2:03â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255392647326203916 class=chatlog__message-container data-message-id=1255392647326203916><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=devin_43378_20078 data-user-id=1253795800534880337>devin</span> <span class=chatlog__timestamp title="Wednesday, June 26, 2024 1:22â€¯AM"><a href=#chatlog__message-container-1255392647326203916>6/26/2024 1:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If anyone is around - index creation fails with no explanation on my table, around 31GB - any tips for debugging?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255394124425728112 class=chatlog__message-container data-message-id=1255394124425728112><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Wednesday, June 26, 2024 1:28â€¯AM"><a href=#chatlog__message-container-1255394124425728112>6/26/2024 1:28â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>could you try <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LANCE_LOG=info ./my_index_script.py</code> ?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255394526089183272 class=chatlog__message-container data-message-id=1255394526089183272><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=lei.xu>lei</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1255394124425728112')"> could you try <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LANCE_LOG=info ./my_index_script.py</code> ? </span></div></div><div class=chatlog__header><span class=chatlog__author title=devin_43378_20078 data-user-id=1253795800534880337>devin</span> <span class=chatlog__timestamp title="Wednesday, June 26, 2024 1:29â€¯AM"><a href=#chatlog__message-container-1255394526089183272>6/26/2024 1:29â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>could you elaborate? what would this do for the python script execution?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1255394693370478642 class=chatlog__message-container data-message-id=1255394693370478642><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Wednesday, June 26, 2024 1:30â€¯AM"><a href=#chatlog__message-container-1255394693370478642>6/26/2024 1:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>adding to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LANCE_LOG=info</code> , lance will print out internal logs at info level. So you can see some indexing progress.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1256153335950737409 class=chatlog__message-container data-message-id=1256153335950737409><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Friday, June 28, 2024 3:44â€¯AM"><a href=#chatlog__message-container-1256153335950737409>6/28/2024 3:44â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, I an unable to create a table with AZURE Blob URI

Here is the code that I used

storage_options = {&quot;azure_client_id&quot;: CLIENT_ID,
        &quot;azure_client_secret&quot;: CLIENT_SECRET,
        &quot;azure_tenant_id&quot;: TENANT_ID,
                  &quot;account_name&quot;: STORAGE_ACCOUNT_NAME,
                  &quot;container_name&quot;: CONTAINER_NAME}
db_url = f&quot;az://{account_name}/{container_name}&quot;
db = await lancedb.connect_async(db_url, storage_options = storage_options)
tbl = await db.create_table(&quot;test-lance-table&quot;, sample_df , mode=&quot;overwrite&quot;)

Error 

RuntimeError: lance error: LanceError(IO): Generic MicrosoftAzure error: Error performing list request: Client error with status 404 Not Found: &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;ContainerNotFound&lt;/Code&gt;&lt;Message&gt;The specified container does not exist.
RequestId:ac481997-f01e-004e-56f7-c71f81000000
Time:2024-06-26T18:33:58.7348200Z&lt;/Message&gt;&lt;/Error&gt;, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-table-0.12.1/src/io/commit.rs:105:26</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1256153654361329725 class=chatlog__message-container data-message-id=1256153654361329725><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=deepakkatch>DeepakKatch</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1256153335950737409')"> Hi Team, I an unable to create a table with AZURE Blob URI

Here is the code that I used

storage_options = {&quot;azure_client_id&quot;: CLIENT_ID,
        &quot;azure_client_secret&quot;: CLIENT_SECRET,
        &quot;azure_tenant_id&quot;: TENANT_ID,
                  &quot;account_name&quot;: STORAGE_ACCOUNT_NAME,
                  &quot;container_name&quot;: CONTAINER_NAME}
db_url = f&quot;az://{account_name}/{container_name}&quot;
db = await lancedb.connect_async(db_url, storage_options = storage_options)
tbl = await db.create_table(&quot;test-lance-table&quot;, sample_df , mode=&quot;overwrite&quot;)

Error 

RuntimeError: lance error: LanceError(IO): Generic MicrosoftAzure error: Error performing list request: Client error with status 404 Not Found: &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;ContainerNotFound&lt;/Code&gt;&lt;Message&gt;The specified container does not exist.
RequestId:ac481997-f01e-004e-56f7-c71f81000000
Time:2024-06-26T18:33:58.7348200Z&lt;/Message&gt;&lt;/Error&gt;, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-table-0.12.1/src/io/commit.rs:105:26 </span></div></div><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Friday, June 28, 2024 3:46â€¯AM"><a href=#chatlog__message-container-1256153654361329725>6/28/2024 3:46â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am running on lancedb 0.8.2</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1256335544536006753 class=chatlog__message-container data-message-id=1256335544536006753><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, June 28, 2024 3:48â€¯PM"> <a href=#chatlog__message-container-1256335544536006753>6/28/2024 3:48â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1256379068828483665 class=chatlog__message-container data-message-id=1256379068828483665><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=devin_43378_20078 data-user-id=1253795800534880337>devin</span> <span class=chatlog__timestamp title="Friday, June 28, 2024 6:41â€¯PM"><a href=#chatlog__message-container-1256379068828483665>6/28/2024 6:41â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Debugging S3 - reading from a local file, the search takes &lt;1 second, but S3 takes &gt;16 seconds. Given that on the DB initialization we should be reading the S3 file into memory, what could be the explanation for the search latency increasing by so much?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1256381889133023326 class=chatlog__message-container data-message-id=1256381889133023326><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=devin_43378_20078 data-user-id=1253795800534880337>devin</span> <span class=chatlog__timestamp title="Friday, June 28, 2024 6:53â€¯PM"><a href=#chatlog__message-container-1256381889133023326>6/28/2024 6:53â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Example with local file URI:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Starting API call
Database connection time: 3.668589000000793ms
Embedding generation time: 36.19565199999852ms
Search time: 320.6672959999996ms
Total query time: 360.99779000000126ms</code>

Example with S3:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Starting API call
Database connection time: 1092.471746000001ms
Embedding generation time: 50.55504800000017ms
Search time: 15643.882547ms
Total query time: 16787.390626ms</code></span> <span class=chatlog__edited-timestamp title="Friday, June 28, 2024 6:53â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1256404511401181286 class=chatlog__message-container data-message-id=1256404511401181286><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, June 28, 2024 8:22â€¯PM"> <a href=#chatlog__message-container-1256404511401181286>6/28/2024 8:22â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1257348551134941305 class=chatlog__message-container data-message-id=1257348551134941305><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, July 1, 2024 10:54â€¯AM"> <a href=#chatlog__message-container-1257348551134941305>7/1/2024 10:54â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1258295320241246258 class=chatlog__message-container data-message-id=1258295320241246258><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/779784350320689152/1fd145c1b6ca0dad1e498fe85a4a02d9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span class=chatlog__timestamp title="Thursday, July 4, 2024 1:36â€¯AM"><a href=#chatlog__message-container-1258295320241246258>7/4/2024 1:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am getting a curious error message with the query when I search with a longer query. 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-text">Syntax Error: Dr. Johannes M&#252;ller - Gesch&#228;ftsf&#252;hrender Gesellschafter
Sabine Schmidt - Leiterin Betrieb
Dipl.-Ing. Maximilian Schneider - Vorstandsvorsitzender
Dr. Stefanie Fischer - Chief Technology Officer
Dipl.-Kfm. Alexander Becker - Vertriebsleiter DACH
Prof. Dr. med. Julia Wagner - &#196;rztliche Direktorin
Dipl.-Wirt.-Ing. Christoph Weber - Pr&#228;sident &amp; COO
Jing Li - Mitbegr&#252;nderin &amp; CEO
Aditya Gupta - Mitbegr&#252;nder &amp; CTO
Maria Hernandez - Chief Product Officer</code>

It does not tell me more beyond the error. Any insight on that? Query tpye is hybrid. I am using LinearCombinationReranker.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1258299493095575577 class=chatlog__message-container data-message-id=1258299493095575577><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, July 4, 2024 1:52â€¯AM"> <a href=#chatlog__message-container-1258299493095575577>7/4/2024 1:52â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1258912681168212051 class=chatlog__message-container data-message-id=1258912681168212051><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=_nickwashere data-user-id=351484298731323404>NickWasHere</span> <span class=chatlog__timestamp title="Friday, July 5, 2024 6:29â€¯PM"><a href=#chatlog__message-container-1258912681168212051>7/5/2024 6:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello all. I have a (hopefully) quick question. It seems as though the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.update</code> method in the Python API doesn&#39;t handle special characters correctly the way that I&#39;m using it.

For example:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">table.update(where=f&quot;id = &#39;{msg.id}&#39;&quot;, values={&quot;content&quot;: &quot;I&#39;m good, how are you?&quot;})</code>
yields a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: Invalid user input: LanceError(IO): Unterminated string literal</code>. Notably, this doesn&#39;t happen for <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Table.add</code>

What is the proper way to deal with strings that aren&#39;t SQL-safe?

My schema is
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">pa.schema(
    [
        pa.field(&quot;id&quot;, pa.string()),
        pa.field(&quot;content&quot;, pa.string()),
        pa.field(&quot;vector&quot;, pa.list_(pa.float32(), 384), False),
    ]
)</code>
and i use it when i create the table, i.e. <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">db.create_table(&quot;my_table&quot;, schema=my_schema</code></span> <span class=chatlog__edited-timestamp title="Friday, July 5, 2024 6:39â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1258923620047261873 class=chatlog__message-container data-message-id=1258923620047261873><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, July 5, 2024 7:13â€¯PM"> <a href=#chatlog__message-container-1258923620047261873>7/5/2024 7:13â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1259504498204741643 class=chatlog__message-container data-message-id=1259504498204741643><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title="Deleted User" data-user-id=456226577798135808>Deleted User</span> <span class=chatlog__timestamp title="Sunday, July 7, 2024 9:41â€¯AM"><a href=#chatlog__message-container-1259504498204741643>7/7/2024 9:41â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1259620197837570121 class=chatlog__message-container data-message-id=1259620197837570121><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ozb7067 data-user-id=1252344492762206249>Oz</span> <span class=chatlog__timestamp title="Sunday, July 7, 2024 5:20â€¯PM"><a href=#chatlog__message-container-1259620197837570121>7/7/2024 5:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello again! We are now happily using LanceDB in production. Next up, we&#39;d like to improve our performance further by taking some logic out of Python and putting it into LanceDB or some integration like pandas/Polars/duckdb.

In particular, our logic looks like something like (in pseudo-SQL):

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">with union_docs as (select * from table1 union all select * from table2 union all ... select * from tablen)
select 
  group_id, 
  another_group_column,
  min(vector_distance(vector_column, input_vector)) as dist 
from union_docs 
group by group_id, another_group_column
order by dist
limit N</code>

That is, we want the nearest N (configurable limit) distinct <em>groups</em> of records, across <em>n</em> different Lance tables.
We are running this query with different input vectors many thousands of times for a given &quot;dataset&quot; that consists of a certain number of tables; currently each table has its index precomputed, but not the union table. The table sizes are currently up to O(10M), will definitely reach O(100M), and may well end up bigger
How can we best implement this?

In particular, should we do any of the following?
<ul><li>combine the underlying tables into a new table, and reindex</li><li>just do the vector search on each of the underlying tables, and use Pandas, Polars, or DuckDB (which?) for the rest</li><li>is there some deeper integration with any of the above, or some other Lance capability that would let us directly run the vector search on the union table, and limit both across tables and by number of groups rather than individual records?

generally, how should we think of the refine factor in this context? Is choosing a refine factor of 10 roughly equivalent to getting 10x the number of records we need with refine factor 1  and doing the reranking ourselves (in particular, across batches and groups)?</li></ul></span> <span class=chatlog__edited-timestamp title="Sunday, July 7, 2024 5:21â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1259646544760537177 class=chatlog__message-container data-message-id=1259646544760537177><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, July 7, 2024 7:05â€¯PM"> <a href=#chatlog__message-container-1259646544760537177>7/7/2024 7:05â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1259885535858524281 class=chatlog__message-container data-message-id=1259885535858524281><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sebastian_09123_62027 data-user-id=1258416705412005969>Sebastian</span> <span class=chatlog__timestamp title="Monday, July 8, 2024 10:55â€¯AM"><a href=#chatlog__message-container-1259885535858524281>7/8/2024 10:55â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all, has anyone had success with using LanceDB with Azure Blob Storage (possibly also with a Private Endpoint) ? I can&#39;t seem to get it working. I tried different auth methods (SAS Token, Access Key) but so far no success.
Latest Error Msg: &quot;The requested URI does not represent any resource on the server.&quot;</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1259918209814102221 class=chatlog__message-container data-message-id=1259918209814102221><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, July 8, 2024 1:05â€¯PM"> <a href=#chatlog__message-container-1259918209814102221>7/8/2024 1:05â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1260889647924383755 class=chatlog__message-container data-message-id=1260889647924383755><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/762997145049104414/6305cd7c1d4bfbec50dd3d9d72b737da.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=orhansonmeztr data-user-id=762997145049104414>Orhan</span> <span class=chatlog__timestamp title="Thursday, July 11, 2024 5:25â€¯AM"><a href=#chatlog__message-container-1260889647924383755>7/11/2024 5:25â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all. 
Has anyone faced a problem using CohereReranker with data that has multiple indexed columns? 
I explained my problem in detail in the link below. 
Any suggestion on how to fix it?
<a href="https://github.com/lancedb/lancedb/issues/1425#issuecomment-2222399626">https://github.com/lancedb/lancedb/issues/1425#issuecomment-2222399626</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/1425><div class="chatlog__markdown chatlog__markdown-preserve">bug(python):   CohereReranker not working &#183; Issue #1425 &#183; lancedb/l...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB version 0.9.0 What happened? when running the code from [docs/src/reranking/cohere.md] I get the following error AttributeError: &#39;Client&#39; object has no attribute &#39;rerank&#39; at...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/LVNEw7S77uSDuKlUQUBKVFGWpIY3rGefzuXx2mQPpHc/https/opengraph.githubassets.com/64a123569ce21ae46d072701ef44d48b698bfb51fc9e9d91807da438123d8a50/lancedb/lancedb/issues/1425> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/LVNEw7S77uSDuKlUQUBKVFGWpIY3rGefzuXx2mQPpHc/https/opengraph.githubassets.com/64a123569ce21ae46d072701ef44d48b698bfb51fc9e9d91807da438123d8a50/lancedb/lancedb/issues/1425 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1260976432499134494 class=chatlog__message-container data-message-id=1260976432499134494><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/635507634342068228/10b4f881ceeef234f556cbd1dc05f739.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cat_ethos data-user-id=635507634342068228>catethos</span> <span class=chatlog__timestamp title="Thursday, July 11, 2024 11:10â€¯AM"><a href=#chatlog__message-container-1260976432499134494>7/11/2024 11:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am getting this error <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">TypeError: Vector column embedding must be FixedSizeListArray 1-dimensional FixedShapeTensorArray, got list&lt;item: float&gt;</code> when i am trying to index a vector column with name other then <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">vector</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1260986284999184441 class=chatlog__message-container data-message-id=1260986284999184441><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, July 11, 2024 11:49â€¯AM"> <a href=#chatlog__message-container-1260986284999184441>7/11/2024 11:49â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1260987337924546565 class=chatlog__message-container data-message-id=1260987337924546565><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, July 11, 2024 11:53â€¯AM"> <a href=#chatlog__message-container-1260987337924546565>7/11/2024 11:53â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1261197409216893008 class=chatlog__message-container data-message-id=1261197409216893008><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/688762493291855879/efff05e8b8fc451fde40625f59e44046.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=novello3099 data-user-id=688762493291855879>novello</span> <span class=chatlog__timestamp title="Friday, July 12, 2024 1:48â€¯AM"><a href=#chatlog__message-container-1261197409216893008>7/12/2024 1:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am unable to update rows in my LanceDB table, maybe someone could point me in the right direction. 
When I make the following call: 
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_tbl.update(where=&quot;id = da6e22aeaee7401c&quot;, values=vector_dict</code> i get the error: 
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: Invalid user input: LanceError(IO): Schema error: No field named da6e22aeaee7401c. Valid fields are id, vector, root_content_metadata, content_metadata.</code>. 

So my column name isn&#39;t passed to Lance. Any ideas on how to proceed?</span> <span class=chatlog__edited-timestamp title="Friday, July 12, 2024 1:48â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1261197582512951336 class=chatlog__message-container data-message-id=1261197582512951336><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Friday, July 12, 2024 1:48â€¯AM"><a href=#chatlog__message-container-1261197582512951336>7/12/2024 1:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>`where=&quot;id=&#39;dd6e2...&#39;&quot;</span></div></div></div></div><div id=chatlog__message-container-1261197609565950034 class=chatlog__message-container data-message-id=1261197609565950034><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, July 12, 2024 1:49â€¯AM">1:49â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>needs quote the string</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1261197692764295178 class=chatlog__message-container data-message-id=1261197692764295178><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/688762493291855879/efff05e8b8fc451fde40625f59e44046.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=novello3099 data-user-id=688762493291855879>novello</span> <span class=chatlog__timestamp title="Friday, July 12, 2024 1:49â€¯AM"><a href=#chatlog__message-container-1261197692764295178>7/12/2024 1:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>LOL - ofc</span></div></div></div></div><div id=chatlog__message-container-1261197784501981266 class=chatlog__message-container data-message-id=1261197784501981266><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, July 12, 2024 1:49â€¯AM">1:49â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The example in the docs was for an int, that&#39;s what threw me off.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=laughing><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ˜† src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f606.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div><div id=chatlog__message-container-1261197928643694643 class=chatlog__message-container data-message-id=1261197928643694643><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, July 12, 2024 1:50â€¯AM">1:50â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Awesome, thank you for your help!</span> <span class=chatlog__edited-timestamp title="Friday, July 12, 2024 1:50â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1261198032318369823 class=chatlog__message-container data-message-id=1261198032318369823><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1001739727197700146/5cd18d5cd712e8e0248f6bd4a2f04b4f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span class=chatlog__timestamp title="Friday, July 12, 2024 1:50â€¯AM"><a href=#chatlog__message-container-1261198032318369823>7/12/2024 1:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>np at all</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1261248077369573397 class=chatlog__message-container data-message-id=1261248077369573397><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/688762493291855879/efff05e8b8fc451fde40625f59e44046.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=novello3099 data-user-id=688762493291855879>novello</span> <span class=chatlog__timestamp title="Friday, July 12, 2024 5:09â€¯AM"><a href=#chatlog__message-container-1261248077369573397>7/12/2024 5:09â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The where-clause is working but I can&#228;&#39;t get the values-clause to work. I make the following call:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_tbl.update(where= _where, values={&quot;vector&quot; : _values})</code>. The variable <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_values</code> is of type <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">list</code> filled with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">float</code>. 
I get the error: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: Invalid user input: LanceError(IO): Only arrays of literals are supported in lance.</code>. 
I found this github issue:  bug(python): <a href="https://github.com/lancedb/lancedb/issues/1228">update function is not accepting scalars #1228</a>. But there it looks like it actually works when sending a list of floats it works.
Any tips on how to debug?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1261366568689074201 class=chatlog__message-container data-message-id=1261366568689074201><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, July 12, 2024 1:00â€¯PM"> <a href=#chatlog__message-container-1261366568689074201>7/12/2024 1:00â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1263550749707731058 class=chatlog__message-container data-message-id=1263550749707731058><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473006302239522817/04f815cb7c9e67b2fe1644b56c941e62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=uumami data-user-id=473006302239522817>uumami</span> <span class=chatlog__timestamp title="Thursday, July 18, 2024 1:39â€¯PM"><a href=#chatlog__message-container-1263550749707731058>7/18/2024 1:39â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I have already mounted my lancedb infra in S3 and is working really well. Now i want to improve my algorithm, currently i am using lancedb as a Qtable. Currently the context (NLP embeddings) contain all the relevant information. it contains hierarchical nested information, basically a json. i woudl to weight different parts of the json because not all of them are equally relevant.

is there a way to do this in lancedb? we came up with some solutions but nothing scalable. Like stacking the vectors and normalizing them to their inferred importance, but that doesnt allow to dynamically assign the weights to each vector. currently we are stacking them and transforming the search vector with the weights to modify their importance but we wonder if there is a more efficient way of doing it?

I was also wondering how lance DB scales with the vector dimentionallity, if it is not good we will look into other types of transfarmations sisnce stacking them may become unberable.</span> <span class=chatlog__edited-timestamp title="Thursday, July 18, 2024 1:46â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1263904577820823696 class=chatlog__message-container data-message-id=1263904577820823696><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=universalmind303 data-user-id=674379435058921472>universalmind303</span> <span class=chatlog__timestamp title="Friday, July 19, 2024 1:05â€¯PM"><a href=#chatlog__message-container-1263904577820823696>7/19/2024 1:05â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I have an existing lancedb table without embeddings, is it possible to use the embedding registry to apply those on the table automatically? 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-py">import lancedb
from lancedb.embeddings import get_registry
from lancedb.pydantic import LanceModel, Vector

db = lancedb.connect(&#39;./db&#39;)
model = get_registry().get(&quot;huggingface&quot;).create(name=&#39;facebook/bart-base&#39;)


class Facts(LanceModel):
    id: str
    url: str
    title: str
    text: str = model.SourceField(),
    vector: Vector(model.ndims()) = model.VectorField()

tbl = db.open_table(&#39;facts&#39;)

# how to add the embeddings to &#39;facts&#39;? </code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1263907209746714690 class=chatlog__message-container data-message-id=1263907209746714690><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, July 19, 2024 1:16â€¯PM"> <a href=#chatlog__message-container-1263907209746714690>7/19/2024 1:16â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1264845462330937428 class=chatlog__message-container data-message-id=1264845462330937428><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1007843965204181012/bdcdd298be988e50943a7b20c4aa662f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sessionmemory data-user-id=1007843965204181012>sessionmemory</span> <span class=chatlog__timestamp title="Monday, July 22, 2024 3:24â€¯AM"><a href=#chatlog__message-container-1264845462330937428>7/22/2024 3:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Where are you all storing the data for lancedb? I would like to use MinIO object storage. Has anyone gotten this to work? I tried the tutorial at <a href="https://blog.min.io/lancedb-trusted-steed-against-data-complexity/">https://blog.min.io/lancedb-trusted-steed-against-data-complexity/</a>  however, it comes back with this error: 

OSError: LanceError(IO): Generic S3 error: Error performing list request: Error after 0 retries in 5.288&#181;s, max_retries:10, retry_timeout:180s, source:builder error for url (<a href="http://localhost:9002/lance?delimiter=%2F&amp;list-type=2&amp;prefix=data-table-test.lance%2F_versions%2F)">http://localhost:9002/lance?delimiter=%2F&amp;list-type=2&amp;prefix=data-table-test.lance%2F_versions%2F)</a>: URL scheme is not allowed, /home/runner/work/lance/lance/rust/lance-table/src/io/commit.rs:104:26

Would love to hear if anyone else has gotten it to work, or what else you might use or suggst for a small 1 person linux setup.</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://blog.min.io/lancedb-trusted-steed-against-data-complexity/"><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB: Your Trusted Steed in the Joust Against Data Complexity</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Joust against data complexity with LanceDB, a lightning-fast vector database optimized for AI/ML on the open-source Lance format. Teaming up with MinIO, it scales seamlessly, offering high-performance, cloud-native storage. Dive into the tutorial for a swift deployment.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/DhxVPlF_jf63LtSs3PE3W7nv9LQQG31CPwGxsNTPfKs/https/blog.min.io/content/images/size/w1200/2023/12/_MinIO-and-LanceDB-for-ML-Workloads-MinIO-and-LanceDB-for-ML-Workloads.jpg> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/DhxVPlF_jf63LtSs3PE3W7nv9LQQG31CPwGxsNTPfKs/https/blog.min.io/content/images/size/w1200/2023/12/_MinIO-and-LanceDB-for-ML-Workloads-MinIO-and-LanceDB-for-ML-Workloads.jpg alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1264859665666412585 class=chatlog__message-container data-message-id=1264859665666412585><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Monday, July 22, 2024 4:20â€¯AM"><a href=#chatlog__message-container-1264859665666412585>7/22/2024 4:20â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, Does lancedb support multi query vector search ?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1264917472067321866 class=chatlog__message-container data-message-id=1264917472067321866><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Monday, July 22, 2024 8:10â€¯AM"><a href=#chatlog__message-container-1264917472067321866>7/22/2024 8:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="&lt;https://learn.microsoft.com/en-us/azure/search/vector-search-how-to-query#multiple-vector-queries&gt;">this</a>? I&#39;d say that the behaviour it should have is ambiguous, you should just query each of them yourself then merge or concatenate the results however makes the most sense for you</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1264943833930661985 class=chatlog__message-container data-message-id=1264943833930661985><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, July 22, 2024 9:55â€¯AM"> <a href=#chatlog__message-container-1264943833930661985>7/22/2024 9:55â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1264944035991392293 class=chatlog__message-container data-message-id=1264944035991392293><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, July 22, 2024 9:55â€¯AM"> <a href=#chatlog__message-container-1264944035991392293>7/22/2024 9:55â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265185813042430086 class=chatlog__message-container data-message-id=1265185813042430086><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/772537007812902915/a9f8bff08cbac9eebff404fe22839e0e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=pwnosaurusrex data-user-id=772537007812902915>DiscoRex</span> <span class=chatlog__timestamp title="Tuesday, July 23, 2024 1:56â€¯AM"><a href=#chatlog__message-container-1265185813042430086>7/23/2024 1:56â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I created a table in llamaindex, can I solely use lancedb to query it? How do I properly define the embedding and class if so? I can&#39;t find a clear answer by reading the docs, as it seems simply setting the model via get_registry would be enough...

Basically how to extract whatever embedding function llamaindex used?</span> <span class=chatlog__edited-timestamp title="Tuesday, July 23, 2024 2:18â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265273924044718104 class=chatlog__message-container data-message-id=1265273924044718104><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, July 23, 2024 7:46â€¯AM"> <a href=#chatlog__message-container-1265273924044718104>7/23/2024 7:46â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265697116341276774 class=chatlog__message-container data-message-id=1265697116341276774><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/635507634342068228/10b4f881ceeef234f556cbd1dc05f739.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cat_ethos data-user-id=635507634342068228>catethos</span> <span class=chatlog__timestamp title="Wednesday, July 24, 2024 11:48â€¯AM"><a href=#chatlog__message-container-1265697116341276774>7/24/2024 11:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am getting the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_ARRAY_API not found</code> error and downgrade my numpy version to &lt; 2, but when i do <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pip install lancedb</code>, it automatically pulls numpy==2</span></div></div></div></div><div id=chatlog__message-container-1265698598503317594 class=chatlog__message-container data-message-id=1265698598503317594><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, July 24, 2024 11:54â€¯AM">11:54â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>what is this error about <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">OSError: LanceError(Arrow): C Data interface error: Unknown error: &#39;generator&#39; object has no attribute &#39;to_batches&#39;. </code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265706850016432213 class=chatlog__message-container data-message-id=1265706850016432213><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nbtel data-user-id=283390147700195330>nbtel</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 24, 2024 12:27â€¯PM"> <a href=#chatlog__message-container-1265706850016432213>7/24/2024 12:27â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1265725662262591643 class=chatlog__message-container data-message-id=1265725662262591643><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 24, 2024 1:41â€¯PM"> <a href=#chatlog__message-container-1265725662262591643>7/24/2024 1:41â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265765879472455700 class=chatlog__message-container data-message-id=1265765879472455700><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/814900658121211924/d6cabd17663815a5924dff597e92ea62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bharat5483 data-user-id=814900658121211924>Bharat</span> <span class=chatlog__timestamp title="Wednesday, July 24, 2024 4:21â€¯PM"><a href=#chatlog__message-container-1265765879472455700>7/24/2024 4:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>can anyone help me, how I can deploy lancedb in azure blob or and Azure File Storage?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265777580095705168 class=chatlog__message-container data-message-id=1265777580095705168><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/814900658121211924/d6cabd17663815a5924dff597e92ea62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bharat5483 data-user-id=814900658121211924>Bharat</span> <span class=chatlog__timestamp title="Wednesday, July 24, 2024 5:08â€¯PM"><a href=#chatlog__message-container-1265777580095705168>7/24/2024 5:08â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible to do multiple vector columns? like if I want to convert vector of a text using 2-3 embedding model and then query using vectors of these 2-3 embedding models and then use a linear reranker to combine all the ranks</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265796661603467360 class=chatlog__message-container data-message-id=1265796661603467360><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nbtel data-user-id=283390147700195330>nbtel</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 24, 2024 6:24â€¯PM"> <a href=#chatlog__message-container-1265796661603467360>7/24/2024 6:24â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1265797077968097497 class=chatlog__message-container data-message-id=1265797077968097497><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nbtel data-user-id=283390147700195330>nbtel</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 24, 2024 6:25â€¯PM"> <a href=#chatlog__message-container-1265797077968097497>7/24/2024 6:25â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1265880944557031544 class=chatlog__message-container data-message-id=1265880944557031544><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=henryvultron_06200 data-user-id=1208085170683650143>henry@vultron</span> <span class=chatlog__timestamp title="Wednesday, July 24, 2024 11:58â€¯PM"><a href=#chatlog__message-container-1265880944557031544>7/24/2024 11:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What could potentially be triggering this panic from <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb/table.py:949, in LanceTable.schema(self)</code>?

Is it possible this table is corrupted and if so how would we diagnose if this was the case and investigate the root cause?</span></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1265880944221622373/message.txt?ex=697b83c0&amp;is=697a3240&amp;hm=b4e28733af8e05aa4a1b11a17a01f65b74115f5517a9fe8ba004d7cad8154c5a&amp;"> message.txt </a></div><div class=chatlog__attachment-generic-size>2.44 KB</div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1266040006259245110 class=chatlog__message-container data-message-id=1266040006259245110><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nbtel data-user-id=283390147700195330>nbtel</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, July 25, 2024 10:30â€¯AM"> <a href=#chatlog__message-container-1266040006259245110>7/25/2024 10:30â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1267934342731141120 class=chatlog__message-container data-message-id=1267934342731141120><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aurashjalalian data-user-id=1207806605060735020>Aurash Jalalian</span> <span class=chatlog__timestamp title="Tuesday, July 30, 2024 3:58â€¯PM"><a href=#chatlog__message-container-1267934342731141120>7/30/2024 3:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>1. When creating an IVF_PQ index with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> as the metric, how do people usually choose <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">num_partitions</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">num_sub_vectors</code> ? The indices are between 500k-2.5M vectors at the moment. Each user will only ever search over their portion of the vector space.
2. Is there a way to delete IVF_PQ indices via <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code> or just in general?
3. If I wanted to do an exhaustive search over a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code> (say to verify data), but have an IVF_PQ is there a way to circumvent the index? This does not have to be limited to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code>, primarily need a way for us to access all vectors in some manner to verify data.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1267960907774951434 class=chatlog__message-container data-message-id=1267960907774951434><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/809863396723130429/63a8cbd9255e5a064f03eb85f7c05a62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kloos0961 data-user-id=809863396723130429>kloos</span> <span class=chatlog__timestamp title="Tuesday, July 30, 2024 5:43â€¯PM"><a href=#chatlog__message-container-1267960907774951434>7/30/2024 5:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Question: will table.optimize() re-create the scalar index or add new data to the scalar index?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268089995651059794 class=chatlog__message-container data-message-id=1268089995651059794><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Wednesday, July 31, 2024 2:16â€¯AM"><a href=#chatlog__message-container-1268089995651059794>7/31/2024 2:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, how to filter on column with list of string values
For example - I have column tags of type List[str] with sample value of a row as [&quot;dawn&quot;, &quot;city&quot;]
Now I want to query to get rows which has city in tags
I am trying the below SQL which is not working 
&#39;city&#39; = ANY(tags)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268091625901527040 class=chatlog__message-container data-message-id=1268091625901527040><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=deepakkatch>DeepakKatch</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1268089995651059794')"> Hi Team, how to filter on column with list of string values
For example - I have column tags of type List[str] with sample value of a row as [&quot;dawn&quot;, &quot;city&quot;]
Now I want to query to get rows which has city in tags
I am trying the below SQL which is not working 
&#39;city&#39; = ANY(tags) </span></div></div><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Wednesday, July 31, 2024 2:23â€¯AM"><a href=#chatlog__message-container-1268091625901527040>7/31/2024 2:23â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Never mind, I got the function - array_has</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268221925763715077 class=chatlog__message-container data-message-id=1268221925763715077><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 31, 2024 11:01â€¯AM"> <a href=#chatlog__message-container-1268221925763715077>7/31/2024 11:01â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1268222950599819341 class=chatlog__message-container data-message-id=1268222950599819341><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 31, 2024 11:05â€¯AM"> <a href=#chatlog__message-container-1268222950599819341>7/31/2024 11:05â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268598849770094632 class=chatlog__message-container data-message-id=1268598849770094632><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Thursday, August 1, 2024 11:58â€¯AM"><a href=#chatlog__message-container-1268598849770094632>8/1/2024 11:58â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"> question about compact_files:

Per the docs (<a href="https://lancedb.github.io/lance/read_and_write.html)">https://lancedb.github.io/lance/read_and_write.html)</a>, it states:
<em>When files are rewritten, the original row addresses are invalidated. This means the affected files are no longer part of any ANN index if they were before. Because of this, itâ€™s recommended to rewrite files before re-building indices.</em>

Does this mean running compaction will invalidate an existing vector index within a dataset?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268838330821382145 class=chatlog__message-container data-message-id=1268838330821382145><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garyli_1019 data-user-id=1256134716306886719>garyli1019</span> <span class=chatlog__timestamp title="Friday, August 2, 2024 3:50â€¯AM"><a href=#chatlog__message-container-1268838330821382145>8/2/2024 3:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi forks, I see lancedb already support some public cloud object stores, if I wanna read/write from HDFS, can anyone point me to the code paths that I should look at for modification?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268923262201495761 class=chatlog__message-container data-message-id=1268923262201495761><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 2, 2024 9:28â€¯AM"> <a href=#chatlog__message-container-1268923262201495761>8/2/2024 9:28â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268952752579412039 class=chatlog__message-container data-message-id=1268952752579412039><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Friday, August 2, 2024 11:25â€¯AM"><a href=#chatlog__message-container-1268952752579412039>8/2/2024 11:25â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey all, I&#39;m trying to call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> on a dataset that has a vector index with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> metric/distance type. 

I&#39;m hitting the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">KMeans::compute_partition: distance type cosine is not supported</code>

Believe this is expected per <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">compute_partition</code> not supporting a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> distance_type: <a href="https://github.com/lancedb/lance/blob/526cdd186b0f2fcb840477ac7bfb6f359c5137d7/rust/lance-linalg/src/kmeans.rs#L692-L712">https://github.com/lancedb/lance/blob/526cdd186b0f2fcb840477ac7bfb6f359c5137d7/rust/lance-linalg/src/kmeans.rs#L692-L712</a>

This said, does this mean that <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> cannot be called on a vector index with a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> distance type?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268955996013858860 class=chatlog__message-container data-message-id=1268955996013858860><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=kohlerbear3381>kohlerbear</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1268952752579412039')"> Hey all, I&#39;m trying to call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> on a dataset that has a vector index with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> metric/distance type. 

I&#39;m hitting the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">KMeans::compute_partition: distance type cosine is not supported</code>

Believe this is expected per <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">compute_partition</code> not supporting a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> distance_type: <a href="https://github.com/lancedb/lance/blob/526cdd186b0f2fcb840477ac7bfb6f359c5137d7/rust/lance-linalg/src/kmeans.rs#L692-L712">https://github.com/lancedb/lance/blob/526cdd186b0f2fcb840477ac7bfb6f359c5137d7/rust/lance-linalg/src/kmeans.rs#L692-L712</a>

This said, does this mean that <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> cannot be called on a vector index with a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cosine</code> distance type? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Friday, August 2, 2024 11:38â€¯AM"><a href=#chatlog__message-container-1268955996013858860>8/2/2024 11:38â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>That&#39;s a bug. Could you create an issue for that?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268956703060394156 class=chatlog__message-container data-message-id=1268956703060394156><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1268955996013858860')"> That&#39;s a bug. Could you create an issue for that? </span></div></div><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Friday, August 2, 2024 11:40â€¯AM"><a href=#chatlog__message-container-1268956703060394156>8/2/2024 11:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yeah absolutely! Will get one up now. For my own understanding/to unblock myself until this gets ironed out, would I be able to get away with just adding support for the cosine distance type inside of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">compute_partition</code>? E.g.:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> +       DistanceType::Cosine =&gt; {
 +           argmin_value_float(dot_distance_cosine(vector, centroids, vector.len())).map(|c| c.0)
 +      }</code></span></div></div></div></div><div id=chatlog__message-container-1268957366762737797 class=chatlog__message-container data-message-id=1268957366762737797><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, August 2, 2024 11:43â€¯AM">11:43â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Issue: <a href="https://github.com/lancedb/lancedb/issues/1492">https://github.com/lancedb/lancedb/issues/1492</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1268995857370320989 class=chatlog__message-container data-message-id=1268995857370320989><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, August 2, 2024 2:16â€¯PM"><a href=#chatlog__message-container-1268995857370320989>8/2/2024 2:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>trying to do a basic filter query with duckdb on a lancetable...


<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">bidder_addr: str = &quot;0xe51EF1836Dbef052BfFd2eB3Fe1314365d23129d&quot;.lower()
# Fetch data for the specific bidder
query = f&quot;SELECT bidder, isSlash, bidHash FROM commitments_table WHERE bidder = &#39;{bidder_addr}&#39;&quot;

bidder_data = con.sql(query).fetchall()</code>
Getting a weird error 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">---------------------------------------------------------------------------
InvalidInputException                     Traceback (most recent call last)
Cell In[26], line 1
----&gt; 1 bidder_data = con.sql(query).fetchall()

InvalidInputException: Invalid Input Error: Attempting to execute an unsuccessful or closed pending query result
Error: Invalid Error: OSError: LanceError(IO): This feature is not implemented: Extension type not supported: ExtensionType(ExtensionType { extension_uri_reference: 52, type_anchor: 0, name: &quot;u64&quot; }), /home/runner/work/lance/lance/rust/lance-datafusion/src/expr.rs:550:9</code>

I am on latest lance version on python <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb 0.11.0
</code></span> <span class=chatlog__edited-timestamp title="Friday, August 2, 2024 2:17â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1269042035025907967 class=chatlog__message-container data-message-id=1269042035025907967><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kpkpkpkpkp data-user-id=573400024919310337>kp</span> <span class=chatlog__timestamp title="Friday, August 2, 2024 5:19â€¯PM"><a href=#chatlog__message-container-1269042035025907967>8/2/2024 5:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello!

We are trying to understand the performance characteristics of Lance but are finding some behavior unexpected. I was wondering if anyone could enlighten us if we&#39;re doing something wrong.

We have a lance dataset on a remote filesystem with around 500k rows. We are using lance version 0.14.1.

I would expect the following operations to take roughly the same amount of time but they vary quite a bit:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">%%time
table = db.to_table(offset=0, limit=10)
CPU times: user 59 s, sys: 1min 6s, total: 2min 5s
Wall time: 10.9 s

%%time
table = db.take(list(range(10)))
CPU times: user 114 ms, sys: 58.8 ms, total: 173 ms
Wall time: 348 ms

%%time
table = next(iter(db.to_batches(batch_size=10)))
CPU times: user 748 ms, sys: 582 ms, total: 1.33 s
Wall time: 364 ms</code>

and the following operations:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">%%time
db.count_rows()
CPU times: user 209 Î¼s, sys: 240 Î¼s, total: 449 Î¼s
Wall time: 547 Î¼s

%%time
db.count_rows(filter=&quot;dataset_id IS NOT NULL&quot;)
CPU times: user 183 ms, sys: 99.4 ms, total: 283 ms
Wall time: 3.36 s

%%time
db.scanner(columns=[&quot;dataset_id&quot;]).count_rows()
CPU times: user 267 ms, sys: 216 ms, total: 483 ms
Wall time: 3.04 s

%%time
db.scanner(filter=&quot;dataset_id IS NOT NULL&quot;).count_rows()
LanceError(IO): Execution error: LanceError(Arrow): Invalid argument error: Offset invariant failure: non-monotonic offset at slot 1023: 2145517440 &gt; 0</code>

Questions:
1. How are the calls above different, especially to_table, to_batches, take?
2. The pattern we want to be able to query the dataset with is: i) filter a specific column; ii) count the total number of rows with that filter; iii) take batches of random elements within the filtered set of rows. What&#39;s the most efficient/idiomatic way to achieve this?
3. What kind of performance characteristic should we expect for general filter queries? We were planning on storing different data in the same lance database and filter it on the fly -- is that a bad idea?

<span class="chatlog__markdown-mention" title="kdexd">@kd</span></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1269728278722379817 class=chatlog__message-container data-message-id=1269728278722379817><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/508557764188962817/aadf582bbfae61fe5eaeb4af576ae063.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=uwuwuwuwuwuwuw data-user-id=508557764188962817>uwuwushiwu</span> <span class=chatlog__timestamp title="Sunday, August 4, 2024 2:46â€¯PM"><a href=#chatlog__message-container-1269728278722379817>8/4/2024 2:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I&#39;m very new to lancedb, and trying it out for my school project. 

 I&#39;m trying to make an async connection to lance_db using lancedb.connect_async, however it keeps throwing a runtime error <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Runtime error: cannot connect to LanceDb Cloud unless the &#39;remote&#39; feature is enabled</code> 
here&#39;s the code:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">uri=&quot;db/default/default/action&quot;
 with await lancedb.connect_async(uri) as connection:
             table = await connection.open_table(table_id)
              await table.add(some_data)</code>

I tried doing api_key=None thinking its inferring the uri incorrectly into the api_key, also explicitly adding uri=uri. None of these seem to work for me. The synchrnous counterpart <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.connect()</code> works correctly, and is using the same uri.</span> <span class=chatlog__edited-timestamp title="Sunday, August 4, 2024 2:49â€¯PM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1269728361425666048 class=chatlog__message-container data-message-id=1269728361425666048><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, August 4, 2024 2:47â€¯PM">2:47â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>any pointers would be appreciated</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270179666887573535 class=chatlog__message-container data-message-id=1270179666887573535><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kpkpkpkpkp data-user-id=573400024919310337>kp</span> <span class=chatlog__timestamp title="Monday, August 5, 2024 8:40â€¯PM"><a href=#chatlog__message-container-1270179666887573535>8/5/2024 8:40â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there an API to get all row IDs for a given filter? Use case: cache all the row IDs for a query and then use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">take</code> to query random batches.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270396849429282871 class=chatlog__message-container data-message-id=1270396849429282871><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, August 6, 2024 11:03â€¯AM"> <a href=#chatlog__message-container-1270396849429282871>8/6/2024 11:03â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270457241492787261 class=chatlog__message-container data-message-id=1270457241492787261><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aurashjalalian data-user-id=1207806605060735020>Aurash Jalalian</span> <span class=chatlog__timestamp title="Tuesday, August 6, 2024 3:03â€¯PM"><a href=#chatlog__message-container-1270457241492787261>8/6/2024 3:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What are some ways to improve speed on searches? And is there any way to get more observability into slow searches?

Context: We are currently using a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">scalar_index</code> with a prefilter as well as an <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ANN</code> index to maximize speed, despite this occasionally some searches can take upwards for <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">12</code> seconds (but later the same search can take <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">0.5</code> seconds). What are the reasons this can occur and what are some ways to improve the consistency?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270473322643066916 class=chatlog__message-container data-message-id=1270473322643066916><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, August 6, 2024 4:07â€¯PM"> <a href=#chatlog__message-container-1270473322643066916>8/6/2024 4:07â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270693284662083696 class=chatlog__message-container data-message-id=1270693284662083696><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/936334474445217802/ff3275870685078dde00a94972673667.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bobo_rich data-user-id=936334474445217802>Bobo Rich</span> <span class=chatlog__timestamp title="Wednesday, August 7, 2024 6:41â€¯AM"><a href=#chatlog__message-container-1270693284662083696>8/7/2024 6:41â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hello!
I have this error when try create_fts_index
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-bash">ERROR:root:Error creating table in LanceDB: &#39;AsyncTable&#39; object has no attribute &#39;create_fts_index&#39;</code>
my code
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">class Document(LanceModel):
    text: str = model.SourceField()
    vector: Vector(384) = model.VectorField()
    category: str

async def fetch_and_store():
    docs = [{&quot;text&quot;: &quot;Red apple&quot;, &quot;category&quot;: &quot;test&quot;}]
    docs += [{&quot;text&quot;: &quot;Green apple&quot;, &quot;category&quot;: &quot;test&quot;}]

    db = await lancedb.connect_async(
        &quot;s3://lancedb/tables&quot;,
        storage_options={
            &quot;aws_access_key_id&quot;: &quot;123&quot;,
            &quot;aws_secret_access_key&quot;: &quot;123-123&quot;,
            &quot;aws_region&quot;: &quot;eu-central1&quot;,
            &quot;aws_endpoint&quot;: &quot;https://my_url&quot;
        }
    )

    try:
        tbl = await db.create_table(&quot;test&quot;, schema=Document)
        await tbl.add(docs)
        # Generate the full-text (tf-idf) search index
        await tbl.create_fts_index(&quot;text&quot;)
    except Exception as e:
        logging.error(f&quot;Error creating table in LanceDB: {e}&quot;)

asyncio.run(fetch_and_store())</code>
Please tell me how I can create_fts_index using s3 connection, because I need create_fts_index as full-text (tf-idf) search index. With local (synchronous) connection this method works without problems</span> <span class=chatlog__edited-timestamp title="Wednesday, August 7, 2024 6:51â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270703894330081376 class=chatlog__message-container data-message-id=1270703894330081376><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/936334474445217802/ff3275870685078dde00a94972673667.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bobo_rich data-user-id=936334474445217802>Bobo Rich</span> <span class=chatlog__timestamp title="Wednesday, August 7, 2024 7:23â€¯AM"><a href=#chatlog__message-container-1270703894330081376>8/7/2024 7:23â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ok, I see this in docs
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">We currently only support local filesystem paths for the FTS index. This is a tantivy limitation. We&#39;ve implemented an object store plugin but there&#39;s no way in tantivy-py to specify to use it.</code>
Tell me the best way to organize data storage and updating locally, if I wanted to fill the repository with 20-40gb of documents. I should not store it in gitlab repository. What should I do?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1270730561803255841 class=chatlog__message-container data-message-id=1270730561803255841><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, August 7, 2024 9:09â€¯AM"> <a href=#chatlog__message-container-1270730561803255841>8/7/2024 9:09â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271128228370714798 class=chatlog__message-container data-message-id=1271128228370714798><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Thursday, August 8, 2024 11:29â€¯AM"><a href=#chatlog__message-container-1271128228370714798>8/8/2024 11:29â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey all! <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"> I have a lancedb table on S3 with ~300m rows and 104448 partitions with a cosine vector index. Running <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> on the table has been taking upward of a couple hours. Is this expected? (Is there any way to improve the speed of this process?). I&#39;m currently running on the latest <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">main</code> (which includes the <a href="https://github.com/lancedb/lance/pull/2698">recent bugfix accounting for cosine distance types in optimize_indices</a>)  - happy to provide more info!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271297054575955988 class=chatlog__message-container data-message-id=1271297054575955988><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/473006302239522817/04f815cb7c9e67b2fe1644b56c941e62.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=uumami data-user-id=473006302239522817>uumami</span> <span class=chatlog__timestamp title="Thursday, August 8, 2024 10:40â€¯PM"><a href=#chatlog__message-container-1271297054575955988>8/8/2024 10:40â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="xteom">@Xteo</span> and i are wondering where we can find some extensive documentation, examples, articles or use cases about the async functionality. we found this <a href="https://lancedb.github.io/lancedb/migration/">https://lancedb.github.io/lancedb/migration/</a> but we are a little lost.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271485483758653598 class=chatlog__message-container data-message-id=1271485483758653598><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 9, 2024 11:09â€¯AM"> <a href=#chatlog__message-container-1271485483758653598>8/9/2024 11:09â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271485700197322783 class=chatlog__message-container data-message-id=1271485700197322783><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 11:10â€¯AM"><a href=#chatlog__message-container-1271485700197322783>8/9/2024 11:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What&#39;s the difference between pylance and lanced and lance?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271486477523615865 class=chatlog__message-container data-message-id=1271486477523615865><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1271485700197322783')"> What&#39;s the difference between pylance and lanced and lance? </span></div></div><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 11:13â€¯AM"><a href=#chatlog__message-container-1271486477523615865>8/9/2024 11:13â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pylance</code> has nothing to do with Lance / LanceDB, it&#39;s <a href="&lt;https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance&gt;">a static type checker created by Microsoft</a>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance</code> is <a href="&lt;https://github.com/lancedb/lance&gt;">a file format</a>
idk what you mean by <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lanced</code>, unless you mean <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code> is <a href="&lt;https://github.com/lancedb/lancedb&gt;">a database</a> built on top of the lance file format</span></div></div></div></div><div id=chatlog__message-container-1271486702199902290 class=chatlog__message-container data-message-id=1271486702199902290><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, August 9, 2024 11:14â€¯AM">11:14â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>oops, I guess that &quot;data format&quot;, not &quot;file format&quot;?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271488901491462268 class=chatlog__message-container data-message-id=1271488901491462268><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=etrotta>etrotta</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1271486477523615865')"> <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pylance</code> has nothing to do with Lance / LanceDB, it&#39;s <a href="&lt;https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance&gt;">a static type checker created by Microsoft</a>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance</code> is <a href="&lt;https://github.com/lancedb/lance&gt;">a file format</a>
idk what you mean by <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lanced</code>, unless you mean <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb</code> is <a href="&lt;https://github.com/lancedb/lancedb&gt;">a database</a> built on top of the lance file format </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 11:22â€¯AM"><a href=#chatlog__message-container-1271488901491462268>8/9/2024 11:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Referring to this 

<a href="https://pypi.org/project/pylance/">https://pypi.org/project/pylance/</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://pypi.org/project/pylance/"><div class="chatlog__markdown chatlog__markdown-preserve">pylance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">python wrapper for Lance columnar format</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/dgC54vBV-phFopZn7cDGR9NixVW_Cc6CMbykPdntlAU/https/pypi.org/static/images/twitter.abaf4b19.webp> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/dgC54vBV-phFopZn7cDGR9NixVW_Cc6CMbykPdntlAU/https/pypi.org/static/images/twitter.abaf4b19.webp alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271490679867965495 class=chatlog__message-container data-message-id=1271490679867965495><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=0xevan>0xEvan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1271488901491462268')"> Referring to this 

<a href="https://pypi.org/project/pylance/">https://pypi.org/project/pylance/</a> </span></div></div><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 11:30â€¯AM"><a href=#chatlog__message-container-1271490679867965495>8/9/2024 11:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>oh... yikes

I&#39;m gonna guess that it&#39;s just because <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">https://pypi.org/project/lance/</code> was already taken (by something completely unrelated), I feel like they should try to claim that package name or request a name transfer</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271506814311202878 class=chatlog__message-container data-message-id=1271506814311202878><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 12:34â€¯PM"><a href=#chatlog__message-container-1271506814311202878>8/9/2024 12:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yeah <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pylance</code> is the name of the Python module.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271543110501138445 class=chatlog__message-container data-message-id=1271543110501138445><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/166547942658932736/435b5fa99a050b22758ceae9bb5ae5a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1107704233685434519/57e5fc331623dc34a8cf262d060dea71.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wjones127>Will Jones</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1271506814311202878')"> Yeah <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pylance</code> is the name of the Python module. </span></div></div><div class=chatlog__header><span class=chatlog__author title=0xevan data-user-id=166547942658932736>0xEvan</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 2:58â€¯PM"><a href=#chatlog__message-container-1271543110501138445>8/9/2024 2:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hmm. Could have sworn I do import lance and pip install lance installed a lance pypi...</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271546437418750055 class=chatlog__message-container data-message-id=1271546437418750055><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Friday, August 9, 2024 3:11â€¯PM"><a href=#chatlog__message-container-1271546437418750055>8/9/2024 3:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hey folks! I&#39;ve seen a couple different solutions to this problem, but does anyone know the best means of finding distinct values within a lance dataset?

I&#39;m currently doing something like this:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">db = lancedb.connect(lance_table_uri)
table = db.open_table(lance_table_name)
lance_arrow_table = table.to_lance()
rows = duckdb.query(&quot;SELECT distinct &lt;my column name&gt; FROM lance_arrow_table&quot;)</code>

This is taking ~1.5hrs for a dataset with 330m rows on S3. The column in question <em>does</em> have a scalar index (not sure if that actually matters) - was mostly wondering if there was anything more efficient than this.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1271556721558556739 class=chatlog__message-container data-message-id=1271556721558556739><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 9, 2024 3:52â€¯PM"> <a href=#chatlog__message-container-1271556721558556739>8/9/2024 3:52â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1272428910285557771 class=chatlog__message-container data-message-id=1272428910285557771><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Monday, August 12, 2024 1:38â€¯AM"><a href=#chatlog__message-container-1272428910285557771>8/12/2024 1:38â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, How can I add a primary key constraint to a table ?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1272573775908704370 class=chatlog__message-container data-message-id=1272573775908704370><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Monday, August 12, 2024 11:13â€¯AM"><a href=#chatlog__message-container-1272573775908704370>8/12/2024 11:13â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Question about version cleanup: if I have a V2 dataset with a bunch (20k+) of versions from table appends, is it advisable to remove them before compaction/vector indexing? (Would this significantly affect compaction/indexing time?)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1272585031637925984 class=chatlog__message-container data-message-id=1272585031637925984><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, August 12, 2024 11:58â€¯AM"> <a href=#chatlog__message-container-1272585031637925984>8/12/2024 11:58â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1272854415526723696 class=chatlog__message-container data-message-id=1272854415526723696><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/936334474445217802/ff3275870685078dde00a94972673667.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bobo_rich data-user-id=936334474445217802>Bobo Rich</span> <span class=chatlog__timestamp title="Tuesday, August 13, 2024 5:49â€¯AM"><a href=#chatlog__message-container-1272854415526723696>8/13/2024 5:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello!
I have the following code to work with a synchronous database, can you write the same query using async api (connect to S3)?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">results = (tbl.search(query, query_type=&quot;hybrid&quot;)  # Hybrid means text + vector
           .where(&quot;category = &#39;cosmos&#39;&quot;, prefilter=True)  # All docs have category &#39;cosmos&#39;
           .limit(3)  # Get 10 results from first-pass retrieval
           .rerank(reranker=reranker)  # For the reranker to compute the final ranking
           .select([&quot;text&quot;, &quot;category&quot;])
           .to_list()
           )</code>
Consider that I need search in text documents, what method need I use vector_search, nearest_to or smth else?
and if I use vector search methods, do I need to put the text into a transformer first?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1272945724384088161 class=chatlog__message-container data-message-id=1272945724384088161><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, August 13, 2024 11:51â€¯AM"> <a href=#chatlog__message-container-1272945724384088161>8/13/2024 11:51â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1273015298970095708 class=chatlog__message-container data-message-id=1273015298970095708><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Tuesday, August 13, 2024 4:28â€¯PM"><a href=#chatlog__message-container-1273015298970095708>8/13/2024 4:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey all, I&#39;m running into some issues with my V2 dataset - I&#39;m seeing errors similar to the following:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: Io error: Execution error: LanceError(IO): Execution error: Invalid user input: Invalid read params Indices(1899,5900,16798,23783) for fragment with 9173 addressible rows, /home/runner/work/lance/lance/rust/lance/src/dataset/fragment.rs:1567:17, /home/runner/work/lance/lance/rust/lance/src/io/exec/take.rs:64:42</code>
Details in thread <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ§µ"
    title="thread"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f9f5.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1273057153501892608 class=chatlog__message-container data-message-id=1273057153501892608><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/147916232698363904/76a87fc0de7ea89625bbe25f8a74cd5c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bnorick data-user-id=147916232698363904>Cubed</span> <span class=chatlog__timestamp title="Tuesday, August 13, 2024 7:14â€¯PM"><a href=#chatlog__message-container-1273057153501892608>8/13/2024 7:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is parallel write a thing?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1273122311884771332 class=chatlog__message-container data-message-id=1273122311884771332><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, August 13, 2024 11:33â€¯PM"> <a href=#chatlog__message-container-1273122311884771332>8/13/2024 11:33â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1273889556109856790 class=chatlog__message-container data-message-id=1273889556109856790><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aurashjalalian data-user-id=1207806605060735020>Aurash Jalalian</span> <span class=chatlog__timestamp title="Friday, August 16, 2024 2:22â€¯AM"><a href=#chatlog__message-container-1273889556109856790>8/16/2024 2:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I&#39;m thinking of mounting an EFS/EBS for three tables on the same DB. Each table has ~5M rows each. What are the recommended IOPS &amp; throughput numbers for the three tables? I usually query all three tables concurrently.

What is the p95 for EFS/EBS for tables of that size? Additional info: I would be fetching 3 columns. There would be a scalar index to prefilter on, then a IVF_PQ vector index to improve speed.

Is there some type of write concurrency limit and does lanceDB automatically handle concurrent writes?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1274035552873615395 class=chatlog__message-container data-message-id=1274035552873615395><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 16, 2024 12:02â€¯PM"> <a href=#chatlog__message-container-1274035552873615395>8/16/2024 12:02â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1274452109764464682 class=chatlog__message-container data-message-id=1274452109764464682><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/453011810984132648/7e7ce1345a74b61dde07ed74b98a089e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kdexd data-user-id=453011810984132648>kd</span> <span class=chatlog__timestamp title="Saturday, August 17, 2024 3:37â€¯PM"><a href=#chatlog__message-container-1274452109764464682>8/17/2024 3:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Quick yes/no question: 
I have a LanceDB with 1 billion <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">(image_id, image, text, aspect_ratio)</code> rows. Most of my workloads are OLAP-based, e.g. full-text search on <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">text</code> column. But sometimes I am interested in a point lookup operation, retrieving a row by its <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">image_id</code>. If I am guaranteed to have a unique ID across all 1 billion rows, I should create a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">BTREE</code> scalar index over the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">image_id</code> column to facilitate point lookups. Am I thinking along the right direction?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1274944912718303236 class=chatlog__message-container data-message-id=1274944912718303236><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, August 19, 2024 12:15â€¯AM"> <a href=#chatlog__message-container-1274944912718303236>8/19/2024 12:15â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1276053871311196222 class=chatlog__message-container data-message-id=1276053871311196222><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Thursday, August 22, 2024 1:42â€¯AM"><a href=#chatlog__message-container-1276053871311196222>8/22/2024 1:42â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, how to get correct dot product scores on vector search ? Currently I am getting 0.0 as dot product score for a query which supposed to have 1.0  ( I am using lancedb ==0.9.0)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1276184618600632390 class=chatlog__message-container data-message-id=1276184618600632390><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=henryvultron_06200 data-user-id=1208085170683650143>henry@vultron</span> <span class=chatlog__timestamp title="Thursday, August 22, 2024 10:22â€¯AM"><a href=#chatlog__message-container-1276184618600632390>8/22/2024 10:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Are there any statsd metrics that Lance is instrumented to collect that I can export to our observability stack?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1276201406554181808 class=chatlog__message-container data-message-id=1276201406554181808><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, August 22, 2024 11:28â€¯AM"> <a href=#chatlog__message-container-1276201406554181808>8/22/2024 11:28â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1277184283466924052 class=chatlog__message-container data-message-id=1277184283466924052><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/244144128475004928/f4f3427dcc8d060b0fdf3b0411d4d2a8.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=shadowstorm0778 data-user-id=244144128475004928>ShadowStorm</span> <span class=chatlog__timestamp title="Sunday, August 25, 2024 4:34â€¯AM"><a href=#chatlog__message-container-1277184283466924052>8/25/2024 4:34â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi lads, how well does lance handle multiple simultaneous requests?

I recently switched our pandas for Lance, but one advantage of pandas was that I could replicate my db in memory multiple times. So each process got a copy of the db. While this wasn&#39;t so memory efficient, we have 192GB of RAM so we could get quite a few copies of our 6GB database running at the same time. The strength of this meant we could handle simultaneous requests really well.

What is keeping me up at night is if lance is going to play nice when I have two instances of it try to hit the DB simultaneously.
Does anyone have any knowledge on how lance behaves when I have multiple python processes use the same db at the same time? 

Are there best practices I should be aware of?</span> <span class=chatlog__edited-timestamp title="Sunday, August 25, 2024 4:36â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1277379052566483149 class=chatlog__message-container data-message-id=1277379052566483149><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=magsam data-user-id=544586631139688458>Magnus</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, August 25, 2024 5:28â€¯PM"> <a href=#chatlog__message-container-1277379052566483149>8/25/2024 5:28â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278034440609599581 class=chatlog__message-container data-message-id=1278034440609599581><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1096943385245397002/f8149c894d5c00d249c308c7bdc6b96a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kyryl42 data-user-id=1096943385245397002>Kyryl</span> <span class=chatlog__timestamp title="Tuesday, August 27, 2024 12:52â€¯PM"><a href=#chatlog__message-container-1278034440609599581>8/27/2024 12:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey team, does lancedb support storing multidimensional torch.Tensors, or do I need to convert everything to 1D numpy vectors?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278042531933982785 class=chatlog__message-container data-message-id=1278042531933982785><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, August 27, 2024 1:24â€¯PM"> <a href=#chatlog__message-container-1278042531933982785>8/27/2024 1:24â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278060013826605118 class=chatlog__message-container data-message-id=1278060013826605118><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sandias42 data-user-id=686348388484382828>sandias42</span> <span class=chatlog__timestamp title="Tuesday, August 27, 2024 2:34â€¯PM"><a href=#chatlog__message-container-1278060013826605118>8/27/2024 2:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, went on sales sprint and haven&#39;t been keeping pace with lance development progress. Any updates on full text search for the S3 backend?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278092304816672919 class=chatlog__message-container data-message-id=1278092304816672919><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/376838301228728330/188c3c3f00af9465581435805399acf6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=remi1054 data-user-id=376838301228728330>remi</span> <span class=chatlog__timestamp title="Tuesday, August 27, 2024 4:42â€¯PM"><a href=#chatlog__message-container-1278092304816672919>8/27/2024 4:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey do you know how can I can make this work?

if I just use it like that I get an error <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Field does not exist: &#39;3&#39;</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">res = table.search(&#39;In the email about scheduling a meeting, what is the purpose of the meeting with Jean Mrha scheduled for tomorrow at 3:30?&#39;, query_type=&quot;fts&quot;).limit(5).to_list()</code>

and if I add the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">&quot;&quot;</code> it just returns an empty list <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">[]</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">res = table.search(&#39;&quot;In the email about scheduling a meeting, what is the purpose of the meeting with Jean Mrha scheduled for tomorrow at 3:30?&quot;&#39;, query_type=&quot;fts&quot;).limit(5).to_list()</code>

I don&#39;t understand...</span> <span class=chatlog__edited-timestamp title="Tuesday, August 27, 2024 4:42â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278323060373454987 class=chatlog__message-container data-message-id=1278323060373454987><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=karl_bubble data-user-id=1210784375613034516>Karl</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, August 28, 2024 7:59â€¯AM"> <a href=#chatlog__message-container-1278323060373454987>8/28/2024 7:59â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278640795913687122 class=chatlog__message-container data-message-id=1278640795913687122><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Thursday, August 29, 2024 5:02â€¯AM"><a href=#chatlog__message-container-1278640795913687122>8/29/2024 5:02â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, I am getting this error while converting a lance table to dataframe using table.to_pandas() 
OSError: Io error: Execution error: LanceError(IO): Execution error: LanceError(IO): Structure needs cleaning (os error 117)

How can I get the data read back to another interactive format so that I can fix the structure..
Also to note that, I created this table long back and have been writing data to this table and all of sudden now I am  getting this error when trying to search as well as converting back to dataframe</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278706407906218050 class=chatlog__message-container data-message-id=1278706407906218050><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, August 29, 2024 9:22â€¯AM"> <a href=#chatlog__message-container-1278706407906218050>8/29/2024 9:22â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278807852680609802 class=chatlog__message-container data-message-id=1278807852680609802><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=grig_58123 data-user-id=1234917062456119347>grig</span> <span class=chatlog__timestamp title="Thursday, August 29, 2024 4:05â€¯PM"><a href=#chatlog__message-container-1278807852680609802>8/29/2024 4:05â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi team! Noob here, very basic question: when I do a simple ANN vector search on a table with already built vector index like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.search(some_vector).limit(1_000).to_pandas()</code> with limits of 1-10k everything works just fine and fast. However with limits of 100k-1M, everything seems to take a suuuper long time, very non-linearly. Any suggestions on optimizing performance for retrieving larger number of results?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278810514616488083 class=chatlog__message-container data-message-id=1278810514616488083><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, August 29, 2024 4:16â€¯PM"> <a href=#chatlog__message-container-1278810514616488083>8/29/2024 4:16â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1278848664076419137 class=chatlog__message-container data-message-id=1278848664076419137><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aurashjalalian data-user-id=1207806605060735020>Aurash Jalalian</span> <span class=chatlog__timestamp title="Thursday, August 29, 2024 6:48â€¯PM"><a href=#chatlog__message-container-1278848664076419137>8/29/2024 6:48â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi. I am trying to create a db + set of tables using the synchronous endpoint.

The resource is already set as <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Storage Blob Data Contributor</code> and I have already set <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">AZURE_STORAGE_ACCOUNT_NAME</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">AZURE_STORAGE_ACCOUNT_KEY</code> environment variables, as mentioned else where.  
Here is the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">uri format</code> : <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">az://{container_name}/{expected_prefix}</code>

I am getting this error when attempting to list <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">db.table_names()</code> (as well as other requests). Is there any additional settings I am missing. The name/key used for lance is also used and working elsewhere in my app.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance error: LanceError(IO): Generic MicrosoftAzure error: Error performing list request: Client error with status 403 Forbidden: &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthenticationFailed&lt;/Code&gt;&lt;Message&gt;Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:...
Time:2024-08-29T22:37:55.4628630Z&lt;/Message&gt;&lt;AuthenticationErrorDetail&gt;The MAC signature found in the HTTP request &#39;...&#39; is not the same as any computed signature. Server used following string to sign: &#39;GET

Thu, 29 Aug 2024 22:37:55 GMT
x-ms-version:2023-11-03
/{storage_account}/{container_name}
comp:list
delimiter:/
prefix:{expected_prefix}
restype:container&#39;.&lt;/AuthenticationErrorDetail&gt;&lt;/Error&gt;, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-io-0.16.0/src/object_store.rs:579:22</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1279055031974232238 class=chatlog__message-container data-message-id=1279055031974232238><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/836506115696885772/ca440f952dfb6eb83df1f8ccadb060f4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=reisswong1379 data-user-id=836506115696885772>Healey Wong</span> <span class=chatlog__timestamp title="Friday, August 30, 2024 8:28â€¯AM"><a href=#chatlog__message-container-1279055031974232238>8/30/2024 8:28â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi team, I&#39;ve encountered an issue while trying to add data to a table using a custom schema. Here&#39;s a minimal reproducible example:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">import lancedb
import pyarrow as pa

data = [
    {&quot;rating&quot;: 5.0, &quot;photo&quot;: {&quot;filename&quot;: &quot;a.jpg&quot;, &quot;content&quot;: b&quot;some image data for a.jpg&quot;}},
    {&quot;rating&quot;: 3.5, &quot;photo&quot;: {&quot;filename&quot;: &quot;b.jpg&quot;, &quot;content&quot;: b&quot;some image data for b.jpg&quot;}},
]

db = lancedb.connect(&quot;./lancedb&quot;)

schema = pa.schema(
    [
        (&quot;rating&quot;, pa.float64()),
        (&quot;photo&quot;, pa.struct([(&quot;filename&quot;, pa.string()), (&quot;content&quot;, pa.binary())])),
    ]
)

table = db.create_table(&quot;my_table&quot;, schema=schema, mode=&quot;overwrite&quot;)

try:
    table.add(data)
    print(&quot;Data added successfully&quot;)
except Exception as e:
    print(&quot;Error adding data:&quot;)
    print(str(e))</code>

This code results in the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Error adding data:
struct fields don&#39;t match or are in the wrong order: Input fields: struct&lt;content: binary, filename: string&gt; output fields: struct&lt;filename: string, content: binary&gt;</code>

It seems that <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table.add(data)</code> is using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pa.Table.from_pylist(data)</code> internally, which is causing issues with the order of fields in the struct.

Questions:
1. Is this the expected behavior?
2. Is there a way to add this data directly without manually converting it to a PyArrow Table first?
3. If not, what&#39;s the recommended approach for handling nested structures like this when adding data to a table?

Thank you for your help!</span> <span class=chatlog__edited-timestamp title="Friday, August 30, 2024 8:28â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1279111242681946252 class=chatlog__message-container data-message-id=1279111242681946252><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 30, 2024 12:11â€¯PM"> <a href=#chatlog__message-container-1279111242681946252>8/30/2024 12:11â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1279852979184467989 class=chatlog__message-container data-message-id=1279852979184467989><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=_anants data-user-id=806096074313433099>Beast</span> <span class=chatlog__timestamp title="Sunday, September 1, 2024 1:18â€¯PM"><a href=#chatlog__message-container-1279852979184467989>9/1/2024 1:18â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Can anyone recommand the pen tab for note taking ( amazon india ) ?
Thank you in adavace for the suggestions</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1280558277486313513 class=chatlog__message-container data-message-id=1280558277486313513><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Tuesday, September 3, 2024 12:01â€¯PM"><a href=#chatlog__message-container-1280558277486313513>9/3/2024 12:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, I am getting this error while performing vector search on a table 

thread &#39;lance_background_thread&#39; panicked at /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/bytes-1.6.0/src/bytes.rs:279:9:
range start must not be greater than end: 74795772919427 &lt;= 4096
note: run with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">RUST_BACKTRACE=1</code> environment variable to display a backtrace
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/usr/local/lib/python3.11/site-packages/lancedb/query.py&quot;, line 263, in to_pandas
    tbl = self.to_arrow()
          ^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/site-packages/lancedb/query.py&quot;, line 528, in to_arrow
    return self.to_batches().read_all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;pyarrow/ipc.pxi&quot;, line 757, in pyarrow.lib.RecordBatchReader.read_all
  File &quot;pyarrow/error.pxi&quot;, line 91, in pyarrow.lib.check_status
OSError: Io error: Execution error: External error: Execution error: ExecNode(Take): thread panicked: task 22 panicked

I am using lancedb version 0.9.0 and running this query on a table of size 9M records, vector dimension - 256</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1281243076291203092 class=chatlog__message-container data-message-id=1281243076291203092><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=deepakkatch>DeepakKatch</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1280558277486313513')"> Hi Team, I am getting this error while performing vector search on a table 

thread &#39;lance_background_thread&#39; panicked at /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/bytes-1.6.0/src/bytes.rs:279:9:
range start must not be greater than end: 74795772919427 &lt;= 4096
note: run with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">RUST_BACKTRACE=1</code> environment variable to display a backtrace
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/usr/local/lib/python3.11/site-packages/lancedb/query.py&quot;, line 263, in to_pandas
    tbl = self.to_arrow()
          ^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/site-packages/lancedb/query.py&quot;, line 528, in to_arrow
    return self.to_batches().read_all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;pyarrow/ipc.pxi&quot;, line 757, in pyarrow.lib.RecordBatchReader.read_all
  File &quot;pyarrow/error.pxi&quot;, line 91, in pyarrow.lib.check_status
OSError: Io error: Execution error: External error: Execution error: ExecNode(Take): thread panicked: task 22 panicked

I am using lancedb version 0.9.0 and running this query on a table of size 9M records, vector dimension - 256 </span></div></div><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Thursday, September 5, 2024 9:22â€¯AM"><a href=#chatlog__message-container-1281243076291203092>9/5/2024 9:22â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>getting the below error for - table.compact_files() 
&gt;&gt; table.compact_files()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/usr/local/lib/python3.11/site-packages/lancedb/table.py&quot;, line 1705, in compact_files
    return self.to_lance().optimize.compact_files(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/site-packages/lance/dataset.py&quot;, line 2390, in compact_files
    return Compaction.execute(self._dataset, opts)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: LanceError(IO): Execution error: LanceError(Arrow): Invalid argument error: Error converting offset[13245] (-50184598) to usize for Utf8, /home/runner/work/lance/lance/rust/lance-io/src/encodings/binary.rs:228:26, /home/runner/work/lance/lance/rust/lance-datafusion/src/chunker.rs:47:46</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1281243324107456547 class=chatlog__message-container data-message-id=1281243324107456547><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, September 5, 2024 9:23â€¯AM"> <a href=#chatlog__message-container-1281243324107456547>9/5/2024 9:23â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1282860391004901438 class=chatlog__message-container data-message-id=1282860391004901438><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=aurashjalalian data-user-id=1207806605060735020>Aurash Jalalian</span> <span class=chatlog__timestamp title="Monday, September 9, 2024 8:29â€¯PM"><a href=#chatlog__message-container-1282860391004901438>9/9/2024 8:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi folks,
I&#39;ve been experiencing some memory leaks when running lancedb on EFS. I&#39;ve noticed that after opening one call to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">db.open_table</code> and then running many similarity searches that the memory steadily increases over time. This occurs when I open new threads that access the same cached <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table</code>. Removing <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">read_consistency_interval</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">index_cache_size</code> did not help the memory issues, but removing lancedb (in favor of a different vectorstore) did.

Questions:
Are there any settings that I can tune to avoid having the memory increase perpetually?
Is there a way to properly &quot;discard&quot; the lancedb tables and db connections after my app is done using them?

Code:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">db = lancedb.connect(uri, read_consistency_interval=timedelta(seconds=60)
table = db.open_table(index_name, index_cache_size=256)</code></span> <span class=chatlog__edited-timestamp title="Monday, September 9, 2024 8:32â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1283033687243489290 class=chatlog__message-container data-message-id=1283033687243489290><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Tuesday, September 10, 2024 7:57â€¯AM"><a href=#chatlog__message-container-1283033687243489290>9/10/2024 7:57â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hey all! Any rough idea when lance 0.13.0 will be out of pre-release/fully available on pypi?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1283206114611167262 class=chatlog__message-container data-message-id=1283206114611167262><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span class=chatlog__timestamp title="Tuesday, September 10, 2024 7:22â€¯PM"><a href=#chatlog__message-container-1283206114611167262>9/10/2024 7:22â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, question, I have to create image embeddings for about 100M images, can I use a distributed job to put these in lancedb in S3 object store? Any issues with concurrent writes?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1283229457234268206 class=chatlog__message-container data-message-id=1283229457234268206><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, September 10, 2024 8:55â€¯PM"> <a href=#chatlog__message-container-1283229457234268206>9/10/2024 8:55â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1283445667880239236 class=chatlog__message-container data-message-id=1283445667880239236><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Wednesday, September 11, 2024 11:14â€¯AM"><a href=#chatlog__message-container-1283445667880239236>9/11/2024 11:14â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all, I&#39;m running into this error whilst attempting to optimize indices <em>or</em> create a completely new vector index:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">thread &#39;lance_background_thread&#39; panicked at /root/lance/rust/lance-encoding/src/encodings/logical/primitive.rs:130:59:
index out of bounds: the len is 2 but the index is 2
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace</code>
Details in thread <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ§µ"
    title="thread"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f9f5.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1283521997984366692 class=chatlog__message-container data-message-id=1283521997984366692><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/887650416307884052/383533ecd2be99b3cedd8af28fbb7f2c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=martketneutral data-user-id=887650416307884052>martketneutral</span> <span class=chatlog__timestamp title="Wednesday, September 11, 2024 4:18â€¯PM"><a href=#chatlog__message-container-1283521997984366692>9/11/2024 4:18â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I can&#39;t find much in the docs about filtering on dates. I&#39;m sure it&#39;s straightforward, and I am missing something simple. Could someone please let me know what I am doing wrong in this

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import lancedb
import datetime

class Note(lancedb.pydantic.LanceModel):
    content: str
    created: datetime.date

data = [{&#39;content&#39;: &#39;My note from today.&#39;, &#39;created&#39;: datetime.datetime.now().date()}]

db = lancedb.connect(&quot;data/lancedb&quot;)
tbl = db.create_table(&quot;notes&quot;, schema=Note, mode=&quot;overwrite&quot;)
tbl.add(data)
tbl.create_fts_index([&quot;content&quot;], replace=True)

date_cutoff = datetime.date(2040, 9, 10)

results = tbl.search().where(f&quot;created &lt; date({date_cutoff})&quot;)
results.to_list()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1283526891361534038 class=chatlog__message-container data-message-id=1283526891361534038><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, September 11, 2024 4:37â€¯PM"> <a href=#chatlog__message-container-1283526891361534038>9/11/2024 4:37â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1284226570982264842 class=chatlog__message-container data-message-id=1284226570982264842><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/887650416307884052/383533ecd2be99b3cedd8af28fbb7f2c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=martketneutral data-user-id=887650416307884052>martketneutral</span> <span class=chatlog__timestamp title="Friday, September 13, 2024 2:57â€¯PM"><a href=#chatlog__message-container-1284226570982264842>9/13/2024 2:57â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Are there any examples of async hybrid search in Python?</span> <span class=chatlog__edited-timestamp title="Friday, September 13, 2024 2:58â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1284266871369236574 class=chatlog__message-container data-message-id=1284266871369236574><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, September 13, 2024 5:38â€¯PM"> <a href=#chatlog__message-container-1284266871369236574>9/13/2024 5:38â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1284542062590689421 class=chatlog__message-container data-message-id=1284542062590689421><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Saturday, September 14, 2024 11:51â€¯AM"><a href=#chatlog__message-container-1284542062590689421>9/14/2024 11:51â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, How do I get distinct count of values of a column in a lance table using lancedb?</span> <span class=chatlog__edited-timestamp title="Saturday, September 14, 2024 11:51â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1284543887347679356 class=chatlog__message-container data-message-id=1284543887347679356><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=deepakkatch>DeepakKatch</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1284542062590689421')"> Hi Team, How do I get distinct count of values of a column in a lance table using lancedb? </span> <span class=chatlog__reply-edited-timestamp title="Saturday, September 14, 2024 11:51â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Saturday, September 14, 2024 11:58â€¯AM"><a href=#chatlog__message-container-1284543887347679356>9/14/2024 11:58â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Believe duckdb is your bet bet - see here: <a href="https://discord.com/channels/1030247538198061086/1197630499926057021/1271546437418750055" onclick="scrollToMessage(event, '1271546437418750055')">https://discord.com/channels/1030247538198061086/1197630499926057021/1271546437418750055</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1285096386836037667 class=chatlog__message-container data-message-id=1285096386836037667><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Monday, September 16, 2024 12:34â€¯AM"><a href=#chatlog__message-container-1285096386836037667>9/16/2024 12:34â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Team, I have two table of size 100M each and want to concatenate them to one single table, currently I am trying to do it by getting batches of data from one table and adding to other table, however this is taking huge time as the batches I am getting from data iterator is not matching the batch_size that I set 

data_iterator = table_2.to_lance().to_batches(batch_size = 500000)

for batch in data_iterator:
     print(batch.to_pandas().shape[0]) #this is printing 1024
     table_1.add(batch.to_pandas())

Is there a better way to do this</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1285199920701247498 class=chatlog__message-container data-message-id=1285199920701247498><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/568016719574990858/6e64740255f63b8cd9be5e5e6ec6c726.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jagadeshanh data-user-id=568016719574990858>jagadeshanh</span> <span class=chatlog__timestamp title="Monday, September 16, 2024 7:25â€¯AM"><a href=#chatlog__message-container-1285199920701247498>9/16/2024 7:25â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>can someone help me here

    await tbl.create_fts_index(&quot;text&quot;, replace=True)
AttributeError: &#39;AsyncTable&#39; object has no attribute &#39;create_fts_index&#39;</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1285245804147376286 class=chatlog__message-container data-message-id=1285245804147376286><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, September 16, 2024 10:27â€¯AM"> <a href=#chatlog__message-container-1285245804147376286>9/16/2024 10:27â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1285360433795956848 class=chatlog__message-container data-message-id=1285360433795956848><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=henryvultron_06200 data-user-id=1208085170683650143>henry@vultron</span> <span class=chatlog__timestamp title="Monday, September 16, 2024 6:03â€¯PM"><a href=#chatlog__message-container-1285360433795956848>9/16/2024 6:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If you&#39;re not using object storage (we&#39;re using EFS) which FTS solution is recommended? From reading docs, I gather the lance native FTS is newer (maybe not as mature) but supports object storage which is the main drawback of tantivy.

Is the the native Lance FTS the recommended solution going forward?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1285363840464322697 class=chatlog__message-container data-message-id=1285363840464322697><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, September 16, 2024 6:17â€¯PM"> <a href=#chatlog__message-container-1285363840464322697>9/16/2024 6:17â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1286362834468605973 class=chatlog__message-container data-message-id=1286362834468605973><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/887650416307884052/383533ecd2be99b3cedd8af28fbb7f2c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=martketneutral data-user-id=887650416307884052>martketneutral</span> <span class=chatlog__timestamp title="Thursday, September 19, 2024 12:26â€¯PM"><a href=#chatlog__message-container-1286362834468605973>9/19/2024 12:26â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>In vanilla vector search (exact kNN) I am trying to understand why a lancedb query would ever return NaN for the euclidean _distance. I am seeing sporadic NaNs. The vector exists for the NaN entry and the vector is valid for the query. This tweet is the example. <a href="https://x.com/jonathanrlarkin/status/1833878536806912097">https://x.com/jonathanrlarkin/status/1833878536806912097</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(29,161,242,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://twitter.com/jonathanrlarkin/status/1833878536806912097><div class="chatlog__markdown chatlog__markdown-preserve">Jonathan Larkin (@jonathanrlarkin) on X</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">@HamelHusain @bclavie Do you know why in this simple example, lancedb is returning NaN in some _distance scores? I suppose the fts score is NaN if there are no keyword matches, but I think vector nearest neighbors should always return a distance.</div></div></div></div><div class="chatlog__embed-images chatlog__embed-images--single"><div class=chatlog__embed-image-container><a class=chatlog__embed-image-link href=https://images-ext-1.discordapp.net/external/Zs-WpzZb0Vkr9obDfC0cAmBrsFlKovpuVojzVanfGa4/https/pbs.twimg.com/media/GXM-hl0XYAEJB-w.png%3Alarge> <img class=chatlog__embed-image src=https://images-ext-1.discordapp.net/external/Zs-WpzZb0Vkr9obDfC0cAmBrsFlKovpuVojzVanfGa4/https/pbs.twimg.com/media/GXM-hl0XYAEJB-w.png%3Alarge alt=Image loading=lazy> </a></div></div><div class=chatlog__embed-footer><img class=chatlog__embed-footer-icon src=https://images-ext-1.discordapp.net/external/bXJWV2Y_F3XSra_kEqIYXAAsI3m1meckfLhYuWzxIfI/https/abs.twimg.com/icons/apple-touch-icon-192x192.png alt="Footer icon" loading=lazy> <span class=chatlog__embed-footer-text> Twitter â€¢ 9/11/2024 10:41 AM </span></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1286370247116329005 class=chatlog__message-container data-message-id=1286370247116329005><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, September 19, 2024 12:56â€¯PM"> <a href=#chatlog__message-container-1286370247116329005>9/19/2024 12:56â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1286812748512231516 class=chatlog__message-container data-message-id=1286812748512231516><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/887650416307884052/383533ecd2be99b3cedd8af28fbb7f2c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=martketneutral data-user-id=887650416307884052>martketneutral</span> <span class=chatlog__timestamp title="Friday, September 20, 2024 6:14â€¯PM"><a href=#chatlog__message-container-1286812748512231516>9/20/2024 6:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I would be interested to use the OpenAI embeddings via Azure OpenAI. I don&#39;t think this works in lancedb (v0.13). Is this on the roadmap? Would you take a PR for this if I make it?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1286861054261067887 class=chatlog__message-container data-message-id=1286861054261067887><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, September 20, 2024 9:26â€¯PM"> <a href=#chatlog__message-container-1286861054261067887>9/20/2024 9:26â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1287477341139898420 class=chatlog__message-container data-message-id=1287477341139898420><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1066692336937078856/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=iomensch data-user-id=1066692336937078856>IOMensch</span> <span class=chatlog__timestamp title="Sunday, September 22, 2024 2:15â€¯PM"><a href=#chatlog__message-container-1287477341139898420>9/22/2024 2:15â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi everyone! 

I&#39;ve heard a lot of good things about LanceDB so I&#39;m getting myself familiar with it. Iâ€™ve started to experiment some and I have a couple of questions that I haven&#39;t been able to find clear answers for in the documentation. Hope someone can point me in the right direction here <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg">

Question 1:
When multiple fields are marked as <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">SourceField</code> in the model, how are they handled? Are the values of these fields automatically concatenated and stored in a single vector field?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">class Product(LanceModel):
    id: str
    title: str = embedder.SourceField()
    description: str = embedder.SourceField()
    additional_description: str = embedder.SourceField()
    specification: Optional[str] = None
    product_type: List[str]
    vector: Vector(embedder.ndims()) = embedder.VectorField()  </code>

Question 2:
Based on the answer to Question 1â€”whether all <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">SourceField</code> values are concatenated or notâ€”can I define multiple <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Vector</code> fields in the model? The goal is to map different <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">SourceFields</code> to different vector fields. For example, I want to search in the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">description</code> field without getting unwanted noise from <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">additional_description</code>.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1287812376045027552 class=chatlog__message-container data-message-id=1287812376045027552><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, September 23, 2024 12:26â€¯PM"> <a href=#chatlog__message-container-1287812376045027552>9/23/2024 12:26â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1290350047166201908 class=chatlog__message-container data-message-id=1290350047166201908><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1153168578405748787/3465384296e0f34446bff2ed328733b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=everettvt_58805 data-user-id=1153168578405748787>Everett</span> <span class=chatlog__timestamp title="Monday, September 30, 2024 12:30â€¯PM"><a href=#chatlog__message-container-1290350047166201908>9/30/2024 12:30â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi LanceDB Team,

 I&#39;m looking to save arbitrary sized binary payloads of files along side my metadata and wondered what the upper limit of Lance Table&#39;s binary schema type might be. 

If I can&#39;t save my payloads in my Lance Table, then I&#39;ll have to index them in folders separately. I know that Parquet has a limit of like 1 GB or so per cell, so I was wondering if Lance had something similar. 

Thanks!</span> <span class=chatlog__edited-timestamp title="Monday, September 30, 2024 12:31â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1290432129783828500 class=chatlog__message-container data-message-id=1290432129783828500><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1285056615971553356/6739b6e223bbf7489f01a274fa6e3e8d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jonathansotherpc data-user-id=1285056615971553356>Jonathan Padilla</span> <span class=chatlog__timestamp title="Monday, September 30, 2024 5:56â€¯PM"><a href=#chatlog__message-container-1290432129783828500>9/30/2024 5:56â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How do I append data to a created index? Is it the same as connect, open table, add? Will the new data be added to the index too? Or will I have to call another method to save</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1290439253981138955 class=chatlog__message-container data-message-id=1290439253981138955><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, September 30, 2024 6:24â€¯PM"> <a href=#chatlog__message-container-1290439253981138955>9/30/2024 6:24â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1290454511248478329 class=chatlog__message-container data-message-id=1290454511248478329><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kpkpkpkpkp data-user-id=573400024919310337>kp</span> <span class=chatlog__timestamp title="Monday, September 30, 2024 7:25â€¯PM"><a href=#chatlog__message-container-1290454511248478329>9/30/2024 7:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>When writing to lance fragments using the fragment-level API (<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.fragment.write_fragments</code>) are there any integrity checks to ensure that the data written is the same as the data passed in?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1291171742810771509 class=chatlog__message-container data-message-id=1291171742810771509><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1285056615971553356/6739b6e223bbf7489f01a274fa6e3e8d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1285056615971553356/6739b6e223bbf7489f01a274fa6e3e8d.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=jonathansotherpc>Jonathan Padilla</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1290432129783828500')"> How do I append data to a created index? Is it the same as connect, open table, add? Will the new data be added to the index too? Or will I have to call another method to save </span></div></div><div class=chatlog__header><span class=chatlog__author title=jonathansotherpc data-user-id=1285056615971553356>Jonathan Padilla</span> <span class=chatlog__timestamp title="Wednesday, October 2, 2024 6:55â€¯PM"><a href=#chatlog__message-container-1291171742810771509>10/2/2024 6:55â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Bumping this since I replied w more question I tried the lanceDB chatbot for help but need further assistance</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1291280323455483992 class=chatlog__message-container data-message-id=1291280323455483992><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 3, 2024 2:06â€¯AM"> <a href=#chatlog__message-container-1291280323455483992>10/3/2024 2:06â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1291351018826629211 class=chatlog__message-container data-message-id=1291351018826629211><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/858978644872396800/5e7ac1dd2f0bb3a6c28d93fe6979fc6f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ksenia5175 data-user-id=858978644872396800>Ksenia</span> <span class=chatlog__timestamp title="Thursday, October 3, 2024 6:47â€¯AM"><a href=#chatlog__message-container-1291351018826629211>10/3/2024 6:47â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I am trying to build index on my LanceDB table. But I got an error: LanceTable.create_scalar_index() got an unexpected keyword argument &#39;index_type&#39;, but in documentation this argument is listed and is one of the main options for index building. Can you please help me with that? (I use LanceDB 0.11.0 version).

I would also change heap size for this index, I get an error that there is not enough space to create an index (error goes like this LanceError(IO): Resources exhausted: Failed to allocate additional ...) I saw in docs it is possible to change heap size for fts index, maybe I can do the same with other index types?</span> <span class=chatlog__edited-timestamp title="Thursday, October 3, 2024 7:02â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1291430414082113541 class=chatlog__message-container data-message-id=1291430414082113541><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 3, 2024 12:03â€¯PM"> <a href=#chatlog__message-container-1291430414082113541>10/3/2024 12:03â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1292533741268504627 class=chatlog__message-container data-message-id=1292533741268504627><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/460041255318061056/98d402c1963ee157d9ebb1d4270a2b01.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=.faiqkhan data-user-id=460041255318061056>Faiq Khan</span> <span class=chatlog__timestamp title="Sunday, October 6, 2024 1:07â€¯PM"><a href=#chatlog__message-container-1292533741268504627>10/6/2024 1:07â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am trying to add this data to this schema that I have figured it out. 
But there are few errors occuring in inserting.
for example here the page<em>number is pa.list(pa.string()) 

that means the data to add will be [str(page_num + 1)] ? right right ?

I am having error that : 
&quot;raise ValueError(f&quot;Expected {ndim} dimensions but got {len(v)} for {v}&quot;)
ValueError: Expected 16 dimensions but got 1 for [&#39;3&#39;]
&quot;

here this 3 in array is a page number and for every page number of a pdf I am trying to ingest into lancedb it gives me this error. 

What I am doing wrong here ?

schema = pa.schema([
    pa.field(&quot;document_id&quot;, pa.string()),
    pa.field(&quot;page_number&quot;, pa.list</em>(pa.string())),
    pa.field(&quot;text&quot;, pa.string()),
    pa.field(&quot;chunk&quot;, pa.string()),
    pa.field(&quot;contextual<em>chunk&quot;, pa.string()),
    pa.field(&quot;contextual_embedding&quot;, pa.list</em>(pa.float32())),
    pa.field(&quot;bm25<em>tokens&quot;, pa.list</em>(pa.string())),
])


         data_to_add = {
                    &quot;document_id&quot;: str(os.path.basename(pdf_path)),
                    &quot;page_number&quot;: [str(page_num + 1)],
                    &quot;text&quot;: str(text),
                    &quot;chunk&quot;: str(chunk),
                    &quot;contextual_chunk&quot;: str(contextual_chunk),
                    &quot;contextual_embedding&quot;: contextual_embedding_list,
                    &quot;bm25_tokens&quot;: word_tokenize(contextual_chunk.lower()),
                }</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1292608516321705994 class=chatlog__message-container data-message-id=1292608516321705994><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=judah0135 data-user-id=353172121805127681>judah0135</span> <span class=chatlog__timestamp title="Sunday, October 6, 2024 6:04â€¯PM"><a href=#chatlog__message-container-1292608516321705994>10/6/2024 6:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way to write version metadata in LanceDB. We&#39;re looking to maintain consistency between tables which have relationships (what a foreign key would do) by recording metadata about which set of table versions are consistent. However, I noticed that table versions have metadata and it might be neater to attach the consistency information there rather than storing it externally in a JSON.</span></div></div></div></div><div id=chatlog__message-container-1292608628431523891 class=chatlog__message-container data-message-id=1292608628431523891><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, October 6, 2024 6:05â€¯PM">6:05â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I can&#39;t find a way to assign table version metadata though. Am I missing something?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1292618423611822247 class=chatlog__message-container data-message-id=1292618423611822247><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, October 6, 2024 6:44â€¯PM"> <a href=#chatlog__message-container-1292618423611822247>10/6/2024 6:44â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293317566730604574 class=chatlog__message-container data-message-id=1293317566730604574><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=erica_83235 data-user-id=1237853853127540858>Erica</span> <span class=chatlog__timestamp title="Tuesday, October 8, 2024 5:02â€¯PM"><a href=#chatlog__message-container-1293317566730604574>10/8/2024 5:02â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a dataset I converted to a lance file, and I&quot;m looking to grab a chunk of data at a time (idx_a, idx_a + chunk_size), but then filter out the rows that don&#39;t have the same value of a column as idx_a. Is there a way to do with the lance API easily? Thank you!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293578439961346193 class=chatlog__message-container data-message-id=1293578439961346193><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=erica_83235 data-user-id=1237853853127540858>Erica</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, October 9, 2024 10:18â€¯AM"> <a href=#chatlog__message-container-1293578439961346193>10/9/2024 10:18â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293961995380592772 class=chatlog__message-container data-message-id=1293961995380592772><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/690642075917615184/7b8698bc095d6fc9baa411762deacf93.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=salihamidzicabi data-user-id=690642075917615184>Salih</span> <span class=chatlog__timestamp title="Thursday, October 10, 2024 11:43â€¯AM"><a href=#chatlog__message-container-1293961995380592772>10/10/2024 11:43â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, I am looking at the lance ray reader <a href="https://docs.ray.io/en/latest/data/api/doc/ray.data.read_lance.html">https://docs.ray.io/en/latest/data/api/doc/ray.data.read_lance.html</a>
and curious is it possible to limit how much data you read without using ray&#39;s <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">limit()</code> method?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293969526823850116 class=chatlog__message-container data-message-id=1293969526823850116><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/690642075917615184/7b8698bc095d6fc9baa411762deacf93.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=salihamidzicabi>Salih</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1293961995380592772')"> Hi there, I am looking at the lance ray reader <a href="https://docs.ray.io/en/latest/data/api/doc/ray.data.read_lance.html">https://docs.ray.io/en/latest/data/api/doc/ray.data.read_lance.html</a>
and curious is it possible to limit how much data you read without using ray&#39;s <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">limit()</code> method? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Thursday, October 10, 2024 12:12â€¯PM"><a href=#chatlog__message-container-1293969526823850116>10/10/2024 12:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey <span class="chatlog__markdown-mention" title="salihamidzicabi">@Salih</span> , Chang here <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg">. We are away at an offsite so responses are a little slow today. Sounds like you guys are hitting some paper cuts trying out Lance and Ray. Weâ€™ll have someone look at your question in the afternoon. And if itâ€™s easier, letâ€™s chat over zoom next week to pair and look at stuff together?</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=pray><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ™ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div><div id=chatlog__message-container-1293969594993873039 class=chatlog__message-container data-message-id=1293969594993873039><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Thursday, October 10, 2024 12:13â€¯PM">12:13â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>my email is chang@lancedb.com</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293969755190988840 class=chatlog__message-container data-message-id=1293969755190988840><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/690642075917615184/7b8698bc095d6fc9baa411762deacf93.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=salihamidzicabi data-user-id=690642075917615184>Salih</span> <span class=chatlog__timestamp title="Thursday, October 10, 2024 12:13â€¯PM"><a href=#chatlog__message-container-1293969755190988840>10/10/2024 12:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>thank you, sure afternoon is good</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293990709589971038 class=chatlog__message-container data-message-id=1293990709589971038><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/735690405101961226/5011a3f77eddfdc0b99f2d7f31365116.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rnulled data-user-id=735690405101961226>rnulled</span> <span class=chatlog__timestamp title="Thursday, October 10, 2024 1:37â€¯PM"><a href=#chatlog__message-container-1293990709589971038>10/10/2024 1:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi all, how can i use my own openAI api key with the embedding registry?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293990937017454747 class=chatlog__message-container data-message-id=1293990937017454747><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/735690405101961226/5011a3f77eddfdc0b99f2d7f31365116.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/735690405101961226/5011a3f77eddfdc0b99f2d7f31365116.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=rnulled>rnulled</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1293990709589971038')"> hi all, how can i use my own openAI api key with the embedding registry? </span></div></div><div class=chatlog__header><span class=chatlog__author title=rnulled data-user-id=735690405101961226>rnulled</span> <span class=chatlog__timestamp title="Thursday, October 10, 2024 1:38â€¯PM"><a href=#chatlog__message-container-1293990937017454747>10/10/2024 1:38â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ah, i see in the docs that itâ€™s configured with OS environment variables</span> <span class=chatlog__edited-timestamp title="Thursday, October 10, 2024 1:39â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1293998496726253592 class=chatlog__message-container data-message-id=1293998496726253592><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 10, 2024 2:08â€¯PM"> <a href=#chatlog__message-container-1293998496726253592>10/10/2024 2:08â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294095299974795417 class=chatlog__message-container data-message-id=1294095299974795417><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1226041474538278912/de00e3d92a94dcac34d480b115cc9089.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jamesatcentauri_94655 data-user-id=1226041474538278912>James Wu (Centauri AI)</span> <span class=chatlog__timestamp title="Thursday, October 10, 2024 8:32â€¯PM"><a href=#chatlog__message-container-1294095299974795417>10/10/2024 8:32â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>now that lance v2 is the default for lancedb==0.14.0, what do i have to do to migrate my v1 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.lancedb/</code> folders to v2, if anything? the june 5th blog post just says:
<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Once the v2 format is stable we will offer a command to migrate an existing dataset to the new format.
</div></div>i tested a v1 folder with lancedb==0.14.0 and it seems to have worked alright. i&#39;m not sure if there&#39;s edge cases i should be aware of</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294131881725526122 class=chatlog__message-container data-message-id=1294131881725526122><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 10, 2024 10:58â€¯PM"> <a href=#chatlog__message-container-1294131881725526122>10/10/2024 10:58â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294343592294219878 class=chatlog__message-container data-message-id=1294343592294219878><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1230227036459634731/8b2a5e243bd5a186cfcf92914874d92c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dragonfly_25717 data-user-id=1230227036459634731>DragonFly</span> <span class=chatlog__timestamp title="Friday, October 11, 2024 12:59â€¯PM"><a href=#chatlog__message-container-1294343592294219878>10/11/2024 12:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, everyone. Now I am trying to combine LanceDB, FastApi. So magnum python package but there is some python version conflict with magnum and lancedb.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294366421509476384 class=chatlog__message-container data-message-id=1294366421509476384><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=erica_83235 data-user-id=1237853853127540858>Erica</span> <span class=chatlog__timestamp title="Friday, October 11, 2024 2:30â€¯PM"><a href=#chatlog__message-container-1294366421509476384>10/11/2024 2:30â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I want to convert a large dataset from many h5 files  -&gt; lance as one dataset, can I keep writing to the same Lance dataset and have it write to files once large enough without holding everything in memory?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294368469990768712 class=chatlog__message-container data-message-id=1294368469990768712><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 11, 2024 2:38â€¯PM"> <a href=#chatlog__message-container-1294368469990768712>10/11/2024 2:38â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294706968824385676 class=chatlog__message-container data-message-id=1294706968824385676><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/250701525016510464/c38c60d7f318094f79f9051134c84985.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=justinrmiller data-user-id=250701525016510464>Justin Miller</span> <span class=chatlog__timestamp title="Saturday, October 12, 2024 1:03â€¯PM"><a href=#chatlog__message-container-1294706968824385676>10/12/2024 1:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>This may be a simple question but I havenâ€™t found anything in the docs for it so I thought Iâ€™d ask here. Iâ€™ve been able to generate a large dataset in Lance format using the Ray sink but I canâ€™t seem to figure out a way to convert that file into a LanceDB data set. Iâ€™d like to convert it to take advantage of the full text search capabilities with Tantivy.</span></div></div></div></div><div id=chatlog__message-container-1294707927780954223 class=chatlog__message-container data-message-id=1294707927780954223><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, October 12, 2024 1:07â€¯PM">1:07â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Seems like Lance native fts might be the way to go going forward though, hmmm.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1294766276001923086 class=chatlog__message-container data-message-id=1294766276001923086><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, October 12, 2024 4:58â€¯PM"> <a href=#chatlog__message-container-1294766276001923086>10/12/2024 4:58â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1295329199556399138 class=chatlog__message-container data-message-id=1295329199556399138><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/340937930098999296/4ba4b99c084f9114d3f67f6c53c799e7.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nekowaii data-user-id=340937930098999296>nekowaii</span> <span class=chatlog__timestamp title="Monday, October 14, 2024 6:15â€¯AM"><a href=#chatlog__message-container-1295329199556399138>10/14/2024 6:15â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, is anyone expirience the following issue with hybrid search? Seems like it&#39;s on rust end, should I raise an issue on git? Error: [ERROR] OSError: Io error: Execution error: LanceError(Arrow): Invalid argument error: Attempt to merge two RecordBatch with different sizes: 20 != 19, /home/runner/work/lance/lance/rust/lance/src/io/exec/take.rs:123:17</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1295442332669317232 class=chatlog__message-container data-message-id=1295442332669317232><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/952806354194686013/bfd68f4db01b0040cd584c36ba693624.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=diptanuc data-user-id=952806354194686013>diptanuc</span> <span class=chatlog__timestamp title="Monday, October 14, 2024 1:45â€¯PM"><a href=#chatlog__message-container-1295442332669317232>10/14/2024 1:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks, a lot of times we see people use Lance Python in Indexify workflows but the data doesn&#39;t get flushed into the disk. Do we have to manually flush after <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.create</code> and  <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.add</code> ?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1295447174322323501 class=chatlog__message-container data-message-id=1295447174322323501><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, October 14, 2024 2:04â€¯PM"> <a href=#chatlog__message-container-1295447174322323501>10/14/2024 2:04â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1295787384658595880 class=chatlog__message-container data-message-id=1295787384658595880><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=erica_83235 data-user-id=1237853853127540858>Erica</span> <span class=chatlog__timestamp title="Tuesday, October 15, 2024 12:36â€¯PM"><a href=#chatlog__message-container-1295787384658595880>10/15/2024 12:36â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I write a large dataset and it&#39;s missing the &quot;_versions&quot; folder, what might that mean? Does the &quot;_versions&quot; folder get written after the data is written?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296133081702469652 class=chatlog__message-container data-message-id=1296133081702469652><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=justinb5010 data-user-id=325029019550613514>justinb5010</span> <span class=chatlog__timestamp title="Wednesday, October 16, 2024 11:30â€¯AM"><a href=#chatlog__message-container-1296133081702469652>10/16/2024 11:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! Iâ€™m wondering if thereâ€™s a supported way for filtering based on a metadata field that is a list to check if an item is in the list? Iâ€™d use ANY or UNNEST in SQL but those donâ€™t seem to be supported in Lance yet. I can convert the list to a string and search on that using LIKE but wanted to see if there&#39;s a better approach first</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296143719631818893 class=chatlog__message-container data-message-id=1296143719631818893><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, October 16, 2024 12:12â€¯PM"> <a href=#chatlog__message-container-1296143719631818893>10/16/2024 12:12â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296153712129085502 class=chatlog__message-container data-message-id=1296153712129085502><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Wednesday, October 16, 2024 12:52â€¯PM"><a href=#chatlog__message-container-1296153712129085502>10/16/2024 12:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>A performance tuning question: I have a query with a couple scalar prefilters like this:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    scanner = ds.scanner(
        nearest={
            &quot;column&quot;: &quot;vector&quot;,
            &quot;q&quot;: v,
            &quot;k&quot;: 500,
            &quot;nprobes&quot;: 500,
        },
        filter=&quot;column_1 IN (&#39;ABC&#39;, &#39;DEF&#39;) AND column_2 = &#39;some_other_string&#39; AND column_3 = &#39;foo&#39;&quot;,
        prefilter=True,
    )</code>

For a table with ~500M rows, I&#39;m seeing this query take ~60s. I have a vector index (vector is 512D, ~22k partitions with an IVF_PQ index type). All of the scalar columns being searched on have scalar btree indices and I&#39;ve run compaction on the dataset. Is there anything else I could to do potentially speed up search times/squeeze out a bit more performance? Happy so share additional info about the query plan/indices if that&#39;d be helpful.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296207749633278087 class=chatlog__message-container data-message-id=1296207749633278087><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=nbtel data-user-id=283390147700195330>nbtel</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, October 16, 2024 4:26â€¯PM"> <a href=#chatlog__message-container-1296207749633278087>10/16/2024 4:26â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296271545701765150 class=chatlog__message-container data-message-id=1296271545701765150><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=henryvultron_06200 data-user-id=1208085170683650143>henry@vultron</span> <span class=chatlog__timestamp title="Wednesday, October 16, 2024 8:40â€¯PM"><a href=#chatlog__message-container-1296271545701765150>10/16/2024 8:40â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m running into the following error when trying to do a FTS against a table with the native index:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">ValueError: LanceError(IO): Full text search supports only one column right now, but got 4 columns</code>

My table has the following schema:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">id: string not null
text: string not null
vectors: fixed_size_list&lt;item: float&gt;[1536] not null
  child 0, item: float
file_content_id: string not null
file_id: string not null</code>

The error message seems to suggest I can only have one string column in my table for FTS but I&#39;m not entirely sure since the following code which does a FTS against a table with two string columns works:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table = db.create_table(
    &quot;test_fts_table_3&quot;,
    data=[
        {&quot;vector&quot;: [3.1, 4.1], &quot;id&quot;: &quot;1&quot;, &quot;text&quot;: &quot;Frodo was a happy puppy&quot;},
        {&quot;vector&quot;: [5.9, 26.5], &quot;id&quot;: &quot;2&quot;, &quot;text&quot;: &quot;There are several kittens playing&quot;},
    ],
)

# passing `use_tantivy=False` to use lance FTS index
# `use_tantivy=True` by default
table.create_fts_index(&quot;text&quot;, use_tantivy=False)
table.search(&quot;puppy&quot;).limit(10).to_list()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296487763482513441 class=chatlog__message-container data-message-id=1296487763482513441><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 17, 2024 10:59â€¯AM"> <a href=#chatlog__message-container-1296487763482513441>10/17/2024 10:59â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296513835523375195 class=chatlog__message-container data-message-id=1296513835523375195><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/535805966927790091/2a972be74d56102f99d390c2dcf58fff.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=smkiv data-user-id=535805966927790091>Mark</span> <span class=chatlog__timestamp title="Thursday, October 17, 2024 12:43â€¯PM"><a href=#chatlog__message-container-1296513835523375195>10/17/2024 12:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hey team! we have a single lancedb â€œdocumentsâ€ table and customers want to query arbitrary subsets of these documents (e.g. all documents that theyâ€™ve added to their workspace.. we maintain a workspace&lt;&gt;document relationship in postgres). iâ€™ve read that joins of this kind may be possible e.g. via query engine integrations. any pointers on where i could look to learn more?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296951700107825246 class=chatlog__message-container data-message-id=1296951700107825246><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=henryvultron_06200 data-user-id=1208085170683650143>henry@vultron</span> <span class=chatlog__timestamp title="Friday, October 18, 2024 5:43â€¯PM"><a href=#chatlog__message-container-1296951700107825246>10/18/2024 5:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The following error gets raised when optimize_indices is called on a table with an FTS index on a column with only empty strings:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: Invalid user input: Cannot read empty range 0..0 from file</code>

Here is a minimal repro:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table = db.create_table(
    &quot;test_fts_table&quot;,
    data=[
        {&quot;vector&quot;: [3.1, 4.1], &quot;id&quot;: &quot;1&quot;, &quot;text&quot;: &quot;&quot;},
    ],
)
table.create_fts_index(&quot;text&quot;, use_tantivy=False, replace=True)
table.to_lance().optimize.optimize_indices()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1296956761579978816 class=chatlog__message-container data-message-id=1296956761579978816><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 18, 2024 6:03â€¯PM"> <a href=#chatlog__message-container-1296956761579978816>10/18/2024 6:03â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1297948122676465664 class=chatlog__message-container data-message-id=1297948122676465664><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cmcc_analect data-user-id=929382796638687253>CMCC</span> <span class=chatlog__timestamp title="Monday, October 21, 2024 11:42â€¯AM"><a href=#chatlog__message-container-1297948122676465664>10/21/2024 11:42â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Not sure if this is the right place to ask. I was trying to get ollama embeddings working in conjunction with the lance_adapter on dlt <a href="https://dlthub.com/docs/dlt-ecosystem/destinations/lancedb#configure-the-destination">https://dlthub.com/docs/dlt-ecosystem/destinations/lancedb#configure-the-destination</a> ... lance docs at <a href="https://lancedb.github.io/lancedb/embeddings/available_embedding_models/text_embedding_functions/ollama_embedding/">https://lancedb.github.io/lancedb/embeddings/available_embedding_models/text_embedding_functions/ollama_embedding/</a> would suggest this is available, but maybe it hasn&#39;t been exposed to the lance_adapter?</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://dlthub.com/docs/dlt-ecosystem/destinations/lancedb><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB | dlt Docs</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB is an open source vector database that can be used as a destination in dlt.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1298307517989785605 class=chatlog__message-container data-message-id=1298307517989785605><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=oakela data-user-id=1074756883665145907>oakela</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, October 22, 2024 11:30â€¯AM"> <a href=#chatlog__message-container-1298307517989785605>10/22/2024 11:30â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1298695651621867630 class=chatlog__message-container data-message-id=1298695651621867630><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/714506948132864011/5355113b237b5af897f03717b54d18e4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jhsieh data-user-id=714506948132864011>jmhsieh</span> <span class=chatlog__timestamp title="Wednesday, October 23, 2024 1:12â€¯PM"><a href=#chatlog__message-container-1298695651621867630>10/23/2024 1:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks, I&#39;m on the latest python lancedb package (0.14.0) in a google cloud run execution environment storing directly to gcs.  I  have been trying to figure out how to speed up some update+where operations -- some individual operations have been taking on the order of 20-60s (seconds!) to complete.   I generally have handfuls of these operations but in some cases I may have 100&#39;s of separate  (where condition, partial row updates) which take take hours to complete. 

I&#39;m guessing the granularity of transaction checks are at the table level, because when I try to put the commits targeting different rows in multiple threads i get unresolvable  concurrent commit conflicts.  Is this right?

Is there a way for for me to have a large batch transaction or bulk load where I put all of the separate (where cond, partial row updates) into one transaction?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1298766101706051614 class=chatlog__message-container data-message-id=1298766101706051614><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=erica_83235 data-user-id=1237853853127540858>Erica</span> <span class=chatlog__timestamp title="Wednesday, October 23, 2024 5:52â€¯PM"><a href=#chatlog__message-container-1298766101706051614>10/23/2024 5:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, weâ€™ve been testing h5 vs lance using the PyTorch data loader and comparing training speeds. In our torch dataset we do image transformations. Initially we were using torchvision for these transformations and didnâ€™t see a speed difference between lance and h5. We tried albumentations instead and now see lance is 30-40% faster than h5. Thatâ€™s awesome but weâ€™re trying to understand what changed and if thereâ€™s any details we need to be aware of. Do you know why there might be a speedup with albumentations but not torchvision?</span> <span class=chatlog__edited-timestamp title="Wednesday, October 23, 2024 5:54â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1298902224931655732 class=chatlog__message-container data-message-id=1298902224931655732><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/711564775879999548/a1d6eecb4918ba58d1ac2d2992a1955c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=v3nt1on data-user-id=711564775879999548>v3nt1on</span> <span class=chatlog__timestamp title="Thursday, October 24, 2024 2:53â€¯AM"><a href=#chatlog__message-container-1298902224931655732>10/24/2024 2:53â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi. 
Could someone please help me understand this sample code in the docs  regarding LanceDB&#39;s built-in embeddings?
my question is how do the vector and vec_from_bytes know which SourceField to use for generate features and embeddings?</span> <span class=chatlog__edited-timestamp title="Thursday, October 24, 2024 2:56â€¯AM">(edited)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1298902224717742093/image.png?ex=697bacb6&amp;is=697a5b36&amp;hm=33e2ae3e101480f1ded794161861d9eba7ebc049baf56f082bf5dcb62d32ef1c&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1298902224717742093/image.png?ex=697bacb6&amp;is=697a5b36&amp;hm=33e2ae3e101480f1ded794161861d9eba7ebc049baf56f082bf5dcb62d32ef1c&amp;" alt="Image attachment" title="Image: image.png (32.88 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1298952996306026521 class=chatlog__message-container data-message-id=1298952996306026521><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 24, 2024 6:15â€¯AM"> <a href=#chatlog__message-container-1298952996306026521>10/24/2024 6:15â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1299016774251188245 class=chatlog__message-container data-message-id=1299016774251188245><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=justinb5010 data-user-id=325029019550613514>justinb5010</span> <span class=chatlog__timestamp title="Thursday, October 24, 2024 10:28â€¯AM"><a href=#chatlog__message-container-1299016774251188245>10/24/2024 10:28â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! I have a list field with a LabelList index that has been pretty slow when filtering using array_contains. It runs ok when it&#39;s the only filter applied but once any others are added the performance drops. I have the query plan below where I&#39;m filtering on the list and another string field which has a btree index. Is there anything I could do to improve performance?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">&#39;ProjectionExec: expr=[&lt;16 columns&gt;]\n  Take: columns=&quot;&lt;~16 columns&gt;&quot;\n    CoalesceBatchesExec: target_batch_size=16384\n      FilterExec: array_has(my_array_column@1, NSL-TRAIN)\n        Take: columns=&quot;_rowid, my_array_column&quot;\n          CoalesceBatchesExec: target_batch_size=16384\n            MaterializeIndex: query=my_other_scalar_column = FOOABC\n&#39;</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1299154755410595962 class=chatlog__message-container data-message-id=1299154755410595962><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bill__3127 data-user-id=788609706306043926>bill__</span> <span class=chatlog__timestamp title="Thursday, October 24, 2024 7:37â€¯PM"><a href=#chatlog__message-container-1299154755410595962>10/24/2024 7:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I am running python:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">[2024-10-24T23:35:00Z WARN  lancedb::connection] The rust implementation of the remote client is not yet ready for use.</code>

I am getting that error with async connections. Is this... meaningful?

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">await lancedb.connect_async(_LDB_URI, api_key=_LDB_API_KEY)</code></span> <span class=chatlog__edited-timestamp title="Thursday, October 24, 2024 7:37â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1299352536012030038 class=chatlog__message-container data-message-id=1299352536012030038><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 25, 2024 8:43â€¯AM"> <a href=#chatlog__message-container-1299352536012030038>10/25/2024 8:43â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1299430094233665678 class=chatlog__message-container data-message-id=1299430094233665678><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/483633012240547841/437dacc3057ea71106a27771190e9f60.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=lilb6679 data-user-id=483633012240547841>Pranav</span> <span class=chatlog__timestamp title="Friday, October 25, 2024 1:51â€¯PM"><a href=#chatlog__message-container-1299430094233665678>10/25/2024 1:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Any workarounds for reading a remote table into a pandas dataframe?</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=eyes><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘€ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f440.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1299510834690654241 class=chatlog__message-container data-message-id=1299510834690654241><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/483633012240547841/437dacc3057ea71106a27771190e9f60.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=lilb6679>Pranav</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1299430094233665678')"> Any workarounds for reading a remote table into a pandas dataframe? </span></div></div><div class=chatlog__header><span class=chatlog__author title=qian_00349 data-user-id=1139637723725041674>Qian</span> <span class=chatlog__timestamp title="Friday, October 25, 2024 7:12â€¯PM"><a href=#chatlog__message-container-1299510834690654241>10/25/2024 7:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Pranav, we do not support exporting a remote table currently. Can you email me (qian@lancedb.com) or we can schedule a 15min conv (<a href="https://calendly.com/qian-lancedb/lancedb-cloud-use-case)">https://calendly.com/qian-lancedb/lancedb-cloud-use-case)</a> to go over some details?</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://calendly.com/qian-lancedb/lancedb-cloud-use-case><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB Cloud use case - Qian Zhu</div></a></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/_Dke4jaGERelr1RVuMDhDFKOTLyVQ4W5B3V-YdX7Tns/%3Fsource%3Dopengraph/https/assets.calendly.com/assets/booking/ogimage-twitter-5e62f2112d04553b20c43d1f085d90dcd9bf541e1a348cba314e9e4621a5ca5f.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/_Dke4jaGERelr1RVuMDhDFKOTLyVQ4W5B3V-YdX7Tns/%3Fsource%3Dopengraph/https/assets.calendly.com/assets/booking/ogimage-twitter-5e62f2112d04553b20c43d1f085d90dcd9bf541e1a348cba314e9e4621a5ca5f.png alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1300946129583603769 class=chatlog__message-container data-message-id=1300946129583603769><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=weston_lance data-user-id=1272662049112981506>weston_lance</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, October 29, 2024 6:15â€¯PM"> <a href=#chatlog__message-container-1300946129583603769>10/29/2024 6:15â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1301641311514001549 class=chatlog__message-container data-message-id=1301641311514001549><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=max_mpc_85836 data-user-id=1301572016809447537>Max</span> <span class=chatlog__timestamp title="Thursday, October 31, 2024 4:17â€¯PM"><a href=#chatlog__message-container-1301641311514001549>10/31/2024 4:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I&#39;m running the following commands* against lancedb cloud, and I&#39;m seeing the following warning: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">WARNING:root:mode is not yet supported on LanceDB Cloud.</code>,  what does this mean?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lancedb python code lines:
import lancedb
ldb_conn = lancedb.connect(CLOUD_DB_URI, api_key=LANCEDB_API_KEY)

  if not reindex and tblname in list(ldb_conn.table_names()):
      tbl = ldb_conn.open_table(tblname)
  else:
      doc_chunks = get_document_chunks(...)

      # Create or overwrite the table based on the mode
      tbl = ldb_conn.create_table(tblname, schema=DocumentChunkLanceRecord, mode=&quot;overwrite&quot;)
      tbl.add(doc_chunks)
      tbl.create_fts_index(&quot;text&quot;, replace=True)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1301649919182110816 class=chatlog__message-container data-message-id=1301649919182110816><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, October 31, 2024 4:52â€¯PM"> <a href=#chatlog__message-container-1301649919182110816>10/31/2024 4:52â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1301990354530209854 class=chatlog__message-container data-message-id=1301990354530209854><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/329451403359551499/fd289921dba108cd0b9ace2ee3c1ac71.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=yung_homie data-user-id=329451403359551499>Yung_Homie</span> <span class=chatlog__timestamp title="Friday, November 1, 2024 3:24â€¯PM"><a href=#chatlog__message-container-1301990354530209854>11/1/2024 3:24â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Apologies if this is the wrong place, but is there a way to submit a query as a essentially a raw string when using full text search? I know that tantivy is used under the hood, but I get errors quite frequently since the queries contain special characters. Maybe I have the wrong idea, but what I&#39;ve attempted to do in the past is strip all of the characters that tantivy uses in its query language to avoid the ValueError.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1302028882634997795 class=chatlog__message-container data-message-id=1302028882634997795><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, November 1, 2024 5:57â€¯PM"> <a href=#chatlog__message-container-1302028882634997795>11/1/2024 5:57â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1302582391776477285 class=chatlog__message-container data-message-id=1302582391776477285><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/365568185895878658/d90b635e4854ab9f304d5549545c8152.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=karatayevm data-user-id=365568185895878658>ÐœÑƒÑ…Ð°Ð¼ÐµÐ´Ð¶Ð°Ð½ ÐšÐ°Ñ€Ð°Ñ‚Ð°ÐµÐ²</span> <span class=chatlog__timestamp title="Sunday, November 3, 2024 5:37â€¯AM"><a href=#chatlog__message-container-1302582391776477285>11/3/2024 5:37â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey guys! I&#39;m really impressed with your project. Weâ€™re working with a quite big dataset of around 4 million vectors, and we&#39;ve built an ANN index using the OSS lancedb in Python. I was curious if thereâ€™s a way to explore the clusters within this indexâ€”specifically, to identify which rows belong to which clusters and analyze their composition. Any guidance on this would be greatly appreciated. Thank you!</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1302713795373830185 class=chatlog__message-container data-message-id=1302713795373830185><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span class=chatlog__timestamp title="Sunday, November 3, 2024 2:19â€¯PM"><a href=#chatlog__message-container-1302713795373830185>11/3/2024 2:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a large dataset containing 200M records, with a large text column. I want to create an fts_index on it, in s3, lance native. Will it work?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1303063326389043291 class=chatlog__message-container data-message-id=1303063326389043291><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/365568185895878658/d90b635e4854ab9f304d5549545c8152.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=karatayevm>ÐœÑƒÑ…Ð°Ð¼ÐµÐ´Ð¶Ð°Ð½ ÐšÐ°Ñ€Ð°Ñ‚Ð°ÐµÐ²</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1302582391776477285')"> Hey guys! I&#39;m really impressed with your project. Weâ€™re working with a quite big dataset of around 4 million vectors, and we&#39;ve built an ANN index using the OSS lancedb in Python. I was curious if thereâ€™s a way to explore the clusters within this indexâ€”specifically, to identify which rows belong to which clusters and analyze their composition. Any guidance on this would be greatly appreciated. Thank you! </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=luqiu_87609 data-user-id=1209390552148090902>Lu Qiu</span> <span class=chatlog__timestamp title="Monday, November 4, 2024 1:28â€¯PM"><a href=#chatlog__message-container-1303063326389043291>11/4/2024 1:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi ÐœÑƒÑ…Ð°Ð¼ÐµÐ´Ð¶Ð°Ð½ ÐšÐ°Ñ€Ð°Ñ‚Ð°ÐµÐ²! Thank you for your question! Weâ€™ve implemented the IVF index, which organizes rows into clusters using centroids to represent the center of each cluster. In our code, we have a mechanism that matches centroids to the row IDs belonging to each cluster, allowing for exploration of the clusters within the index. However, we currently do not have a high-level API for this functionality yet. FYI <span class="chatlog__markdown-mention" title="wjones127">@Will Jones</span> 

Iâ€™m curious to know how you envision cluster discovery helping you. Would it aid in making more informed business decisions or enhance your data-driven strategies?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1303136324781342797 class=chatlog__message-container data-message-id=1303136324781342797><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, November 4, 2024 6:18â€¯PM"> <a href=#chatlog__message-container-1303136324781342797>11/4/2024 6:18â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1303351942130700362 class=chatlog__message-container data-message-id=1303351942130700362><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, November 5, 2024 8:35â€¯AM"> <a href=#chatlog__message-container-1303351942130700362>11/5/2024 8:35â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1303385571120648225 class=chatlog__message-container data-message-id=1303385571120648225><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/365568185895878658/d90b635e4854ab9f304d5549545c8152.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=luqiu_87609>Lu Qiu</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1303063326389043291')"> Hi ÐœÑƒÑ…Ð°Ð¼ÐµÐ´Ð¶Ð°Ð½ ÐšÐ°Ñ€Ð°Ñ‚Ð°ÐµÐ²! Thank you for your question! Weâ€™ve implemented the IVF index, which organizes rows into clusters using centroids to represent the center of each cluster. In our code, we have a mechanism that matches centroids to the row IDs belonging to each cluster, allowing for exploration of the clusters within the index. However, we currently do not have a high-level API for this functionality yet. FYI <span class="chatlog__markdown-mention" title="wjones127">@Will Jones</span> 

Iâ€™m curious to know how you envision cluster discovery helping you. Would it aid in making more informed business decisions or enhance your data-driven strategies? </span></div></div><div class=chatlog__header><span class=chatlog__author title=karatayevm data-user-id=365568185895878658>ÐœÑƒÑ…Ð°Ð¼ÐµÐ´Ð¶Ð°Ð½ ÐšÐ°Ñ€Ð°Ñ‚Ð°ÐµÐ²</span> <span class=chatlog__timestamp title="Tuesday, November 5, 2024 10:48â€¯AM"><a href=#chatlog__message-container-1303385571120648225>11/5/2024 10:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Lu, thanks for the response! Itâ€™ll be really helpful for us to gain deeper insights into our data. While we could definitely train our own custom ANN and analyze it, since LanceDB has already done this, we could leverage its results directly.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1303473799030767697 class=chatlog__message-container data-message-id=1303473799030767697><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=erica_83235 data-user-id=1237853853127540858>Erica</span> <span class=chatlog__timestamp title="Tuesday, November 5, 2024 4:39â€¯PM"><a href=#chatlog__message-container-1303473799030767697>11/5/2024 4:39â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I have a Lance dataset that includes n episodes and a variable number of timesteps per episode. There are different columns of data corresponding to these episodes and timesteps. For a given training job, I want to filter out the last x number of timesteps per episode for every column and have the index be continuous in this filtered version of the dataset. x can change for each training job. Is there a performant way to accomplish this in Lance?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1304194425609650266 class=chatlog__message-container data-message-id=1304194425609650266><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span class=chatlog__timestamp title="Thursday, November 7, 2024 4:23â€¯PM"><a href=#chatlog__message-container-1304194425609650266>11/7/2024 4:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, what is the best way to deduplicate the data stored in lancedb? I have a large dataset and I see that there are some exact duplicate entires which I want to remove. Tried duckdb to list dups, but takes forever.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=eyes><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘€ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f440.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1304198240073158661 class=chatlog__message-container data-message-id=1304198240073158661><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, November 7, 2024 4:38â€¯PM"> <a href=#chatlog__message-container-1304198240073158661>11/7/2024 4:38â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1305536762671529984 class=chatlog__message-container data-message-id=1305536762671529984><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/220891032349310978/f25a2c898e2aa06256d45c49a9153cec.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=therobotcarlson data-user-id=220891032349310978>therobotcarlson</span> <span class=chatlog__timestamp title="Monday, November 11, 2024 9:16â€¯AM"><a href=#chatlog__message-container-1305536762671529984>11/11/2024 9:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way to list the existing indexes other than trying to recreate it and catching the error?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1305537468979744859 class=chatlog__message-container data-message-id=1305537468979744859><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Monday, November 11, 2024 9:19â€¯AM"><a href=#chatlog__message-container-1305537468979744859>11/11/2024 9:19â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The async python API has <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">list_indices</code>: <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.table.AsyncTable.list_indices">https://lancedb.github.io/lancedb/python/python/#lancedb.table.AsyncTable.list_indices</a>

The sync API seems to be missing this (feel free to create a GH issue) but, for the time being, you can do:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">tbl.to_lance().list_indices()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1305538286558908517 class=chatlog__message-container data-message-id=1305538286558908517><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/220891032349310978/f25a2c898e2aa06256d45c49a9153cec.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=therobotcarlson data-user-id=220891032349310978>therobotcarlson</span> <span class=chatlog__timestamp title="Monday, November 11, 2024 9:23â€¯AM"><a href=#chatlog__message-container-1305538286558908517>11/11/2024 9:23â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ll check that out, thanks</span></div></div></div></div><div id=chatlog__message-container-1305539305120337940 class=chatlog__message-container data-message-id=1305539305120337940><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, November 11, 2024 9:27â€¯AM">9:27â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Made an issue for it as well: <a href="https://github.com/lancedb/lancedb/issues/1817">https://github.com/lancedb/lancedb/issues/1817</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/1817><div class="chatlog__markdown chatlog__markdown-preserve">Feature: List existing indexes from synchronous API &#183; Issue #1817 &#183;...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">SDK Python Description Most of the time I don&#39;t want to overwrite an existing index or throw an error, listing existing indexes would enable me to filter out indexes I&#39;ve already created. E...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/E6cbWyIO1wnsmj06nGE8d_jFbwvPq8ft0Ycr_0qUGaU/https/opengraph.githubassets.com/c7004d2f606b5d8649c801517e32bb287c32d5ae06cd912b743ac8ccad2d3eeb/lancedb/lancedb/issues/1817> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/E6cbWyIO1wnsmj06nGE8d_jFbwvPq8ft0Ycr_0qUGaU/https/opengraph.githubassets.com/c7004d2f606b5d8649c801517e32bb287c32d5ae06cd912b743ac8ccad2d3eeb/lancedb/lancedb/issues/1817 alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=pray><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ™ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1306067363266822144 class=chatlog__message-container data-message-id=1306067363266822144><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/220891032349310978/f25a2c898e2aa06256d45c49a9153cec.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=therobotcarlson data-user-id=220891032349310978>therobotcarlson</span> <span class=chatlog__timestamp title="Tuesday, November 12, 2024 8:25â€¯PM"><a href=#chatlog__message-container-1306067363266822144>11/12/2024 8:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there an easy way to fetch ALL documents for a given search?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1306656565914370059 class=chatlog__message-container data-message-id=1306656565914370059><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/220891032349310978/f25a2c898e2aa06256d45c49a9153cec.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=therobotcarlson data-user-id=220891032349310978>therobotcarlson</span> <span class=chatlog__timestamp title="Thursday, November 14, 2024 11:26â€¯AM"><a href=#chatlog__message-container-1306656565914370059>11/14/2024 11:26â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a reason for the sync and async methods being so different? Which one is more &quot;advanced&quot; / in the anticipated future design direction?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1306662394482655267 class=chatlog__message-container data-message-id=1306662394482655267><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, November 14, 2024 11:49â€¯AM"> <a href=#chatlog__message-container-1306662394482655267>11/14/2024 11:49â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1307710458643353601 class=chatlog__message-container data-message-id=1307710458643353601><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Sunday, November 17, 2024 9:14â€¯AM"><a href=#chatlog__message-container-1307710458643353601>11/17/2024 9:14â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey there, has anyone used UUID fields for filtering? 

My schema includes a:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    (&quot;company_guid&quot;, pa.uuid()),</code>
field and I&#39;m trying to filter on it like so:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">await table.query().where(&quot;company_guid IN (&#39;006350bd-da6f-5901-9df0-331b6d726c28&#39;)&quot;).limit(1).to_list()</code>

The error I recieve is:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance error: Invalid user input: Received literal Utf8(&quot;006350bd-da6f-5901-9df0-331b6d726c28&quot;) and could not convert to literal of type &#39;FixedSizeBinary(16)&#39;</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1308108963770011703 class=chatlog__message-container data-message-id=1308108963770011703><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, November 18, 2024 11:38â€¯AM"> <a href=#chatlog__message-container-1308108963770011703>11/18/2024 11:38â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1308170632277786736 class=chatlog__message-container data-message-id=1308170632277786736><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=max_mpc_85836 data-user-id=1301572016809447537>Max</span> <span class=chatlog__timestamp title="Monday, November 18, 2024 3:43â€¯PM"><a href=#chatlog__message-container-1308170632277786736>11/18/2024 3:43â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello,

I&#39;m trying to get a couple columns (<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">chunk_idx</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">text</code>) from a lancedb table on lancedb cloud in python. I thought the code below would get that for me, but it gets me all columns instead. Can someone explain to me what I&#39;m misunderstanding about how the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">query</code> param works?

my code:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table = ldb_conn.open_table(TBLNAME)
texts = table.search(query=&#39;select chunk_idx, text from document_chunks&#39;).to_pandas()</code>
output of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">texts.head()</code>:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">&gt;&gt;&gt; texts.head()
                                                text  ...  _distance
0                             allowed to speak . 461  ...   0.913100
1                                                  .  ...   0.914263
2  Contents . . . . . . . . . . . . . . . . . . ....  ...   0.927872
3  23 , 2021 , pp . 14 19 , 36 55 , available at ...  ...   0.939511
4  . Order Re Privilege of Documents Dated Januar...  ...   0.940935

[5 rows x 5 columns]</code>

...also, as a follow-up, what&#39;s the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_distance</code> column represent here? Distance from what? I think of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">distance</code> as being an attribute/calculation of a pair of points/records, not a single record having an intrinsic <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_distance</code> absent a reference to any particular other record?</span> <span class=chatlog__edited-timestamp title="Monday, November 18, 2024 3:45â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1308180511168004252 class=chatlog__message-container data-message-id=1308180511168004252><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, November 18, 2024 4:22â€¯PM"> <a href=#chatlog__message-container-1308180511168004252>11/18/2024 4:22â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1308913477540122716 class=chatlog__message-container data-message-id=1308913477540122716><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/81151345884663808/d2a1b7d55f3c91291685d981b6156827.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=helly data-user-id=81151345884663808>Helly</span> <span class=chatlog__timestamp title="Wednesday, November 20, 2024 4:54â€¯PM"><a href=#chatlog__message-container-1308913477540122716>11/20/2024 4:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>with Lance (not DB) is there a way to <em>update</em> the table metadata?

If I pass a arrow table with schema metadata to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">write_dataset</code> I can read it back when i read the dataset, but I want to commit a version with new metadata, passing in a table with metadata with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">mode=&#39;append&#39;</code> seems to just ignore it: <a href="https://gist.github.com/apage43/27de80f59413933e0b80a0efb500e94e">https://gist.github.com/apage43/27de80f59413933e0b80a0efb500e94e</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://gist.github.com/apage43/27de80f59413933e0b80a0efb500e94e><div class="chatlog__markdown chatlog__markdown-preserve">lancescratch.ipynb</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">GitHub Gist: instantly share code, notes, and snippets.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/7lesHV5TJfXV9rDct_prZ0T8dzM8AdALoVfer2-rnhs/https/github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/7lesHV5TJfXV9rDct_prZ0T8dzM8AdALoVfer2-rnhs/https/github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1308916993105199171 class=chatlog__message-container data-message-id=1308916993105199171><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=helly data-user-id=81151345884663808>Helly</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, November 20, 2024 5:08â€¯PM"> <a href=#chatlog__message-container-1308916993105199171>11/20/2024 5:08â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1309033993152364615 class=chatlog__message-container data-message-id=1309033993152364615><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span class=chatlog__timestamp title="Thursday, November 21, 2024 12:53â€¯AM"><a href=#chatlog__message-container-1309033993152364615>11/21/2024 12:53â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Optimize error: Hi, I am trying to optimize a table (in cloud object store). Giving this error. I am on latest python lancedb version: 0.16.0.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1309870465463877687 class=chatlog__message-container data-message-id=1309870465463877687><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Saturday, November 23, 2024 8:17â€¯AM"><a href=#chatlog__message-container-1309870465463877687>11/23/2024 8:17â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m trying to concurrently write many unique items to my lance db instance backed by s3 buy I seem to be dropping batches. Could this be because I&#39;m using s3 as a backend or something else? I&#39;m not seeing any errors being thrown.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1309875552295059466 class=chatlog__message-container data-message-id=1309875552295059466><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Saturday, November 23, 2024 8:37â€¯AM"><a href=#chatlog__message-container-1309875552295059466>11/23/2024 8:37â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Actually now I&#39;m seeing this might be because some threads are failing with:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Generic S3 error: Failed to resolve region for bucket &#39;staging-lance-bucket&#39;</code></span></div></div></div></div><div id=chatlog__message-container-1309875853806665739 class=chatlog__message-container data-message-id=1309875853806665739><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, November 23, 2024 8:38â€¯AM">8:38â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>although I see the default region is &quot;us-east-1&quot; which is correct for me</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1309882122554708076 class=chatlog__message-container data-message-id=1309882122554708076><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, November 23, 2024 9:03â€¯AM"> <a href=#chatlog__message-container-1309882122554708076>11/23/2024 9:03â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1310319879911379087 class=chatlog__message-container data-message-id=1310319879911379087><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Sunday, November 24, 2024 2:03â€¯PM"><a href=#chatlog__message-container-1310319879911379087>11/24/2024 2:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Has anyone ran into this? I think its a bug.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">print(table_blocks_table.schema.field(item))
table_blocks_table.create_scalar_index(item)</code>
the type is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow.Field&lt;document_id: int32&gt;</code>

and the error is
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lib/python3.12/site-packages/lance/dataset.py:1462, in LanceDataset.create_scalar_index(self, column, index_type, name, replace, **kwargs)
   1457 if pa.types.is_duration(field.type):
   1458     raise TypeError(
   1459         f&quot;Scalar index column {column} cannot currently be a duration&quot;
   1460     )
-&gt; 1462 self._ds.create_index([column], index_type, name, replace, None, kwargs)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1312262852492394597 class=chatlog__message-container data-message-id=1312262852492394597><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/220891032349310978/f25a2c898e2aa06256d45c49a9153cec.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=therobotcarlson data-user-id=220891032349310978>therobotcarlson</span> <span class=chatlog__timestamp title="Friday, November 29, 2024 10:44â€¯PM"><a href=#chatlog__message-container-1312262852492394597>11/29/2024 10:44â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a lancedb on s3. I created vector indexes using gpu + cuda for embeddings, but when I try to do a hybrid search on a cpu-only machine, the embedding function in search seems to be trying to access GPU. Is there a way to force it to use cpu only?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1312418200922620006 class=chatlog__message-container data-message-id=1312418200922620006><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/720932480307298329/ef9f615efcbc5e168fc463d849ad00d0.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=lyka3959 data-user-id=720932480307298329>Lvka</span> <span class=chatlog__timestamp title="Saturday, November 30, 2024 9:01â€¯AM"><a href=#chatlog__message-container-1312418200922620006>11/30/2024 9:01â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello world,

I am developing a agentic hedge fund manager and am running in OOM issues when accessing LanceDB on local filesystem.

I made some modifications and I think the origin of the issue is ColBERT Reranker, is not thread-safe, and invoking it concurrently from multiple threads can cause the process to crash.

My current fix is to encapsulate it with threading.lock. It does fix my issue my hurt performance. Anyone experiencing something similar?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1312431220914655325 class=chatlog__message-container data-message-id=1312431220914655325><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/720932480307298329/ef9f615efcbc5e168fc463d849ad00d0.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=lyka3959>Lvka</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1312418200922620006')"> Hello world,

I am developing a agentic hedge fund manager and am running in OOM issues when accessing LanceDB on local filesystem.

I made some modifications and I think the origin of the issue is ColBERT Reranker, is not thread-safe, and invoking it concurrently from multiple threads can cause the process to crash.

My current fix is to encapsulate it with threading.lock. It does fix my issue my hurt performance. Anyone experiencing something similar? </span></div></div><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Saturday, November 30, 2024 9:53â€¯AM"><a href=#chatlog__message-container-1312431220914655325>11/30/2024 9:53â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If its during indexing you&#39;ll need dynamo db with s3 <a href="https://lancedb.github.io/lancedb/guides/storage/#dynamodb-commit-store-for-concurrent-writes">https://lancedb.github.io/lancedb/guides/storage/#dynamodb-commit-store-for-concurrent-writes</a></span> <span class=chatlog__edited-timestamp title="Saturday, November 30, 2024 9:53â€¯AM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1312431637123825716 class=chatlog__message-container data-message-id=1312431637123825716><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, November 30, 2024 9:54â€¯AM">9:54â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Also OOM is probably being caused by just that. you&#39;ll need a beefier setup to run a bunch of instances of something like ColBERT</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1312513446394331238 class=chatlog__message-container data-message-id=1312513446394331238><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/720932480307298329/ef9f615efcbc5e168fc463d849ad00d0.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=connell__>connell</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1312431220914655325')"> If its during indexing you&#39;ll need dynamo db with s3 <a href="https://lancedb.github.io/lancedb/guides/storage/#dynamodb-commit-store-for-concurrent-writes">https://lancedb.github.io/lancedb/guides/storage/#dynamodb-commit-store-for-concurrent-writes</a> </span> <span class=chatlog__reply-edited-timestamp title="Saturday, November 30, 2024 9:53â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=lyka3959 data-user-id=720932480307298329>Lvka</span> <span class=chatlog__timestamp title="Saturday, November 30, 2024 3:19â€¯PM"><a href=#chatlog__message-container-1312513446394331238>11/30/2024 3:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hmm thats weird</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1312513475360194580 class=chatlog__message-container data-message-id=1312513475360194580><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/720932480307298329/ef9f615efcbc5e168fc463d849ad00d0.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=connell__>connell</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1312431637123825716')"> Also OOM is probably being caused by just that. you&#39;ll need a beefier setup to run a bunch of instances of something like ColBERT </span></div></div><div class=chatlog__header><span class=chatlog__author title=lyka3959 data-user-id=720932480307298329>Lvka</span> <span class=chatlog__timestamp title="Saturday, November 30, 2024 3:19â€¯PM"><a href=#chatlog__message-container-1312513475360194580>11/30/2024 3:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>shouldnt indexing be done regardless of inference?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1312903892211732510 class=chatlog__message-container data-message-id=1312903892211732510><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Sunday, December 1, 2024 5:11â€¯PM"><a href=#chatlog__message-container-1312903892211732510>12/1/2024 5:11â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m seeing this error running the python client in a fastapi uvicorn wrapper, anyone know how I can set the number of IO cores

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance_core::utils::tokio] Number of CPUs is less than or equal to the number of IO core reservations. This is not a supported configuration. using 1 CPU for compute intensive tasks.</code>

EDIT:
nvm I realize this is now because I had less than 2 cpus available</span> <span class=chatlog__edited-timestamp title="Sunday, December 1, 2024 8:21â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313112080131424307 class=chatlog__message-container data-message-id=1313112080131424307><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tudor_62704 data-user-id=1253635651954278442>Tudor</span> <span class=chatlog__timestamp title="Monday, December 2, 2024 6:58â€¯AM"><a href=#chatlog__message-container-1313112080131424307>12/2/2024 6:58â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi
I&#39;m trying to query a table and use sql filters, but it seems like the offset is not taken into account. This code returns the same result, no matter what offset value i pass:

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">results = (
            table.search()
            .where(
                f&quot;metadata[&#39;chatbotId&#39;] = &#39;{chatbot_id}&#39;&quot;,
                prefilter=True,
            )
            .limit(limit)
            .offset(offset)
            .to_pandas()
        )</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313164495924891779 class=chatlog__message-container data-message-id=1313164495924891779><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=tudor_62704>Tudor</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1313112080131424307')"> Hi
I&#39;m trying to query a table and use sql filters, but it seems like the offset is not taken into account. This code returns the same result, no matter what offset value i pass:

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">results = (
            table.search()
            .where(
                f&quot;metadata[&#39;chatbotId&#39;] = &#39;{chatbot_id}&#39;&quot;,
                prefilter=True,
            )
            .limit(limit)
            .offset(offset)
            .to_pandas()
        )</code> </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span class=chatlog__timestamp title="Monday, December 2, 2024 10:26â€¯AM"><a href=#chatlog__message-container-1313164495924891779>12/2/2024 10:26â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi Tudor, can you share the details of your connect parameters? Thanks</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313165258356953099 class=chatlog__message-container data-message-id=1313165258356953099><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=rpgreen_lancedb>Ryan</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1313164495924891779')"> Hi Tudor, can you share the details of your connect parameters? Thanks </span></div></div><div class=chatlog__header><span class=chatlog__author title=tudor_62704 data-user-id=1253635651954278442>Tudor</span> <span class=chatlog__timestamp title="Monday, December 2, 2024 10:29â€¯AM"><a href=#chatlog__message-container-1313165258356953099>12/2/2024 10:29â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>im using the oss lancedb in a local storage setting, if that&#39;s what you meant</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313191914131951627 class=chatlog__message-container data-message-id=1313191914131951627><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=tudor_62704>Tudor</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1313165258356953099')"> im using the oss lancedb in a local storage setting, if that&#39;s what you meant </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span class=chatlog__timestamp title="Monday, December 2, 2024 12:15â€¯PM"><a href=#chatlog__message-container-1313191914131951627>12/2/2024 12:15â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What is the version of python client you are using?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313207498806792247 class=chatlog__message-container data-message-id=1313207498806792247><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 2, 2024 1:17â€¯PM"> <a href=#chatlog__message-container-1313207498806792247>12/2/2024 1:17â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313659203407052841 class=chatlog__message-container data-message-id=1313659203407052841><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=max_mpc_85836 data-user-id=1301572016809447537>Max</span> <span class=chatlog__timestamp title="Tuesday, December 3, 2024 7:12â€¯PM"><a href=#chatlog__message-container-1313659203407052841>12/3/2024 7:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How would lancedb treat a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceModel</code>  table schema with two different <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">str</code> fields assigned as <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">embedding_model.SourceField()</code>s?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313978685576974348 class=chatlog__message-container data-message-id=1313978685576974348><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/220891032349310978/f25a2c898e2aa06256d45c49a9153cec.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=therobotcarlson data-user-id=220891032349310978>therobotcarlson</span> <span class=chatlog__timestamp title="Wednesday, December 4, 2024 4:22â€¯PM"><a href=#chatlog__message-container-1313978685576974348>12/4/2024 4:22â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg"> Is there a timeline for being able to do an async hybrid search? Is this possible now?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1313986688992804959 class=chatlog__message-container data-message-id=1313986688992804959><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, December 4, 2024 4:53â€¯PM"> <a href=#chatlog__message-container-1313986688992804959>12/4/2024 4:53â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1314307147588305002 class=chatlog__message-container data-message-id=1314307147588305002><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, December 5, 2024 2:07â€¯PM"> <a href=#chatlog__message-container-1314307147588305002>12/5/2024 2:07â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1314562492730708021 class=chatlog__message-container data-message-id=1314562492730708021><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/720932480307298329/ef9f615efcbc5e168fc463d849ad00d0.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/720932480307298329/ef9f615efcbc5e168fc463d849ad00d0.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=lyka3959>Lvka</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1312418200922620006')"> Hello world,

I am developing a agentic hedge fund manager and am running in OOM issues when accessing LanceDB on local filesystem.

I made some modifications and I think the origin of the issue is ColBERT Reranker, is not thread-safe, and invoking it concurrently from multiple threads can cause the process to crash.

My current fix is to encapsulate it with threading.lock. It does fix my issue my hurt performance. Anyone experiencing something similar? </span></div></div><div class=chatlog__header><span class=chatlog__author title=lyka3959 data-user-id=720932480307298329>Lvka</span> <span class=chatlog__timestamp title="Friday, December 6, 2024 7:02â€¯AM"><a href=#chatlog__message-container-1314562492730708021>12/6/2024 7:02â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>What AWS service you recommend for handling Hybrid searches</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315362115229585459 class=chatlog__message-container data-message-id=1315362115229585459><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Sunday, December 8, 2024 11:59â€¯AM"><a href=#chatlog__message-container-1315362115229585459>12/8/2024 11:59â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Are there any examples of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">add_column</code> in the docs
specifically I&#39;m looking for way to convert an existing timestamp column into a unix timestamp

nvm figured it out, just needed <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">CAST(published_date as BIGINT)</code></span> <span class=chatlog__edited-timestamp title="Sunday, December 8, 2024 12:10â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=ðŸ«¡><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ«¡ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1fae1.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315390364147912757 class=chatlog__message-container data-message-id=1315390364147912757><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, December 8, 2024 1:51â€¯PM"> <a href=#chatlog__message-container-1315390364147912757>12/8/2024 1:51â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315483104156061746 class=chatlog__message-container data-message-id=1315483104156061746><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/431559508565688340/d8d310172365563179a162e8bb2ac14d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=spoice9365 data-user-id=431559508565688340>weenie</span> <span class=chatlog__timestamp title="Sunday, December 8, 2024 8:00â€¯PM"><a href=#chatlog__message-container-1315483104156061746>12/8/2024 8:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Can anyone give me more insight into how LanceDB stores table rows?  I have a LanceDB instance in a local drive with a ~7 million row table where entries contain a 1024 dimensional vector and a text field limited to 512 tokens.  This table is somehow taking up 27TB of space.  Not sure how this could be happening but Iâ€™m obvious running into issues w storage.  Anyone encounter anything similar?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315678973812019232 class=chatlog__message-container data-message-id=1315678973812019232><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Monday, December 9, 2024 8:58â€¯AM"><a href=#chatlog__message-container-1315678973812019232>12/9/2024 8:58â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there any information about how filter query plans are executed, which filters are applied first in the where clause etc.</span> <span class=chatlog__edited-timestamp title="Monday, December 9, 2024 10:34â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315693581876330516 class=chatlog__message-container data-message-id=1315693581876330516><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bipman_1 data-user-id=260541070658502656>bipman_1</span> <span class=chatlog__timestamp title="Monday, December 9, 2024 9:56â€¯AM"><a href=#chatlog__message-container-1315693581876330516>12/9/2024 9:56â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there an easy way to convert Python code for Deeplake into Lance ?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315702985724002306 class=chatlog__message-container data-message-id=1315702985724002306><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Monday, December 9, 2024 10:33â€¯AM"><a href=#chatlog__message-container-1315702985724002306>12/9/2024 10:33â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi all <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg">  Potentially dumb question: if I&#39;m interested in understanding the size breakdown of my dataset (strictly the data, not the indices), is there an easy way to do that in lance/pyarrow/etc.? I&#39;m mostly curious to understand which columns are taking up the most space.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315718903535767556 class=chatlog__message-container data-message-id=1315718903535767556><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 9, 2024 11:37â€¯AM"> <a href=#chatlog__message-container-1315718903535767556>12/9/2024 11:37â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315719802051891250 class=chatlog__message-container data-message-id=1315719802051891250><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=connell__>connell</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1315678973812019232')"> Is there any information about how filter query plans are executed, which filters are applied first in the where clause etc. </span> <span class=chatlog__reply-edited-timestamp title="Monday, December 9, 2024 10:34â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Monday, December 9, 2024 11:40â€¯AM"><a href=#chatlog__message-container-1315719802051891250>12/9/2024 11:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m asking because I&#39;m seeing really bad preformance when executing range queries. 

Have compound scalar indexes been considered?

The materialize index in my query plan:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">MaterializeIndex: query=AND(AND(published_date_unix &gt;= 946684800,published_date_unix &lt;= 1801440000),company_id = 16)</code>

is about 10x as slow as:

<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">MaterializeIndex: query=company_id = 16</code>

even though we&#39;re preforming KNN on a much larger set in the latter case</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315721198226772078 class=chatlog__message-container data-message-id=1315721198226772078><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 9, 2024 11:46â€¯AM"> <a href=#chatlog__message-container-1315721198226772078>12/9/2024 11:46â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1315721711512977464 class=chatlog__message-container data-message-id=1315721711512977464><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 9, 2024 11:48â€¯AM"> <a href=#chatlog__message-container-1315721711512977464>12/9/2024 11:48â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1315733368046096529 class=chatlog__message-container data-message-id=1315733368046096529><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 9, 2024 12:34â€¯PM"> <a href=#chatlog__message-container-1315733368046096529>12/9/2024 12:34â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315746762362982501 class=chatlog__message-container data-message-id=1315746762362982501><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=max_mpc_85836 data-user-id=1301572016809447537>Max</span> <span class=chatlog__timestamp title="Monday, December 9, 2024 1:27â€¯PM"><a href=#chatlog__message-container-1315746762362982501>12/9/2024 1:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>My understanding is that when we use a pydantic schema to specify the embedding function we want to use for our vector field, the actual embedding processing happens locally on our side.

In that case, would the correct way to set the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">device</code> for this embedding be something like:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import lancedb
from lancedb.embeddings import get_registry
from sentence_transformers import SentenceTransformer

EMBEDDING_MODEL = (&quot;sentence-transformers&quot;, &quot;BAAI/bge-small-en-v1.5&quot;)
embedding_model = get_registry().get(EMBEDDING_MODEL[0]).create(name=EMBEDDING_MODEL[1])
embedding_model.device = &#39;mps&#39;</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1315777278667657322 class=chatlog__message-container data-message-id=1315777278667657322><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 9, 2024 3:29â€¯PM"> <a href=#chatlog__message-container-1315777278667657322>12/9/2024 3:29â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316041515021111297 class=chatlog__message-container data-message-id=1316041515021111297><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=h3zi7 data-user-id=907713037295841283>h3zi</span> <span class=chatlog__timestamp title="Tuesday, December 10, 2024 8:59â€¯AM"><a href=#chatlog__message-container-1316041515021111297>12/10/2024 8:59â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all 
After creating an index (IVF_PQ) is it possible to perform an exhaustive kNN search on the same table?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316051168245579827 class=chatlog__message-container data-message-id=1316051168245579827><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, December 10, 2024 9:37â€¯AM"> <a href=#chatlog__message-container-1316051168245579827>12/10/2024 9:37â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316146830400032969 class=chatlog__message-container data-message-id=1316146830400032969><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=max_mpc_85836 data-user-id=1301572016809447537>Max</span> <span class=chatlog__timestamp title="Tuesday, December 10, 2024 3:57â€¯PM"><a href=#chatlog__message-container-1316146830400032969>12/10/2024 3:57â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>When running <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.add(document_chunks)</code>, since this is doing vector embedding under the hood which might take a while, is it possible to get a progress bar or something like that for this operation? I don&#39;t see any built-in params to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table.add</code> in the docs, wondering if there&#39;s some workaround to showing a user progress speed / how long is left....</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316170025090154549 class=chatlog__message-container data-message-id=1316170025090154549><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, December 10, 2024 5:29â€¯PM"> <a href=#chatlog__message-container-1316170025090154549>12/10/2024 5:29â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316356338418319391 class=chatlog__message-container data-message-id=1316356338418319391><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/605834978865184793/598a7a8453df66efee2c202aacdd3c5e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fecet data-user-id=605834978865184793>Facet</span> <span class=chatlog__timestamp title="Wednesday, December 11, 2024 5:50â€¯AM"><a href=#chatlog__message-container-1316356338418319391>12/11/2024 5:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">write_fragments</code> for blob file isn&#39;t supported yet, 
<a href="https://github.com/lancedb/lance/blob/7ec23f033a7bc3a46607b82a0c90a939c869541f/python/src/fragment.rs#L494-L497">https://github.com/lancedb/lance/blob/7ec23f033a7bc3a46607b82a0c90a939c869541f/python/src/fragment.rs#L494-L497</a>
I would like to delve deeper into this content and see if I can make a contribution, how should I get started?</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/blob/7ec23f033a7bc3a46607b82a0c90a939c869541f/python/src/fragment.rs><div class="chatlog__markdown chatlog__markdown-preserve">lance/python/src/fragment.rs at 7ec23f033a7bc3a46607b82a0c90a939c86...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Modern columnar data format for ML and LLMs implemented in Rust. Convert from parquet in 2 lines of code for 100x faster random access, vector index, and data versioning. Compatible with Pandas, Du...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/ChYEupVPvD6WP1-9JePvoc84ZEmpMIy_qyb62BpGrVw/https/opengraph.githubassets.com/2006ddd8eee3d1dc899a9578d548ea39021c7ce6e565c93edda5d445b18f465c/lancedb/lance> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/ChYEupVPvD6WP1-9JePvoc84ZEmpMIy_qyb62BpGrVw/https/opengraph.githubassets.com/2006ddd8eee3d1dc899a9578d548ea39021c7ce6e565c93edda5d445b18f465c/lancedb/lance alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316381370234310721 class=chatlog__message-container data-message-id=1316381370234310721><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, December 11, 2024 7:29â€¯AM"> <a href=#chatlog__message-container-1316381370234310721>12/11/2024 7:29â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316447477716488275 class=chatlog__message-container data-message-id=1316447477716488275><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Wednesday, December 11, 2024 11:52â€¯AM"><a href=#chatlog__message-container-1316447477716488275>12/11/2024 11:52â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I am building pytorch training pipeline and I am strugling with dataloading. 

I currently follow this example:

<a href="https://github.com/lancedb/lance-deeplearning-recipes/blob/main/examples/image-classification/image-classification.ipynb">https://github.com/lancedb/lance-deeplearning-recipes/blob/main/examples/image-classification/image-classification.ipynb</a>

I have several questions:
1.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">     class MyLanceDataset():
         def __init__(uri):
             self.ds = lance.dataset(uri)
         def __item__(idx):
             row = self.ds.take([idx], columns=[&#39;image&#39;, &#39;captions&#39;]).to_pydict()
             ... convert to tensors ....
             return row

     dataset = MyLanceDataset(uri)
     loader = DataLoader(
        dataset,
        collate_fn=collate_fn,
        batch_size=args.batch_size_per_device,
        num_workers=4 ...</code>
When num_workers=0 everything works fine ... but when I add num_workers  &gt; 0 it blocks.

2. How can I add filtering when creating the dataset object. default_scan_options doesnt seem to work. Any suggestions on applying filter on dataset creation?

3. What is the suggested approach when using lancedb as a source for DDP dataloading?</span> <span class=chatlog__edited-timestamp title="Thursday, December 12, 2024 7:07â€¯AM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance-deeplearning-recipes/blob/main/examples/image-classification/image-classification.ipynb><div class="chatlog__markdown chatlog__markdown-preserve">lance-deeplearning-recipes/examples/image-classification/image-clas...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Deep Learning how-to&#39;s using Lance file format. Contribute to lancedb/lance-deeplearning-recipes development by creating an account on GitHub.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/T1NOhshpstEbboOB9DC3x_6O8klB_KS6XU-JW56lHoI/https/opengraph.githubassets.com/385aa8ea0ecec3c274263ca2432b552bfa419f385d284162f9547041fb66effb/lancedb/lance-deeplearning-recipes> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/T1NOhshpstEbboOB9DC3x_6O8klB_KS6XU-JW56lHoI/https/opengraph.githubassets.com/385aa8ea0ecec3c274263ca2432b552bfa419f385d284162f9547041fb66effb/lancedb/lance-deeplearning-recipes alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316487893216137226 class=chatlog__message-container data-message-id=1316487893216137226><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=max_mpc_85836 data-user-id=1301572016809447537>Max</span> <span class=chatlog__timestamp title="Wednesday, December 11, 2024 2:32â€¯PM"><a href=#chatlog__message-container-1316487893216137226>12/11/2024 2:32â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I&#39;m getting a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.remote.errors.HttpError:...401 Unauthorized</code> error when trying to create a table in one of my two lancedb cloud &#39;project&#39; / connection strings. The same exact code works when I just swap out my <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">DB_URI</code> variable for the connection string for the other db/project shown in my lancedb dashboard. same api key used. Wondering why I can write to one of my db/projects but not the other?

Thanks!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316492959616598051 class=chatlog__message-container data-message-id=1316492959616598051><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, December 11, 2024 2:53â€¯PM"> <a href=#chatlog__message-container-1316492959616598051>12/11/2024 2:53â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316554817753055274 class=chatlog__message-container data-message-id=1316554817753055274><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span class=chatlog__timestamp title="Wednesday, December 11, 2024 6:58â€¯PM"><a href=#chatlog__message-container-1316554817753055274>12/11/2024 6:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Compaction error: Hi, I am trying to compact / optimize a table, but getting this error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">OSError: Query Execution error: Execution error: Row ids did not arrive in sorted order: integers are ordered up to the 0th element, /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/core/src/task/poll.rs:290:44</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1316806964394852362 class=chatlog__message-container data-message-id=1316806964394852362><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Thursday, December 12, 2024 11:40â€¯AM"><a href=#chatlog__message-container-1316806964394852362>12/12/2024 11:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks ... I am really struggling with one problem. This is my schema where I have images devided into buckets based on resolution. I want to build dataloader in pytorch such that I can pass bucket<em>id and pull images belonging to the same bucket from lance db. But I am struggling with applying filters to lance dataset. Are there any examples with similar use-cases? I am using this as a  starting point?
<a href="https://github.com/lancedb/lance-deeplearning-recipes/blob/main/examples/image-classification/image-classification.ipynb">https://github.com/lancedb/lance-deeplearning-recipes/blob/main/examples/image-classification/image-classification.ipynb</a>

```
    _schema = pa.schema([
        pa.field(&quot;image&quot;, pa.binary(), nullable=False),
        pa.field(&quot;captions&quot;, pa.list</em>(pa.string()), nullable=False),
        pa.field(&quot;bucket_id&quot;, pa.int64(), nullable=False),
        pa.field(&quot;bucket_height&quot;, pa.int64(), nullable=False),
        pa.field(&quot;bucket_width&quot;, pa.int64(), nullable=False),
        pa.field(&quot;bucket_aspect&quot;, pa.float32(), nullable=False)
    ])</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance-deeplearning-recipes/blob/main/examples/image-classification/image-classification.ipynb><div class="chatlog__markdown chatlog__markdown-preserve">lance-deeplearning-recipes/examples/image-classification/image-clas...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Deep Learning how-to&#39;s using Lance file format. Contribute to lancedb/lance-deeplearning-recipes development by creating an account on GitHub.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1317150264754704457 class=chatlog__message-container data-message-id=1317150264754704457><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Friday, December 13, 2024 10:24â€¯AM"><a href=#chatlog__message-container-1317150264754704457>12/13/2024 10:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I noticed there&#39;s no <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">close()</code> method on async tables and they don&#39;t support the asynchronous context manager protocol, can I just assume everything will work if I&#39;m opening a lot of tables and building indexes iteratively?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1317163409061712007 class=chatlog__message-container data-message-id=1317163409061712007><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, December 13, 2024 11:17â€¯AM"> <a href=#chatlog__message-container-1317163409061712007>12/13/2024 11:17â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1317180193470808118 class=chatlog__message-container data-message-id=1317180193470808118><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, December 13, 2024 12:23â€¯PM"> <a href=#chatlog__message-container-1317180193470808118>12/13/2024 12:23â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1317702540636328047 class=chatlog__message-container data-message-id=1317702540636328047><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cccccccill data-user-id=1098498844611854377>Shadowmem</span> <span class=chatlog__timestamp title="Saturday, December 14, 2024 10:59â€¯PM"><a href=#chatlog__message-container-1317702540636328047>12/14/2024 10:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey guys, I would like to ask what is the default method used to calculate <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_distance</code> in a KNN brute-force search (without indexing)? I looked through the documentation but found relevant descriptions all about indexing. 
It seems not L2, and I used this code to calculate the L2 distance:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python"># get L2 distance from two list
def get_L2(array1, array2):
    a = np.array(array1)
    b = np.array(array2)
    return np.linalg.norm(a - b)</code></span> <span class=chatlog__edited-timestamp title="Sunday, December 15, 2024 1:25â€¯AM">(edited)</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1317702540439326750/image.png?ex=697b83df&amp;is=697a325f&amp;hm=da2717f94ab9bbe56478ecec73628a1bef07ec5e58d2e44917fecd6bd6b15c7c&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1317702540439326750/image.png?ex=697b83df&amp;is=697a325f&amp;hm=da2717f94ab9bbe56478ecec73628a1bef07ec5e58d2e44917fecd6bd6b15c7c&amp;" alt="Image attachment" title="Image: image.png (125.29 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1317860286686040125 class=chatlog__message-container data-message-id=1317860286686040125><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Sunday, December 15, 2024 9:26â€¯AM"><a href=#chatlog__message-container-1317860286686040125>12/15/2024 9:26â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I restored an s3 bucket from EFS. I&#39;m using a dynamo db table for write concurrency, is there a way I can &quot;sync&quot; the dynamo db table with whats in s3 now?

if I use the dynamo db connection string:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">db = await db.connect_asyncio(&quot;s3+ddb://my-db?with dynamo table&quot;)
await db.table_names() 
# contains the table I&#39;m trying to open but ...
await db.open_table(&quot;table&quot;)
#  Table &#39;table&#39; was not found</code>

But if I&#39;m not using the dynamo connection string that all works as expected</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1317945683470192703 class=chatlog__message-container data-message-id=1317945683470192703><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=renato2099_ data-user-id=1197089946683584522>R2099</span> <span class=chatlog__timestamp title="Sunday, December 15, 2024 3:05â€¯PM"><a href=#chatlog__message-container-1317945683470192703>12/15/2024 3:05â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi I was trying to build the docs locally , but I keep on getting errors such as <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ERROR   -  mkdocstrings: lancedb.index.Bitmap could not be found</code>, but I can see it here in main <a href="https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/index.py#L56">https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/index.py#L56</a> any ideas of what is wrong?</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/index.py><div class="chatlog__markdown chatlog__markdown-preserve">lancedb/python/python/lancedb/index.py at main &#183; lancedb/lancedb</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Developer-friendly, serverless vector database for AI applications. Easily add long-term memory to your LLM apps! - lancedb/lancedb</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/JWqwWPXS8xZDhjvwaHtktEUlhUp03_8J0l5m6vzFUs4/https/opengraph.githubassets.com/23f7c3ffb8f49cf30ab84dfa1bcab821a58700322eaa62da0ae61e52a8c73766/lancedb/lancedb> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/JWqwWPXS8xZDhjvwaHtktEUlhUp03_8J0l5m6vzFUs4/https/opengraph.githubassets.com/23f7c3ffb8f49cf30ab84dfa1bcab821a58700322eaa62da0ae61e52a8c73766/lancedb/lancedb alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1318147771001212964 class=chatlog__message-container data-message-id=1318147771001212964><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 16, 2024 4:28â€¯AM"> <a href=#chatlog__message-container-1318147771001212964>12/16/2024 4:28â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1318184798446948372 class=chatlog__message-container data-message-id=1318184798446948372><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=h3zi7 data-user-id=907713037295841283>h3zi</span> <span class=chatlog__timestamp title="Monday, December 16, 2024 6:55â€¯AM"><a href=#chatlog__message-container-1318184798446948372>12/16/2024 6:55â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, i would like to contribute some bug fix. I couldn&#39;t find any contribution guide except <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">python/README.md</code> that instruct how to create development environment.
So I tried to follow the instructions but got error when trying to run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">python -m pip install .[tests,dev]</code>
<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">ERROR: No matching distribution found for pylance==0.21.0b4
</div></div>
I guess its a noob question, but how can I install this pylance version while its not published?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1318219267740532831 class=chatlog__message-container data-message-id=1318219267740532831><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 16, 2024 9:12â€¯AM"> <a href=#chatlog__message-container-1318219267740532831>12/16/2024 9:12â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1318222315376345105 class=chatlog__message-container data-message-id=1318222315376345105><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 16, 2024 9:24â€¯AM"> <a href=#chatlog__message-container-1318222315376345105>12/16/2024 9:24â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1318446213124722749 class=chatlog__message-container data-message-id=1318446213124722749><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, December 17, 2024 12:14â€¯AM"> <a href=#chatlog__message-container-1318446213124722749>12/17/2024 12:14â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1318659136241799268 class=chatlog__message-container data-message-id=1318659136241799268><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/777105538004549643/e3aa5fdd5a44cba05992b928838c60c5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=alexagr9268 data-user-id=777105538004549643>alexagr</span> <span class=chatlog__timestamp title="Tuesday, December 17, 2024 2:20â€¯PM"><a href=#chatlog__message-container-1318659136241799268>12/17/2024 2:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m using lancedb and trying to convert my sync code to async - and can&#39;t figure out how to do that for my searches.

Here is a simple synchronous code that works just fine:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">result = tbl.search(embedding).metric(&#39;cosine&#39;).limit(5)
records = result.to_arrow().to_pylist()</code>

Since <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">AsyncTable</code> lacks <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">search</code> method - I tried to replace it with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">vector_search</code>:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">result = tbl.vector_search(embedding).distance_type(&#39;cosine&#39;).limit(5)
records = asyncio.run(result.to_arrow()).to_pylist()</code>
But I get the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError: lance error: LanceError(IO): sql parser error: Expected an expression:, found: EOF, C:\Users\runneradmin\.cargo\registry\src\index.crates.io-6f17d22bba15001f\lance-0.12.1\src\utils\sql.rs:100:8</code>

What am I doing wrong?</span> <span class=chatlog__edited-timestamp title="Tuesday, December 17, 2024 2:20â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1318818561854017548 class=chatlog__message-container data-message-id=1318818561854017548><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/777105538004549643/e3aa5fdd5a44cba05992b928838c60c5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=alexagr9268 data-user-id=777105538004549643>alexagr</span> <span class=chatlog__timestamp title="Wednesday, December 18, 2024 12:54â€¯AM"><a href=#chatlog__message-container-1318818561854017548>12/18/2024 12:54â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>And one more question - I have a single table where I insert and delete chunks of different documents. Every document has unique &quot;id&quot;. And I&#39;m using filter in search/vector_search to perform search in relevant documents only. I noticed that when I delete a document, DB size doesn&#39;t decrease. And this, in fact, is according to documentation - that says that deleted data is NOT actually deleted from the DB, but just marked as &quot;deleted&quot; - so that it can be later recovered if needed. With sync client I used <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cleanup_old_versions</code> to shrink the database after document deletion. But the async client lacks such method. Is there any alternative in it?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1318987062652698761 class=chatlog__message-container data-message-id=1318987062652698761><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, December 18, 2024 12:03â€¯PM"> <a href=#chatlog__message-container-1318987062652698761>12/18/2024 12:03â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1319075371819470939 class=chatlog__message-container data-message-id=1319075371819470939><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/502710109441359872/e39821ca485dcea6d47aa4c9b7f4ca8f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=enigmarv data-user-id=502710109441359872>Enigmarv ðŸ‘¾</span> <span class=chatlog__timestamp title="Wednesday, December 18, 2024 5:54â€¯PM"><a href=#chatlog__message-container-1319075371819470939>12/18/2024 5:54â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, is there a contributing guide available?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1319201958032314368 class=chatlog__message-container data-message-id=1319201958032314368><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, December 19, 2024 2:17â€¯AM"> <a href=#chatlog__message-container-1319201958032314368>12/19/2024 2:17â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1319390068259029002 class=chatlog__message-container data-message-id=1319390068259029002><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/431559508565688340/d8d310172365563179a162e8bb2ac14d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=spoice9365 data-user-id=431559508565688340>weenie</span> <span class=chatlog__timestamp title="Thursday, December 19, 2024 2:45â€¯PM"><a href=#chatlog__message-container-1319390068259029002>12/19/2024 2:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, some of my infrastructure failed while I was doing a table write and now whenever I try to run methods on the table I get the following error: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ValueError: LanceError(IO): does not have sufficient data, len: 0, bytes, b&quot;&quot;, /home/runner/work/lance/lance/rust/lance-io/src/utils.rs:137:13</code>
It seems to be some sort of failure while reading metadata.  Is there anyway to fix this?  I would prefer to not have to re-embed the 65 million rows I have in the table already.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1319566527766331453 class=chatlog__message-container data-message-id=1319566527766331453><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=laxas1331 data-user-id=833576310072803329>laxas1331</span> <span class=chatlog__timestamp title="Friday, December 20, 2024 2:26â€¯AM"><a href=#chatlog__message-container-1319566527766331453>12/20/2024 2:26â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, what is the best way to search for an exact value in a table?
The best I have come up with is the following:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">data.search().where(&quot;sha = &#39;xxx&#39;&quot;, prefilter=True).to_arrow()</code>
However, this is very slow on a medium-sized table (400_000 rows).
Is there a way to build an index to speed it up?
Is there a fast way to check if the value is in the tabel at all? If yes, I could set a limit of 1 in some cases which is about 50x faster.</span> <span class=chatlog__edited-timestamp title="Friday, December 20, 2024 9:29â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1319722670560120887 class=chatlog__message-container data-message-id=1319722670560120887><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, December 20, 2024 12:46â€¯PM"> <a href=#chatlog__message-container-1319722670560120887>12/20/2024 12:46â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1321118496247250954 class=chatlog__message-container data-message-id=1321118496247250954><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=h3zi7 data-user-id=907713037295841283>h3zi</span> <span class=chatlog__timestamp title="Tuesday, December 24, 2024 9:13â€¯AM"><a href=#chatlog__message-container-1321118496247250954>12/24/2024 9:13â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there,
Iâ€™m currently POCing LanceDB and wanted to share my experience while seeking some guidance.

I have a table with the following schema:
    â€¢    vector: 512 dimensions
    â€¢    key: string

The dataset consists of about <strong>57M</strong> records. I inserted the records in parallel into S3, using a DynamoDB table as a commit store. Each insert batch contained approximately 1,000 vectors.

Observations:
    1.    DynamoDB Capacity Issues
Initially, I encountered errors during the insertion process due to insufficient read/write capacity. To resolve this, I switched the DynamoDB table to on-demand capacity mode, which eliminated about 95% of the errors.
    2.    Compaction Performance
I ran a compaction operation, which surprisingly completed in under 15 minutes. I expected this process to take much longer given the dataset size.
    3.    Cleanup Challenges
However, Iâ€™m facing issues with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">table.cleanup_old_versions(older_than=timedelta(0))</code>. The process runs for 20â€“60 minutes before failing with errors like the following:
<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">OSError: LanceError(IO): Generic S3 error: Error performing DeleteObjects request: Error after 10 retries in 10.85143729s, max_retries:10, retry_timeout:180s, source:HTTP status server error (503 Service Unavailable) for url (<a href="https://s3.us-east-1.amazonaws.com/some-bucket?delete)">https://s3.us-east-1.amazonaws.com/some-bucket?delete)</a>, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/futures-util-0.3.31/src/fns.rs:368:13
</div></div>
It seems the cleanup process is hitting S3 limits or encountering transient errors. Has anyone encountered a similar issue or have suggestions for addressing these errors?

Thanks!</span> <span class=chatlog__edited-timestamp title="Tuesday, December 24, 2024 9:17â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1321157261648859271 class=chatlog__message-container data-message-id=1321157261648859271><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, December 24, 2024 11:47â€¯AM"> <a href=#chatlog__message-container-1321157261648859271>12/24/2024 11:47â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1323036794450739220 class=chatlog__message-container data-message-id=1323036794450739220><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=renato2099_ data-user-id=1197089946683584522>R2099</span> <span class=chatlog__timestamp title="Sunday, December 29, 2024 4:15â€¯PM"><a href=#chatlog__message-container-1323036794450739220>12/29/2024 4:15â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>hi all, I was trying to follow this <a href="https://github.com/lancedb/lance/wiki/How-to-Build">https://github.com/lancedb/lance/wiki/How-to-Build</a> , but when running <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">maturin develop --extras tests</code> I get the following error 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Requirement already satisfied: deprecation in /Users/rmarroqu/Documents/workspace/lancedb-env/lib/python3.12/site-packages (2.1.0)
ERROR: Ignored the following yanked versions: 0.0.2, 0.3.3
ERROR: Could not find a version that satisfies the requirement pylance==0.21.0b5 (from versions: 0.3.0, ..., 0.19.1, 0.19.2, 0.20.0, 0.21.0)
ERROR: No matching distribution found for pylance==0.21.0b5
&#128165; maturin failed</code>
any suggestions are highly appreciated</span> <span class=chatlog__edited-timestamp title="Sunday, December 29, 2024 6:05â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=eyes><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘€ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f440.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1323331119747174442 class=chatlog__message-container data-message-id=1323331119747174442><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/283390147700195330/31e5404d0eb16eb17c0a29e4ca4cf21a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=renato2099_>R2099</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1323036794450739220')"> hi all, I was trying to follow this <a href="https://github.com/lancedb/lance/wiki/How-to-Build">https://github.com/lancedb/lance/wiki/How-to-Build</a> , but when running <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">maturin develop --extras tests</code> I get the following error 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Requirement already satisfied: deprecation in /Users/rmarroqu/Documents/workspace/lancedb-env/lib/python3.12/site-packages (2.1.0)
ERROR: Ignored the following yanked versions: 0.0.2, 0.3.3
ERROR: Could not find a version that satisfies the requirement pylance==0.21.0b5 (from versions: 0.3.0, ..., 0.19.1, 0.19.2, 0.20.0, 0.21.0)
ERROR: No matching distribution found for pylance==0.21.0b5
&#128165; maturin failed</code>
any suggestions are highly appreciated </span> <span class=chatlog__reply-edited-timestamp title="Sunday, December 29, 2024 6:05â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=nbtel data-user-id=283390147700195330>nbtel</span> <span class=chatlog__timestamp title="Monday, December 30, 2024 11:45â€¯AM"><a href=#chatlog__message-container-1323331119747174442>12/30/2024 11:45â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi <span class="chatlog__markdown-mention" title="renato2099_">@R2099</span>  are you trying to build lance, or lancedb? The reason I ask is that I get that same error when I try to use those instructions in the lancedb repo, but it is possible to work around it by passing setting the environment variable: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">PIP_EXTRA_INDEX_URL=https://pypi.fury.io/lancedb/</code>

For example:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">PIP_EXTRA_INDEX_URL=https://pypi.fury.io/lancedb/ maturin develop --extras tests</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1323345651706363938 class=chatlog__message-container data-message-id=1323345651706363938><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=renato2099_ data-user-id=1197089946683584522>R2099</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 30, 2024 12:43â€¯PM"> <a href=#chatlog__message-container-1323345651706363938>12/30/2024 12:43â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1324818163271205037 class=chatlog__message-container data-message-id=1324818163271205037><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/508557764188962817/aadf582bbfae61fe5eaeb4af576ae063.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=uwuwuwuwuwuwuw data-user-id=508557764188962817>uwuwushiwu</span> <span class=chatlog__timestamp title="Friday, January 3, 2025 2:14â€¯PM"><a href=#chatlog__message-container-1324818163271205037>1/3/2025 2:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I&#39;m new to LanceDB and have been trying out the new native FTS feature. My current code is quite janky. I am trying to benchmark database performances by writing drivers to automate the benchmarking. For the benchmarking, I am uploading huge records of movies in batches, then performing a search based on a set of keywords such as &quot;love&quot;, &quot;space&quot; etc. However, I keep getting 0 results from these searches. I suspect it has to do with how im trying to make synchronous calls in an async context. But I dont quite understand what is exactly causing the issue. Am I perhaps doing a search before all records were indexed, causing 0 results?

Here&#39;s the output log from the code attached too.</span></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1324818161996136520/lancedb-disk.py?ex=697bb18f&amp;is=697a600f&amp;hm=85f411d584d205e841d99e6cd763c424172ad18b5bbc1a4794f41988f6349804&amp;"> lancedb-disk.py </a></div><div class=chatlog__attachment-generic-size>4.07 KB</div></div></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1324818163115753512/log.txt?ex=697bb190&amp;is=697a6010&amp;hm=8ec162184db83be478b630458f0a6032ddd05827b3f68e1da9866350e11e573b&amp;"> log.txt </a></div><div class=chatlog__attachment-generic-size>1.91 KB</div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1324823316522860629 class=chatlog__message-container data-message-id=1324823316522860629><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, January 3, 2025 2:34â€¯PM"> <a href=#chatlog__message-container-1324823316522860629>1/3/2025 2:34â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1325672964271636570 class=chatlog__message-container data-message-id=1325672964271636570><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, January 5, 2025 10:51â€¯PM"> <a href=#chatlog__message-container-1325672964271636570>1/5/2025 10:51â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1326143075432792155 class=chatlog__message-container data-message-id=1326143075432792155><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/866288178079334420/19343dc0c56091668d88f09a3b4077ae.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=mr.ludvi data-user-id=866288178079334420>ludvi</span> <span class=chatlog__timestamp title="Tuesday, January 7, 2025 5:59â€¯AM"><a href=#chatlog__message-container-1326143075432792155>1/7/2025 5:59â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, Iâ€™m evaluating LanceDB for my company. Wondering if someone can shed some light on if we can use multiple vectors for a the same text. 

That is, we have different embedding models whose efficacy we want to test, i was wondering we if we can represent them as different fields in the same pydantic model</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1326213029838458924 class=chatlog__message-container data-message-id=1326213029838458924><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/679376449320517663/f10a90cc294fa24cac84d663bdb21d33.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=iterrad3140 data-user-id=679376449320517663>talkasab</span> <span class=chatlog__timestamp title="Tuesday, January 7, 2025 10:37â€¯AM"><a href=#chatlog__message-container-1326213029838458924>1/7/2025 10:37â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ve been getting LanceDB spun up. One issue I&#39;ve had is with using the FTS in LanceDB Cloudâ€”when I try to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_fts_index</code>, I get an error about the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_loop</code> not being defined on <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">RemoteTable</code>.
How are we supposed to define a FTS on a table in the LanceDB Cloud?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1326226423840637059 class=chatlog__message-container data-message-id=1326226423840637059><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=shawnova_43649 data-user-id=1305855189940441124>shawnova</span> <span class=chatlog__timestamp title="Tuesday, January 7, 2025 11:30â€¯AM"><a href=#chatlog__message-container-1326226423840637059>1/7/2025 11:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi. Is it available to fine-tune ColBERT or other rerankers directly through the corpus already made?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1326230042635665443 class=chatlog__message-container data-message-id=1326230042635665443><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, January 7, 2025 11:44â€¯AM"> <a href=#chatlog__message-container-1326230042635665443>1/7/2025 11:44â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1326232112193605687 class=chatlog__message-container data-message-id=1326232112193605687><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, January 7, 2025 11:52â€¯AM"> <a href=#chatlog__message-container-1326232112193605687>1/7/2025 11:52â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1326878826671902773 class=chatlog__message-container data-message-id=1326878826671902773><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Thursday, January 9, 2025 6:42â€¯AM"><a href=#chatlog__message-container-1326878826671902773>1/9/2025 6:42â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks, lance + ray really doesnt work as expected. I opened new issue here:

<a href="https://github.com/lancedb/lance/issues/3361">https://github.com/lancedb/lance/issues/3361</a>

And this isn&#39;t really the fix for the problem:
<a href="https://github.com/lancedb/lance/issues/3308">https://github.com/lancedb/lance/issues/3308</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1327101643237363828 class=chatlog__message-container data-message-id=1327101643237363828><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, January 9, 2025 9:28â€¯PM"> <a href=#chatlog__message-container-1327101643237363828>1/9/2025 9:28â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1327399971254960211 class=chatlog__message-container data-message-id=1327399971254960211><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/626215642986709009/d3aa1774f57157ac2117039a93ab970b.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cabreraalex data-user-id=626215642986709009>cabreraalex</span> <span class=chatlog__timestamp title="Friday, January 10, 2025 5:13â€¯PM"><a href=#chatlog__message-container-1327399971254960211>1/10/2025 5:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey ya&#39;ll! I&#39;m trying to better understand filter pushdown and data egress when using s3. I ran a big job that did a significant number of queries and ended up spending a pretty penny on AWS egress of multiple terabyte (our whole DB is 150gb). 

How can I estimate how many chunks and how much data will be downloaded from S3 for a given query?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1327407945214066710 class=chatlog__message-container data-message-id=1327407945214066710><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, January 10, 2025 5:45â€¯PM"> <a href=#chatlog__message-container-1327407945214066710>1/10/2025 5:45â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1328131686365528064 class=chatlog__message-container data-message-id=1328131686365528064><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/704889332057505843/b630eed2f00dd26d74996af9e8f297db.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=enjalot data-user-id=704889332057505843>enjalot</span> <span class=chatlog__timestamp title="Sunday, January 12, 2025 5:41â€¯PM"><a href=#chatlog__message-container-1328131686365528064>1/12/2025 5:41â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is there a fast way to grab rows given a list of row indices? i could probably do .where(&#39;index IN [10, 35, 66, ...]&#39;) since i have an &quot;index&quot; column, but i&#39;m not sure that&#39;s the most efficient?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1328347571999211584 class=chatlog__message-container data-message-id=1328347571999211584><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, January 13, 2025 7:59â€¯AM"> <a href=#chatlog__message-container-1328347571999211584>1/13/2025 7:59â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1328354757747937281 class=chatlog__message-container data-message-id=1328354757747937281><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/679376449320517663/f10a90cc294fa24cac84d663bdb21d33.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=iterrad3140 data-user-id=679376449320517663>talkasab</span> <span class=chatlog__timestamp title="Monday, January 13, 2025 8:27â€¯AM"><a href=#chatlog__message-container-1328354757747937281>1/13/2025 8:27â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way to use the async interface to do a hybrid search? This seems like it should definitely be an asynchronous operation.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1328398003752403046 class=chatlog__message-container data-message-id=1328398003752403046><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Monday, January 13, 2025 11:19â€¯AM"><a href=#chatlog__message-container-1328398003752403046>1/13/2025 11:19â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way to store multi- dimensional tensors in lancedb?

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import numpy as np
import lancedb
uri = &quot;data/sample-lancedb&quot;
db = lancedb.connect(uri)
data = [{&quot;vec&quot;: np.random.random((3, 7, 5)).astype(&#39;float32&#39;)}]

data = data * 100

# Add the vectors to a table
tbl = db.create_table(&quot;vectors&quot;, data=data)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1328404449588416606 class=chatlog__message-container data-message-id=1328404449588416606><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, January 13, 2025 11:45â€¯AM"> <a href=#chatlog__message-container-1328404449588416606>1/13/2025 11:45â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1328554028262756427 class=chatlog__message-container data-message-id=1328554028262756427><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=luqiu_87609 data-user-id=1209390552148090902>Lu Qiu</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, January 13, 2025 9:39â€¯PM"> <a href=#chatlog__message-container-1328554028262756427>1/13/2025 9:39â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1329154444721651773 class=chatlog__message-container data-message-id=1329154444721651773><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Wednesday, January 15, 2025 1:25â€¯PM"><a href=#chatlog__message-container-1329154444721651773>1/15/2025 1:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have 2 versions of my pytorch dataset where in one I use lance and do:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">row = self.ds.take([idx], columns=[&#39;image&#39;]).to_pydict()
image = Image.open(BytesIO(row[&#39;image&#39;])

...</code>
and in second i just load image from the disk:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">image = Image.open(&#39;same_idx_image_loading_from_the_disk.png&#39;
...</code>

I am getting almost identical results in terms of speed. Is that expected? I thought it would be faster when reading from lance. My <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">image</code> column is type <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pa.binary</code></span> <span class=chatlog__edited-timestamp title="Wednesday, January 15, 2025 1:26â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1329254998928003148 class=chatlog__message-container data-message-id=1329254998928003148><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, January 15, 2025 8:04â€¯PM"> <a href=#chatlog__message-container-1329254998928003148>1/15/2025 8:04â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1329257431062024203 class=chatlog__message-container data-message-id=1329257431062024203><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/95657392183709696/651f1b2e5139e92338141edffcb0ce60.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cyber_dreammer data-user-id=95657392183709696>CyberDreamer</span> <span class=chatlog__timestamp title="Wednesday, January 15, 2025 8:14â€¯PM"><a href=#chatlog__message-container-1329257431062024203>1/15/2025 8:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>How can I get a random set of vectors from the database? I have a large database and I can&#39;t convert the data to pandas<img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜­"
    title="sob"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f62d.svg"> .  Is there any way?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1329502776132239510 class=chatlog__message-container data-message-id=1329502776132239510><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=requizm data-user-id=177427169495089152>requizm</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, January 16, 2025 12:29â€¯PM"> <a href=#chatlog__message-container-1329502776132239510>1/16/2025 12:29â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1329636344410017853 class=chatlog__message-container data-message-id=1329636344410017853><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1049207486235820084/5445ffd7ffb201a98393cbdf684ea4b1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deepakkatch data-user-id=1049207486235820084>DeepakKatch</span> <span class=chatlog__timestamp title="Thursday, January 16, 2025 9:20â€¯PM"><a href=#chatlog__message-container-1329636344410017853>1/16/2025 9:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey Team, I&#39;m trying to add new column using udf  to a table that resides in Azure Blob. Getting this warning message and the operation is very slow 

<strong>WARN : Backpressure throttle is full, I/O will pause until buffer is drained.  Max I/O bandwidth will not be achieved because CPU is falling behind
</strong>
Any idea on how to make this operation fast ? 
Also, I am using sync functions for this operation since I could not find native async functions for adding column in lance</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1329709329481338972 class=chatlog__message-container data-message-id=1329709329481338972><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/604607887465119754/8f51bb1a737ae4b29a60859869cc72bc.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=lawjarp_a data-user-id=604607887465119754>LawJarp</span> <span class=chatlog__timestamp title="Friday, January 17, 2025 2:10â€¯AM"><a href=#chatlog__message-container-1329709329481338972>1/17/2025 2:10â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey team!
I am trying to use Lance dataset in a PyTorch dataset, and I am struggling to use it with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">num_workers&gt;0</code>, it just hangs.
I need some help in understanding how best to use my lance for pytorch training.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1331321205621526580 class=chatlog__message-container data-message-id=1331321205621526580><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Tuesday, January 21, 2025 12:55â€¯PM"><a href=#chatlog__message-container-1331321205621526580>1/21/2025 12:55â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is the Blob api stable/recommended atm? Not seeing any docs on how to create a dataset with a blob column / how to update an existing column to be of type blob</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1331376379916189764 class=chatlog__message-container data-message-id=1331376379916189764><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, January 21, 2025 4:34â€¯PM"> <a href=#chatlog__message-container-1331376379916189764>1/21/2025 4:34â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1331665622488186900 class=chatlog__message-container data-message-id=1331665622488186900><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/704889332057505843/b630eed2f00dd26d74996af9e8f297db.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=enjalot data-user-id=704889332057505843>enjalot</span> <span class=chatlog__timestamp title="Wednesday, January 22, 2025 11:43â€¯AM"><a href=#chatlog__message-container-1331665622488186900>1/22/2025 11:43â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m having a strange issue where i&#39;m trying to double quote a capitalized column name in my where() but I&#39;m getting no results. I also notice that if I double quote a lowercase column name it returns no results (with a valid query that returns results if i dont quote it.
this works: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">column_name = f&#39;text&#39;
table.search().where(f&quot;{column_name} LIKE &#39;Economics%&#39;&quot;).select([&quot;text&quot;]).to_list()</code>
this does not:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">column_name = f&#39;&quot;text&quot;&#39;
table.search().where(f&quot;{column_name} LIKE &#39;Economics%&#39;&quot;).select([&quot;text&quot;]).to_list()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1331708923077595247 class=chatlog__message-container data-message-id=1331708923077595247><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Wednesday, January 22, 2025 2:35â€¯PM"><a href=#chatlog__message-container-1331708923077595247>1/22/2025 2:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is it possible/safe to have multiple processes to commit appends in parallel (against the same initial read_version)?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">op = lance.LanceOperation.Append(fragments)
lance.LanceDataset.commit(
    self.uri,
    op,
    read_version=self.read_version,
    storage_options=self.storage_options,
)</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.LanceDataset.commit</code> warns that the commit handler is unsafe but I&#39;m curious if this is something that can be ignored for appends</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1331740533739229239 class=chatlog__message-container data-message-id=1331740533739229239><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, January 22, 2025 4:41â€¯PM"> <a href=#chatlog__message-container-1331740533739229239>1/22/2025 4:41â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1331741323618943014 class=chatlog__message-container data-message-id=1331741323618943014><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, January 22, 2025 4:44â€¯PM"> <a href=#chatlog__message-container-1331741323618943014>1/22/2025 4:44â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1332331977608794113 class=chatlog__message-container data-message-id=1332331977608794113><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=rahul_valyu data-user-id=1332323362201931859>Rahul</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, January 24, 2025 7:51â€¯AM"> <a href=#chatlog__message-container-1332331977608794113>1/24/2025 7:51â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1333374472811446283 class=chatlog__message-container data-message-id=1333374472811446283><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=h3zi7 data-user-id=907713037295841283>h3zi</span> <span class=chatlog__timestamp title="Monday, January 27, 2025 4:54â€¯AM"><a href=#chatlog__message-container-1333374472811446283>1/27/2025 4:54â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there!
Im about to migrate from milvus to lance.
Currently we use IP (Inner Product) on normalized vectors to build the index and for searching.

I wonder what would the most similar metric to use in Lance, either Dot Product or Cosine 
Attaching milvus docs regards IP metric

Thanks!</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1333374472601862204/image.png?ex=697bd6ff&amp;is=697a857f&amp;hm=32bcc145f45009da5f18a9b4bb6e7cb80976079496ffee258de97362e51c29f4&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1333374472601862204/image.png?ex=697bd6ff&amp;is=697a857f&amp;hm=32bcc145f45009da5f18a9b4bb6e7cb80976079496ffee258de97362e51c29f4&amp;" alt="Image attachment" title="Image: image.png (63.69 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1333509194514432105 class=chatlog__message-container data-message-id=1333509194514432105><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=qian_00349 data-user-id=1139637723725041674>Qian</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, January 27, 2025 1:49â€¯PM"> <a href=#chatlog__message-container-1333509194514432105>1/27/2025 1:49â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1334727351853908091 class=chatlog__message-container data-message-id=1334727351853908091><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1029105140042580018/e5b8a348eddab33375ae21e2a207c1c9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=deviousdata data-user-id=1029105140042580018>DeviousData</span> <span class=chatlog__timestamp title="Thursday, January 30, 2025 10:29â€¯PM"><a href=#chatlog__message-container-1334727351853908091>1/30/2025 10:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>If I make an IVF index, can I access each partition&#39;s k-means centroid? I&#39;m hoping for something like this
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">tbl.index.centroids # tensor of shape (num_centroids, embedding_dim)</code>
Please let me know if there is a better channel to ask this in. Thanks!</span> <span class=chatlog__edited-timestamp title="Thursday, January 30, 2025 10:43â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1334891051349184523 class=chatlog__message-container data-message-id=1334891051349184523><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, January 31, 2025 9:20â€¯AM"> <a href=#chatlog__message-container-1334891051349184523>1/31/2025 9:20â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1335321034701668524 class=chatlog__message-container data-message-id=1335321034701668524><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/779784350320689152/1fd145c1b6ca0dad1e498fe85a4a02d9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=nicolaygerold data-user-id=779784350320689152>Nicolay</span> <span class=chatlog__timestamp title="Saturday, February 1, 2025 1:49â€¯PM"><a href=#chatlog__message-container-1335321034701668524>2/1/2025 1:49â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>RuntimeError: lance error: Commit conflict for version 14: There was a concurrent commit that conflicts with this one and it cannot be automatically resolved. Please rerun the operation off the latest version of the table.
 Transaction: Transaction { read_version: 11, uuid: &quot;facc0684-16bf-4cf6-bd3e-39b2dcd3e498&quot;, operation: Rewrite { groups: [RewriteGroup { old_fragments: [Fragment { id: 4, files: [DataFile { path: &quot;ac840b03-49a2-4081-9e79-ee327c17070d.lance&quot;, fields: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], column_indices: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], file_major_version: 2, file_minor_version: 0 }], deletion_file: None, row_id_meta: None, physical_rows: Some(3) }, Fragment { id: 5, files: [DataFile { path: &quot;fb051f86-f813-4a67-85c6-ad3015a194b4.lance&quot;, fields: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], column_indices: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], file_major_version: 2, file_minor_version: 0 }], deletion_file: None, row_id_meta: None, physical_rows: Some(1) }, Fragment { ...
(1 additional frame(s) were not displayed)

In a distributed system. How should I handle something like this? I can&#39;t really control whether multiple workers access it at the same time without a distributed lock</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1336013393555095655 class=chatlog__message-container data-message-id=1336013393555095655><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, February 3, 2025 11:40â€¯AM"> <a href=#chatlog__message-container-1336013393555095655>2/3/2025 11:40â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1336567231701848155 class=chatlog__message-container data-message-id=1336567231701848155><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1009194202397167626/ce44d0a5336b029ff5b1e555baa7058e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ccs0000 data-user-id=1009194202397167626>ccs-0000</span> <span class=chatlog__timestamp title="Wednesday, February 5, 2025 12:21â€¯AM"><a href=#chatlog__message-container-1336567231701848155>2/5/2025 12:21â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Does anyone know if Lancedb Cloud supports <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">array_has_all</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">array_has_any</code> ?
I am trying to search table entries which contain tags, and I get the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Hit retry limit for request_id=e8e394ef-1768-4ae5-ad82-6b7b47cbb19f (request_failures=3/3, connect_failures=0/3, read_failures=0/3)</code>

I went ahead and built the LABEL_LIST index on the tables with out issue.  But cannot for the life of me construct a query which doesn&#39;t return an error.
I&#39;ve searched the Discord and seen others queries, and how they used <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">array_has_all</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">array_has_any</code>, to no eval. 
Any advice is appreciated.</span> <span class=chatlog__edited-timestamp title="Wednesday, February 5, 2025 12:59â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1336736048411316309 class=chatlog__message-container data-message-id=1336736048411316309><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, February 5, 2025 11:31â€¯AM"> <a href=#chatlog__message-container-1336736048411316309>2/5/2025 11:31â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1337771355361382421 class=chatlog__message-container data-message-id=1337771355361382421><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/95657392183709696/651f1b2e5139e92338141edffcb0ce60.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cyber_dreammer data-user-id=95657392183709696>CyberDreamer</span> <span class=chatlog__timestamp title="Saturday, February 8, 2025 8:05â€¯AM"><a href=#chatlog__message-container-1337771355361382421>2/8/2025 8:05â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, everyone! 
How can I get vectors by index (id column) if I already know what exactly I needed. without Approximate nearest neighbor but directly way? I tried already next approaches:
<ul><li>search().where() -&gt; give me only part from my requested ids vectors, seems to be using Approximate search.</li><li>table.__take_rows() -&gt; work with row position but not with ids</li><li>for batch in dataset.to_batches -&gt; I have dataset with 22K rows but it gives batch with 320 items.</li></ul></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1338312996979740745 class=chatlog__message-container data-message-id=1338312996979740745><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1029105140042580018/e5b8a348eddab33375ae21e2a207c1c9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/95657392183709696/651f1b2e5139e92338141edffcb0ce60.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=cyber_dreammer>CyberDreamer</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1337771355361382421')"> Hi, everyone! 
How can I get vectors by index (id column) if I already know what exactly I needed. without Approximate nearest neighbor but directly way? I tried already next approaches:
<ul><li>search().where() -&gt; give me only part from my requested ids vectors, seems to be using Approximate search.</li><li>table.__take_rows() -&gt; work with row position but not with ids</li><li>for batch in dataset.to_batches -&gt; I have dataset with 22K rows but it gives batch with 320 items.</li></ul> </span></div></div><div class=chatlog__header><span class=chatlog__author title=deviousdata data-user-id=1029105140042580018>DeviousData</span> <span class=chatlog__timestamp title="Sunday, February 9, 2025 7:58â€¯PM"><a href=#chatlog__message-container-1338312996979740745>2/9/2025 7:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>You can convert the table to a lance table then use duckdb. Minimal example:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">import duckdb
import lancedb
import numpy as np
import polars as pl

np.random.seed(0)

num_docs = 2_000
chunks_per_doc = 3
num_chunks = num_docs * chunks_per_doc
dim = 256

data = pl.DataFrame(
    {
        &quot;id&quot;: np.repeat(np.arange(num_docs), chunks_per_doc),
        &quot;vector&quot;: np.random.rand(num_chunks, dim).astype(np.float32),
    }
)
db = lancedb.connect(uri=&quot;.&quot;)
table = db.create_table(&quot;test_table&quot;, data=data, mode=&quot;overwrite&quot;)
table.create_scalar_index(&quot;id&quot;, index_type=&quot;BTREE&quot;)
table.create_index()

lance_tbl = table.to_lance()
lance_tbl = duckdb.register(&quot;lance_tbl&quot;, lance_tbl)
id = [42, 69, 420]
result = duckdb.sql(f&quot;SELECT * FROM lance_tbl WHERE id IN {id}&quot;).to_df()
result[&quot;vector&quot;]</code></span> <span class=chatlog__edited-timestamp title="Sunday, February 9, 2025 7:59â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1338315971412230234 class=chatlog__message-container data-message-id=1338315971412230234><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=deviousdata data-user-id=1029105140042580018>DeviousData</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, February 9, 2025 8:09â€¯PM"> <a href=#chatlog__message-container-1338315971412230234>2/9/2025 8:09â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1338546782065655832 class=chatlog__message-container data-message-id=1338546782065655832><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, February 10, 2025 11:27â€¯AM"> <a href=#chatlog__message-container-1338546782065655832>2/10/2025 11:27â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1338664258086375476 class=chatlog__message-container data-message-id=1338664258086375476><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/681594045981655097/e4ff05eaf49026ded58cf2dbb1728642.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=real.metadaddy data-user-id=681594045981655097>metadaddy</span> <span class=chatlog__timestamp title="Monday, February 10, 2025 7:13â€¯PM"><a href=#chatlog__message-container-1338664258086375476>2/10/2025 7:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi folks! I&#39;ve been using LanceDB from a LangChain RAG app with some success. Now I&#39;m making my app async, and I&#39;ve run into a snag: if I create a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.AsyncConnection</code> using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.connect_async(my_uri)</code> and pass it to the constructor for LangChain&#39;s wrapper class, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">langchain_community.vectorstores.LanceDB</code>, that code just ignores it and creates a regular connection to its default <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">uri</code>, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">/tmp/lancedb</code>.

The issue is this code in <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">langchain_community.vectorstores.LanceDB.__init__()</code>, in particular, the first line:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">        if isinstance(connection, lancedb.db.LanceDBConnection):
            self._connection = connection
        elif isinstance(connection, (str, lancedb.db.LanceTable)):
            raise ValueError(
                &quot;`connection` has to be a lancedb.db.LanceDBConnection object.\
                `lancedb.db.LanceTable` is deprecated.&quot;
            )
        else:
            if self.api_key is None:
                self._connection = lancedb.connect(uri)
            else:
                if isinstance(uri, str):
                    if uri.startswith(&quot;db://&quot;):
                        self._connection = lancedb.connect(
                            uri, api_key=self.api_key, region=self.region
                        )
                    else:
                        self._connection = lancedb.connect(uri)
                        warnings.warn(
                            &quot;api key provided with local uri.\
                            The data will be stored locally&quot;
                        )</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1338665111870636164 class=chatlog__message-container data-message-id=1338665111870636164><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/681594045981655097/e4ff05eaf49026ded58cf2dbb1728642.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/681594045981655097/e4ff05eaf49026ded58cf2dbb1728642.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=real.metadaddy>metadaddy</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1338664258086375476')"> Hi folks! I&#39;ve been using LanceDB from a LangChain RAG app with some success. Now I&#39;m making my app async, and I&#39;ve run into a snag: if I create a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.AsyncConnection</code> using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.connect_async(my_uri)</code> and pass it to the constructor for LangChain&#39;s wrapper class, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">langchain_community.vectorstores.LanceDB</code>, that code just ignores it and creates a regular connection to its default <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">uri</code>, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">/tmp/lancedb</code>.

The issue is this code in <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">langchain_community.vectorstores.LanceDB.__init__()</code>, in particular, the first line:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">        if isinstance(connection, lancedb.db.LanceDBConnection):
            self._connection = connection
        elif isinstance(connection, (str, lancedb.db.LanceTable)):
            raise ValueError(
                &quot;`connection` has to be a lancedb.db.LanceDBConnection object.\
                `lancedb.db.LanceTable` is deprecated.&quot;
            )
        else:
            if self.api_key is None:
                self._connection = lancedb.connect(uri)
            else:
                if isinstance(uri, str):
                    if uri.startswith(&quot;db://&quot;):
                        self._connection = lancedb.connect(
                            uri, api_key=self.api_key, region=self.region
                        )
                    else:
                        self._connection = lancedb.connect(uri)
                        warnings.warn(
                            &quot;api key provided with local uri.\
                            The data will be stored locally&quot;
                        )</code> </span></div></div><div class=chatlog__header><span class=chatlog__author title=real.metadaddy data-user-id=681594045981655097>metadaddy</span> <span class=chatlog__timestamp title="Monday, February 10, 2025 7:17â€¯PM"><a href=#chatlog__message-container-1338665111870636164>2/10/2025 7:17â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The question is, should that line read:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">if isinstance(connection, lancedb.db.LanceDBConnection) or isinstance(connection, lancedb.db.AsyncConnection):</code>

or should <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.AsyncConnection</code> be a subclass of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.LanceDBConnection</code>?

Or maybe both <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.LanceDBConnection</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.AsyncConnection</code> should subclass <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lancedb.db.DBConnection</code>, and the LangChain code test whether <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">connection</code> is an instance of that class?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1338680094310269020 class=chatlog__message-container data-message-id=1338680094310269020><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/355834815561465866/b779dc052814312699fca25233bac4d4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ranranranranranranranranran data-user-id=355834815561465866>chenran818</span> <span class=chatlog__timestamp title="Monday, February 10, 2025 8:16â€¯PM"><a href=#chatlog__message-container-1338680094310269020>2/10/2025 8:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>in the lancedb cloud I keep getting this error:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">LanceDBHTTPSConnectionPool(host=&#39;default-6evijc.us-east-1.api.lancedb.com&#39;, port=443): Max retries exceeded with url: /v1/table/regulation_news_mx/query/ (Caused by ResponseError(&#39;too many 500 error responses&#39;))</code>

with this simple query:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">        dummy_vector = np.zeros(1536)
        
        query = table.search(
            query=dummy_vector,
            vector_column_name=&quot;combined_embedding&quot;
        ).where(f&quot;UPDATE_TIME &gt;= &#39;2024-01-01&#39;&quot;)
        
        # Execute query
        results = query.limit(5).to_pandas()</code>

if I remove the where clause it runs well, but adding the filtering causing the 500 issues.

what can be potential issues? any suggestions would e super helpful thank you!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1338686601592836152 class=chatlog__message-container data-message-id=1338686601592836152><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=real.metadaddy data-user-id=681594045981655097>metadaddy</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, February 10, 2025 8:42â€¯PM"> <a href=#chatlog__message-container-1338686601592836152>2/10/2025 8:42â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1338854400336330778 class=chatlog__message-container data-message-id=1338854400336330778><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, February 11, 2025 7:49â€¯AM"> <a href=#chatlog__message-container-1338854400336330778>2/11/2025 7:49â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1339349796195930112 class=chatlog__message-container data-message-id=1339349796195930112><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1009194202397167626/ce44d0a5336b029ff5b1e555baa7058e.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ccs0000 data-user-id=1009194202397167626>ccs-0000</span> <span class=chatlog__timestamp title="Wednesday, February 12, 2025 4:37â€¯PM"><a href=#chatlog__message-container-1339349796195930112>2/12/2025 4:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Has anyone experienced issues when using SQL <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">where</code> statement when using a reranker w/ LanceDB cloud?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> example
reranker = LinearCombinationReranker(weight=0.5)
search = table.search(query_type=&quot;hybrid&quot;)
search = search.metric(&#39;cosine&#39;)
search = search.where(where_clause, prefilter=True)
search = search.vector(vectors).text(query).rerank(reranker=reranker)

results = search.limit(25).to_list()</code>

Example query
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">`column`=&#39;CD8A2784F0DC3D63&#39; AND array_has_any(tags, [&#39;example&#39;])</code>
Tested on 
Python 3.12.3

lancedb==0.18.0
&amp;
lancedb==0.19.0
pylance==0.23.0</span> <span class=chatlog__edited-timestamp title="Wednesday, February 12, 2025 4:38â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1339353628322041982 class=chatlog__message-container data-message-id=1339353628322041982><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, February 12, 2025 4:53â€¯PM"> <a href=#chatlog__message-container-1339353628322041982>2/12/2025 4:53â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1341083776289214518 class=chatlog__message-container data-message-id=1341083776289214518><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kevinwmerritt data-user-id=741347330929983518>kevin</span> <span class=chatlog__timestamp title="Monday, February 17, 2025 11:28â€¯AM"><a href=#chatlog__message-container-1341083776289214518>2/17/2025 11:28â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The pydantic LanceModel looks like a nice way to define the table initially, but is there anyway to use that abstraction it to add or remove columns?

For example, lets say I start with one vector column, but then I want to use a new embedding model, what is the appropriate step to add a new vector column, batch populate (inference the new embedding)?

The LanceModel seems to add some extra sugar when it comes to enabling automatic embedding inference. Does the LanceModel aid in performing other db &quot;migration&quot; like functions as well?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1341152393794031667 class=chatlog__message-container data-message-id=1341152393794031667><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, February 17, 2025 4:00â€¯PM"> <a href=#chatlog__message-container-1341152393794031667>2/17/2025 4:00â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1341182109036839075 class=chatlog__message-container data-message-id=1341182109036839075><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=valiant_piglet_94418 data-user-id=1339803073878687805>bkj</span> <span class=chatlog__timestamp title="Monday, February 17, 2025 5:58â€¯PM"><a href=#chatlog__message-container-1341182109036839075>2/17/2025 5:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all - question re: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code> / performance

I have a dataset of approx 250M 768d vectors.  I&#39;m creating a table &amp; index like this
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">schema  = ...
dataset = load_pandas_dataset()
for chunk in dataset.chunk(chunk_size=int(1e6)):
    if TABLE_NAME not in db:
        db.create_table(TABLE_NAME, data=chunk, schema=SCHEMA)
    else:
        db[TABLE_NAME].add(chunk)

index = db[TABLE_NAME].create_index(
    vector_column_name = &quot;my_vector_column&quot;,
    metric             = &quot;cosine&quot;,
    index_type         = &quot;IVF_PQ&quot;,
    num_partitions     = NUM_PARTITIONS,
    num_sub_vectors    = NUM_SUB_VECTORS
)</code>

Question: Should I try to run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code> on this table at some point?  And - if so - what&#39;s the right way to do that?  I tried doing <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">db[TABLE_NAME].optimize()</code> after the code above, but it seems to suck up all my RAM and almost crashes my EC2 instance (I have 137GB of RAM, the dataset is ~350GB)

Thanks!</span> <span class=chatlog__edited-timestamp title="Monday, February 17, 2025 7:17â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1341201659639894134 class=chatlog__message-container data-message-id=1341201659639894134><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, February 17, 2025 7:16â€¯PM"> <a href=#chatlog__message-container-1341201659639894134>2/17/2025 7:16â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1341815264777474060 class=chatlog__message-container data-message-id=1341815264777474060><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=laxas1331 data-user-id=833576310072803329>laxas1331</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, February 19, 2025 11:54â€¯AM"> <a href=#chatlog__message-container-1341815264777474060>2/19/2025 11:54â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1341965229017530379 class=chatlog__message-container data-message-id=1341965229017530379><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=valiant_piglet_94418 data-user-id=1339803073878687805>bkj</span> <span class=chatlog__timestamp title="Wednesday, February 19, 2025 9:50â€¯PM"><a href=#chatlog__message-container-1341965229017530379>2/19/2025 9:50â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all - is there any guidance on why / when I&#39;d want to ue <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tantivy</code> vs the native full-text search implementation?  I understand <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tantivy</code> doesn&#39;t support <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">async</code> or indices stored on S3 .. but are there other performance / accuracy tradeoffs to be aware of?

In a similar vein .. is there guidance on performance optimizations for the FTS?  I&#39;m guessing removing stop-words is one (since <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">effect protein powder muscle growth</code> runs in 1/6th the time of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">the effect of protein powder on muscle growth</code>) but I&#39;d be curious if there are resources / community knowledge on that.

Thanks!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1342005712351395906 class=chatlog__message-container data-message-id=1342005712351395906><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, February 20, 2025 12:31â€¯AM"> <a href=#chatlog__message-container-1342005712351395906>2/20/2025 12:31â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1343625340181938176 class=chatlog__message-container data-message-id=1343625340181938176><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrew_80759 data-user-id=1299050093197918309>Andrew (Pienso)</span> <span class=chatlog__timestamp title="Monday, February 24, 2025 11:47â€¯AM"><a href=#chatlog__message-container-1343625340181938176>2/24/2025 11:47â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey all,

Is this docstring correct: <a href="https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/table.py#L2682">https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/table.py#L2682</a>

Testing locally, it seems it&#39;s the opposite:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">&gt;&gt;&gt; atable.is_open()
True
&gt;&gt;&gt; atable.close()
&gt;&gt;&gt; atable.is_open()
False</code>

Happy to file a GH issue or let ya&#39;ll handle it <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜ƒ"
    title="smiley"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f603.svg"></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1343628760762810542 class=chatlog__message-container data-message-id=1343628760762810542><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/256442550683041793/957261bc8f0ac51195cdaa3270bfc93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=etrotta data-user-id=256442550683041793>etrotta</span> <span class=chatlog__timestamp title="Monday, February 24, 2025 12:00â€¯PM"><a href=#chatlog__message-container-1343628760762810542>2/24/2025 12:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yeah I would assume the docstring is wrong</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1343635377755390052 class=chatlog__message-container data-message-id=1343635377755390052><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Monday, February 24, 2025 12:27â€¯PM"><a href=#chatlog__message-container-1343635377755390052>2/24/2025 12:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>yeah definitely a typo. Feel free to submit a PR we&#39;d appreciate it!</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=ðŸ«¡><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ«¡ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1fae1.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1343951016357400678 class=chatlog__message-container data-message-id=1343951016357400678><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrew_80759 data-user-id=1299050093197918309>Andrew (Pienso)</span> <span class=chatlog__timestamp title="Tuesday, February 25, 2025 9:21â€¯AM"><a href=#chatlog__message-container-1343951016357400678>2/25/2025 9:21â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>On a separate thread, it appears the python dataset scanner API is considerably faster than the lancedb python table API. Is there something we&#39;re missing?
FWIW, I created the table from the dataset but excluded the setup for brevity. Happy to share the whole snippet. Should we be computing partitions or something differently? Right now I just hardcoded it the same way we do it for the dataset for the sake of example.</span></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1343951016462385242/results.txt?ex=697b6ceb&amp;is=697a1b6b&amp;hm=2914cef88a055d06df71963603224ff1d9eb11f13baaf3065a6676865c17b8d4&amp;"> results.txt </a></div><div class=chatlog__attachment-generic-size>2.46 KB</div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1343978350535905424 class=chatlog__message-container data-message-id=1343978350535905424><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, February 25, 2025 11:10â€¯AM"> <a href=#chatlog__message-container-1343978350535905424>2/25/2025 11:10â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1344436978501816332 class=chatlog__message-container data-message-id=1344436978501816332><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=yaarb data-user-id=1112426192449048616>RaaY</span> <span class=chatlog__timestamp title="Wednesday, February 26, 2025 5:32â€¯PM"><a href=#chatlog__message-container-1344436978501816332>2/26/2025 5:32â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg"> 
i&#39;m trying lanceDB for the first time using python , i have notice that in the following code the class definition take a few seconds ( 2-3 seconds) i&#39;m doing something wrong or it&#39;s normal ?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-Python">import lancedb
from lancedb.pydantic import LanceModel, Vector
from lancedb.embeddings import get_registry

embeddings = get_registry().get(&quot;sentence-transformers&quot;).create()


class Posts(LanceModel):
    vector: Vector(embeddings.ndims()) = embeddings.VectorField()
    text: str = embeddings.SourceField()
    author: str</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1344762583743463646 class=chatlog__message-container data-message-id=1344762583743463646><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/681594045981655097/e4ff05eaf49026ded58cf2dbb1728642.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=real.metadaddy data-user-id=681594045981655097>metadaddy</span> <span class=chatlog__timestamp title="Thursday, February 27, 2025 3:06â€¯PM"><a href=#chatlog__message-container-1344762583743463646>2/27/2025 3:06â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Just an FYI, since I mostly figured out the issue, but...

I&#39;ve written a Django app that uses LanceDB with LangChain in a RAG use case, with the vector store located on Backblaze B2 (S3-compatible cloud object storage). My app has code in Django&#39;s <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">settings.py</code> that creates a LanceDB instance. All works well in Django&#39;s dev server, but in Gunicorn, I was having issues.

I&#39;m using multithreading in Gunicorn, since the app is I/O bound - it spends nearly all its time waiting for API responses of one flavor or another. There is one process, with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">CPU_COUNT * 2</code> threads, and the threads share the single LanceDB instance.

With every version I tried on macOS, and with 0.17.0 and higher on Linux, I would see a segfault when I sent a question through the chain, triggering a similarity search in LanceDB. I did a lot of tracing and debugging, but pretty much gave up when it became apparent that the segfault was in the AWS SDK for C++, which is used by Arrow&#39;s S3FS, which is used by PyArrow&#39;s S3FS.

That&#39;s where I left it until today, when I realized I was using Gunicorn&#39;s <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">preload_app</code> configuration, which loads the app, including its settings, <em>before the worker processes are <u>forked</u></em> (my emphasis). Removing <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">preload_app = True</code> fixed the issue completely - the latest LanceDB works just fine on Gunicorn on both the Mac and Linux.

So, kids, don&#39;t create a LanceDB instance in one process and try to use it in another!

I wonder if there&#39;s anythink LanceDB could do to detect this and throw a suitable error, saving the next hapless developer some time? Shall I file an issue?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1344767839990452308 class=chatlog__message-container data-message-id=1344767839990452308><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, February 27, 2025 3:27â€¯PM"> <a href=#chatlog__message-container-1344767839990452308>2/27/2025 3:27â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1344840582811484232 class=chatlog__message-container data-message-id=1344840582811484232><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=edudesouza. data-user-id=741301931686887485>edudesouza</span> <span class=chatlog__timestamp title="Thursday, February 27, 2025 8:16â€¯PM"><a href=#chatlog__message-container-1344840582811484232>2/27/2025 8:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there. Do anyone know how to query multiple tables?
For instance, in Elastic when I need to query multiples doc I do 
INDEX_NAME = [&quot;convencao&quot;, &quot;regulamento&quot;, &quot;ata_reuniao_0224&quot;]
Is there a workaround for that?
Thks in advance</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1344915407059943479 class=chatlog__message-container data-message-id=1344915407059943479><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, February 28, 2025 1:13â€¯AM"> <a href=#chatlog__message-container-1344915407059943479>2/28/2025 1:13â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1344939361476804769 class=chatlog__message-container data-message-id=1344939361476804769><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=pepeve_83973 data-user-id=1344761648425992242>Pepeve</span> <span class=chatlog__timestamp title="Friday, February 28, 2025 2:48â€¯AM"><a href=#chatlog__message-container-1344939361476804769>2/28/2025 2:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello everyone, does anyone have experience with using LanceDB to store multi-vector representations of images (PDF pages as images more specifically) generated with Vision Language Models. More specifically, I am looknig at the ColPali family of models. If anyone has made a project that contains that or knows of a project that uses a similar approach, I would really appreciate it if you could share!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1345102525992403014 class=chatlog__message-container data-message-id=1345102525992403014><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/760814299542847509/036af905443ec03fede815c45587fbbd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cmacboyd data-user-id=760814299542847509>cmacboyd</span> <span class=chatlog__timestamp title="Friday, February 28, 2025 1:37â€¯PM"><a href=#chatlog__message-container-1345102525992403014>2/28/2025 1:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there! I am trying to explore more of lance/lancedb to get some statistics from our tables to understand when it may be appropriate to perform compaction/reindexing on our tables. 

I see that there&#39;s protobuf specifications <a href="https://github.com/lancedb/lance/tree/main/protos">here</a> so I tried compiling those to try and read the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">*.idx</code>, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">*.txn</code>, and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">*.manifest</code> files. It worked for the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">*.txn</code> file but doesn&#39;t work for the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">*.idx</code> or the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">*.manifest</code> files. My script is below, any ideas how I can read these files with python? TIA <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"> 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">import transaction_pb2 as txn

transaction = txn.Transaction()
transaction.ParseFromString(open(&quot;mypath/0-b5889dca-7375-41d8-b6de-2030e999e81a.txn&quot;, &quot;rb&quot;).read())
print(transaction) # yay! we can read the transaction file!

import table_pb2 as table

manifest = table.Manifest()
manifest.ParseFromString(open(&quot;mypath/33.manifest&quot;, &quot;rb&quot;).read())  # oh no! we can&#39;t read the manifest file!

# Traceback (most recent call last):
#   File &quot;mypath/manifest_checker.py&quot;, line 9, in &lt;module&gt;
#     manifest.ParseFromString(open(&quot;mypath/33.manifest&quot;, &quot;rb&quot;).read())
# google.protobuf.message.DecodeError: Error parsing message with type &#39;lance.table.Manifest&#39;</code></span> <span class=chatlog__edited-timestamp title="Friday, February 28, 2025 1:38â€¯PM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/tree/main/protos><div class="chatlog__markdown chatlog__markdown-preserve">lance/protos at main &#183; lancedb/lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Modern columnar data format for ML and LLMs implemented in Rust. Convert from parquet in 2 lines of code for 100x faster random access, vector index, and data versioning. Compatible with Pandas, Du...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/Talmb5Kic9JkhBXq4c6W9unHzrAS_RcF5f7lsuzyGgI/https/opengraph.githubassets.com/4d27e4da0e0fb587a4919457ca92f5f7e625b28ea9702d6bfb753fa0dc0ea174/lancedb/lance> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/Talmb5Kic9JkhBXq4c6W9unHzrAS_RcF5f7lsuzyGgI/https/opengraph.githubassets.com/4d27e4da0e0fb587a4919457ca92f5f7e625b28ea9702d6bfb753fa0dc0ea174/lancedb/lance alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1345108483984592929 class=chatlog__message-container data-message-id=1345108483984592929><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, February 28, 2025 2:00â€¯PM"> <a href=#chatlog__message-container-1345108483984592929>2/28/2025 2:00â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1346252711653412966 class=chatlog__message-container data-message-id=1346252711653412966><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/760814299542847509/036af905443ec03fede815c45587fbbd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cmacboyd data-user-id=760814299542847509>cmacboyd</span> <span class=chatlog__timestamp title="Monday, March 3, 2025 5:47â€¯PM"><a href=#chatlog__message-container-1346252711653412966>3/3/2025 5:47â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>(solved) Hey, I saw <a href="https://github.com/lancedb/lance/pull/2979">this PR</a> which lets me see <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">num_indexed_rows_per_delta</code> which is awesome and I believe it is what I am looking for in my use case. Unfortunately when I look at this statistic in python it&#39;s just a one-element-long list with the total number of indexed rows in the dataset, instead of what I would think should be a list of the number of vectors brought into the index each time a reindexing is run. It looks like I am not alone in noticing this per <a href="https://github.com/lancedb/lance/pull/3377#discussion_r1917430719">this PR comment</a>. Just wondering if I have the right understanding, if there is eventually intent to fix, or if there&#39;s a way that I could get this information (how many vectors added to the index each reindex) from a lance dataset a different way. TIA <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™‚"
    title="slight_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f642.svg"></span> <span class=chatlog__edited-timestamp title="Tuesday, March 4, 2025 1:30â€¯PM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/pull/2979><div class="chatlog__markdown chatlog__markdown-preserve">feat: expose number of rows covered per delta by chebbyChefNEQ &#183; Pu...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">This PR adds a field to index_stats where we now return the number of rows covered by each delta in num_indexed_rows_per_delta
TODO:

 tests</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/T4U38wTXzMKvOaMTLWA70T2xMKUz-hY45w7FJKT0mG8/https/opengraph.githubassets.com/f682478b08a598232dfaa652ca6ca031f1eab1d94481590f2c043ae86fd2d468/lancedb/lance/pull/2979> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/T4U38wTXzMKvOaMTLWA70T2xMKUz-hY45w7FJKT0mG8/https/opengraph.githubassets.com/f682478b08a598232dfaa652ca6ca031f1eab1d94481590f2c043ae86fd2d468/lancedb/lance/pull/2979 alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/pull/3377><div class="chatlog__markdown chatlog__markdown-preserve">fix!: delta index fragment bitmaps contained previous index coverag...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">BREAKING CHANGE: delta index fragment bitmaps will now only contain the fragment ids covered by the delta, not the full index. To get the full bitmap, make sure to union with all index segments wit...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/fTJ6KziVxCtbjxrETuZyStAtFHMm5IaD1uLc2tzPQ0c/https/opengraph.githubassets.com/cb037c7c3598496ee9d5064694d24cd47904d27de5b9c99db2daee49dac724bf/lancedb/lance/pull/3377> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/fTJ6KziVxCtbjxrETuZyStAtFHMm5IaD1uLc2tzPQ0c/https/opengraph.githubassets.com/cb037c7c3598496ee9d5064694d24cd47904d27de5b9c99db2daee49dac724bf/lancedb/lance/pull/3377 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1346306401286230046 class=chatlog__message-container data-message-id=1346306401286230046><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Monday, March 3, 2025 9:20â€¯PM"><a href=#chatlog__message-container-1346306401286230046>3/3/2025 9:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Do you guys have any guidance on what a &quot;good&quot; fragment size is? Or rather, what the trade-offs are for small vs large fragments. I noticed that the default value in compaction is 90GB but I&#39;m curious if that is actually a sane default &amp; how that affects read performance (especially when using the data for model training)</span> <span class=chatlog__edited-timestamp title="Monday, March 3, 2025 9:32â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1346350445983174701 class=chatlog__message-container data-message-id=1346350445983174701><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, March 4, 2025 12:16â€¯AM"> <a href=#chatlog__message-container-1346350445983174701>3/4/2025 12:16â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1346536717103923306 class=chatlog__message-container data-message-id=1346536717103923306><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=cmacboyd data-user-id=760814299542847509>cmacboyd</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, March 4, 2025 12:36â€¯PM"> <a href=#chatlog__message-container-1346536717103923306>3/4/2025 12:36â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1347407249550606429 class=chatlog__message-container data-message-id=1347407249550606429><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=valiant_piglet_94418 data-user-id=1339803073878687805>bkj</span> <span class=chatlog__timestamp title="Thursday, March 6, 2025 10:15â€¯PM"><a href=#chatlog__message-container-1347407249550606429>3/6/2025 10:15â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a (native) FTS built on a large dataset (100M+ 256 word documents)

When I run a query w/ the index stored on NVME, it takes quite a long time (&gt; 120s first query, 10-30s on subsequent queries) and prints messages like the attached.

Any ideas on potential performance optimizations?  Are there environmental variables I could set to speed this up?

Thanks!</span></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1347407249336832003/message.txt?ex=697b7989&amp;is=697a2809&amp;hm=a3f26760c91eeaa53879e8d88beef51a70f65c0997f8d4e86626bd1500e55538&amp;"> message.txt </a></div><div class=chatlog__attachment-generic-size>4.93 KB</div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1347408777078636646 class=chatlog__message-container data-message-id=1347408777078636646><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=valiant_piglet_94418>bkj</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1347407249550606429')"> I have a (native) FTS built on a large dataset (100M+ 256 word documents)

When I run a query w/ the index stored on NVME, it takes quite a long time (&gt; 120s first query, 10-30s on subsequent queries) and prints messages like the attached.

Any ideas on potential performance optimizations?  Are there environmental variables I could set to speed this up?

Thanks! </span></div></div><div class=chatlog__header><span class=chatlog__author title=valiant_piglet_94418 data-user-id=1339803073878687805>bkj</span> <span class=chatlog__timestamp title="Thursday, March 6, 2025 10:21â€¯PM"><a href=#chatlog__message-container-1347408777078636646>3/6/2025 10:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>query is like
        results = await (
            table
            .query()
            .nearest_to_text(&quot;effect of creatine on mouse brain development&quot;)
            .limit(100)
            .to_pandas()
        )</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1347442882558033950 class=chatlog__message-container data-message-id=1347442882558033950><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=valiant_piglet_94418>bkj</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1347408777078636646')"> query is like
        results = await (
            table
            .query()
            .nearest_to_text(&quot;effect of creatine on mouse brain development&quot;)
            .limit(100)
            .to_pandas()
        ) </span></div></div><div class=chatlog__header><span class=chatlog__author title=valiant_piglet_94418 data-user-id=1339803073878687805>bkj</span> <span class=chatlog__timestamp title="Friday, March 7, 2025 12:36â€¯AM"><a href=#chatlog__message-container-1347442882558033950>3/7/2025 12:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m specifically curious about
[2025-03-07T03:13:40Z DEBUG lance_file::v2::reader] Reading range 19747177567..19751075331 with batch_size 4294967295 from file with 29601431240 rows and 2 columns into schema with 2 columns
[2025-03-07T03:13:43Z DEBUG lance_file::v2::reader] Reading range 23535557832..23769051592 with batch_size 4294967295 from file with 29601431240 rows and 2 columns into schema with 2 columns
Is that saying it&#39;s reading the whole file .. twice?  Wasn&#39;t able to find any documentation on these logs</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1347492597203206211 class=chatlog__message-container data-message-id=1347492597203206211><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, March 7, 2025 3:54â€¯AM"> <a href=#chatlog__message-container-1347492597203206211>3/7/2025 3:54â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1347572398249087077 class=chatlog__message-container data-message-id=1347572398249087077><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, March 7, 2025 9:11â€¯AM"> <a href=#chatlog__message-container-1347572398249087077>3/7/2025 9:11â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1348488572054929500 class=chatlog__message-container data-message-id=1348488572054929500><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Sunday, March 9, 2025 10:52â€¯PM"><a href=#chatlog__message-container-1348488572054929500>3/9/2025 10:52â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is it possible to declare a custom embedding model that supports multiple vectors of the same datatype</span></div></div></div></div><div id=chatlog__message-container-1348488992617922681 class=chatlog__message-container data-message-id=1348488992617922681><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 9, 2025 10:53â€¯PM">10:53â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-py">class Image:
    caption: str = SourceField()
    caption_embedding = VectorField()
    caption2: str = SourceField()
    caption2_embedding = VectorField()</code></span></div></div></div></div><div id=chatlog__message-container-1348489564116746393 class=chatlog__message-container data-message-id=1348489564116746393><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 9, 2025 10:56â€¯PM">10:56â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>i need to regenerate the embeddings if the captions are manually edited but i don&#39;t see a clear way to specify where the output goes if the vectors are the same type (it looks like you can have multiple vectors if the types differ i.e. image vs string)</span></div></div></div></div><div id=chatlog__message-container-1348490762169356432 class=chatlog__message-container data-message-id=1348490762169356432><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 9, 2025 11:00â€¯PM">11:00â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content"><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">VectorField</code> tells LanceDB to use the clip embedding function to generate query embeddings for the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">vector</code> column and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">SourceField</code> ensures that when adding data, we automatically use the specified embedding function to encode <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">image_uri</code>.
</div></div>what does this mean exactly</span></div></div></div></div><div id=chatlog__message-container-1348491126834860083 class=chatlog__message-container data-message-id=1348491126834860083><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Sunday, March 9, 2025 11:02â€¯PM">11:02â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>i&#39;m assuming it means you assign a SourceField and then when you change that it automatically updates the VectorField with the new embedding, but i&#39;m not sure if that&#39;s really the case</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1348493640347029545 class=chatlog__message-container data-message-id=1348493640347029545><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Sunday, March 9, 2025 11:12â€¯PM"><a href=#chatlog__message-container-1348493640347029545>3/9/2025 11:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>looking at the source, you can&#39;t have multiple source fields, would be neat if you could have them in nested models tho</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1348496156875030579 class=chatlog__message-container data-message-id=1348496156875030579><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Sunday, March 9, 2025 11:22â€¯PM"><a href=#chatlog__message-container-1348496156875030579>3/9/2025 11:22â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>on first attempt it looks like that might work maybe</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1348638214465912866 class=chatlog__message-container data-message-id=1348638214465912866><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 10, 2025 8:46â€¯AM"> <a href=#chatlog__message-container-1348638214465912866>3/10/2025 8:46â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1348639356214313018 class=chatlog__message-container data-message-id=1348639356214313018><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 10, 2025 8:51â€¯AM"> <a href=#chatlog__message-container-1348639356214313018>3/10/2025 8:51â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1350028287006740530 class=chatlog__message-container data-message-id=1350028287006740530><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=pepeve_83973 data-user-id=1344761648425992242>Pepeve</span> <span class=chatlog__timestamp title="Friday, March 14, 2025 4:50â€¯AM"><a href=#chatlog__message-container-1350028287006740530>3/14/2025 4:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey all, does anyone have experience with generating an index for ColPali-style multivector embeddings. I have around 3500 embeddings and want to use a IVF_PQ index with cosine similarity and the indexing has been going on for 40 minutes now... Does anyone have an estimate for how long that would take?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1351253740207739052 class=chatlog__message-container data-message-id=1351253740207739052><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rozman_43765 data-user-id=1351242115488940233>rozman</span> <span class=chatlog__timestamp title="Monday, March 17, 2025 1:59â€¯PM"><a href=#chatlog__message-container-1351253740207739052>3/17/2025 1:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I have an issue initialising an S3-based lancedb. I think I need an IAM role but before I contact my sysadmins I&#39;m wondering where I would apply it</span></div></div></div></div><div id=chatlog__message-container-1351253921774960763 class=chatlog__message-container data-message-id=1351253921774960763><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, March 17, 2025 2:00â€¯PM">2:00â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m building an application that currently uses a local db but it isn&#39;t sustainable</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1351265074186158247 class=chatlog__message-container data-message-id=1351265074186158247><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 17, 2025 2:44â€¯PM"> <a href=#chatlog__message-container-1351265074186158247>3/17/2025 2:44â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1351328442611794088 class=chatlog__message-container data-message-id=1351328442611794088><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, March 17, 2025 6:56â€¯PM"> <a href=#chatlog__message-container-1351328442611794088>3/17/2025 6:56â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1351590806708031591 class=chatlog__message-container data-message-id=1351590806708031591><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1124250705516040262/7637af8bb1aec03eb7f1e34e5d57e165.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=space_age_rambo data-user-id=1124250705516040262>jazz</span> <span class=chatlog__timestamp title="Tuesday, March 18, 2025 12:19â€¯PM"><a href=#chatlog__message-container-1351590806708031591>3/18/2025 12:19â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">class TextChunk(LanceModel):
    id: str
    text: str
    vector: Vector(1024)
    title: str
    url: str</code>
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Call expression not allowed in type expression</code>

the guides also use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">vector: Vector(128)</code> what did I do wrong</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div><div id=chatlog__message-container-1351592297330118798 class=chatlog__message-container data-message-id=1351592297330118798><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Tuesday, March 18, 2025 12:25â€¯PM">12:25â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ig its not a big deal and type checker is throwing a tantrum?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1351604822524166308 class=chatlog__message-container data-message-id=1351604822524166308><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, March 18, 2025 1:15â€¯PM"> <a href=#chatlog__message-container-1351604822524166308>3/18/2025 1:15â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1351924333777387584 class=chatlog__message-container data-message-id=1351924333777387584><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/184476739001384960/c67a8c1f09afc9ac94741631cfb61e4c.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=natscord data-user-id=184476739001384960>Nats</span> <span class=chatlog__timestamp title="Wednesday, March 19, 2025 10:24â€¯AM"><a href=#chatlog__message-container-1351924333777387584>3/19/2025 10:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey guys, I&#39;m using LanceDB through GraphRAG. When I try to use their indexer (which uses LanceDB), I keep stuck in the connection. My attempt to &quot;manual&quot; connect also makes me stuck in a place where I cannot create a connection... Any idea what it could be? Not sure if the image can help somehow.</span></div><div class=chatlog__attachment><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1351924333915934731/image.png?ex=697b6da6&amp;is=697a1c26&amp;hm=0cefe31b7c94e261de37a10778bbe33386612be63cf24bcd45810fa1c4071243&amp;"> <img class=chatlog__attachment-media src="https://cdn.discordapp.com/attachments/1197630499926057021/1351924333915934731/image.png?ex=697b6da6&amp;is=697a1c26&amp;hm=0cefe31b7c94e261de37a10778bbe33386612be63cf24bcd45810fa1c4071243&amp;" alt="Image attachment" title="Image: image.png (92 KB)" loading=lazy> </a></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1351934396873048116 class=chatlog__message-container data-message-id=1351934396873048116><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, March 19, 2025 11:04â€¯AM"> <a href=#chatlog__message-container-1351934396873048116>3/19/2025 11:04â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1352750876024115200 class=chatlog__message-container data-message-id=1352750876024115200><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/216859238830440448/afb8805cacdd483e3dd8e7778e15b6eb.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sadaisystems data-user-id=216859238830440448>sadai</span> <span class=chatlog__timestamp title="Friday, March 21, 2025 5:09â€¯PM"><a href=#chatlog__message-container-1352750876024115200>3/21/2025 5:09â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi guys! I have a question. I created a table with full text search index though tantivy using synchronous client.
When i later want to query this table 
<ul><li>querying through synchronous client works just fine</li><li>querying though asynchronous clientresults in the following error

```bash</li></ul>lance      06_evaluation.py:155 error: Invalid user input: Cannot perform full text search unless an INVERTED index has been created on at least one column, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-0.24.1/src/dataset/scanner.rs:1555:17
```

What could be tthe reason? Didn&#39;t find any explanation in docs. Should i create fts for asynchronous client separately?</span> <span class=chatlog__edited-timestamp title="Friday, March 21, 2025 5:11â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1354259566598029466 class=chatlog__message-container data-message-id=1354259566598029466><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bluescepter data-user-id=688568641343717584>bluescepter</span> <span class=chatlog__timestamp title="Tuesday, March 25, 2025 9:04â€¯PM"><a href=#chatlog__message-container-1354259566598029466>3/25/2025 9:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey y&#39;all, I think I&#39;ve found a bug in the low-level code called by <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset.merge</code>. The TL;DR is that I can write null timestamps, floats and other scalar types with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.write_dataset</code>, but I cannot merge in data with null values of those types into an existing <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset</code>. Fortunately, I think the fix might be a pretty simple one (but don&#39;t quote me on that last part <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜"
    title="stuck_out_tongue_closed_eyes"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f61d.svg">). Thank you in advance for any help/pointers you can give me here!

For more context, I&#39;m trying to merge in some data into a Lance dataset from a PyArrow Table. The data I&#39;m trying to merge in (the RHS) has null values for some of columns that are of type Timestamp, and when I try to call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance_ds.merge(metadata_table, left_on=&quot;uid&quot;, right_on=&quot;uid&quot;)</code>, I hit this error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> OSError: Invalid user input: Found rows on LHS that do not match any rows on RHS. Lance would need to write nulls on the RHS, but Lance does not yet support nulls for type Timestamp(Nanosecond, Some(&quot;UTC&quot;))., /Users/runner/work/lance/lance/rust/lance/src/dataset/hash_joiner.rs:191:36</code>
Now, looking at <a href="https://github.com/lancedb/lance/blob/main/rust/lance-core/src/datatypes.rs#L375-L385">the code</a>, specifically the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance_supports_nulls</code> function called in that block of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">hash_joiner.rs</code>, I&#39;m  not surprised to see I&#39;m hitting an error, as indeed, timestamp is not in the list of supported types. However, the confusing part is that is not corroborated by the discussion in <a href="https://github.com/lancedb/lance/issues/1214">GH issue 1214</a>. Moreover, if I take my PyArrow table of timestamp data w/ nulls, and I try to write that table to Lance format, it works fine. Similarly, if I first pull both the Lance dataset and the PyArrow table into <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pandas</code> and merge them and then try to write the merged <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pd.DataFrame</code> to Lance, it also works fine. Basically, as said in my opener, I can write null timestamps with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.write_dataset</code>, but I can&#39;t merge them into an existing dataset.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1354259638643589161 class=chatlog__message-container data-message-id=1354259638643589161><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=bluescepter>bluescepter</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1354259566598029466')"> Hey y&#39;all, I think I&#39;ve found a bug in the low-level code called by <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset.merge</code>. The TL;DR is that I can write null timestamps, floats and other scalar types with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.write_dataset</code>, but I cannot merge in data with null values of those types into an existing <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDataset</code>. Fortunately, I think the fix might be a pretty simple one (but don&#39;t quote me on that last part <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜"
    title="stuck_out_tongue_closed_eyes"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f61d.svg">). Thank you in advance for any help/pointers you can give me here!

For more context, I&#39;m trying to merge in some data into a Lance dataset from a PyArrow Table. The data I&#39;m trying to merge in (the RHS) has null values for some of columns that are of type Timestamp, and when I try to call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance_ds.merge(metadata_table, left_on=&quot;uid&quot;, right_on=&quot;uid&quot;)</code>, I hit this error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> OSError: Invalid user input: Found rows on LHS that do not match any rows on RHS. Lance would need to write nulls on the RHS, but Lance does not yet support nulls for type Timestamp(Nanosecond, Some(&quot;UTC&quot;))., /Users/runner/work/lance/lance/rust/lance/src/dataset/hash_joiner.rs:191:36</code>
Now, looking at <a href="https://github.com/lancedb/lance/blob/main/rust/lance-core/src/datatypes.rs#L375-L385">the code</a>, specifically the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance_supports_nulls</code> function called in that block of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">hash_joiner.rs</code>, I&#39;m  not surprised to see I&#39;m hitting an error, as indeed, timestamp is not in the list of supported types. However, the confusing part is that is not corroborated by the discussion in <a href="https://github.com/lancedb/lance/issues/1214">GH issue 1214</a>. Moreover, if I take my PyArrow table of timestamp data w/ nulls, and I try to write that table to Lance format, it works fine. Similarly, if I first pull both the Lance dataset and the PyArrow table into <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pandas</code> and merge them and then try to write the merged <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pd.DataFrame</code> to Lance, it also works fine. Basically, as said in my opener, I can write null timestamps with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.write_dataset</code>, but I can&#39;t merge them into an existing dataset. </span></div></div><div class=chatlog__header><span class=chatlog__author title=bluescepter data-user-id=688568641343717584>bluescepter</span> <span class=chatlog__timestamp title="Tuesday, March 25, 2025 9:04â€¯PM"><a href=#chatlog__message-container-1354259638643589161>3/25/2025 9:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>(continuing my msg in reply due to character limit)

From the linked issue, I saw user @~WestonPace (avoiding direct tag given it&#39;s outside of business hours and I also don&#39;t know Discord policy on direct tags) commented that the latest version of the Lance format should support nulls for a timestamp column. AFAICT, this is corroborated by my ability to write the dataset with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance.write_dataset</code>. FWIW, just to confirm, the dataset I&#39;m trying merge data into was created recently 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance_ds.versions()
[{&#39;version&#39;: 1, &#39;timestamp&#39;: datetime.datetime(2025, 3, 5, 14, 25, 48, 665207), &#39;metadata&#39;: {}}, {&#39;version&#39;: 2, &#39;timestamp&#39;: datetime.datetime(2025, 3, 10, 14, 49, 21, 714281), &#39;metadata&#39;: {}}]</code>
and the storage version is the latest so far as I can tell
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">lance_ds.data_storage_version
&#39;2.0&#39;</code>

Doing some more spelunking, I see from a search of <a href="https://github.com/search?q=repo%3Alancedb%2Flance%20lance_supports_nulls&amp;type=code">the repo</a> that <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">lance_supports_nulls</code> only seems to be used in <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">hash_joiner.rs</code>. Given my empirical tests and my search through the code, I&#39;m wondering if the check against this function in <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">hash_joiner.rs</code> was accidentally left in when support for a wider variety null types was added in. If so, I think a simple fix would be to just remove that check? Of course, this is only my second time digging into the Rust parts of the codebase, so I could readily be wrong in my understanding here.</span> <span class=chatlog__edited-timestamp title="Tuesday, March 25, 2025 9:05â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1354385990738776175 class=chatlog__message-container data-message-id=1354385990738776175><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/802180037310677003/4bc1e6cdf266a6b2449c4bcbcd8cc966.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=alien4366 data-user-id=802180037310677003>Alien</span> <span class=chatlog__timestamp title="Wednesday, March 26, 2025 5:26â€¯AM"><a href=#chatlog__message-container-1354385990738776175>3/26/2025 5:26â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is doing .add_columns through ray supported?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1354493765817204894 class=chatlog__message-container data-message-id=1354493765817204894><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=luqiu_87609 data-user-id=1209390552148090902>Lu Qiu</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, March 26, 2025 12:34â€¯PM"> <a href=#chatlog__message-container-1354493765817204894>3/26/2025 12:34â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1354494421785116726 class=chatlog__message-container data-message-id=1354494421785116726><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=luqiu_87609 data-user-id=1209390552148090902>Lu Qiu</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, March 26, 2025 12:37â€¯PM"> <a href=#chatlog__message-container-1354494421785116726>3/26/2025 12:37â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1357765357066125443 class=chatlog__message-container data-message-id=1357765357066125443><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ozb7067 data-user-id=1252344492762206249>Oz</span> <span class=chatlog__timestamp title="Friday, April 4, 2025 1:14â€¯PM"><a href=#chatlog__message-container-1357765357066125443>4/4/2025 1:14â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>For Lance FTS and Tantivy, how exactly does memory use scale? Eg is it by number of rows in the table, number of rows in a fragment / index file, number of indexed terms, something else?</span></div></div></div></div><div id=chatlog__message-container-1357765559600812192 class=chatlog__message-container data-message-id=1357765559600812192><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, April 4, 2025 1:15â€¯PM">1:15â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Also, does Lance or Tantivy FTS (like vector search) go through unindexed rows in addition to the index?</span></div></div></div></div><div id=chatlog__message-container-1357765920319213629 class=chatlog__message-container data-message-id=1357765920319213629><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, April 4, 2025 1:17â€¯PM">1:17â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Also, for bulk/parallel ingestion (1B+ rows), do you recommend custom Python, or perhaps Ray, or something else?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1357774917583769605 class=chatlog__message-container data-message-id=1357774917583769605><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, April 4, 2025 1:52â€¯PM"> <a href=#chatlog__message-container-1357774917583769605>4/4/2025 1:52â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1357779855441400050 class=chatlog__message-container data-message-id=1357779855441400050><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, April 4, 2025 2:12â€¯PM"> <a href=#chatlog__message-container-1357779855441400050>4/4/2025 2:12â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1358624145512075345 class=chatlog__message-container data-message-id=1358624145512075345><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/345280172561268737/cfb5093110c1fefc81ddb75e3b1f9b51.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bighead6557 data-user-id=345280172561268737>BigHead</span> <span class=chatlog__timestamp title="Sunday, April 6, 2025 10:07â€¯PM"><a href=#chatlog__message-container-1358624145512075345>4/6/2025 10:07â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>+</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1359546820312699001 class=chatlog__message-container data-message-id=1359546820312699001><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ozb7067 data-user-id=1252344492762206249>Oz</span> <span class=chatlog__timestamp title="Wednesday, April 9, 2025 11:13â€¯AM"><a href=#chatlog__message-container-1359546820312699001>4/9/2025 11:13â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="wjones127">@Will Jones</span> 
Is this still true? For all index types, or just some of them? Is there a way to avoid this?
<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Right now optimize defaults to re-writing an entire index when optimizing it. That&#39;s part of why it takes about the same amount of time to add new data to an index as it does to create the initial index.
</div></div><a href="https://github.com/lancedb/lancedb/issues/1502">https://github.com/lancedb/lancedb/issues/1502</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1359554199230087263 class=chatlog__message-container data-message-id=1359554199230087263><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, April 9, 2025 11:43â€¯AM"> <a href=#chatlog__message-container-1359554199230087263>4/9/2025 11:43â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1359604947812876469 class=chatlog__message-container data-message-id=1359604947812876469><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/744921243479703593/84cc0b64fb1a2aea76d4cd165905fd40.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=hubertyuan data-user-id=744921243479703593>hubert</span> <span class=chatlog__timestamp title="Wednesday, April 9, 2025 3:04â€¯PM"><a href=#chatlog__message-container-1359604947812876469>4/9/2025 3:04â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, in the following snippet, how can I write a new data file filling in column b for fragment 0, update fragment 0&#39;s metadata, and then commit?
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceFragment.merge_columns</code> does not work because it believes column b already exists on fragment 0. <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceFragment.create</code> does not work because it demands values for column a.
Related: <a href="https://discord.com/channels/1030247538198061086/1359312729369739365" onclick="scrollToMessage(event, '1359312729369739365')">https://discord.com/channels/1030247538198061086/1359312729369739365</a>
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-py"># %%
import lance
import pyarrow as pa

dataset_path = &quot;./test.lance&quot;
ds = lance.write_dataset(
    pa.table({&quot;a&quot;: [1, 2, 3]}),
    dataset_path,
)

ds.add_columns(pa.schema([(&quot;b&quot;, pa.string())]))
ds.insert(pa.table({&quot;a&quot;: [6, 7, 8], &quot;b&quot;: [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]}))
ds.insert(pa.table({&quot;a&quot;: [9, 10, 11], &quot;b&quot;: [None, None, None]}, schema=ds.schema))
# %%
ds.to_table()
# pyarrow.Table
# a: int64
# b: string
# ----
# a: [[1,2,3],[6,7,8],[9,10,11]]
# b: [[null,null,null],[&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;],[null,null,null]]

# %% list the fragments: each corresponds to a list of physical files
for frag in ds.get_fragments():
    print(frag.fragment_id, [file.field_ids() for file in frag.data_files()])
# 0 [[0]]
# 1 [[0, 1]]
# 2 [[0, 1]]</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1359935848979759164 class=chatlog__message-container data-message-id=1359935848979759164><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Thursday, April 10, 2025 12:59â€¯PM"><a href=#chatlog__message-container-1359935848979759164>4/10/2025 12:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a pylance dataset with a clip embedding column. I&#39;m looking to dedup the dataset with cosine similarity scores (i.e. randomly select a single row for rows that have a similarity score above a threshold). 

What would be the best way to do this?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1360082357893206181 class=chatlog__message-container data-message-id=1360082357893206181><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=qian_00349 data-user-id=1139637723725041674>Qian</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, April 10, 2025 10:41â€¯PM"> <a href=#chatlog__message-container-1360082357893206181>4/10/2025 10:41â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1360302217613279425 class=chatlog__message-container data-message-id=1360302217613279425><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Friday, April 11, 2025 1:15â€¯PM"><a href=#chatlog__message-container-1360302217613279425>4/11/2025 1:15â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Just want to say, lance has been a game changer for our dataset management. Thank you for the work you guys are doing!</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=fire><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ”¥ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f525.svg loading=lazy> <span class=chatlog__reaction-count>5</span></div><div class=chatlog__reaction title=tada><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸŽ‰ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f389.svg loading=lazy> <span class=chatlog__reaction-count>4</span></div><div class=chatlog__reaction title=100><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ’¯ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4af.svg loading=lazy> <span class=chatlog__reaction-count>2</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1360328377663357181 class=chatlog__message-container data-message-id=1360328377663357181><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span class=chatlog__timestamp title="Friday, April 11, 2025 2:59â€¯PM"><a href=#chatlog__message-container-1360328377663357181>4/11/2025 2:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thank you for the kind words! Let us know how we can make Lance even better in the future</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1361453201509060658 class=chatlog__message-container data-message-id=1361453201509060658><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rokey24 data-user-id=839969627538980874>rokey24</span> <span class=chatlog__timestamp title="Monday, April 14, 2025 5:28â€¯PM"><a href=#chatlog__message-container-1361453201509060658>4/14/2025 5:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, I have created a lance dataset by first creating fragments and then adding the fragments using LanceOperation, and committing it. The dataset shows correct number of entries. But when I try to compact, it is giving the error.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1361715156484362260 class=chatlog__message-container data-message-id=1361715156484362260><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Tuesday, April 15, 2025 10:49â€¯AM"><a href=#chatlog__message-container-1361715156484362260>4/15/2025 10:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks, do you have an example describing large scale data import? For ex you take some really large image dataset, compute some embeddings and insert the data into lance in a distributed manner. If not, i think it would be great to create one. Ideally, expending it by adding new column after import</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1361715896669835514 class=chatlog__message-container data-message-id=1361715896669835514><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/725759677543088150/7030aa8bf2757783db461e1cd84dde0a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=andrijazz>andrijazz</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1361715156484362260')"> Hey folks, do you have an example describing large scale data import? For ex you take some really large image dataset, compute some embeddings and insert the data into lance in a distributed manner. If not, i think it would be great to create one. Ideally, expending it by adding new column after import </span></div></div><div class=chatlog__header><span class=chatlog__author title=prashant_dixit data-user-id=725759677543088150>PrashantDixit</span> <span class=chatlog__timestamp title="Tuesday, April 15, 2025 10:52â€¯AM"><a href=#chatlog__message-container-1361715896669835514>4/15/2025 10:52â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Good idea <span class="chatlog__markdown-mention" title="andrijazz">@andrijazz</span></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1361756778953576661 class=chatlog__message-container data-message-id=1361756778953576661><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/897078019674501171/fe4fe7ec52f852cee4538cc09504b008.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=andrijazz>andrijazz</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1361715156484362260')"> Hey folks, do you have an example describing large scale data import? For ex you take some really large image dataset, compute some embeddings and insert the data into lance in a distributed manner. If not, i think it would be great to create one. Ideally, expending it by adding new column after import </span></div></div><div class=chatlog__header><span class=chatlog__author title=jorgeb_justicio data-user-id=897078019674501171>jorgeb</span> <span class=chatlog__timestamp title="Tuesday, April 15, 2025 1:35â€¯PM"><a href=#chatlog__message-container-1361756778953576661>4/15/2025 1:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Maybe this post helps -&gt; <a href="https://blog.lancedb.com/convert-any-image-dataset-to-lance/">https://blog.lancedb.com/convert-any-image-dataset-to-lance/</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://blog.lancedb.com/convert-any-image-dataset-to-lance/"><div class="chatlog__markdown chatlog__markdown-preserve">Convert any Image dataset to Lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">In our previous article, we explored the remarkable capabilities of the Lance format, a modern, columnar data storage solution designed to revolutionize the way we work with large image datasets in machine learning. For the same purpose, I have converted the cinic and mini-imagenet datasets to their lance versions. For</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/pEbtYYLhLbc4HQbrC6QNOmboW3YNwqEWsTLylp-7yk8/https/blog.lancedb.com/content/images/2024/04/meme_reaction-2.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/pEbtYYLhLbc4HQbrC6QNOmboW3YNwqEWsTLylp-7yk8/https/blog.lancedb.com/content/images/2024/04/meme_reaction-2.png alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=fire><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ”¥ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f525.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1362169962650927404 class=chatlog__message-container data-message-id=1362169962650927404><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Wednesday, April 16, 2025 4:57â€¯PM"><a href=#chatlog__message-container-1362169962650927404>4/16/2025 4:57â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks! We&#39;ve been running into errors related to the Python GIL lately and am wondering if y&#39;all have any insight and/or suggestions to address them. For context, we don&#39;t do any multithreading when working with LanceDB but we do a fair amount of multiprocessing. For example, deleting a bunch of rows from different tables, each in its own process.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1363284699883245818 class=chatlog__message-container data-message-id=1363284699883245818><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Saturday, April 19, 2025 6:46â€¯PM"><a href=#chatlog__message-container-1363284699883245818>4/19/2025 6:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is there a way to query the db for like 5 random items so i can use their pydantic <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">@property</code> methods? i know i can get random ones with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">to_pandas</code> but then i can&#39;t call the property methods right?</span></div></div></div></div><div id=chatlog__message-container-1363284932499210363 class=chatlog__message-container data-message-id=1363284932499210363><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, April 19, 2025 6:47â€¯PM">6:47â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><s>I&#39;m also wondering what the best method for sorting by &quot;date added&quot; would be</s> i figured this one out</span> <span class=chatlog__edited-timestamp title="Saturday, April 19, 2025 8:16â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1363327851318743051 class=chatlog__message-container data-message-id=1363327851318743051><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=blackscales18>blackscales18</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1363284932499210363')"> <s>I&#39;m also wondering what the best method for sorting by &quot;date added&quot; would be</s> i figured this one out </span> <span class=chatlog__reply-edited-timestamp title="Saturday, April 19, 2025 8:16â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Saturday, April 19, 2025 9:38â€¯PM"><a href=#chatlog__message-container-1363327851318743051>4/19/2025 9:38â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Coming back to this, what&#39;s the best way to query for dates closest to a queried date, should I create a full text search index on the date column</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1363347525762945028 class=chatlog__message-container data-message-id=1363347525762945028><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=chebbychefneq data-user-id=913676166710300702>Rob Meng</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, April 19, 2025 10:56â€¯PM"> <a href=#chatlog__message-container-1363347525762945028>4/19/2025 10:56â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1363348968716767296 class=chatlog__message-container data-message-id=1363348968716767296><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=chebbychefneq data-user-id=913676166710300702>Rob Meng</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Saturday, April 19, 2025 11:02â€¯PM"> <a href=#chatlog__message-container-1363348968716767296>4/19/2025 11:02â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364197522683199538 class=chatlog__message-container data-message-id=1364197522683199538><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Tuesday, April 22, 2025 7:13â€¯AM"><a href=#chatlog__message-container-1364197522683199538>4/22/2025 7:13â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks, is there a way to alter existing lance table that has 1bn images with new column <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">embeddings</code> and update it with the clip embeddings for each image?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364233317595217950 class=chatlog__message-container data-message-id=1364233317595217950><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=andrijazz>andrijazz</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1364197522683199538')"> Hey folks, is there a way to alter existing lance table that has 1bn images with new column <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">embeddings</code> and update it with the clip embeddings for each image? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span class=chatlog__timestamp title="Tuesday, April 22, 2025 9:36â€¯AM"><a href=#chatlog__message-container-1364233317595217950>4/22/2025 9:36â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi <span class="chatlog__markdown-mention" title="andrijazz">@andrijazz</span> , 
This should be possible using existing read/write operations. Are you using pure lance or LanceDB tables?
Have you looked at merge_insert and embedding functions in LanceDB? 
<a href="https://lancedb.github.io/lancedb/embeddings/embedding_functions/">https://lancedb.github.io/lancedb/embeddings/embedding_functions/</a>
<a href="https://lancedb.github.io/lancedb/guides/tables/merge_insert/">https://lancedb.github.io/lancedb/guides/tables/merge_insert/</a>
We are also introducing some advanced embedding features in our enterprise product. If you would like to meet with the team to learn more please let me know.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364235626441998497 class=chatlog__message-container data-message-id=1364235626441998497><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Tuesday, April 22, 2025 9:45â€¯AM"><a href=#chatlog__message-container-1364235626441998497>4/22/2025 9:45â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi <span class="chatlog__markdown-mention" title="rpgreen_lancedb">@Ryan</span>. Thanks for the reply. I am using lancedb tables? So you are saying doing merge_insert on 1bn rows split into batches should work? Wont that create huge amount of table versions?</span> <span class=chatlog__edited-timestamp title="Tuesday, April 22, 2025 9:46â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364249371520143401 class=chatlog__message-container data-message-id=1364249371520143401><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=andrijazz>andrijazz</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1364235626441998497')"> Hi <span class="chatlog__markdown-mention" title="rpgreen_lancedb">@Ryan</span>. Thanks for the reply. I am using lancedb tables? So you are saying doing merge_insert on 1bn rows split into batches should work? Wont that create huge amount of table versions? </span> <span class=chatlog__reply-edited-timestamp title="Tuesday, April 22, 2025 9:46â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span class=chatlog__timestamp title="Tuesday, April 22, 2025 10:39â€¯AM"><a href=#chatlog__message-container-1364249371520143401>4/22/2025 10:39â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes that should work. It will create many versions depending on the batch sizes but you can always clean up old versions afterwards.</span> <span class=chatlog__edited-timestamp title="Tuesday, April 22, 2025 10:40â€¯AM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1364249840510308414 class=chatlog__message-container data-message-id=1364249840510308414><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Tuesday, April 22, 2025 10:41â€¯AM">10:41â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>See <a href="https://lancedb.github.io/lancedb/python/python/#__codelineno-0-1140">https://lancedb.github.io/lancedb/python/python/#__codelineno-0-1140</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364260478355771424 class=chatlog__message-container data-message-id=1364260478355771424><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andrijazz data-user-id=786295637913108480>andrijazz</span> <span class=chatlog__timestamp title="Tuesday, April 22, 2025 11:24â€¯AM"><a href=#chatlog__message-container-1364260478355771424>4/22/2025 11:24â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="rpgreen_lancedb">@Ryan</span> do you maybe have example script for doing this efficently and in a distributed manner?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364306847661555887 class=chatlog__message-container data-message-id=1364306847661555887><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kevinwmerritt data-user-id=741347330929983518>kevin</span> <span class=chatlog__timestamp title="Tuesday, April 22, 2025 2:28â€¯PM"><a href=#chatlog__message-container-1364306847661555887>4/22/2025 2:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>it would be nice to see an example in the documentation about how to add new embeddings to a table or new columns in batch and then clean it up</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1364678935996141588 class=chatlog__message-container data-message-id=1364678935996141588><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span class=chatlog__timestamp title="Wednesday, April 23, 2025 3:06â€¯PM"><a href=#chatlog__message-container-1364678935996141588>4/23/2025 3:06â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Here&#39;s an example using lance and add_columns with a UDF: <a href="https://lancedb.github.io/lance/api/py_modules.html#lance.LanceDataset.add_columns">https://lancedb.github.io/lance/api/py_modules.html#lance.LanceDataset.add_columns</a>
This is single threaded but should work ok for large tables. If you need to do this in a distributed fashion you could build it using Ray. We also offer distributed add_column / embedding generation as part of LanceDB Enterprise.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1365395606914203679 class=chatlog__message-container data-message-id=1365395606914203679><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=bluescepter data-user-id=688568641343717584>bluescepter</span> <span class=chatlog__timestamp title="Friday, April 25, 2025 2:34â€¯PM"><a href=#chatlog__message-container-1365395606914203679>4/25/2025 2:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ve hit an error when using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">MergeInsertBuilder</code> that I&#39;ve never seen before:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError(&#39;LanceError(IO): task 487 panicked with message &quot;A Tokio 1.x context was found, but timers are disabled. Call `enable_time` on the runtime builder to enable timers.&quot;, /home/runner/work/lance/lance/rust/lance/src/dataset/write/merge_insert.rs:962:24&#39;)</code>
I&#39;ve never seen this specific exception before. Nominally, I&#39;d figure out a minimally reproducible example before sharing with y&#39;all, but unfortunately, this is happening in a production deployment, so it&#39;s a bit involved for me to get to the dataset/process to figure out what&#39;s special about it. Given the error message, I&#39;m guessing (hoping <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ¤ž"
    title="fingers_crossed"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f91e.svg">) there&#39;s maybe some simple flag I could flip on (this <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">enable_time</code> one sounds promising <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜…"
    title="sweat_smile"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f605.svg">)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1366380415727964251 class=chatlog__message-container data-message-id=1366380415727964251><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=h3zi7 data-user-id=907713037295841283>h3zi</span> <span class=chatlog__timestamp title="Monday, April 28, 2025 7:47â€¯AM"><a href=#chatlog__message-container-1366380415727964251>4/28/2025 7:47â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi all,
After creating an IVF-PQ index, is it possible to extract inverted index? i.e. mapping of centroid to list of vectors (vector id\ vector metadata)
Thaks!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1366445821159276578 class=chatlog__message-container data-message-id=1366445821159276578><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, April 28, 2025 12:07â€¯PM"> <a href=#chatlog__message-container-1366445821159276578>4/28/2025 12:07â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1366861805028249770 class=chatlog__message-container data-message-id=1366861805028249770><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/760814299542847509/036af905443ec03fede815c45587fbbd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cmacboyd data-user-id=760814299542847509>cmacboyd</span> <span class=chatlog__timestamp title="Tuesday, April 29, 2025 3:40â€¯PM"><a href=#chatlog__message-container-1366861805028249770>4/29/2025 3:40â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey, I am testing a really big filter on a relatively small table. I tend to get a segmentation fault and my process dies when I try this. While this is probably reasonable, I don&#39;t *really *understand why that happens. 

My filter is on a column of GUIDs (I have a string of doing ~30k <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">id_col = guid1 OR id_col = guid2 OR ... OR id_col = guid30000</code> in my <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">where</code> method) and my table only has ~10k vectors in it. For this (arguably silly, I know) use case I can just get all the vectors from the table and do a filtering in python with reasonable enough latency, but I was wondering if there&#39;s a better way leveraging LanceDB, or what the limitation is there. Is it possible that this sort of thing has to do with filter push down? Thanks!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1366868118877503503 class=chatlog__message-container data-message-id=1366868118877503503><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, April 29, 2025 4:05â€¯PM"> <a href=#chatlog__message-container-1366868118877503503>4/29/2025 4:05â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1367177528858640494 class=chatlog__message-container data-message-id=1367177528858640494><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=mwildehahn data-user-id=108305940062687232>mwildehahn</span> <span class=chatlog__timestamp title="Wednesday, April 30, 2025 12:35â€¯PM"><a href=#chatlog__message-container-1367177528858640494>4/30/2025 12:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Are there examples of running lancedb as a service my fastapi app can connect to? I was hoping I could run it in a way that my fastapi app could just specify it as a URL via the lancedb library vs having to write my own API wrapper around it</span> <span class=chatlog__edited-timestamp title="Wednesday, April 30, 2025 12:37â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1367192268246880419 class=chatlog__message-container data-message-id=1367192268246880419><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/569691375386492949/bd57241d26dc6bc619408a4891df0f68.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=haocheng001 data-user-id=569691375386492949>Haocheng Liu</span> <span class=chatlog__timestamp title="Wednesday, April 30, 2025 1:33â€¯PM"><a href=#chatlog__message-container-1367192268246880419>4/30/2025 1:33â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, got a newbie question:
<s>Right now I&#39;ve followed the developer guide and setup a local python virtual environment to run my custom examples from the local lance built binaries from the github repo. In order to tackle the good first issue on github, i would like to utize the existing python tests in python/tests. Could anyone guide how i can run them?
So far I use virtualenv to run code with local built python via .venv/bin/python hello_lance.py, in order to run .venv/bin/python python/tests/test_scalar_index.py, does it mean i need to pip install all needed dependencies one by one?</s> fixed by installing dependencies one by one manually

(there is a pyproject.toml and i tried <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pip install -e .</code> which runs so slowly <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜¦"
    title="frowning"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f626.svg"> 
another follow up is what&#39;s the proper way to run the tests in vanilla rust as well..? I come from C++ background, still in learning rust mode
ty</span> <span class=chatlog__edited-timestamp title="Wednesday, April 30, 2025 1:47â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1367213401478004842 class=chatlog__message-container data-message-id=1367213401478004842><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, April 30, 2025 2:57â€¯PM"> <a href=#chatlog__message-container-1367213401478004842>4/30/2025 2:57â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1370412149293453412 class=chatlog__message-container data-message-id=1370412149293453412><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Friday, May 9, 2025 10:48â€¯AM"><a href=#chatlog__message-container-1370412149293453412>5/9/2025 10:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Can someone please help me understand what is going on here? The small table attached has 54 rows. All but one has a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">state</code> field set to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ingested</code>. The last one has a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">state</code> field set to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ingest-failed</code>. Querying the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">state</code> field with DuckDB  returns nothing until I update the column.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">import os
import shutil
import tarfile

import duckdb
import lancedb  # type: ignore[import-untyped]


def run_query(colname, value):

    db = lancedb.connect(&quot;/tmp/testdb&quot;)
    tbl = db.open_table(&quot;dataset&quot;)

    _tbl = tbl.to_lance()
    query = f&quot;SELECT * FROM _tbl WHERE {colname} == &#39;{value}&#39;&quot;
    print(f&quot;query = {query}&quot;)
    print(duckdb.sql(query))


if __name__ == &quot;__main__&quot;:

    shutil.rmtree(&quot;/tmp/testdb&quot;, ignore_errors=True)
    os.mkdir(&quot;/tmp/testdb&quot;)

    with tarfile.open(&quot;dataset.lance.tar.gz&quot;, &quot;r:gz&quot;) as f:
        f.extractall(&quot;/tmp/testdb&quot;, filter=&quot;fully_trusted&quot;)

    run_query(&quot;state&quot;, &quot;ingest-failed&quot;)

    db = lancedb.connect(&quot;/tmp/testdb&quot;)
    tbl = db.open_table(&quot;dataset&quot;)
    tbl.update(values={&quot;state&quot;: &quot;ingest-failed&quot;})

    run_query(&quot;state&quot;, &quot;ingest-failed&quot;)</code></span></div><div class=chatlog__attachment><div class=chatlog__attachment-generic><svg class=chatlog__attachment-generic-icon><use href=#attachment-icon /></svg><div class=chatlog__attachment-generic-name><a href="https://cdn.discordapp.com/attachments/1197630499926057021/1370412148940869762/dataset.lance.tar.gz?ex=697b7345&amp;is=697a21c5&amp;hm=41a0ca0b77ce62eb318b24924e9a60b27e5615f7584433f9de0a3cb2bc30b8d7&amp;"> dataset.lance.tar.gz </a></div><div class=chatlog__attachment-generic-size>7.17 KB</div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1370427792436498577 class=chatlog__message-container data-message-id=1370427792436498577><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, May 9, 2025 11:50â€¯AM"> <a href=#chatlog__message-container-1370427792436498577>5/9/2025 11:50â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1371147357671915713 class=chatlog__message-container data-message-id=1371147357671915713><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/816385188337549383/a2b939f16325b09405dca4e71b4a1b7f.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jungealexander data-user-id=816385188337549383>alex</span> <span class=chatlog__timestamp title="Sunday, May 11, 2025 11:30â€¯AM"><a href=#chatlog__message-container-1371147357671915713>5/11/2025 11:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><strong>Beginner questions regarding lancedb&#39;s RAM usage and latency when reading from Blob Storage</strong>

Hello! New lancedb user here taking the project for a spin: For testing, I created an HNSW vector index with 3M 384-dim vectors (149G on disk) of random numbers which I subsequently uploaded to Azure Blob Storage and ran ANN queries against. My two observations and questions are:

1. I saw significant RAM usage on my machine  (20G+) when running <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.search(np.random.random((N_DIM))).limit(10).to_pandas()</code>. This seems prohibitive when my primary usecase would be to query from serverless functions. Is this to be expect? Can I optimize this somehow?

2. The first query to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">tbl.search(np.random.random((N_DIM))).limit(10).to_pandas()</code> consistently took more than 8 minutes to come back and sometimes failed. Subsequent queries took around 1s (as expected from the lancedb docs). Is this to be expected? Can I optimize this somehow?

I could not find guides on either topic (and the lancedb AI chat di not either) - please feel free to point me to those if I overlooks them (or maybe consider adding them to your docs). Thanks in advance for any help here!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1372400067587215360 class=chatlog__message-container data-message-id=1372400067587215360><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rayterrill data-user-id=865271413186232343>rayterrill</span> <span class=chatlog__timestamp title="Wednesday, May 14, 2025 10:27â€¯PM"><a href=#chatlog__message-container-1372400067587215360>5/14/2025 10:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Got a question about <a href="https://python.langchain.com/docs/integrations/vectorstores/lancedb/">Langchain Vectorstore integration</a> and the <a href="https://python.langchain.com/docs/how_to/indexing/">Indexing API</a>.

First of all the library has been brilliant to work with. Been a lot of fun thus far.

I got the indexing api piece roughly working with LanceDB despite the docs saying it&#39;s not supported. But I&#39;m seeing some interesting behavior that I don&#39;t understand when I&#39;m trying to use the HTMLSemanticPreservingSplitter.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    documents = HTMLSemanticPreservingSplitter(
        headers_to_split_on=[(&quot;h1&quot;, &quot;Header 1&quot;), (&quot;h2&quot;, &quot;Header 2&quot;), (&quot;h3&quot;, &quot;Header 3&quot;)],
        max_chunk_size=1000,
        chunk_overlap=200,
        preserve_parent_metadata=True
    ).transform_documents(docs)
    print(f&quot;Chunked {len(documents)} documents.&quot;)</code>

It works great the first time, and when I dump my schema I see that I have my metadata and it contains Header1/2/3:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">vector: fixed_size_list&lt;item: float&gt;[1536]
  child 0, item: float
id: string
text: string
metadata: struct&lt;Header 1: string, Header 2: string, Header 3: string, creationDate: string, id: int64, isClosed: bool, isDeleted: bool, isObsolete: bool, lastActivityDate: string, title: string, type: string, viewCount: int64, webUrl: string&gt;
  child 0, Header 1: string
  child 1, Header 2: string
  child 2, Header 3: string</code>

Continued in thread</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://python.langchain.com/docs/integrations/vectorstores/lancedb/"><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB | <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ¦œ"
    title="parrot"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f99c.svg">ï¸<img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ”—"
    title="link"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f517.svg"> LangChain</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">LanceDB is an open-source database for vector-search built with persistent storage, which greatly simplifies retrevial, filtering and management of embeddings. Fully open source.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/vLM3625FiNgPHGXc1FxR3zPqUr5XXiPYa_9SV9JPQGo/https/python.langchain.com/img/brand/theme-image.png> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/vLM3625FiNgPHGXc1FxR3zPqUr5XXiPYa_9SV9JPQGo/https/python.langchain.com/img/brand/theme-image.png alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1372607743101374485 class=chatlog__message-container data-message-id=1372607743101374485><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Thursday, May 15, 2025 12:13â€¯PM"><a href=#chatlog__message-container-1372607743101374485>5/15/2025 12:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;ve been perodically seeing this error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError(&quot;lance error: LanceError(IO): Generic S3 error: Failed to resolve region for bucket &#39;&lt;REDACTED&gt;&#39;, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-io-0.25.0/src/object_store.rs:257:13&quot;)</code>
The &quot;Configuring Storage&quot; docs read:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">The AWS region the bucket is in. This can be automatically detected when using AWS S3, but must be specified for S3-compatible stores.</code>
Is this detection logic periodically (and non-deterministically) failing for some reason? And could it be solved by always specifying the region explicitly?</span> <span class=chatlog__edited-timestamp title="Thursday, May 15, 2025 12:40â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1372698640841179211 class=chatlog__message-container data-message-id=1372698640841179211><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, May 15, 2025 6:14â€¯PM"> <a href=#chatlog__message-container-1372698640841179211>5/15/2025 6:14â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1373081231771566161 class=chatlog__message-container data-message-id=1373081231771566161><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=justinb5010 data-user-id=325029019550613514>justinb5010</span> <span class=chatlog__timestamp title="Friday, May 16, 2025 7:34â€¯PM"><a href=#chatlog__message-container-1373081231771566161>5/16/2025 7:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I&#39;m wondering if there are any known limits on concurrency when writing? I&#39;m using LanceDB version 0.22.0 and Lance version 0.26.1 with a table in S3 and found that if I write with too many tasks at once then the writes start to get stuck indefinitely. I&#39;m using lance.write_dataset and this seems to be an issue if I go over ~25 tasks writing at the same time. I&#39;ll first see the below message:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">target=&quot;object_store::client::retry&quot; message=Checking for error in response_body: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
target=&quot;lance::file_audit&quot; mode=&quot;create&quot; type=&quot;data&quot; path=&quot;c619a50b-dbaf-40fa-a242-54899147c740.lance&quot;</code>
And then get the following message repeating as long as I let the task run:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">target=&quot;lance::file_audit&quot; mode=&quot;create&quot; type=&quot;data&quot; path=&quot;dummy&quot;</code></span> <span class=chatlog__edited-timestamp title="Friday, May 16, 2025 7:35â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1373087861133541491 class=chatlog__message-container data-message-id=1373087861133541491><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, May 16, 2025 8:00â€¯PM"> <a href=#chatlog__message-container-1373087861133541491>5/16/2025 8:00â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1374806370037268543 class=chatlog__message-container data-message-id=1374806370037268543><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/389519377780703242/6c77e360a222b6cd34a9b76b2ba554f3.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=vigenere92 data-user-id=389519377780703242>vigenere92</span> <span class=chatlog__timestamp title="Wednesday, May 21, 2025 1:49â€¯PM"><a href=#chatlog__message-container-1374806370037268543>5/21/2025 1:49â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! We are thinking of moving from weaviate to lancedb and re running benchmarks for it. For starters we ran queries over 3.8 million 768 dimension vectors. Created IVF-PQ index with 7800 cluster and 48 subvectors. We searching with a limit of 50 and using aws EFS as the storage layer. The queries are consistently taking 1-2 seconds which is considerably higher. Is this expected?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1374811501294256172 class=chatlog__message-container data-message-id=1374811501294256172><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, May 21, 2025 2:10â€¯PM"> <a href=#chatlog__message-container-1374811501294256172>5/21/2025 2:10â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1375833116328984690 class=chatlog__message-container data-message-id=1375833116328984690><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=yatterman6173 data-user-id=509028504034082831>yatterman6173</span> <span class=chatlog__timestamp title="Saturday, May 24, 2025 9:49â€¯AM"><a href=#chatlog__message-container-1375833116328984690>5/24/2025 9:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi I&#39;m currently trying to implement Hybrid Search and I&#39;m posting to see if anyone has a similar issue with me or if I&#39;m misunderstanding something but this could probably be fixed if I reimplement a custom LinearCombinationReranker
this is my code
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">top_k = max_docs * chunks_per_doc * overfetch_multiplier
    results = table.search(query_type=&quot;hybrid&quot;, vector_column_name=&quot;embedding&quot;, fts_columns=&quot;text&quot;).vector(query_embedding).text(query).limit(top_k).rerank(reranker).to_pandas()</code>
I also have indexes for FTS and vector embeddings
This is a similar issue: <a href="https://github.com/lancedb/lancedb/issues/1671">https://github.com/lancedb/lancedb/issues/1671</a>
I understand that if vector results are not included in the FTS results it receives a NaN
The issue is during the relevance score calculation I&#39;m guessing the distance NaN is treated as 0 distance and the results I would get would just be based on the FTS results.
For example if I set the weight=0.9 a top result entry can have a _distance = NaN and _score = 9.623499 this will result in _relevance_score = 0.999365
but this is incorrect since the entry is not included in the vector search result set  meaning it has a high distance
to test this I was also retrieving the same documents if I set the weight=0 so weight is unused
I&#39;m only retrieving the correct results if I set the weight=1 (results makes use of the vector distance)
Actually I&#39;m still confused why the vector distance NaN is happening since the LinearCombinationReranker has a fill function</span> <span class=chatlog__edited-timestamp title="Saturday, May 24, 2025 9:55â€¯AM">(edited)</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/1671><div class="chatlog__markdown chatlog__markdown-preserve">Feature: Allow imputing missing scores from hybrid search results ...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">SDK Python Description This is how hybrid search handles missing scores from result set: we combine results from vector search and full-text search and then rerank them. It is possible that there a...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/lok50f0FTg75qrmhUbHxDSFud3xZyIj8dMH4IIqiQ94/https/opengraph.githubassets.com/acc64505b3e9d64f2b712cee8169a520fde57f1b744522744fd379972d04117f/lancedb/lancedb/issues/1671> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/lok50f0FTg75qrmhUbHxDSFud3xZyIj8dMH4IIqiQ94/https/opengraph.githubassets.com/acc64505b3e9d64f2b712cee8169a520fde57f1b744522744fd379972d04117f/lancedb/lancedb/issues/1671 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1375837639760154706 class=chatlog__message-container data-message-id=1375837639760154706><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=yatterman6173>yatterman6173</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1375833116328984690')"> Hi I&#39;m currently trying to implement Hybrid Search and I&#39;m posting to see if anyone has a similar issue with me or if I&#39;m misunderstanding something but this could probably be fixed if I reimplement a custom LinearCombinationReranker
this is my code
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">top_k = max_docs * chunks_per_doc * overfetch_multiplier
    results = table.search(query_type=&quot;hybrid&quot;, vector_column_name=&quot;embedding&quot;, fts_columns=&quot;text&quot;).vector(query_embedding).text(query).limit(top_k).rerank(reranker).to_pandas()</code>
I also have indexes for FTS and vector embeddings
This is a similar issue: <a href="https://github.com/lancedb/lancedb/issues/1671">https://github.com/lancedb/lancedb/issues/1671</a>
I understand that if vector results are not included in the FTS results it receives a NaN
The issue is during the relevance score calculation I&#39;m guessing the distance NaN is treated as 0 distance and the results I would get would just be based on the FTS results.
For example if I set the weight=0.9 a top result entry can have a _distance = NaN and _score = 9.623499 this will result in _relevance_score = 0.999365
but this is incorrect since the entry is not included in the vector search result set  meaning it has a high distance
to test this I was also retrieving the same documents if I set the weight=0 so weight is unused
I&#39;m only retrieving the correct results if I set the weight=1 (results makes use of the vector distance)
Actually I&#39;m still confused why the vector distance NaN is happening since the LinearCombinationReranker has a fill function </span> <span class=chatlog__reply-edited-timestamp title="Saturday, May 24, 2025 9:55â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Saturday, May 24, 2025 10:07â€¯AM"><a href=#chatlog__message-container-1375837639760154706>5/24/2025 10:07â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>No relevance calcluation for all model based rerankers is not based on vector or fts scores. That is why they actually end up improving the results in most cases. Most rerankers independently score the results based on the query. The fts and vector scores were used in LinearCombination reranker which was the default vanilla option before. Right now its deprecated and RRF is the default reranker, which should not use the scores. 
Either way, in any serious model-based reranker, the individual scores are not taken into account as they independently encode the query and results to calculate &quot;_relevance_Score&quot;</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1377621312616402998 class=chatlog__message-container data-message-id=1377621312616402998><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garyli_1019 data-user-id=1256134716306886719>garyli1019</span> <span class=chatlog__timestamp title="Thursday, May 29, 2025 8:15â€¯AM"><a href=#chatlog__message-container-1377621312616402998>5/29/2025 8:15â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I am trying to use python to write to a FUSE filesystem which doesn&#39;t support random write. Does lance using random write anywhere?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1377629234222075908 class=chatlog__message-container data-message-id=1377629234222075908><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, May 29, 2025 8:46â€¯AM"> <a href=#chatlog__message-container-1377629234222075908>5/29/2025 8:46â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1377965095933448212 class=chatlog__message-container data-message-id=1377965095933448212><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rahul_valyu data-user-id=1332323362201931859>Rahul</span> <span class=chatlog__timestamp title="Friday, May 30, 2025 7:01â€¯AM"><a href=#chatlog__message-container-1377965095933448212>5/30/2025 7:01â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I have my indexes in s3 and Iâ€™m intending to perform hybrid search. Since Iâ€™m using s3 for storage,  for the fts index I had to use native fts. Is it possible to index multiple columns for fts in this case? Or is it available only for tantivy? What if I just do:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.create_fts_index(&quot;column 1&quot;, use_tantivy=False, replace=True)
table.create_fts_index(&quot;column 2&quot;, use_tantivy=False, replace=True)</code>
Would this search over both the columns? If not, is there anyway I can do this without combining the columns?</span> <span class=chatlog__edited-timestamp title="Friday, May 30, 2025 7:02â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1379139127768911942 class=chatlog__message-container data-message-id=1379139127768911942><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/762192026653294603/0777b1b2252f5f54629d0b5ef334f9fd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=rahul_valyu>Rahul</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1377965095933448212')"> Hi, I have my indexes in s3 and Iâ€™m intending to perform hybrid search. Since Iâ€™m using s3 for storage,  for the fts index I had to use native fts. Is it possible to index multiple columns for fts in this case? Or is it available only for tantivy? What if I just do:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.create_fts_index(&quot;column 1&quot;, use_tantivy=False, replace=True)
table.create_fts_index(&quot;column 2&quot;, use_tantivy=False, replace=True)</code>
Would this search over both the columns? If not, is there anyway I can do this without combining the columns? </span> <span class=chatlog__reply-edited-timestamp title="Friday, May 30, 2025 7:02â€¯AM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jackye8397 data-user-id=762192026653294603>Jack Ye</span> <span class=chatlog__timestamp title="Monday, June 2, 2025 12:46â€¯PM"><a href=#chatlog__message-container-1379139127768911942>6/2/2025 12:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes currently FTS with lance index can only be created against individual columns, what you wrote above is correct. When you run table.search, you can specify fts_columns which is a list of columns.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1379347714185367553 class=chatlog__message-container data-message-id=1379347714185367553><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/688790145238827035/1ddc77e1d10acdd4ec1c782e0ac3b93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=haritsahm data-user-id=688790145238827035>haritsah</span> <span class=chatlog__timestamp title="Tuesday, June 3, 2025 2:35â€¯AM"><a href=#chatlog__message-container-1379347714185367553>6/3/2025 2:35â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey guys, I&#39;m currently creating lance dataset for multimodal data. The data is similar to Nuscene 3D format with multi-vie images and point cloud/voxel semantic. This is the the columns that store large data:
<ul><li>Images are in 4k resolution in separate columns for each camera (N-cameras)</li><li>For pointcloud/voxel, I store the occupancy data (400x400x128) at maximum of ~20.5M points. But we only store the occupied ones, roughly around 30-40% of the total grid as (Nx4, where 4 is the x-y-z grid indexes + semantic label) array.</li></ul>Each row will have these data, so my questions are:
<ul><li>Do I need to use LargeBinary for occupancy data and keep the images as Binary? I saw the Blob as Files but I&#39;m unsure on how to use it</li><li>Do I need to set the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">max_bytes_per_file</code>? For now I set it as ~1GB because I thought that&#39;s the size for a single row data.</li><li>Do I need to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">DatasetOptimizer</code>?</li><li>I got some OffsetOverflow when using lance dataset with ray dataset. But I found the solution in the issues where I need to set the scanner_option. Why do I need to set that value?</li></ul></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1379493597069578345 class=chatlog__message-container data-message-id=1379493597069578345><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, June 3, 2025 12:15â€¯PM"> <a href=#chatlog__message-container-1379493597069578345>6/3/2025 12:15â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1379566137406259353 class=chatlog__message-container data-message-id=1379566137406259353><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Tuesday, June 3, 2025 5:03â€¯PM"><a href=#chatlog__message-container-1379566137406259353>6/3/2025 5:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey again folks. I am seeing the following error both when attempting to delete data from tables on S3 and when attempting to index tables on S3:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError(&#39;lance error: Commit conflict for version 185: Failed to commit the transaction after 20 retries., /root/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-0.27.2/src/io/commit.rs:921:19&#39;)</code>
Can I get some help understanding what may cause this, and what we can do to restore the state of our db such that we can delete / index again?</span> <span class=chatlog__edited-timestamp title="Tuesday, June 3, 2025 5:05â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1379576383419842686 class=chatlog__message-container data-message-id=1379576383419842686><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, June 3, 2025 5:44â€¯PM"> <a href=#chatlog__message-container-1379576383419842686>6/3/2025 5:44â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1380025354646982716 class=chatlog__message-container data-message-id=1380025354646982716><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/688790145238827035/1ddc77e1d10acdd4ec1c782e0ac3b93a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=haritsahm data-user-id=688790145238827035>haritsah</span> <span class=chatlog__timestamp title="Wednesday, June 4, 2025 11:28â€¯PM"><a href=#chatlog__message-container-1380025354646982716>6/4/2025 11:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi! I saw at Lance&#39;s integration with Pytorch, but it&#39;s actually an IterableDataset. In the Lance docs, there is a <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">take()</code> method to retrieve data based on an index. My question is, is it safe to use it so that I can access data sets based on indexes? Is it also safe to use it with ddp?</span> <span class=chatlog__edited-timestamp title="Wednesday, June 4, 2025 11:38â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1380175994257674282 class=chatlog__message-container data-message-id=1380175994257674282><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, June 5, 2025 9:26â€¯AM"> <a href=#chatlog__message-container-1380175994257674282>6/5/2025 9:26â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1380208048181874748 class=chatlog__message-container data-message-id=1380208048181874748><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Thursday, June 5, 2025 11:34â€¯AM"><a href=#chatlog__message-container-1380208048181874748>6/5/2025 11:34â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m back! We&#39;ve noticed a pattern that we&#39;re currently unable to explain. When we evolve a Lance schema by adding one or more columns and backfilling them with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">NULL</code>:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    table.add_columns(
        {
            &quot;robot_name&quot;: &quot;cast(NULL as string)&quot;,
        }
    )</code>
...we see errors the next time we attempt to index/optimize the table:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError(&#39;lance error: LanceError(IO): External error: LanceError(Arrow): Invalid argument error: Attempt to merge two RecordBatch with different sizes: 2286 != 2284, /root/.cargo/registry/src/index.crates.io-6f17d22bba15001f/lance-table-0.25.0/src/utils/stream.rs:46:25, /rustc/90b35a6239c3d8bdabc530a6a0816f7ff89a0aaf/library/core/src/task/poll.rs:290:44&#39;)</code>
The index/optimize operation works fine prior to evolving the schema.
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">â¯ pixi run python
Python 3.12.10 | packaged by conda-forge | (main, Apr 10 2025, 22:21:13) [GCC 13.3.0] on linux
&gt;&gt;&gt; import lance
&gt;&gt;&gt; lance.__version__
&#39;0.27.2&#39;
&gt;&gt;&gt; import lancedb
&gt;&gt;&gt; lancedb.__version__
&#39;0.21.2&#39;
&gt;&gt;&gt; </code>
Are we missing a step and/or using the API in an unexpected way?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1380319844641144914 class=chatlog__message-container data-message-id=1380319844641144914><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1153168578405748787/3465384296e0f34446bff2ed328733b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=everettvt_58805 data-user-id=1153168578405748787>Everett</span> <span class=chatlog__timestamp title="Thursday, June 5, 2025 6:58â€¯PM"><a href=#chatlog__message-container-1380319844641144914>6/5/2025 6:58â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Just getting this on <span class="chatlog__markdown-mention" style="color: rgb(230, 126, 34); background-color: rgba(230, 126, 34, 0.1);">@lancedb-team</span>  radar: <a href="https://github.com/Eventual-Inc/Daft/issues/4490">https://github.com/Eventual-Inc/Daft/issues/4490</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/Eventual-Inc/Daft/issues/4490><div class="chatlog__markdown chatlog__markdown-preserve">Adding support for LanceDB Table &amp; AsyncTable &#183; Issue #4490 &#183; Eve...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Is your feature request related to a problem? Looking to add support for LanceDB Tables in Sync and Async Versions so that the daft catalog can manage references to lancedb tables as well as iceber...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/NWdHgz4k9iL5k-vfdmDWhBBIqxhtO2OPqL1LsQ36N6Y/https/opengraph.githubassets.com/537267c96448e5c17b0aaee3daed814b618214a83e18d167793bb9dd8d4561bb/Eventual-Inc/Daft/issues/4490> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/NWdHgz4k9iL5k-vfdmDWhBBIqxhtO2OPqL1LsQ36N6Y/https/opengraph.githubassets.com/537267c96448e5c17b0aaee3daed814b618214a83e18d167793bb9dd8d4561bb/Eventual-Inc/Daft/issues/4490 alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=100><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ’¯ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4af.svg loading=lazy> <span class=chatlog__reaction-count>2</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1380324326456164432 class=chatlog__message-container data-message-id=1380324326456164432><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/762192026653294603/0777b1b2252f5f54629d0b5ef334f9fd.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1153168578405748787/3465384296e0f34446bff2ed328733b9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=everettvt_58805>Everett</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1380319844641144914')"> Just getting this on <span class="chatlog__markdown-mention" style="color: rgb(230, 126, 34); background-color: rgba(230, 126, 34, 0.1);">@lancedb-team</span>  radar: <a href="https://github.com/Eventual-Inc/Daft/issues/4490">https://github.com/Eventual-Inc/Daft/issues/4490</a> </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=jackye8397 data-user-id=762192026653294603>Jack Ye</span> <span class=chatlog__timestamp title="Thursday, June 5, 2025 7:16â€¯PM"><a href=#chatlog__message-container-1380324326456164432>6/5/2025 7:16â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>nice! added some thoughts there</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=raised_hands><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ™Œ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64c.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1380326727221514362 class=chatlog__message-container data-message-id=1380326727221514362><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1153168578405748787/3465384296e0f34446bff2ed328733b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=everettvt_58805 data-user-id=1153168578405748787>Everett</span> <span class=chatlog__timestamp title="Thursday, June 5, 2025 7:25â€¯PM"><a href=#chatlog__message-container-1380326727221514362>6/5/2025 7:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Awesome! Thanks for the quick reply! Man I need to get back to Seattle.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1381008498971906068 class=chatlog__message-container data-message-id=1381008498971906068><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Saturday, June 7, 2025 4:34â€¯PM"><a href=#chatlog__message-container-1381008498971906068>6/7/2025 4:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks, me again. I have no bugs or issues to report this time <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ˜‰"
    title="wink"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f609.svg">. Just thought I&#39;d chime in to appreciate the effort and responsiveness you folks put into Lance and this Discord. Your time-to-root-cause is excellent, your follow-through is all-but-guaranteed (thank you for <a href="https://github.com/lancedb/lance/issues/3812">this</a> fix!), and all while maintaining a pleasant demeanor. <img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ™"
    title="pray"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg"> [cc: <span class="chatlog__markdown-mention" title="wpace">@WestonPace</span> , <span class="chatlog__markdown-mention" title="wjones127">@Will Jones</span> ]</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/issues/3812><div class="chatlog__markdown chatlog__markdown-preserve">lancedb/lance</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Modern columnar data format for ML and LLMs implemented in Rust. Convert from parquet in 2 lines of code for 100x faster random access, vector index, and data versioning. Compatible with Pandas, Du...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/3pE-hQjtW1-jh3FfEC1m693N_HY_yHzA7HXjAK8diic/https/opengraph.githubassets.com/c78bbec247284057bdd61b1d1f1aec0b5d9249986ebfa14eb8132a51c2889c93/lancedb/lance> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/3pE-hQjtW1-jh3FfEC1m693N_HY_yHzA7HXjAK8diic/https/opengraph.githubassets.com/c78bbec247284057bdd61b1d1f1aec0b5d9249986ebfa14eb8132a51c2889c93/lancedb/lance alt=Thumbnail loading=lazy> </a></div></div></div></div><div class=chatlog__reactions><div class=chatlog__reaction title=fire><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ”¥ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f525.svg loading=lazy> <span class=chatlog__reaction-count>5</span></div><div class=chatlog__reaction title=tada><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸŽ‰ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f389.svg loading=lazy> <span class=chatlog__reaction-count>2</span></div><div class=chatlog__reaction title=thumbsup_tone1><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ðŸ» src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fb.svg loading=lazy> <span class=chatlog__reaction-count>3</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1381598418400575570 class=chatlog__message-container data-message-id=1381598418400575570><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=garyli_1019 data-user-id=1256134716306886719>garyli1019</span> <span class=chatlog__timestamp title="Monday, June 9, 2025 7:38â€¯AM"><a href=#chatlog__message-container-1381598418400575570>6/9/2025 7:38â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I&#39;d like to test the random access performance for lance. What is the best set up for the write configuration? I already set up storage_version=&quot;2.1&quot;. Is there any way to set full zip encoding for the entire row? My data include three fields, two string and one binary(or list[binary]). thanks!</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1381693268513001507 class=chatlog__message-container data-message-id=1381693268513001507><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=qian_00349 data-user-id=1139637723725041674>Qian</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, June 9, 2025 1:55â€¯PM"> <a href=#chatlog__message-container-1381693268513001507>6/9/2025 1:55â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382394175713968309 class=chatlog__message-container data-message-id=1382394175713968309><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:20â€¯PM"><a href=#chatlog__message-container-1382394175713968309>6/11/2025 12:20â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have two query plans, the top is without <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">postfilter()</code> and the bottom is with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">postfilter()</code> it appears the top is applying post filtering but the bottom isn&#39;t. Is the boolean backwards somewhere? 

The docs indicate it is off by default <a href="https://lancedb.github.io/lancedb/python/python/#lancedb.query.AsyncQuery.postfilter">https://lancedb.github.io/lancedb/python/python/#lancedb.query.AsyncQuery.postfilter</a> &quot;By default filtering will be performed before the search&quot;</span> <span class=chatlog__edited-timestamp title="Wednesday, June 11, 2025 12:21â€¯PM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1382394231015997540 class=chatlog__message-container data-message-id=1382394231015997540><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, June 11, 2025 12:21â€¯PM">12:21â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Without postfilter applied
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">ProjectionExec: expr=[block_uuid@3 as block_uuid, company_uuid@4 as company_uuid, document_uuid@5 as document_uuid, embedding@1 as embedding, published_date_unix@6 as published_date_unix, published_date_unix_day_precision@7 as published_date_unix_day_precision, published_date@8 as published_date, year_quarter@9 as year_quarter, document_id@10 as document_id, document_source_id@11 as document_source_id, document_type_id@12 as document_type_id, section_type_id@13 as section_type_id, company_id@14 as company_id, title@15 as title, ticker_exchange@16 as ticker_exchange, _distance@2 as _distance]
  Take: columns=&quot;_rowid, embedding, _distance, (block_uuid), (company_uuid), (document_uuid), (published_date_unix), (published_date_unix_day_precision), (published_date), (year_quarter), (document_id), (document_source_id), (document_type_id), (section_type_id), (company_id), (title), (ticker_exchange)&quot;
    CoalesceBatchesExec: target_batch_size=1024
      GlobalLimitExec: skip=0, fetch=100
        FilterExec: _distance@2 IS NOT NULL
          SortExec: TopK(fetch=100), expr=[_distance@2 ASC NULLS LAST], preserve_partitioning=[false]
            KNNVectorDistance: metric=l2
              Take: columns=&quot;_distance, _rowid, (embedding)&quot;
                CoalesceBatchesExec: target_batch_size=1024
                  SortExec: TopK(fetch=100), expr=[_distance@0 ASC NULLS LAST], preserve_partitioning=[false]
                    ANNSubIndex: name=embedding_idx, k=100, deltas=1
                      ANNIvfPartition: uuid=3355d6ea-83ab-4a29-94eb-a460072b3855, nprobes=20, deltas=1
                      ScalarIndexQuery: query=published_date_unix_day_precision &gt;= 19997 &amp;&amp; published_date_unix_day_precision &lt;= 19631</code></span> <span class=chatlog__edited-timestamp title="Wednesday, June 11, 2025 12:21â€¯PM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1382394248346992640 class=chatlog__message-container data-message-id=1382394248346992640><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, June 11, 2025 12:21â€¯PM">12:21â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>With postfilter applied
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">ProjectionExec: expr=[block_uuid@4 as block_uuid, company_uuid@5 as company_uuid, document_uuid@6 as document_uuid, embedding@1 as embedding, published_date_unix@7 as published_date_unix, published_date_unix_day_precision@3 as published_date_unix_day_precision, published_date@8 as published_date, year_quarter@9 as year_quarter, document_id@10 as document_id, document_source_id@11 as document_source_id, document_type_id@12 as document_type_id, section_type_id@13 as section_type_id, company_id@14 as company_id, title@15 as title, ticker_exchange@16 as ticker_exchange, _distance@2 as _distance]
  Take: columns=&quot;_rowid, embedding, _distance, published_date_unix_day_precision, (block_uuid), (company_uuid), (document_uuid), (published_date_unix), (published_date), (year_quarter), (document_id), (document_source_id), (document_type_id), (section_type_id), (company_id), (title), (ticker_exchange)&quot;
    CoalesceBatchesExec: target_batch_size=1024
      GlobalLimitExec: skip=0, fetch=100
        FilterExec: published_date_unix_day_precision@3 &gt;= 19997 AND published_date_unix_day_precision@3 &lt;= 19631
          Take: columns=&quot;_rowid, embedding, _distance, (published_date_unix_day_precision)&quot;
            CoalesceBatchesExec: target_batch_size=1024
              FilterExec: _distance@2 IS NOT NULL
                SortExec: TopK(fetch=100), expr=[_distance@2 ASC NULLS LAST], preserve_partitioning=[false]
                  KNNVectorDistance: metric=l2
                    Take: columns=&quot;_distance, _rowid, (embedding)&quot;
                      CoalesceBatchesExec: target_batch_size=1024
                        SortExec: TopK(fetch=100), expr=[_distance@0 ASC NULLS LAST], preserve_partitioning=[false]
                          ANNSubIndex: name=embedding_idx, k=100, deltas=1
                            ANNIvfPartition: uuid=3355d6ea-83ab-4a29-94eb-a460072b3855, nprobes=20, deltas=1</code></span> <span class=chatlog__edited-timestamp title="Wednesday, June 11, 2025 12:22â€¯PM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1382394598541758465 class=chatlog__message-container data-message-id=1382394598541758465><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, June 11, 2025 12:22â€¯PM">12:22â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I also might just not understand the query plans</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382394880109576285 class=chatlog__message-container data-message-id=1382394880109576285><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:23â€¯PM"><a href=#chatlog__message-container-1382394880109576285>6/11/2025 12:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>These plans look correct but maybe I&#39;m misunderstanding.

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Without postfilter applied
</div></div>
The filtering happens here, at the very start of the data path:

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">ScalarIndexQuery: query=published_date_unix_day_precision &gt;= 19997 &amp;&amp; published_date_unix_day_precision &lt;= 19631
</div></div>
And then...

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">With postfilter applied
</div></div>
The filtering happens here, after the vector search:

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">FilterExec: published_date_unix_day_precision@3 &gt;= 19997 AND published_date_unix_day_precision@3 &lt;= 19631
</div></div>
One thing to keep in mind is that these plans can be kind of backwards.  The top (root of the tree) is the output.  The bottoms (leaves) are the inputs.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382395420583661768 class=chatlog__message-container data-message-id=1382395420583661768><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:25â€¯PM"><a href=#chatlog__message-container-1382395420583661768>6/11/2025 12:25â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The sampler takes an <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">offset</code> kwarg. Is this offset pre or post filtering?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382396430844563498 class=chatlog__message-container data-message-id=1382396430844563498><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=tonyfrancisv>tony</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1382395420583661768')"> The sampler takes an <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">offset</code> kwarg. Is this offset pre or post filtering? </span></div></div><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:29â€¯PM"><a href=#chatlog__message-container-1382396430844563498>6/11/2025 12:29â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>offset is pre post filtering, I should probably move those to the end</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382396719765131395 class=chatlog__message-container data-message-id=1382396719765131395><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=connell__>connell</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1382396430844563498')"> offset is pre post filtering, I should probably move those to the end </span></div></div><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:31â€¯PM"><a href=#chatlog__message-container-1382396719765131395>6/11/2025 12:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>wdym pre post?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382396833996738721 class=chatlog__message-container data-message-id=1382396833996738721><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:31â€¯PM"><a href=#chatlog__message-container-1382396833996738721>6/11/2025 12:31â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">query.limit(100).postfilter()</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382397231818084372 class=chatlog__message-container data-message-id=1382397231818084372><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=connell__>connell</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1382396833996738721')"> <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">query.limit(100).postfilter()</code> </span></div></div><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:33â€¯PM"><a href=#chatlog__message-container-1382397231818084372>6/11/2025 12:33â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ah, would be helpful to have this clarified in the docs. but yeah, would be better to have offset/limit after filtering</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382398107911979068 class=chatlog__message-container data-message-id=1382398107911979068><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:36â€¯PM"><a href=#chatlog__message-container-1382398107911979068>6/11/2025 12:36â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The offset &amp; limit are applied after filtering.  The order of calls in query construction is generally unrealted to the order the operations are actually run.

We don&#39;t expose any kind of pre-filter offset today (except for a few APIs which can take in fragment IDs)

In the above plan this is the operator doing offset/limit:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">GlobalLimitExec: skip=0, fetch=100</code>

It&#39;s near the very end of the plan.</span> <span class=chatlog__edited-timestamp title="Wednesday, June 11, 2025 12:36â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div><div class=chatlog__reaction title=pray><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ™ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382398705575002122 class=chatlog__message-container data-message-id=1382398705575002122><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author style=color:rgb(230,126,34) title=wpace>WestonPace</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1382394880109576285')"> These plans look correct but maybe I&#39;m misunderstanding.

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">Without postfilter applied
</div></div>
The filtering happens here, at the very start of the data path:

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">ScalarIndexQuery: query=published_date_unix_day_precision &gt;= 19997 &amp;&amp; published_date_unix_day_precision &lt;= 19631
</div></div>
And then...

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">With postfilter applied
</div></div>
The filtering happens here, after the vector search:

<div class="chatlog__markdown-quote"><div class="chatlog__markdown-quote-border"></div><div class="chatlog__markdown-quote-content">FilterExec: published_date_unix_day_precision@3 &gt;= 19997 AND published_date_unix_day_precision@3 &lt;= 19631
</div></div>
One thing to keep in mind is that these plans can be kind of backwards.  The top (root of the tree) is the output.  The bottoms (leaves) are the inputs. </span></div></div><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:38â€¯PM"><a href=#chatlog__message-container-1382398705575002122>6/11/2025 12:38â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>oh, these are to be read bottom to top?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382399508113133680 class=chatlog__message-container data-message-id=1382399508113133680><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/278977272734810123/6f7c19ff44405abffd2e8ddb2ad04284.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:42â€¯PM"><a href=#chatlog__message-container-1382399508113133680>6/11/2025 12:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yep (confusing).  So the prefilter plan is...
<ul><li>Search the scalar index to get a prefilter bitmask</li><li>At the same time, load in the 20 partitions closest to the query vector</li><li>Next, calculate distance for everything in these partitions, and apply the prefilter bitmask, to find the 100 closest rows</li><li>Next, take the full non-quantized vector for all 100 rows and recompare and resort</li><li>Next, remove any rows where the distance is null (can happen in some odd cases)</li><li>Finally, apply the limit (note: the limit 100 is somewhat redundant on a search with k=100)</li><li>Now, load (take) the remaining columns for each row id in our result set.</li></ul></span> <span class=chatlog__edited-timestamp title="Wednesday, June 11, 2025 12:42â€¯PM">(edited)</span></div></div></div></div><div id=chatlog__message-container-1382400092149125130 class=chatlog__message-container data-message-id=1382400092149125130><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Wednesday, June 11, 2025 12:44â€¯PM">12:44â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Btw, if your goal is to page through vector search results (e.g. grab the 100 closest, then grab the next 100 closest, then grab the next 100 closest, ...) then we don&#39;t have an API for that.  Limit / offset won&#39;t help you (they are more typically used for filtered scans, not searches).

You can do a search with k=1000 and then set the batch size to 100 and read one batch at a time.  Or you can do a search with k=100, then k=200, then ...</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1382400564343738490 class=chatlog__message-container data-message-id=1382400564343738490><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/768507481256361984/8ef005790692fab12797b82c5abbd8b6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=connell__ data-user-id=768507481256361984>connell</span> <span class=chatlog__timestamp title="Wednesday, June 11, 2025 12:46â€¯PM"><a href=#chatlog__message-container-1382400564343738490>6/11/2025 12:46â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ha ok well that clears up a lot of my confusion around plans thanks.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1383240462168752198 class=chatlog__message-container data-message-id=1383240462168752198><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Friday, June 13, 2025 8:23â€¯PM"><a href=#chatlog__message-container-1383240462168752198>6/13/2025 8:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>can you specify the type of the table for intellisense? like:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-py">from lancedb import Table

class UserManager():
    def __init__(self, tbl):
        self.table: Table = tbl</code></span> <span class=chatlog__edited-timestamp title="Friday, June 13, 2025 8:24â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1383260873144930355 class=chatlog__message-container data-message-id=1383260873144930355><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=blackscales18 data-user-id=343957458181554176>blackscales18</span> <span class=chatlog__timestamp title="Friday, June 13, 2025 9:44â€¯PM"><a href=#chatlog__message-container-1383260873144930355>6/13/2025 9:44â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>also can you use normal pydantic schemas <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">User(BaseModel)</code> or do you have to use the lance one <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">User(LanceModel)</code></span></div></div></div></div><div id=chatlog__message-container-1383261068012556429 class=chatlog__message-container data-message-id=1383261068012556429><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, June 13, 2025 9:45â€¯PM">9:45â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">User</code> doesn&#39;t have any vectors on it, just scalar data like email and password hash</span></div></div></div></div><div id=chatlog__message-container-1383261183519494208 class=chatlog__message-container data-message-id=1383261183519494208><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Friday, June 13, 2025 9:46â€¯PM">9:46â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>right now i&#39;m getting a &quot;schema must be a pyarrow schema&quot; error</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1384065058119749713 class=chatlog__message-container data-message-id=1384065058119749713><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=wingerted data-user-id=1384050357650587720>Winger</span> <span class=chatlog__timestamp title="Monday, June 16, 2025 3:00â€¯AM"><a href=#chatlog__message-container-1384065058119749713>6/16/2025 3:00â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi everyoneï¼Œwhen i use write_fragment and commit for a dataframe with catalegorical columnï¼Œlance raise an Exception say missing dictionary error. So how to use python api to distribute write a dataframe with catalegorical column?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1384193596424458355 class=chatlog__message-container data-message-id=1384193596424458355><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/343957458181554176/8cc7ea29b2a7d3b4a862fa9daf6b46b9.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=blackscales18>blackscales18</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1383240462168752198')"> can you specify the type of the table for intellisense? like:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-py">from lancedb import Table

class UserManager():
    def __init__(self, tbl):
        self.table: Table = tbl</code> </span> <span class=chatlog__reply-edited-timestamp title="Friday, June 13, 2025 8:24â€¯PM">(edited)</span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span class=chatlog__timestamp title="Monday, June 16, 2025 11:31â€¯AM"><a href=#chatlog__message-container-1384193596424458355>6/16/2025 11:31â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Yes it should be possible to provide type hints using types imported from lancedb</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1384256414578507982 class=chatlog__message-container data-message-id=1384256414578507982><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, June 16, 2025 3:40â€¯PM"> <a href=#chatlog__message-container-1384256414578507982>6/16/2025 3:40â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1387275603685670953 class=chatlog__message-container data-message-id=1387275603685670953><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=weizhi_43967 data-user-id=1153130954186039326>weizhi</span> <span class=chatlog__timestamp title="Tuesday, June 24, 2025 11:37â€¯PM"><a href=#chatlog__message-container-1387275603685670953>6/24/2025 11:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"> Could not find openssl via pkg-config:
  pkg-config has not been configured to support cross-compilation.

  Install a sysroot for the target platform and configure it via
  PKG_CONFIG_SYSROOT_DIR and PKG_CONFIG_PATH, or install a
  cross-compiling wrapper for pkg-config and set it via
  PKG_CONFIG environment variable.

  cargo:warning=Could not find directory of OpenSSL installation, and this `-sys` crate cannot proceed without this knowledge. If OpenSSL is installed and this crate had trouble finding it,  you can set the `OPENSSL_DIR` environment variable for the compilation process. See stderr section below for further information.

  --- stderr


  Could not find directory of OpenSSL installation, and this `-sys` crate cannot
  proceed without this knowledge. If OpenSSL is installed and this crate had
  trouble finding it,  you can set the `OPENSSL_DIR` environment variable for the
  compilation process.

  Make sure you also have the development packages of openssl installed.
  For example, `libssl-dev` on Ubuntu or `openssl-devel` on Fedora.

  If you&#39;re in a situation where you think the directory *should* be found
  automatically, please open a bug at https://github.com/sfackler/rust-openssl
  and include information about your system as well as this message.

  $HOST = aarch64-apple-darwin
  $TARGET = x86_64-unknown-linux-gnu
  openssl-sys = 0.9.106

:boom: maturin failed
  Caused by: Failed to build a native library through cargo  </code> I tried cross compiling Linux Pylance on Mac M3 and got the following error. I tried brew install openssl@3 But it doesn&#39;t work <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">maturin build --release --zig \
    --target x86_64-unknown-linux-gnu \
    --compatibility manylinux2014 \
    --out wheels </code></span></div></div></div></div><div id=chatlog__message-container-1387276230008635503 class=chatlog__message-container data-message-id=1387276230008635503><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Tuesday, June 24, 2025 11:40â€¯PM">11:40â€¯PM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">rustup target add x86_64-unknown-linux-gnu

info: component &#39;rust-std&#39; for target &#39;x86_64-unknown-linux-gnu&#39; is up to date</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1390046481137930250 class=chatlog__message-container data-message-id=1390046481137930250><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Wednesday, July 2, 2025 3:08â€¯PM"><a href=#chatlog__message-container-1390046481137930250>7/2/2025 3:08â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>For blobs in lance, is there a way to get access to a filename for it? Trying to leverage some libraries that don&#39;t accept a filelike object</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1390065026731212856 class=chatlog__message-container data-message-id=1390065026731212856><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=luqiu_87609 data-user-id=1209390552148090902>Lu Qiu</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 2, 2025 4:22â€¯PM"> <a href=#chatlog__message-container-1390065026731212856>7/2/2025 4:22â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1390292457970995272 class=chatlog__message-container data-message-id=1390292457970995272><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/271911699336921088/16f15f9d716df851443b832aa45c6c87.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=vincentwarmerdam data-user-id=271911699336921088>Vincent</span> <span class=chatlog__timestamp title="Thursday, July 3, 2025 7:25â€¯AM"><a href=#chatlog__message-container-1390292457970995272>7/3/2025 7:25â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a docs page that highlights what the difference is between all of these index types? The docs mainly suggest hnsw and ivg, but there seem to be more when I look at the source code. 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    index_type: Literal[
        &quot;IVF_PQ&quot;, &quot;IVF_HNSW_PQ&quot;, &quot;IVF_HNSW_SQ&quot;, &quot;FTS&quot;, &quot;BTREE&quot;, &quot;BITMAP&quot;, &quot;LABEL_LIST&quot;
    ]</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1390301014095302742 class=chatlog__message-container data-message-id=1390301014095302742><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, July 3, 2025 7:59â€¯AM"> <a href=#chatlog__message-container-1390301014095302742>7/3/2025 7:59â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1392148186990383144 class=chatlog__message-container data-message-id=1392148186990383144><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/391128555297308674/97efe4d294828c277b30b62dd2ea08a9.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=shivk.eth data-user-id=391128555297308674>shiv</span> <span class=chatlog__timestamp title="Tuesday, July 8, 2025 10:19â€¯AM"><a href=#chatlog__message-container-1392148186990383144>7/8/2025 10:19â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is anyone using lancedb oss in a production env?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1392159353078812748 class=chatlog__message-container data-message-id=1392159353078812748><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, July 8, 2025 11:04â€¯AM"> <a href=#chatlog__message-container-1392159353078812748>7/8/2025 11:04â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1392249704104067073 class=chatlog__message-container data-message-id=1392249704104067073><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sethkimmel2904 data-user-id=783135504547446814>sethkimmel</span> <span class=chatlog__timestamp title="Tuesday, July 8, 2025 5:03â€¯PM"><a href=#chatlog__message-container-1392249704104067073>7/8/2025 5:03â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey! Is there any way to load multiple lance datasets at once with something like:
<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">ds = lance.dataset(some_path/*.lance)</code> similar to how you can load multiple parquet files in polars with <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pl.read_parquet(some_path/*.parquet)</code></span> <span class=chatlog__edited-timestamp title="Tuesday, July 8, 2025 5:03â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1392513223760019548 class=chatlog__message-container data-message-id=1392513223760019548><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=genemerewether data-user-id=1039606950649921626>genemerewether</span> <span class=chatlog__timestamp title="Wednesday, July 9, 2025 10:30â€¯AM"><a href=#chatlog__message-container-1392513223760019548>7/9/2025 10:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way to use lancedb APIs, like <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.search(</code>, starting from a plain lance table? (I don&#39;t control the lance table creation or naming). Right now, I am symlinking the table to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">foo.lance</code>, which is a little hokey</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1392526325054705782 class=chatlog__message-container data-message-id=1392526325054705782><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, July 9, 2025 11:22â€¯AM"> <a href=#chatlog__message-container-1392526325054705782>7/9/2025 11:22â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1392667974338478143 class=chatlog__message-container data-message-id=1392667974338478143><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=rodneyplancealot_39532 data-user-id=1392564759555084308>RodneyPLanceALot</span> <span class=chatlog__timestamp title="Wednesday, July 9, 2025 8:45â€¯PM"><a href=#chatlog__message-container-1392667974338478143>7/9/2025 8:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello Everyone, This is Rodney, just checking in for the first time, new to the product!</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=ðŸ«¡><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ«¡ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1fae1.svg loading=lazy> <span class=chatlog__reaction-count>2</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1393146011454672950 class=chatlog__message-container data-message-id=1393146011454672950><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=xuanwo data-user-id=676283050434232365>Xuanwo</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, July 11, 2025 4:24â€¯AM"> <a href=#chatlog__message-container-1393146011454672950>7/11/2025 4:24â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1393702377181286482 class=chatlog__message-container data-message-id=1393702377181286482><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=igloo1505_97876 data-user-id=1156287817203322972>igloo1505</span> <span class=chatlog__timestamp title="Saturday, July 12, 2025 5:15â€¯PM"><a href=#chatlog__message-container-1393702377181286482>7/12/2025 5:15â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Rodney hey man! I&#39;ll be honest... I&#39;m just using this as an excuse to plug my own app that I built solely to draw attention to a modified model of relativity that I&#39;ve been working on for the past 3+ years: fluster-one.vercel.app</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1402715492585570354 class=chatlog__message-container data-message-id=1402715492585570354><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=.danteoz data-user-id=736218110646026281>DanteOz</span> <span class=chatlog__timestamp title="Wednesday, August 6, 2025 2:10â€¯PM"><a href=#chatlog__message-container-1402715492585570354>8/6/2025 2:10â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Are there plans for adding CJK full text search support to lancedb? I see it was added to lance in this PR <a href="https://github.com/lancedb/lance/pull/3218">https://github.com/lancedb/lance/pull/3218</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/pull/3218><div class="chatlog__markdown chatlog__markdown-preserve">feat: support lindera for japanese and korea tokenization by chenko...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Lindera is the successor of mecab, it supports multiple languages, currently CJK (Chinese, Japanese, Korea) are supported . Actually, users can build their own models for their languages. Quickwit,...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/N61EWbzyuudf5rtp1LnY5CTpLM0PbhGazq0zvsIZ80A/https/opengraph.githubassets.com/251215abc8c3c0981b16408b8f849fc7ff92b570dc27a20a7e9d54f51e23c61b/lancedb/lance/pull/3218> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/N61EWbzyuudf5rtp1LnY5CTpLM0PbhGazq0zvsIZ80A/https/opengraph.githubassets.com/251215abc8c3c0981b16408b8f849fc7ff92b570dc27a20a7e9d54f51e23c61b/lancedb/lance/pull/3218 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1402876103793836187 class=chatlog__message-container data-message-id=1402876103793836187><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, August 7, 2025 12:48â€¯AM"> <a href=#chatlog__message-container-1402876103793836187>8/7/2025 12:48â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1402966327010005004 class=chatlog__message-container data-message-id=1402966327010005004><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/2.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=krunnal data-user-id=1131897993398866050>krunnal</span> <span class=chatlog__timestamp title="Thursday, August 7, 2025 6:47â€¯AM"><a href=#chatlog__message-container-1402966327010005004>8/7/2025 6:47â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><a href="https://docs.lancedb.com/api-reference/tables/get-table-details?playground=open">https://docs.lancedb.com/api-reference/tables/get-table-details?playground=open</a>

am getting 404 error all the entries are correct. This 404 error for all other options including list tables, search data  etc.</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://docs.lancedb.com/api-reference/tables/get-table-details?playground=open"><div class="chatlog__markdown chatlog__markdown-preserve">Get Table Details - LanceDB</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Get detailed information about a table including schema, statistics, and metadata. This endpoint provides comprehensive table information useful for understanding table structure, monitoring performance metrics, and planning data operations.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/Z2zPQ-1frrM-CfCmtFVQEF9kbGk6VGdi77uQPedIof0/%3Furl%3D%252Fapi%252Fog%253Fdivision%253DTables%2526title%253DGet%252BTable%252BDetails%2526description%253DGet%252Bdetailed%252Binformation%252Babout%252Ba%252Btable%252Bincluding%252Bschema%25252C%252Bstatistics%25252C%252Band%252Bmetadata.%252BThis%252Bendpoint%252Bprovides%252Bcomprehensive%252Btable%252Binformation%252Buseful%252Bfor%252Bunderstanding%252Btable%252Bstructure%25252C%252Bmonitoring%252Bperformance%252Bmetrics%25252C%252Band%252Bplanning%252Bdata%252Boperations.%25250A%2526logoLight%253Dhttps%25253A%25252F%25252Fmintlify.s3.us-west-1.amazonaws.com%25252Flancedb-bcbb4faf%25252Flogo%25252Fdark-lancedb-logo.svg%2526logoDark%253Dhttps%25253A%25252F%25252Fmintlify.s3.us-west-1.amazonaws.com%25252Flancedb-bcbb4faf%25252Flogo%25252Flight-lancedb-logo.svg%2526primaryColor%253D%252523FF6B35%2526lightColor%253D%252523FF8A5C%2526darkColor%253D%252523E55A2B%2526backgroundLight%253D%252523FAF5F0%2526backgroundDark%253D%252523000000%26w%3D1200%26q%3D100/https/lancedb-bcbb4faf.mintlify.app/mintlify-assets/_next/image> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/Z2zPQ-1frrM-CfCmtFVQEF9kbGk6VGdi77uQPedIof0/%3Furl%3D%252Fapi%252Fog%253Fdivision%253DTables%2526title%253DGet%252BTable%252BDetails%2526description%253DGet%252Bdetailed%252Binformation%252Babout%252Ba%252Btable%252Bincluding%252Bschema%25252C%252Bstatistics%25252C%252Band%252Bmetadata.%252BThis%252Bendpoint%252Bprovides%252Bcomprehensive%252Btable%252Binformation%252Buseful%252Bfor%252Bunderstanding%252Btable%252Bstructure%25252C%252Bmonitoring%252Bperformance%252Bmetrics%25252C%252Band%252Bplanning%252Bdata%252Boperations.%25250A%2526logoLight%253Dhttps%25253A%25252F%25252Fmintlify.s3.us-west-1.amazonaws.com%25252Flancedb-bcbb4faf%25252Flogo%25252Fdark-lancedb-logo.svg%2526logoDark%253Dhttps%25253A%25252F%25252Fmintlify.s3.us-west-1.amazonaws.com%25252Flancedb-bcbb4faf%25252Flogo%25252Flight-lancedb-logo.svg%2526primaryColor%253D%252523FF6B35%2526lightColor%253D%252523FF8A5C%2526darkColor%253D%252523E55A2B%2526backgroundLight%253D%252523FAF5F0%2526backgroundDark%253D%252523000000%26w%3D1200%26q%3D100/https/lancedb-bcbb4faf.mintlify.app/mintlify-assets/_next/image alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1403117807951941768 class=chatlog__message-container data-message-id=1403117807951941768><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wyatt.alt data-user-id=1331668878178127883>wkalt</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, August 7, 2025 4:49â€¯PM"> <a href=#chatlog__message-container-1403117807951941768>8/7/2025 4:49â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1403431721801617438 class=chatlog__message-container data-message-id=1403431721801617438><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/569691375386492949/bd57241d26dc6bc619408a4891df0f68.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=haocheng001 data-user-id=569691375386492949>Haocheng Liu</span> <span class=chatlog__timestamp title="Friday, August 8, 2025 1:36â€¯PM"><a href=#chatlog__message-container-1403431721801617438>8/8/2025 1:36â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I notice for some Rust scalar filters, they use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">env</code> to control parameters and are not exposed in the Python Api. is that the expected behavior or tbd in the future?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1403434625455357957 class=chatlog__message-container data-message-id=1403434625455357957><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=haocheng001 data-user-id=569691375386492949>Haocheng Liu</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 8, 2025 1:48â€¯PM"> <a href=#chatlog__message-container-1403434625455357957>8/8/2025 1:48â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1404390882379042828 class=chatlog__message-container data-message-id=1404390882379042828><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/807985747071860756/8b81a7b97e77118ef1ab42ef29b18dee.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonardqmarcq data-user-id=807985747071860756>Leonard</span> <span class=chatlog__timestamp title="Monday, August 11, 2025 5:07â€¯AM"><a href=#chatlog__message-container-1404390882379042828>8/11/2025 5:07â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">pyarrow</code> is very large (110MB) - in our case, that is larger than our entire app

there is an open issue where someone suggests switching over to <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">arro3</code> (<a href="https://github.com/lancedb/lancedb/issues/2400)">https://github.com/lancedb/lancedb/issues/2400)</a>

is there any way around the 110MB dependency for now? or any plans to switch over to something lighter?</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/2400><div class="chatlog__markdown chatlog__markdown-preserve">Feature: remove pyarrow dependency in favour of arro3, keep pyarrow...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">SDK Python Description @wjones127 I think it would be wise for lancedb to also make pyarrow an opt-in and switch to arro3, the pyarrow size on disk is 111MB at the moment, meaning if you install la...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/EW3jOS31TedqzmzY4sy-ndH3YxNekXnoHRvoQRgvLGU/https/opengraph.githubassets.com/2fc5f374879124ff620f60579630b79a5c67b14ba18f054f459e984c9e3ce63f/lancedb/lancedb/issues/2400> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/EW3jOS31TedqzmzY4sy-ndH3YxNekXnoHRvoQRgvLGU/https/opengraph.githubassets.com/2fc5f374879124ff620f60579630b79a5c67b14ba18f054f459e984c9e3ce63f/lancedb/lancedb/issues/2400 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1404504073968943108 class=chatlog__message-container data-message-id=1404504073968943108><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, August 11, 2025 12:37â€¯PM"> <a href=#chatlog__message-container-1404504073968943108>8/11/2025 12:37â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1404511576060592210 class=chatlog__message-container data-message-id=1404511576060592210><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/807985747071860756/8b81a7b97e77118ef1ab42ef29b18dee.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonardqmarcq data-user-id=807985747071860756>Leonard</span> <span class=chatlog__timestamp title="Monday, August 11, 2025 1:07â€¯PM"><a href=#chatlog__message-container-1404511576060592210>8/11/2025 1:07â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I ran into a similar issue to this thread: <a href="https://discord.com/channels/1030247538198061086/1377350306374881352" onclick="scrollToMessage(event, '1377350306374881352')">https://discord.com/channels/1030247538198061086/1377350306374881352</a> - when trying to do an upsert: 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError: lance error: Append with different schema: `id` should have nullable=false but nullable=true, `text` should have nullable=false but nullable=true, location: /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-core-0.32.0/src/datatypes/schema.rs:149:27</code>
the error only occurs when the schema is defined using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceModel</code> (works fine when defined using <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">PyArrow</code>), and the solution was to set the field types in the schema as <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Optional</code> - that was a bit confusing because the error message sounds like the fields on the schema need to be set to non-nullable instead

this will raise the error when upserting:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-py"># this schema will raise during the upsert
class Schema(LanceModel):
    id: str
    text: str

# this schema works
class Schema(LanceModel):
    id: lancedb.Optional[str]
    text: lancedb.Optional[str]

# upsert
await (
    table.merge_insert(&quot;id&quot;)
    .when_matched_update_all()
    .when_not_matched_insert_all()
    .execute(docs)
)</code></span> <span class=chatlog__edited-timestamp title="Monday, August 11, 2025 1:07â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1405210071587360864 class=chatlog__message-container data-message-id=1405210071587360864><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, August 13, 2025 11:23â€¯AM"> <a href=#chatlog__message-container-1405210071587360864>8/13/2025 11:23â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1406026866715922554 class=chatlog__message-container data-message-id=1406026866715922554><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Friday, August 15, 2025 5:28â€¯PM"><a href=#chatlog__message-container-1406026866715922554>8/15/2025 5:28â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.create_scalar_index(&quot;url&quot;, replace=True)</code>

the documentation isn&#39;t super clear; does this recreate the index, or is it a no-op if the index already exists?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1406045426850988154 class=chatlog__message-container data-message-id=1406045426850988154><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, August 15, 2025 6:42â€¯PM"> <a href=#chatlog__message-container-1406045426850988154>8/15/2025 6:42â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1406150838459826198 class=chatlog__message-container data-message-id=1406150838459826198><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Saturday, August 16, 2025 1:41â€¯AM"><a href=#chatlog__message-container-1406150838459826198>8/16/2025 1:41â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">            table.merge_insert(
                [&quot;url&quot;]
            ).when_matched_update_all().execute(
                arrow_table
            )</code>

This keep crashing on me when arrow_table is &gt;10MB

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">RuntimeError: lance error: LanceError(IO): Not enough memory to continue external sort. Consider increasing the memory limit, or decreasing sort_spill_reservation_bytes
caused by
Resources exhausted: Failed to allocate additional 13.2 MB for ExternalSorter[0] with 0.0 B already allocated for this reservation - 12.9 MB remain available for the total pool, /root/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-0.33.0/src/dataset/write/merge_insert.rs:785:46</code>

Meanwhile just a .add() works fine. I just don&#39;t want to have to re-add all of the columns.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1406156208401813504 class=chatlog__message-container data-message-id=1406156208401813504><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Saturday, August 16, 2025 2:02â€¯AM"><a href=#chatlog__message-container-1406156208401813504>8/16/2025 2:02â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>might be related to this? <a href="https://github.com/lancedb/lance/issues/3601">https://github.com/lancedb/lance/issues/3601</a></span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lance/issues/3601><div class="chatlog__markdown chatlog__markdown-preserve">merge_insert spill configuration easily too small if server has man...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">When we create plans for merge_insert we run a datafusion plan to do the join and we enable spilling because we need to sort the joined stream by row address and if there is a ton of new data then ...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/ctpcnP6DPPKtmn3DGDS-64DDG1Oog7mU4xRGMYET66Y/https/opengraph.githubassets.com/98664004698784adaf4303cf901024c2796ae989a62e16c7f197bba593cb2e11/lancedb/lance/issues/3601> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/ctpcnP6DPPKtmn3DGDS-64DDG1Oog7mU4xRGMYET66Y/https/opengraph.githubassets.com/98664004698784adaf4303cf901024c2796ae989a62e16c7f197bba593cb2e11/lancedb/lance/issues/3601 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div><div id=chatlog__message-container-1406156829364453449 class=chatlog__message-container data-message-id=1406156829364453449><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Saturday, August 16, 2025 2:05â€¯AM">2:05â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ok, I found it here <a href="https://github.com/lancedb/lance/blob/d842b7369b1f4d44330d86f74e763ec8346fc472/rust/lance-datafusion/src/exec.rs#L311">https://github.com/lancedb/lance/blob/d842b7369b1f4d44330d86f74e763ec8346fc472/rust/lance-datafusion/src/exec.rs#L311</a> 

this fixed it:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">os.environ[&#39;LANCE_MEM_POOL_SIZE&#39;] = &#39;1073741824&#39;</code>

Now I can set to super high batch size and there&#39;s no issue. Only 10x increase in mem lets me go from BATCH_SIZE=8 to BATCH_SIZE=1024</span> <span class=chatlog__edited-timestamp title="Saturday, August 16, 2025 2:05â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1406328653461323777 class=chatlog__message-container data-message-id=1406328653461323777><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Saturday, August 16, 2025 1:27â€¯PM"><a href=#chatlog__message-container-1406328653461323777>8/16/2025 1:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>it says in a lot of lance marketing that lancedb is good for .shuffle for model training; but how do i do this? I added terabytes into a lancedb table with multimodal data.

But I checked <a href="https://lancedb.github.io/lancedb/python/python/">https://lancedb.github.io/lancedb/python/python/</a> and I don&#39;t see how to simply iterate in shuffled batches?</span> <span class=chatlog__edited-timestamp title="Saturday, August 16, 2025 1:28â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1406356542508499128 class=chatlog__message-container data-message-id=1406356542508499128><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Saturday, August 16, 2025 3:18â€¯PM"><a href=#chatlog__message-container-1406356542508499128>8/16/2025 3:18â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m currently getting a lot of write amplification in lancedb? I&#39;m just pulling the bytes from parquet and then writing them to lancedb, both on local disk. The bytes are coming from <a href="https://github.com/rom1504/img2dataset">img2dataset</a>.

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-bash">(ml) user@bd2205c3:~/ml/data/image_cache$ du -bahd1 $1 2&gt; &gt;(grep -v &#39;Permission denied&#39;) | sort -rh | head -n 15
8.4G    ./img2dataset_output
8.4G    .
16M     ./url_list.csv
(ml) user@bd2205c3:~/ml/data/lancedb$ du -bahd1 $1 2&gt; &gt;(grep -v &#39;Permission denied&#39;) | sort -rh | head -n 15
275G    ./unsupervised_images.lance
275G    .</code></span> <span class=chatlog__edited-timestamp title="Saturday, August 16, 2025 10:50â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1407023390199386267 class=chatlog__message-container data-message-id=1407023390199386267><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, August 18, 2025 11:28â€¯AM"> <a href=#chatlog__message-container-1407023390199386267>8/18/2025 11:28â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1407846744267690098 class=chatlog__message-container data-message-id=1407846744267690098><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1258076097518637086/e1cbeccc9514a58846ce38d5c841bd94.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=order_5 data-user-id=1258076097518637086>! Order</span> <span class=chatlog__timestamp title="Wednesday, August 20, 2025 6:00â€¯PM"><a href=#chatlog__message-container-1407846744267690098>8/20/2025 6:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there anyone looking for dev?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1408233557847048314 class=chatlog__message-container data-message-id=1408233557847048314><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/3.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kohlerbear3381 data-user-id=450637514668113921>kohlerbear</span> <span class=chatlog__timestamp title="Thursday, August 21, 2025 7:37â€¯PM"><a href=#chatlog__message-container-1408233557847048314>8/21/2025 7:37â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, I have a fairly large (1.9B  rows) lance dataset. Calling list_indices results in the following error:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">&gt;&gt;&gt; a=d.list_indices()
thread &#39;&lt;unnamed&gt;&#39; panicked at /home/runner/work/lance/lance/rust/lance-index/src/scalar/lance_format.rs:154:9:
not implemented: v2 format has no concept of row groups
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/home/root/.local/lib/python3.10/site-packages/lance/dataset.py&quot;, line 221, in list_indices
    return self._ds.load_indices()
pyo3_runtime.PanicException: not implemented: v2 format has no concept of row groups</code>

Any guidance on how to further debug this? This is on lancedb 0.24.3.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1413491211028922438 class=chatlog__message-container data-message-id=1413491211028922438><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=andriikovalov___03923 data-user-id=1293170206524440627>Andrii Kovalov</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, September 5, 2025 7:49â€¯AM"> <a href=#chatlog__message-container-1413491211028922438>9/5/2025 7:49â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1414675056394502294 class=chatlog__message-container data-message-id=1414675056394502294><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/4.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=justinb5010 data-user-id=325029019550613514>justinb5010</span> <span class=chatlog__timestamp title="Monday, September 8, 2025 2:13â€¯PM"><a href=#chatlog__message-container-1414675056394502294>9/8/2025 2:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello! I have a large lance dataset (~2.2B rows) and see the below error occur when calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize_indices</code> This is happening with pylance version 0.34.0 which I believe is supposed to have a fix in this pr <a href="https://github.com/lancedb/lance/pull/3789">https://github.com/lancedb/lance/pull/3789</a>.  Is there any guidance on how to resolve this?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">thread &#39;&lt;unnamed&gt;&#39; panicked at /root/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/arrow-array-55.2.0/src/builder/generic_bytes_builder.rs:86:57:
pyo3_runtime.PanicException: byte array offset overflow</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1414946406237732915 class=chatlog__message-container data-message-id=1414946406237732915><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1293170206524440627/553c55e1eaab14b6acb65f530b01f9ba.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andriikovalov___03923 data-user-id=1293170206524440627>Andrii Kovalov</span> <span class=chatlog__timestamp title="Tuesday, September 9, 2025 8:11â€¯AM"><a href=#chatlog__message-container-1414946406237732915>9/9/2025 8:11â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Speaking of indices... I have IVF PQ multi vector field.
I&#39;m creating it like so:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.create_index(
    metric=cosine,
    num_partitions=50,
    num_sub_vectors=512,
)</code>
After 10-20 mins, I have following stats:
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">IndexStatistics(num_indexed_rows=176509, num_unindexed_rows=0, index_type=&#39;IVF_PQ&#39;, distance_type=&#39;cosine&#39;, num_indices=1, loss=338980.82204431866)]</code>
I wonder what loss value is considered good\bad for my dataset ~175k docs?
My vectors <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">text-embedding-3-small</code> with 1024 dims</span> <span class=chatlog__edited-timestamp title="Tuesday, September 9, 2025 8:16â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1414973252031352959 class=chatlog__message-container data-message-id=1414973252031352959><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, September 9, 2025 9:58â€¯AM"> <a href=#chatlog__message-container-1414973252031352959>9/9/2025 9:58â€¯AM</a> </span></div></div></div><div id=chatlog__message-container-1415354138757304385 class=chatlog__message-container data-message-id=1415354138757304385><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=rpgreen_lancedb data-user-id=1235914389664829440>Ryan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, September 10, 2025 11:12â€¯AM"> <a href=#chatlog__message-container-1415354138757304385>9/10/2025 11:12â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1415372063174164552 class=chatlog__message-container data-message-id=1415372063174164552><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1293170206524440627/553c55e1eaab14b6acb65f530b01f9ba.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=andriikovalov___03923 data-user-id=1293170206524440627>Andrii Kovalov</span> <span class=chatlog__timestamp title="Wednesday, September 10, 2025 12:23â€¯PM"><a href=#chatlog__message-container-1415372063174164552>9/10/2025 12:23â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I wonder is it possible not to create table versions on writes? Let&#39;s say I need to do 1000 small batch writes, and then manually create version, is it possible? Currently each version +5GB on disk for my table, so I have to clean up old versions often...
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">clean_up_result = lc_table.cleanup_old_versions(
    older_than=timedelta(days=0),
    delete_unverified=True,
    # Important for tagged versions!
    error_if_tagged_old_versions=False,
)</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1415600028017365075 class=chatlog__message-container data-message-id=1415600028017365075><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Thursday, September 11, 2025 3:29â€¯AM"><a href=#chatlog__message-container-1415600028017365075>9/11/2025 3:29â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>When using lancedb async, what exactly does &quot;checkout_latest&quot; imply for async queries that are dispatching simultaneously?</span> <span class=chatlog__edited-timestamp title="Thursday, September 11, 2025 1:18â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1415785496193536172 class=chatlog__message-container data-message-id=1415785496193536172><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, September 11, 2025 3:46â€¯PM"> <a href=#chatlog__message-container-1415785496193536172>9/11/2025 3:46â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1415795823924609094 class=chatlog__message-container data-message-id=1415795823924609094><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Thursday, September 11, 2025 4:27â€¯PM"><a href=#chatlog__message-container-1415795823924609094>9/11/2025 4:27â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m trying to run 

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">my_table.optimize(cleanup_older_than=dt.timedelta(seconds=60 * 60))</code>

But it just slowly uses more and more RAM until it OOMs. (It stopped at 190GB RAM).

Is there any way to make this not happen? Or optimize in smaller chunks?

stats: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">{&#39;total_bytes&#39;: 4792630187452, &#39;num_rows&#39;: 50030000, &#39;num_indices&#39;: 2, &#39;fragment_stats&#39;: {&#39;num_fragments&#39;: 4446, &#39;num_small_fragments&#39;: 4439, &#39;lengths&#39;: {&#39;min&#39;: 10000, &#39;max&#39;: 1020000, &#39;mean&#39;: 11252, &#39;p25&#39;: 10000, &#39;p50&#39;: 10000, &#39;p75&#39;: 10000, &#39;p99&#39;: 10000}}}</code></span> <span class=chatlog__edited-timestamp title="Thursday, September 11, 2025 4:38â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1415801593898602571 class=chatlog__message-container data-message-id=1415801593898602571><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, September 11, 2025 4:50â€¯PM"> <a href=#chatlog__message-container-1415801593898602571>9/11/2025 4:50â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1416181376625016985 class=chatlog__message-container data-message-id=1416181376625016985><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Friday, September 12, 2025 5:59â€¯PM"><a href=#chatlog__message-container-1416181376625016985>9/12/2025 5:59â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I have a BTREE index on a table, how do i select unique values? It&#39;s fairly low cardinality.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1416189887391989897 class=chatlog__message-container data-message-id=1416189887391989897><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, September 12, 2025 6:33â€¯PM"> <a href=#chatlog__message-container-1416189887391989897>9/12/2025 6:33â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1417838899811848232 class=chatlog__message-container data-message-id=1417838899811848232><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/329668814188838913/46cf32137515112b5d0739740c900cc6.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=roborapid25897 data-user-id=329668814188838913>roborapid [Ï„, Ï„]</span> <span class=chatlog__timestamp title="Wednesday, September 17, 2025 7:45â€¯AM"><a href=#chatlog__message-container-1417838899811848232>9/17/2025 7:45â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ‘‹"
    title="wave"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44b.svg"> Hi, I&#39;m a Senior AI Agent &amp; ML engineer.
Mainly, I focus on Multi-agents, AI-powered chatbot, Automation, Research, ML and Web development.

<strong>How Can I Help</strong><ul><li>AI Agents: Multi-agent systems, memory, reasoning, and autonomous task execution</li><li>Automation: End-to-end workflows with n8n, Make.com, Zapier, and custom APIs</li><li>Full-Stack Apps: Modern platforms with Next.js, FastAPI, and real-time dashboards</li><li>DevOps &amp; Infra: CI/CD pipelines, Docker/Kubernetes, AWS, GCP, Supabase</li><li>Data Intelligence: RAG system, MCP, vector search, and fine-tuned LLMs for context-rich solutions</li><li>Conversational AI: Voice and chat interfaces that transform support and sales</li></ul>
<strong>Tech Stack</strong>
OpenAI | LangChain | LangGraph | CrewAI | Vapi | Retell | MCP | FastAPI | Django | PyTorch | Next.js | Docker | AWS | GitHub Actions | Pinecone | Redis | Supabase | GCP

<img
    loading="lazy"
    class="chatlog__emoji "
    alt="ðŸ¤"
    title="handshake"
    src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f91d.svg"> Let&#39;s build what&#39;s next.
If you&#39;re working on AI, automation, or training model, I can help you move fast without breaking scale.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1418418616998695002 class=chatlog__message-container data-message-id=1418418616998695002><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Thursday, September 18, 2025 10:09â€¯PM"><a href=#chatlog__message-container-1418418616998695002>9/18/2025 10:09â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m trying to call .add() from many different processes, and it just hangs. Often. What&#39;s the proper way to let it retry? ideally with the data staged so that i&#39;m just trying the .add operation, not retrying the entire upload.

.add() also varies between 5 seconds and 16 minutes when it doesn&#39;t hang, which is very high variance. I assume from the different processes contending over trying to commit


EDIT: Ok, i figured it out. The distributed processing infra now just adds fragments, and sends fragment ids to a single node that commits them in a for loop. Committing is like ~1sec as long as theres no  contention

It seems like this is the only way to edit lancedb from multiple processes, i feel like there should be clear documentation of this API. I could only get the code by asking AI to read the entire lance GitHub repo, esp for the python version</span> <span class=chatlog__edited-timestamp title="Friday, September 19, 2025 1:13â€¯PM">(edited)</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=thumbsup><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ‘ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1418587686310121503 class=chatlog__message-container data-message-id=1418587686310121503><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, September 19, 2025 9:21â€¯AM"> <a href=#chatlog__message-container-1418587686310121503>9/19/2025 9:21â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1418799162807423076 class=chatlog__message-container data-message-id=1418799162807423076><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Friday, September 19, 2025 11:21â€¯PM"><a href=#chatlog__message-container-1418799162807423076>9/19/2025 11:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: LanceError(IO): Generic S3 error: Error performing PUT https://t3.storage.dev/lancedb/lancedb/unsupervised_image_data.lance/data/42f7c945-73d6-496d-a26a-e1eb9fed75b2.lance?partNumber=116&amp;uploadId=a9305      bd7-6472-641e-d19d-4376991b74b0 in 1.193176659s - HTTP error: error sending request, /home/runner/work/lance/lance/rust/lance-file/src/v2/writer.rs:186:9</code>

This is really tough, I get a lot of HTTP errors in various different situations but it&#39;s very hard to debug bc the underlying error message is suppressed. When it&#39;s reproducible I can use ptrace but many are too interrmittent to reproduce.

An httpx-style exception hierarchy is crucial for being able to debug problems in prod: <a href="https://www.python-httpx.org/exceptions/">https://www.python-httpx.org/exceptions/</a></span> <span class=chatlog__edited-timestamp title="Friday, September 19, 2025 11:22â€¯PM">(edited)</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://www.python-httpx.org/exceptions/"><div class="chatlog__markdown chatlog__markdown-preserve">Exceptions - HTTPX</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">A next-generation HTTP client for Python.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1419719585963442312 class=chatlog__message-container data-message-id=1419719585963442312><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=changkhiskhan data-user-id=1029794695418761228>changhiskhan</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, September 22, 2025 12:18â€¯PM"> <a href=#chatlog__message-container-1419719585963442312>9/22/2025 12:18â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422110748880142411 class=chatlog__message-container data-message-id=1422110748880142411><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 2:40â€¯AM"><a href=#chatlog__message-container-1422110748880142411>9/29/2025 2:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello everyone, I want to create multiple vectors in a table and then use a hybrid search mode to search for multiple vectors and text. How should I pass in a vector column and the corresponding vector values?</span></div></div></div></div><div id=chatlog__message-container-1422111780322283520 class=chatlog__message-container data-message-id=1422111780322283520><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__short-timestamp title="Monday, September 29, 2025 2:44â€¯AM">2:44â€¯AM</div></div><div class=chatlog__message-primary><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>tbl.search(query_type=&quot;hybrid&quot;,vector_column_name=&#39;v&#39;).vector(embed).text(&#39;test&#39;)ï¼ŒThis can specify a vector column, but I want to search for multiple sets of vectors, is there a way to achieve this?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422114048752881765 class=chatlog__message-container data-message-id=1422114048752881765><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422111780322283520')"> tbl.search(query_type=&quot;hybrid&quot;,vector_column_name=&#39;v&#39;).vector(embed).text(&#39;test&#39;)ï¼ŒThis can specify a vector column, but I want to search for multiple sets of vectors, is there a way to achieve this? </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 2:53â€¯AM"><a href=#chatlog__message-container-1422114048752881765>9/29/2025 2:53â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>you can combine multiple vector search results like this - <a href="https://lancedb.com/docs/reranking/#multi-vector-reranking">https://lancedb.com/docs/reranking/#multi-vector-reranking</a></span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href="https://lancedb.com/docs/reranking/"><div class="chatlog__markdown chatlog__markdown-preserve">Reranking Search Results</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Use a reranker to improve search relevance by re-ordering search results.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422119923534004304 class=chatlog__message-container data-message-id=1422119923534004304><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:16â€¯AM"><a href=#chatlog__message-container-1422119923534004304>9/29/2025 3:16â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="ayushexel">@AyushC</span> Thank you, this should be the function I want.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422124074527621210 class=chatlog__message-container data-message-id=1422124074527621210><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:33â€¯AM"><a href=#chatlog__message-container-1422124074527621210>9/29/2025 3:33â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="ayushexel">@AyushC</span> After looking at this, it&#39;s different from what I expected. This uses a specific re-ranking model, while what I thought was a model based on RRF for re-ranking multiple search results. So, in that case, the RRF re-ranker seems not to support this usage.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422125783433875477 class=chatlog__message-container data-message-id=1422125783433875477><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422124074527621210')"> <span class="chatlog__markdown-mention" title="ayushexel">@AyushC</span> After looking at this, it&#39;s different from what I expected. This uses a specific re-ranking model, while what I thought was a model based on RRF for re-ranking multiple search results. So, in that case, the RRF re-ranker seems not to support this usage. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:40â€¯AM"><a href=#chatlog__message-container-1422125783433875477>9/29/2025 3:40â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>RRF supports muli vector reranking too. See <a href="https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/rerankers/rrf.py#L70">https://github.com/lancedb/lancedb/blob/main/python/python/lancedb/rerankers/rrf.py#L70</a></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422126905234165841 class=chatlog__message-container data-message-id=1422126905234165841><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:44â€¯AM"><a href=#chatlog__message-container-1422126905234165841>9/29/2025 3:44â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>So, does he support mixed search of multi-vector and FTS? I see from the source code that these two are separated.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422127993203068978 class=chatlog__message-container data-message-id=1422127993203068978><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422126905234165841')"> So, does he support mixed search of multi-vector and FTS? I see from the source code that these two are separated. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:48â€¯AM"><a href=#chatlog__message-container-1422127993203068978>9/29/2025 3:48â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>no it only supports multiple vector columns reranking not FTS. The intention behind this feature was that you could represent a text with different semantic models and during query time might want to combine results from different representation. The same generally isn&#39;t true for fts( you don&#39;t have multiple semantic representations). Could you share your use case a bit where you need to combine different FTS results?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422128334921404436 class=chatlog__message-container data-message-id=1422128334921404436><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:50â€¯AM"><a href=#chatlog__message-container-1422128334921404436>9/29/2025 3:50â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>You might misunderstand, I want to perform a reordering on multiple vectors and FTS together. The default setting now supports reordering a single vector and FTS. I want to expand a vector into multiple ones.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422128783485309000 class=chatlog__message-container data-message-id=1422128783485309000><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422128334921404436')"> You might misunderstand, I want to perform a reordering on multiple vectors and FTS together. The default setting now supports reordering a single vector and FTS. I want to expand a vector into multiple ones. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:52â€¯AM"><a href=#chatlog__message-container-1422128783485309000>9/29/2025 3:52â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>ohh i see. Right now we don&#39;t support that out of the box</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422129577895137390 class=chatlog__message-container data-message-id=1422129577895137390><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:55â€¯AM"><a href=#chatlog__message-container-1422129577895137390>9/29/2025 3:55â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I achieved my goal by first reranking multiple vectors using rerank multivector, then removing the relevance score and reranking again using rerank hybrid. However, I think these two functionalities could be combined.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422129874591809559 class=chatlog__message-container data-message-id=1422129874591809559><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1032079688887189556/9d9cd1c2872874160d9f8e2f6dd766a5.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422129577895137390')"> I achieved my goal by first reranking multiple vectors using rerank multivector, then removing the relevance score and reranking again using rerank hybrid. However, I think these two functionalities could be combined. </span></div></div><div class=chatlog__header><span class=chatlog__author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:56â€¯AM"><a href=#chatlog__message-container-1422129874591809559>9/29/2025 3:56â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Do you mind opening a feat. request issue with a small snippet of what you&#39;re doing so that we track this for future development?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422130536582746222 class=chatlog__message-container data-message-id=1422130536582746222><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 3:59â€¯AM"><a href=#chatlog__message-container-1422130536582746222>9/29/2025 3:59â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Alright, I&#39;ll add an issue later. However, I&#39;m more focused on another feature right now.ï¼š<a href="https://github.com/lancedb/lancedb/issues/2168">https://github.com/lancedb/lancedb/issues/2168</a> ï¼ŒThis is very important to me.</span></div><div class=chatlog__embed><div class=chatlog__embed-color-pill style=background-color:rgba(30,35,39,255)></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://github.com/lancedb/lancedb/issues/2168><div class="chatlog__markdown chatlog__markdown-preserve">Feature: Support Chinese Language in FTS &#183; Issue #2168 &#183; lancedb/...</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">SDK Python Description Thank you for this excellent vector database! I would like to request support for the Chinese language in Full-text search (Native FTS) or Full-text search (Tantivy-based FTS...</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/r_a1n3PXuY4nwhrg1NhClthxKrDYltiE7ZU9BszB3Ic/https/opengraph.githubassets.com/dc5334f7658a5dd74b11b0e08c9bab4d9754523c997a1e0145e54d34e173f482/lancedb/lancedb/issues/2168> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/r_a1n3PXuY4nwhrg1NhClthxKrDYltiE7ZU9BszB3Ic/https/opengraph.githubassets.com/dc5334f7658a5dd74b11b0e08c9bab4d9754523c997a1e0145e54d34e173f482/lancedb/lancedb/issues/2168 alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422216816440115283 class=chatlog__message-container data-message-id=1422216816440115283><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1258076097518637086/e1cbeccc9514a58846ce38d5c841bd94.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422130536582746222')"> Alright, I&#39;ll add an issue later. However, I&#39;m more focused on another feature right now.ï¼š<a href="https://github.com/lancedb/lancedb/issues/2168">https://github.com/lancedb/lancedb/issues/2168</a> ï¼ŒThis is very important to me. </span></div></div><div class=chatlog__header><span class=chatlog__author title=order_5 data-user-id=1258076097518637086>! Order</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 9:41â€¯AM"><a href=#chatlog__message-container-1422216816440115283>9/29/2025 9:41â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Maybe, I can help you</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422398222629998623 class=chatlog__message-container data-message-id=1422398222629998623><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src="https://cdn.discordapp.com/avatars/1258076097518637086/e1cbeccc9514a58846ce38d5c841bd94.png?size=512" alt=Avatar loading=lazy><div class=chatlog__reply-author title=order_5>! Order</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422216816440115283')"> Maybe, I can help you </span></div></div><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Monday, September 29, 2025 9:42â€¯PM"><a href=#chatlog__message-container-1422398222629998623>9/29/2025 9:42â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Thanks, is it about supporting Chinese in FTS?</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=white_check_mark><img class="chatlog__emoji chatlog__emoji--small" alt=âœ… src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/2705.svg loading=lazy> <span class=chatlog__reaction-count>1</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1422707762713985095 class=chatlog__message-container data-message-id=1422707762713985095><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/1258076097518637086/e1cbeccc9514a58846ce38d5c841bd94.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422398222629998623')"> Thanks, is it about supporting Chinese in FTS? </span></div></div><div class=chatlog__header><span class=chatlog__author title=order_5 data-user-id=1258076097518637086>! Order</span> <span class=chatlog__timestamp title="Tuesday, September 30, 2025 6:12â€¯PM"><a href=#chatlog__message-container-1422707762713985095>9/30/2025 6:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Please send me a DM</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1423673815543713965 class=chatlog__message-container data-message-id=1423673815543713965><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ziyaddll_70972 data-user-id=1295927417415663701>Ziyad P</span> <span class=chatlog__timestamp title="Friday, October 3, 2025 10:11â€¯AM"><a href=#chatlog__message-container-1423673815543713965>10/3/2025 10:11â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>class SaveMail(LanceModel):
    id: str
    from_: Optional[Dict] = None
    to: Optional[List[Dict]] = None
    subject: str
    body: str
    full_text: str = embedder.SourceField()   
    vector: Vector(embedder.ndims()) = embedder.VectorField()
table = db.create_table(&quot;memory&quot;, schema=SaveMail, exist_ok=True)

error :
    TypeError: Converting Pydantic type to Arrow Type: unsupported type typing.Dict.

Does anyone know how to fix this?</span> <span class=chatlog__edited-timestamp title="Friday, October 3, 2025 10:12â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1423688818770448424 class=chatlog__message-container data-message-id=1423688818770448424><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=lei.xu data-user-id=1001739727197700146>lei</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 3, 2025 11:11â€¯AM"> <a href=#chatlog__message-container-1423688818770448424>10/3/2025 11:11â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1425531332796092549 class=chatlog__message-container data-message-id=1425531332796092549><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cheeseburger100_54571 data-user-id=1216387700408455242>cheeseburger100</span> <span class=chatlog__timestamp title="Wednesday, October 8, 2025 1:12â€¯PM"><a href=#chatlog__message-container-1425531332796092549>10/8/2025 1:12â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi python lovers! wanted to share/ invite you all to a virtual event tomorrow with Charlie Marsh, the founder of Astral, the company behind uv and ruff, as well as Batuhan Taskaya, head of eng at fal.ai, a generative media platform for developers. This is the link to RSVP (<a href="https://bvp.zoom.us/webinar/register/WN_GkFIHtpdS2CojdqoKaXuLA#/registration)">https://bvp.zoom.us/webinar/register/WN_GkFIHtpdS2CojdqoKaXuLA#/registration)</a> - event is virtual, this Thursday 10/9 at 1PM ET. should be a great event, hope to see some of you there.</span></div><div class=chatlog__reactions><div class=chatlog__reaction title=ðŸ«¡><img class="chatlog__emoji chatlog__emoji--small" alt=ðŸ«¡ src=https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1fae1.svg loading=lazy> <span class=chatlog__reaction-count>2</span></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1426215231079579718 class=chatlog__message-container data-message-id=1426215231079579718><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/0.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=steve_69517 data-user-id=1298298661163241521>steve</span> <span class=chatlog__timestamp title="Friday, October 10, 2025 10:30â€¯AM"><a href=#chatlog__message-container-1426215231079579718>10/10/2025 10:30â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey folks. I&#39;m trying to complete my understanding of the relationship between <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_scalar_index</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code>. I understand that calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code> updates an existing index after creating/modifying data. A couple questions:

1. If I call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">drop_index</code> then <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_scalar_index</code> then <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code>, does the optimization process run &quot;from scratch&quot;?
2. Asked another way, is there a significant performance difference between calling <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code> on existing indices versus new indices?

We are currently seeing some very long optimization times and after some digging, I noticed that we sometimes drop indices that we don&#39;t need to, re-create them, then call <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">optimize</code>. I&#39;ve scoured the docs but can&#39;t find a definitive answer on whether the optimize process is incremental in nature. Feel free to point me at those docs if they exist.

Appreciate your help.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1426231513179099350 class=chatlog__message-container data-message-id=1426231513179099350><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 10, 2025 11:34â€¯AM"> <a href=#chatlog__message-container-1426231513179099350>10/10/2025 11:34â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1426782334006591590 class=chatlog__message-container data-message-id=1426782334006591590><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/294132518834405376/11448dcfd2915c2b63483adab7d3526d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dark1410_ data-user-id=294132518834405376>Dark</span> <span class=chatlog__timestamp title="Sunday, October 12, 2025 12:03â€¯AM"><a href=#chatlog__message-container-1426782334006591590>10/12/2025 12:03â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi guys, I have an issue when using LanceDB in production that the insert time is taking too long, 5+ mins for a 1-10MB document.
For more context, I&#39;m using LLamaIndex Ingestion Pipeline and has customize the <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">LanceDBVectorStore</code> by rewrite another overload of <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">add</code> function to use <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">self._table.merge_insert</code> instead of normal <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_table.add</code> . About storage, I&#39;m using S3 and it&#39;s now storing around 51.5GB data.

Q1: My current flow is using Temporal to ingest every single document.  I&#39;ve read about compact_files, do I need to include it every time I&#39;m add a new document?
Q2: What else I need to do to improve the insert performance? Note that, I can not perform bulk insert due to the workflow pipeline is for single document only.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1428709816984928317 class=chatlog__message-container data-message-id=1428709816984928317><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/294132518834405376/11448dcfd2915c2b63483adab7d3526d.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dark1410_ data-user-id=294132518834405376>Dark</span> <span class=chatlog__timestamp title="Friday, October 17, 2025 7:42â€¯AM"><a href=#chatlog__message-container-1428709816984928317>10/17/2025 7:42â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi folks, could I ask for example/document of distributed compaction implementation in Python?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1428802289929424951 class=chatlog__message-container data-message-id=1428802289929424951><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 17, 2025 1:50â€¯PM"> <a href=#chatlog__message-container-1428802289929424951>10/17/2025 1:50â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1429449879666688151 class=chatlog__message-container data-message-id=1429449879666688151><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/323832321977352193/55f5f14383f688e31cbb6b634886f25a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=r4bb1t. data-user-id=323832321977352193>R4BB1T</span> <span class=chatlog__timestamp title="Sunday, October 19, 2025 8:43â€¯AM"><a href=#chatlog__message-container-1429449879666688151>10/19/2025 8:43â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>trying to contribute to some python code, is there a requirements.txt or soimething similar to install the python dependencies?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1429805917989240888 class=chatlog__message-container data-message-id=1429805917989240888><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, October 20, 2025 8:18â€¯AM"> <a href=#chatlog__message-container-1429805917989240888>10/20/2025 8:18â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1430791165346578544 class=chatlog__message-container data-message-id=1430791165346578544><div class=chatlog__message><div class=chatlog__message-aside><div class=chatlog__reply-symbol></div><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__reply><img class=chatlog__reply-avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy><div class=chatlog__reply-author title=fiercex4919>fiercex</div><div class=chatlog__reply-content><span class=chatlog__reply-link onclick="scrollToMessage(event,'1422130536582746222')"> Alright, I&#39;ll add an issue later. However, I&#39;m more focused on another feature right now.ï¼š<a href="https://github.com/lancedb/lancedb/issues/2168">https://github.com/lancedb/lancedb/issues/2168</a> ï¼ŒThis is very important to me. </span></div></div><div class=chatlog__header><span class=chatlog__author title=fiercex4919 data-user-id=793313445217959947>fiercex</span> <span class=chatlog__timestamp title="Thursday, October 23, 2025 1:33â€¯AM"><a href=#chatlog__message-container-1430791165346578544>10/23/2025 1:33â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><span class="chatlog__markdown-mention" title="ayushexel">@AyushC</span> Hello, may I ask if you have time to solve this problem? This is very important for Chinese scenarios.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1431226068815315039 class=chatlog__message-container data-message-id=1431226068815315039><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=yah2er0ne data-user-id=963889951810941039>Yang</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, October 24, 2025 6:21â€¯AM"> <a href=#chatlog__message-container-1431226068815315039>10/24/2025 6:21â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1433158791259623454 class=chatlog__message-container data-message-id=1433158791259623454><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/857993157891457045/a65a83017329c5bb0177537f4182a073.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=edkrueger data-user-id=857993157891457045>edkrueger</span> <span class=chatlog__timestamp title="Wednesday, October 29, 2025 2:21â€¯PM"><a href=#chatlog__message-container-1433158791259623454>10/29/2025 2:21â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, is there anyway to use fast_search with LanceVectorQueryBuilder?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1435510742227882047 class=chatlog__message-container data-message-id=1435510742227882047><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/807985747071860756/8b81a7b97e77118ef1ab42ef29b18dee.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=leonardqmarcq data-user-id=807985747071860756>Leonard</span> <span class=chatlog__timestamp title="Wednesday, November 5, 2025 1:07â€¯AM"><a href=#chatlog__message-container-1435510742227882047>11/5/2025 1:07â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>is it safe to call table.create_fts_index concurrently? and how heavy is that operation?

specifically wondering: if multiple calls happen in parallel (e.g. under load), would LanceDB actually try to rebuild the FTS index multiple times in parallel - and could that lead to a bunch of open file handles or <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Too many open files</code> errors?

the reason I ask is that the LlamaIndex LanceDB vector store implementation calls create_fts_index on every query (FTS and hybrid). once concurrency increases, this seems to contribute to hitting the OS file descriptor limit (<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Too many open files</code>):
<ul><li><a href="https://github.com/run-llama/llama_index/blob/fa3ddef14784cd0d77d38965338924eea237ea62/llama-index-integrations/vector_stores/llama-index-vector-stores-lancedb/llama_index/vector_stores/lancedb/base.py#L499">https://github.com/run-llama/llama_index/blob/fa3ddef14784cd0d77d38965338924eea237ea62/llama-index-integrations/vector_stores/llama-index-vector-stores-lancedb/llama_index/vector_stores/lancedb/base.py#L499</a>

llama_index code does this:</li></ul><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">def query(...):
   ...
   # self._fts_index is always None since create_fts_index returns None
   if self._fts_index is None:
      self._fts_index = self.table.create_fts_index(
         self.text_key, replace=True
      )
   ...</code>

since <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">create_fts_index</code> returns nothing, <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_fts_index</code> never gets set, so it keeps recreating the index on every query.
Iâ€™m trying to figure out how problematic that is in practice?</span> <span class=chatlog__edited-timestamp title="Wednesday, November 5, 2025 6:56â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1435558736679800954 class=chatlog__message-container data-message-id=1435558736679800954><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Wednesday, November 5, 2025 4:17â€¯AM"><a href=#chatlog__message-container-1435558736679800954>11/5/2025 4:17â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">ValueError: Invalid table name (&quot;datasets/openbeauty/embeddings/db&quot;): Table names can only contain alphanumeric characters, underscores, hyphens, and periods</code>

i&#39;m trying to place a lance table at a particular path in my S3; what&#39;s the proper way to do this? i dont want to make a new lancedb connection for each such table, i want to share the S3 connection.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1435704695430582302 class=chatlog__message-container data-message-id=1435704695430582302><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=jackye8397 data-user-id=762192026653294603>Jack Ye</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, November 5, 2025 1:57â€¯PM"> <a href=#chatlog__message-container-1435704695430582302>11/5/2025 1:57â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1435705390141673504 class=chatlog__message-container data-message-id=1435705390141673504><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=jackye8397 data-user-id=762192026653294603>Jack Ye</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, November 5, 2025 2:00â€¯PM"> <a href=#chatlog__message-container-1435705390141673504>11/5/2025 2:00â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1436415384961159248 class=chatlog__message-container data-message-id=1436415384961159248><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/847651116863062047/d96bae1412cadeb240121862299f841a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=georgiachanning data-user-id=847651116863062047>georgiachanning</span> <span class=chatlog__timestamp title="Friday, November 7, 2025 1:01â€¯PM"><a href=#chatlog__message-container-1436415384961159248>11/7/2025 1:01â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hey team, wondering if there is more docs (ideally with an example) of generating embeddings and upserting to a previously created table? 

<a href="https://lancedb.com/docs/embedding/">https://lancedb.com/docs/embedding/</a>

All the docs I&#39;ve encountered assume you&#39;re making a new table from scratch</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Complete reference for LanceDB&#39;s embedding API - registry, functions, schemas, and multi-language SDK support.</div></div></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1436428762798493719 class=chatlog__message-container data-message-id=1436428762798493719><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, November 7, 2025 1:55â€¯PM"> <a href=#chatlog__message-container-1436428762798493719>11/7/2025 1:55â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1438567220207812739 class=chatlog__message-container data-message-id=1438567220207812739><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/569691375386492949/bd57241d26dc6bc619408a4891df0f68.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=haocheng001 data-user-id=569691375386492949>Haocheng Liu</span> <span class=chatlog__timestamp title="Thursday, November 13, 2025 11:32â€¯AM"><a href=#chatlog__message-container-1438567220207812739>11/13/2025 11:32â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>.nvm</span> <span class=chatlog__edited-timestamp title="Thursday, November 13, 2025 1:01â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1442860319243239526 class=chatlog__message-container data-message-id=1442860319243239526><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/525748008151941139/93966a505e8aa3bd39c98ffaf1ff59a1.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=saeedq. data-user-id=525748008151941139>Saigon</span> <span class=chatlog__timestamp title="Tuesday, November 25, 2025 7:51â€¯AM"><a href=#chatlog__message-container-1442860319243239526>11/25/2025 7:51â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi,
In the multivector search in the documentation, I don&#39;t see any difference between multivector search and batch search. How does the db inference that it should do multivector search, or batch search. I&#39;m trying to do multivector search, but I don&#39;t know how.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1442922167225548875 class=chatlog__message-container data-message-id=1442922167225548875><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=ayushexel data-user-id=1032079688887189556>AyushC</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, November 25, 2025 11:57â€¯AM"> <a href=#chatlog__message-container-1442922167225548875>11/25/2025 11:57â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1442983351484158074 class=chatlog__message-container data-message-id=1442983351484158074><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/452983476455735299/a7bc2731dcbd4abbd579d918405c2910.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=tonyfrancisv data-user-id=452983476455735299>tony</span> <span class=chatlog__timestamp title="Tuesday, November 25, 2025 4:00â€¯PM"><a href=#chatlog__message-container-1442983351484158074>11/25/2025 4:00â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Running into an issue with the lastest version of lance on an existing dataset. Getting the following stack trace. Dataset&#39;s data storage version is <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">2.0</code>. Any tips on how to resolve this?
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">In [5]: ds.optimize.compact_files(target_rows_per_fragment=10_000)
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
Cell In[5], line 1
----&gt; 1 ds.optimize.compact_files(target_rows_per_fragment=10_000)

File ~/workspace/dream3d/.venv/lib/python3.12/site-packages/lance/dataset.py:4847, in DatasetOptimizer.compact_files(self, target_rows_per_fragment, max_rows_per_group, max_bytes_per_file, materialize_deletions, materialize_deletions_threshold, num_threads, batch_size)
   4782 &quot;&quot;&quot;Compacts small files in the dataset, reducing total number of files.
   4783 
   4784 This does a few things:
   (...)   4836 lance.optimize.Compaction
   4837 &quot;&quot;&quot;
   4838 opts = dict(
   4839     target_rows_per_fragment=target_rows_per_fragment,
   4840     max_rows_per_group=max_rows_per_group,
   (...)   4845     batch_size=batch_size,
   4846 )
-&gt; 4847 return Compaction.execute(self._dataset, opts)

OSError: Invalid user input: Cannot write batch.  The batch was missing the column `ids`, /home/runner/work/lance/lance/rust/lance-file/src/v2/writer.rs:365:35</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1443568083490045952 class=chatlog__message-container data-message-id=1443568083490045952><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/508682252595626015/d010225358b327066c854c6e2fc36982.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=dexters1 data-user-id=508682252595626015>Dexters1</span> <span class=chatlog__timestamp title="Thursday, November 27, 2025 6:44â€¯AM"><a href=#chatlog__message-container-1443568083490045952>11/27/2025 6:44â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>The latest lance<em>namespace version is causing issues with LanceDB in python, LanceDB doesn&#39;t work for us on a fresh install:

&quot;/home/runner/work/cognee/cognee/cognee/infrastructure/databases/vector/lancedb/LanceDBAdapter.py&quot;, line 3, in &lt;module&gt;
    import lancedb
  File &quot;/home/runner/work/cognee/cognee/.venv/lib/python3.11/site-packages/lancedb/<em>_init</em></em>.py&quot;, line 22, in &lt;module&gt;
    from .namespace import connect_namespace, LanceNamespaceDBConnection
  File &quot;/home/runner/work/cognee/cognee/.venv/lib/python3.11/site-packages/lancedb/namespace.py&quot;, line 28, in &lt;module&gt;
    from lance_namespace import LanceNamespace, connect as namespace_connect
ModuleNotFoundError: No module named &#39;lance_namespace&#39;


When we limit the lance_namespace version to a previous version it works fine</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1443664566142636166 class=chatlog__message-container data-message-id=1443664566142636166><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, November 27, 2025 1:07â€¯PM"> <a href=#chatlog__message-container-1443664566142636166>11/27/2025 1:07â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1446139198980620343 class=chatlog__message-container data-message-id=1446139198980620343><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, December 4, 2025 9:00â€¯AM"> <a href=#chatlog__message-container-1446139198980620343>12/4/2025 9:00â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1447506982348128279 class=chatlog__message-container data-message-id=1447506982348128279><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/5.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=sbzkhn_78424 data-user-id=1344676997384765520>SbzKhn</span> <span class=chatlog__timestamp title="Monday, December 8, 2025 3:35â€¯AM"><a href=#chatlog__message-container-1447506982348128279>12/8/2025 3:35â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi, I have this following table and schema
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">schema = pa.schema({
        &quot;id&quot;: pa.int64(),
        &quot;dt&quot;: pa.list_(pa.date32()),
        &quot;data&quot;: pa.list_(pa.float64()),
})

# Sample data already inserted in the table
test_case_3 = {
    &quot;id&quot;: 3,
    &quot;dt&quot;: [date(2023, 1, 1), date(2023, 1, 2), date(2023, 1, 3), date(2023, 1, 4)],
    &quot;data&quot;: [15, 14, 13, 12],
}</code>

How can I query this table to get a value (like 15) for a particular date (like 2023-01-01) for some given id (like 3) or ids
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight"># Example output
{&quot;id&quot;: 3, &quot;dt&quot;: [2023, 1, 1], &quot;data&quot;: [15]}</code>

I tried vector search but it does not seem to work (because I might be using this wrong, but this is the best I could think of)
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">table.search([date(2023, 1, 1),], vector_column_name=&quot;dt&quot;)</code>

Thanks for all the help in advance</span> <span class=chatlog__edited-timestamp title="Monday, December 8, 2025 3:38â€¯AM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1447592283410010248 class=chatlog__message-container data-message-id=1447592283410010248><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wpace data-user-id=278977272734810123>WestonPace</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 8, 2025 9:14â€¯AM"> <a href=#chatlog__message-container-1447592283410010248>12/8/2025 9:14â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1448371639132881008 class=chatlog__message-container data-message-id=1448371639132881008><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jellyfish_sanctuary data-user-id=1406140038466502771>jellyfish_sanctuary</span> <span class=chatlog__timestamp title="Wednesday, December 10, 2025 12:51â€¯PM"><a href=#chatlog__message-container-1448371639132881008>12/10/2025 12:51â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello, I have a lance table that I back fill with new data then run optimize on on a cadence. I see this error from my client when querying that table intermittently
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Table search metrics: {&#39;news&#39;: {&#39;time_seconds&#39;: 116.13053917884827, &#39;status&#39;: &#39;failed&#39;, &#39;error&#39;: &#39;lance error: LanceError(IO): Execution error: Wrapped error: LanceError(IO): Object at location news.lance/_indices/192244f6-b6a3-4944-8a4a-092af2eebd2a/bitmap_page_lookup.lance not found: Error performing GET https://s3.us-east-1.amazonaws.com/my-bucket/news.lance/_indices/192244f6-b6a3-4944-8a4a-092af2eebd2a/bitmap_page_lookup.lance in 6.470761ms - Server returned non-2xx status code: 404 Not Found: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Error&gt;&lt;Code&gt;NoSuchKey&lt;/Code&gt;&lt;Message&gt;The specified key does not exist.&lt;/Message&gt;&lt;Key&gt;news.lance/_indices/192244f6-b6a3-4944-8a4a-092af2eebd2a/</code>

I assume this is because file was updated by optimize but the client still thinks it exists right?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1448380449411043521 class=chatlog__message-container data-message-id=1448380449411043521><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, December 10, 2025 1:26â€¯PM"> <a href=#chatlog__message-container-1448380449411043521>12/10/2025 1:26â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1448748527168520444 class=chatlog__message-container data-message-id=1448748527168520444><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jellyfish_sanctuary data-user-id=1406140038466502771>jellyfish_sanctuary</span> <span class=chatlog__timestamp title="Thursday, December 11, 2025 1:49â€¯PM"><a href=#chatlog__message-container-1448748527168520444>12/11/2025 1:49â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hello I&#39;m running lancedb OSS, when I run <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">await table.optimize(cleanup_older_than=timedelta(days=0))</code> lancedb does not seem to be cleaning up old versions.

this is the output of a little script I wrote to analyze size of my bucket. 
<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">============================================================
STORAGE BY PREFIX (Top 20)
============================================================
Prefix                                   Current         Old Versions    Total          
-------------------------------------------------------------------------------------
table.lance/                      2.53 GB         1.90 TB         1.90 TB        
table.lance/data/                 2.45 GB         1.66 TB         1.66 TB        
table.lance/_indices/             77.44 MB        244.49 GB       244.57 GB      
table.lance/_versions/            5.10 KB         19.32 MB        19.33 MB       
table.lance/_transactions/        1.78 KB         10.59 MB        10.59 MB       
table.lance/_deletions/           0.00 B          1.30 MB         1.30 MB        </code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1449468603740192910 class=chatlog__message-container data-message-id=1449468603740192910><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=jellyfish_sanctuary data-user-id=1406140038466502771>jellyfish_sanctuary</span> <span class=chatlog__timestamp title="Saturday, December 13, 2025 1:30â€¯PM"><a href=#chatlog__message-container-1449468603740192910>12/13/2025 1:30â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Ok so next question, is there an in depth guide to how caching indexes works in lancedb? Like what&#39;s the relationship between <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">prewarm_index</code> and <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">read_consistency_interval</code>?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1449877567397036192 class=chatlog__message-container data-message-id=1449877567397036192><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=luqiu_87609 data-user-id=1209390552148090902>Lu Qiu</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Sunday, December 14, 2025 4:35â€¯PM"> <a href=#chatlog__message-container-1449877567397036192>12/14/2025 4:35â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1450152901468094555 class=chatlog__message-container data-message-id=1450152901468094555><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/307584337329782784/e42959e6022ceca97f82bf9f668aa94a.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=cdellinger data-user-id=307584337329782784>cdellinger</span> <span class=chatlog__timestamp title="Monday, December 15, 2025 10:49â€¯AM"><a href=#chatlog__message-container-1450152901468094555>12/15/2025 10:49â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>When using the python SDK to add data to an existing table, what is the difference between using the &quot;add&quot; method with a mode of &quot;overwrite&quot; to using the merge_insert method?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1450159141032165565 class=chatlog__message-container data-message-id=1450159141032165565><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, December 15, 2025 11:14â€¯AM"> <a href=#chatlog__message-container-1450159141032165565>12/15/2025 11:14â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1453081119321886793 class=chatlog__message-container data-message-id=1453081119321886793><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src=https://cdn.discordapp.com/embed/avatars/1.png alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=kevinwmerritt data-user-id=741347330929983518>kevin</span> <span class=chatlog__timestamp title="Tuesday, December 23, 2025 12:45â€¯PM"><a href=#chatlog__message-container-1453081119321886793>12/23/2025 12:45â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Is there a way to evolve the schema using the pydantic model approach?

Almost like doing a migration? Add a model attribute, grab the schema diff, then <em>apply</em>?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1453098555328692250 class=chatlog__message-container data-message-id=1453098555328692250><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, December 23, 2025 1:54â€¯PM"> <a href=#chatlog__message-container-1453098555328692250>12/23/2025 1:54â€¯PM</a> </span></div></div></div><div id=chatlog__message-container-1457774651047678213 class=chatlog__message-container data-message-id=1457774651047678213><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Monday, January 5, 2026 11:36â€¯AM"> <a href=#chatlog__message-container-1457774651047678213>1/5/2026 11:36â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1460809317371613287 class=chatlog__message-container data-message-id=1460809317371613287><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Tuesday, January 13, 2026 8:34â€¯PM"><a href=#chatlog__message-container-1460809317371613287>1/13/2026 8:34â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>I&#39;m not understanding lancedb&#39;s response:

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-python">query = (
    table_sync.search(
        cast(VEC, embed),
        vector_column_name=&quot;embedding&quot;,
    )
    .distance_type(distance_type=&quot;dot&quot;)
    .select(columns=[&quot;id&quot;, &quot;content&quot;, &quot;embedding&quot;, &quot;_distance&quot;])
    .limit(limit=100)
)
query._fast_search = False
df = query.to_pandas()
df[&quot;similarity&quot;] = 1.0 - df[&quot;_distance&quot;]
print(df)

print(np.linalg.norm(np.array(df[&quot;embedding&quot;].iloc[0])), np.linalg.norm(embed))
print(np.dot(np.array(df[&quot;embedding&quot;].iloc[0]), embed), df[&quot;_distance&quot;].iloc[0])
stored = np.array(df[&quot;embedding&quot;].iloc[0])
print(np.linalg.norm(stored - embed) ** 2)  # L2 squared
print(np.linalg.norm(stored - embed))       # L2</code>

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Query Magnitude: 1.0, Document Magnitude: 0.9999972
Dot Product: 0.6763653
_distance: 0.7457886
L2^2: 0.6472673135715503
L2: 0.8045292</code>

What is _distance?</span> <span class=chatlog__edited-timestamp title="Tuesday, January 13, 2026 8:34â€¯PM">(edited)</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1460824664224829585 class=chatlog__message-container data-message-id=1460824664224829585><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Tuesday, January 13, 2026 9:35â€¯PM"><a href=#chatlog__message-container-1460824664224829585>1/13/2026 9:35â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">    _distance  similarity       dot
0    0.745789    0.254211  0.676365
1    0.747173    0.252827  0.678946
2    0.750866    0.249134  0.680081
3    0.769505    0.230495  0.492005
4    0.769623    0.230377  0.421907
..        ...         ...       ...
95   0.785301    0.214699  0.478189
96   0.785461    0.214539  0.305404
97   0.785480    0.214520  0.281608
98   0.785496    0.214504  0.359785
99   0.785679    0.214321  0.332148</code>

it&#39;s roughly but not exactly dot product. igs i can just recalculate dot product</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1461501343435849854 class=chatlog__message-container data-message-id=1461501343435849854><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Thursday, January 15, 2026 6:24â€¯PM"><a href=#chatlog__message-container-1461501343435849854>1/15/2026 6:24â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">K = 3000

rowids: list[int] = ...

# Get rowids
def get_row_ids(rowids) -&gt; None:
    documents_table.take_row_ids(rowids).select([&quot;_rowid&quot;, &quot;id&quot;, &quot;content&quot;, &quot;embedding&quot;]).to_pandas()
print(await asyncio.to_thread(get_row_ids, rowids[:K]))</code>

I notice that as I modulate K, the runtime is fairly O(K). Namely, 1.7seconds per 1000 rowids. Is there a way to see what the bottleneck is? S3 Throughput / QPS / CPU? It doesn&#39;t seem like its cpu bc on htop the CPUs are basically idle.</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1461523971882352798 class=chatlog__message-container data-message-id=1461523971882352798><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Thursday, January 15, 2026 7:54â€¯PM"> <a href=#chatlog__message-container-1461523971882352798>1/15/2026 7:54â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1461610672545857647 class=chatlog__message-container data-message-id=1461610672545857647><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/296428423490961429/26bfdab6fe2699d4a18cc40b4763b552.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=npip99 data-user-id=296428423490961429>npip99</span> <span class=chatlog__timestamp title="Friday, January 16, 2026 1:38â€¯AM"><a href=#chatlog__message-container-1461610672545857647>1/16/2026 1:38â€¯AM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>am getting an exception,

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">SCHEMA = pa.schema(
    [
        pa.field(&quot;id&quot;, pa.uuid(), False),
        pa.field(&quot;batch_id&quot;, pa.int32(), False),
        pa.field(&quot;query&quot;, pa.string(), False),
        pa.field(&quot;document_ids&quot;, pa.list_(pa.binary(16), len(SELECTED_INDICES)), False),
        pa.field(
            &quot;document_contents&quot;, pa.list_(pa.string(), len(SELECTED_INDICES)), False
        ),
        pa.field(
            &quot;document_scores&quot;, pa.list_(pa.float16(), len(SELECTED_INDICES)), False
        ),
    ]
)

arrow_table = pa.table(
        {
            &quot;id&quot;: pa.array(query_ids, type=pa.binary(16)),
            &quot;batch_id&quot;: pa.array(np.full(len(query_ids), batch_id, dtype=np.int32)),
            &quot;query&quot;: pa.array(queries),
            &quot;document_ids&quot;: pa.FixedSizeListArray.from_arrays(...),
            &quot;document_contents&quot;: pa.FixedSizeListArray.from_arrays(...),
            &quot;document_scores&quot;: pa.FixedSizeListArray.from_arrays(...),
        },
        schema=SCHEMA,
    )

LanceFragment.create(  # pyright: ignore[reportUnknownMemberType]
                    dataset_uri=output_lance.uri,
                    data=arrow_table,
                    schema=output_lance.schema,
                    storage_options=storage_options,
                )</code>

<code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">OSError: Encountered internal error. Please file a bug report at https://github.com/lancedb/lance/issues. Encoding task failed with error: JoinError::Panic(Id(225), &quot;compute_stat should only be called once during DataBlock construction&quot;, ...), /home/runner/work/lance/lance/rust/lance-encoding/src/previous/encodings/logical/primitive.rs:449:31</code></span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1461615467138387984 class=chatlog__message-container data-message-id=1461615467138387984><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author title=npip99 data-user-id=296428423490961429>npip99</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Friday, January 16, 2026 1:58â€¯AM"> <a href=#chatlog__message-container-1461615467138387984>1/16/2026 1:58â€¯AM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1463642755095072853 class=chatlog__message-container data-message-id=1463642755095072853><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/380005148602138636/c1737ba9241b7f993575783ea10e8ed4.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=thrillcoxson data-user-id=380005148602138636>Alex W</span> <span class=chatlog__timestamp title="Wednesday, January 21, 2026 4:13â€¯PM"><a href=#chatlog__message-container-1463642755095072853>1/21/2026 4:13â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi there, the vector index documentation mentions that when doing open source indexing. The indexing process can be sync or async. Is this referring to using just async connection/table vs sync connection/table, or actually the index will be done in the background in a non blocking way after calling table.create_index? Or if i wanted that behavior do I need to spawn a thread or task for the create_index to run on within my app? <a href="https://docs.lancedb.com/indexing/vector-index#option-1:-self-hosted-indexing">https://docs.lancedb.com/indexing/vector-index#option-1:-self-hosted-indexing</a></span> <span class=chatlog__edited-timestamp title="Wednesday, January 21, 2026 4:15â€¯PM">(edited)</span></div><div class=chatlog__embed><div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div><div class=chatlog__embed-content-container><div class=chatlog__embed-content><div class=chatlog__embed-text><div class=chatlog__embed-title><a class=chatlog__embed-title-link href=https://docs.lancedb.com/indexing/vector-index><div class="chatlog__markdown chatlog__markdown-preserve">Vector Indexes - LanceDB</div></a></div><div class=chatlog__embed-description><div class="chatlog__markdown chatlog__markdown-preserve">Build and optimize vector indexes in LanceDB using IVF-PQ, HNSW, and binary indexes.</div></div></div><div class=chatlog__embed-thumbnail-container><a class=chatlog__embed-thumbnail-link href=https://images-ext-1.discordapp.net/external/PV84WNL8QtmMXWpGLVkZEUMIKvA5sUHZZTr5yjHGTrc/%3Furl%3D%252F_mintlify%252Fapi%252Fog%253Fdivision%253DIndexing%2526title%253DVector%252BIndexes%2526description%253DBuild%252Band%252Boptimize%252Bvector%252Bindexes%252Bin%252BLanceDB%252Busing%252BIVF-PQ%25252C%252BHNSW%25252C%252Band%252Bbinary%252Bindexes.%2526logoLight%253Dhttps%25253A%25252F%25252Fmintcdn.com%25252Flancedb-bcbb4faf%25252F0sS6vrpmM3KSVyss%25252Fstatic%25252Fassets%25252Flogo%25252Fdark-lancedb-logo.svg%25253Ffit%25253Dmax%252526auto%25253Dformat%252526n%25253D0sS6vrpmM3KSVyss%252526q%25253D85%252526s%25253Dbae68cabb5a788835db648d20558cfdb%2526logoDark%253Dhttps%25253A%25252F%25252Fmintcdn.com%25252Flancedb-bcbb4faf%25252F0sS6vrpmM3KSVyss%25252Fstatic%25252Fassets%25252Flogo%25252Flight-lancedb-logo.svg%25253Ffit%25253Dmax%252526auto%25253Dformat%252526n%25253D0sS6vrpmM3KSVyss%252526q%25253D85%252526s%25253D9819cafc382d522cc4bf02d8136c3573%2526primaryColor%253D%252523FF6B35%2526lightColor%253D%252523FF8A5C%2526darkColor%253D%252523E55A2B%2526backgroundLight%253D%252523FAF5F0%2526backgroundDark%253D%252523000000%26w%3D1200%26q%3D100/https/lancedb-bcbb4faf.mintlify.app/mintlify-assets/_next/image> <img class=chatlog__embed-thumbnail src=https://images-ext-1.discordapp.net/external/PV84WNL8QtmMXWpGLVkZEUMIKvA5sUHZZTr5yjHGTrc/%3Furl%3D%252F_mintlify%252Fapi%252Fog%253Fdivision%253DIndexing%2526title%253DVector%252BIndexes%2526description%253DBuild%252Band%252Boptimize%252Bvector%252Bindexes%252Bin%252BLanceDB%252Busing%252BIVF-PQ%25252C%252BHNSW%25252C%252Band%252Bbinary%252Bindexes.%2526logoLight%253Dhttps%25253A%25252F%25252Fmintcdn.com%25252Flancedb-bcbb4faf%25252F0sS6vrpmM3KSVyss%25252Fstatic%25252Fassets%25252Flogo%25252Fdark-lancedb-logo.svg%25253Ffit%25253Dmax%252526auto%25253Dformat%252526n%25253D0sS6vrpmM3KSVyss%252526q%25253D85%252526s%25253Dbae68cabb5a788835db648d20558cfdb%2526logoDark%253Dhttps%25253A%25252F%25252Fmintcdn.com%25252Flancedb-bcbb4faf%25252F0sS6vrpmM3KSVyss%25252Fstatic%25252Fassets%25252Flogo%25252Flight-lancedb-logo.svg%25253Ffit%25253Dmax%252526auto%25253Dformat%252526n%25253D0sS6vrpmM3KSVyss%252526q%25253D85%252526s%25253D9819cafc382d522cc4bf02d8136c3573%2526primaryColor%253D%252523FF6B35%2526lightColor%253D%252523FF8A5C%2526darkColor%253D%252523E55A2B%2526backgroundLight%253D%252523FAF5F0%2526backgroundDark%253D%252523000000%26w%3D1200%26q%3D100/https/lancedb-bcbb4faf.mintlify.app/mintlify-assets/_next/image alt=Thumbnail loading=lazy> </a></div></div></div></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1463651266956628205 class=chatlog__message-container data-message-id=1463651266956628205><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=prrao data-user-id=675128789646442557>prashanth</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Wednesday, January 21, 2026 4:47â€¯PM"> <a href=#chatlog__message-container-1463651266956628205>1/21/2026 4:47â€¯PM</a> </span></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1465520845538721853 class=chatlog__message-container data-message-id=1465520845538721853><div class=chatlog__message><div class=chatlog__message-aside><img class=chatlog__avatar src="https://cdn.discordapp.com/avatars/108005918565761024/cb19251994b6abfb3280ed83ad8b5c88.png?size=512" alt=Avatar loading=lazy></div><div class=chatlog__message-primary><div class=chatlog__header><span class=chatlog__author title=ryan.clancy data-user-id=108005918565761024>ryan.clancy</span> <span class=chatlog__timestamp title="Monday, January 26, 2026 8:36â€¯PM"><a href=#chatlog__message-container-1465520845538721853>1/26/2026 8:36â€¯PM</a></span></div><div class="chatlog__content chatlog__markdown"><span class=chatlog__markdown-preserve>Hi folks, it looks like the latest release on PyPi (<a href="https://pypi.org/project/lancedb/0.27.1/#files)">https://pypi.org/project/lancedb/0.27.1/#files)</a> only has macOS wheels. Are the Linux wheels in the process of being produced?</span></div></div></div></div></div>
<div class=chatlog__message-group><div id=chatlog__message-container-1465765641817686204 class=chatlog__message-container data-message-id=1465765641817686204><div class=chatlog__message><div class=chatlog__message-aside><svg class=chatlog__system-notification-icon><use href=#thread-icon></use></svg></div><div class=chatlog__message-primary><span class=chatlog__system-notification-author style=color:rgb(230,126,34) title=wjones127 data-user-id=1107704233685434519>Will Jones</span> <span> </span> <span class=chatlog__system-notification-content> <span>started a thread.</span> </span> <span class=chatlog__system-notification-timestamp title="Tuesday, January 27, 2026 12:49â€¯PM"> <a href=#chatlog__message-container-1465765641817686204>1/27/2026 12:49â€¯PM</a> </span></div></div></div></div>

</div>
<div class=postamble><div class=postamble__entry>Exported 1,032 message(s)</div><div class=postamble__entry>Timezone: UTC-5</div></div>
